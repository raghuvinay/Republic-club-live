(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var sh={exports:{}},Zo={},ih={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function a_(){if(Lm)return Ce;Lm=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function H(O,Q,me){this.props=O,this.context=Q,this.refs=q,this.updater=me||P}H.prototype.isReactComponent={},H.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},H.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function J(){}J.prototype=H.prototype;function Z(O,Q,me){this.props=O,this.context=Q,this.refs=q,this.updater=me||P}var re=Z.prototype=new J;re.constructor=Z,U(re,H.prototype),re.isPureReactComponent=!0;var ce=Array.isArray,Ve=Object.prototype.hasOwnProperty,z={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(O,Q,me){var Ae,xe={},je=null,Ue=null;if(Q!=null)for(Ae in Q.ref!==void 0&&(Ue=Q.ref),Q.key!==void 0&&(je=""+Q.key),Q)Ve.call(Q,Ae)&&!k.hasOwnProperty(Ae)&&(xe[Ae]=Q[Ae]);var ze=arguments.length-2;if(ze===1)xe.children=me;else if(1<ze){for(var qe=Array(ze),wt=0;wt<ze;wt++)qe[wt]=arguments[wt+2];xe.children=qe}if(O&&O.defaultProps)for(Ae in ze=O.defaultProps,ze)xe[Ae]===void 0&&(xe[Ae]=ze[Ae]);return{$$typeof:s,type:O,key:je,ref:Ue,props:xe,_owner:z.current}}function R(O,Q){return{$$typeof:s,type:O.type,key:Q,ref:O.ref,props:O.props,_owner:O._owner}}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function A(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(me){return Q[me]})}var V=/\/+/g;function I(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?A(""+O.key):Q.toString(36)}function _e(O,Q,me,Ae,xe){var je=typeof O;(je==="undefined"||je==="boolean")&&(O=null);var Ue=!1;if(O===null)Ue=!0;else switch(je){case"string":case"number":Ue=!0;break;case"object":switch(O.$$typeof){case s:case e:Ue=!0}}if(Ue)return Ue=O,xe=xe(Ue),O=Ae===""?"."+I(Ue,0):Ae,ce(xe)?(me="",O!=null&&(me=O.replace(V,"$&/")+"/"),_e(xe,Q,me,"",function(wt){return wt})):xe!=null&&(D(xe)&&(xe=R(xe,me+(!xe.key||Ue&&Ue.key===xe.key?"":(""+xe.key).replace(V,"$&/")+"/")+O)),Q.push(xe)),1;if(Ue=0,Ae=Ae===""?".":Ae+":",ce(O))for(var ze=0;ze<O.length;ze++){je=O[ze];var qe=Ae+I(je,ze);Ue+=_e(je,Q,me,qe,xe)}else if(qe=T(O),typeof qe=="function")for(O=qe.call(O),ze=0;!(je=O.next()).done;)je=je.value,qe=Ae+I(je,ze++),Ue+=_e(je,Q,me,qe,xe);else if(je==="object")throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Ue}function Pe(O,Q,me){if(O==null)return O;var Ae=[],xe=0;return _e(O,Ae,"","",function(je){return Q.call(me,je,xe++)}),Ae}function De(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(me){(O._status===0||O._status===-1)&&(O._status=1,O._result=me)},function(me){(O._status===0||O._status===-1)&&(O._status=2,O._result=me)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var Ie={current:null},te={transition:null},fe={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:te,ReactCurrentOwner:z};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Pe,forEach:function(O,Q,me){Pe(O,function(){Q.apply(this,arguments)},me)},count:function(O){var Q=0;return Pe(O,function(){Q++}),Q},toArray:function(O){return Pe(O,function(Q){return Q})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ce.Component=H,Ce.Fragment=n,Ce.Profiler=a,Ce.PureComponent=Z,Ce.StrictMode=i,Ce.Suspense=v,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ce.act=se,Ce.cloneElement=function(O,Q,me){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Ae=U({},O.props),xe=O.key,je=O.ref,Ue=O._owner;if(Q!=null){if(Q.ref!==void 0&&(je=Q.ref,Ue=z.current),Q.key!==void 0&&(xe=""+Q.key),O.type&&O.type.defaultProps)var ze=O.type.defaultProps;for(qe in Q)Ve.call(Q,qe)&&!k.hasOwnProperty(qe)&&(Ae[qe]=Q[qe]===void 0&&ze!==void 0?ze[qe]:Q[qe])}var qe=arguments.length-2;if(qe===1)Ae.children=me;else if(1<qe){ze=Array(qe);for(var wt=0;wt<qe;wt++)ze[wt]=arguments[wt+2];Ae.children=ze}return{$$typeof:s,type:O.type,key:xe,ref:je,props:Ae,_owner:Ue}},Ce.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:c,_context:O},O.Consumer=O},Ce.createElement=S,Ce.createFactory=function(O){var Q=S.bind(null,O);return Q.type=O,Q},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(O){return{$$typeof:g,render:O}},Ce.isValidElement=D,Ce.lazy=function(O){return{$$typeof:N,_payload:{_status:-1,_result:O},_init:De}},Ce.memo=function(O,Q){return{$$typeof:w,type:O,compare:Q===void 0?null:Q}},Ce.startTransition=function(O){var Q=te.transition;te.transition={};try{O()}finally{te.transition=Q}},Ce.unstable_act=se,Ce.useCallback=function(O,Q){return Ie.current.useCallback(O,Q)},Ce.useContext=function(O){return Ie.current.useContext(O)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(O){return Ie.current.useDeferredValue(O)},Ce.useEffect=function(O,Q){return Ie.current.useEffect(O,Q)},Ce.useId=function(){return Ie.current.useId()},Ce.useImperativeHandle=function(O,Q,me){return Ie.current.useImperativeHandle(O,Q,me)},Ce.useInsertionEffect=function(O,Q){return Ie.current.useInsertionEffect(O,Q)},Ce.useLayoutEffect=function(O,Q){return Ie.current.useLayoutEffect(O,Q)},Ce.useMemo=function(O,Q){return Ie.current.useMemo(O,Q)},Ce.useReducer=function(O,Q,me){return Ie.current.useReducer(O,Q,me)},Ce.useRef=function(O){return Ie.current.useRef(O)},Ce.useState=function(O){return Ie.current.useState(O)},Ce.useSyncExternalStore=function(O,Q,me){return Ie.current.useSyncExternalStore(O,Q,me)},Ce.useTransition=function(){return Ie.current.useTransition()},Ce.version="18.3.1",Ce}var Fm;function zh(){return Fm||(Fm=1,ih.exports=a_()),ih.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function l_(){if(bm)return Zo;bm=1;var s=zh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(g,v,w){var N,x={},T=null,P=null;w!==void 0&&(T=""+w),v.key!==void 0&&(T=""+v.key),v.ref!==void 0&&(P=v.ref);for(N in v)i.call(v,N)&&!c.hasOwnProperty(N)&&(x[N]=v[N]);if(g&&g.defaultProps)for(N in v=g.defaultProps,v)x[N]===void 0&&(x[N]=v[N]);return{$$typeof:e,type:g,key:T,ref:P,props:x,_owner:a.current}}return Zo.Fragment=n,Zo.jsx=d,Zo.jsxs=d,Zo}var Um;function u_(){return Um||(Um=1,sh.exports=l_()),sh.exports}var p=u_(),ve=zh(),zl={},oh={exports:{}},Yt={},ah={exports:{}},lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function c_(){return zm||(zm=1,(function(s){function e(te,fe){var se=te.length;te.push(fe);e:for(;0<se;){var O=se-1>>>1,Q=te[O];if(0<a(Q,fe))te[O]=fe,te[se]=Q,se=O;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var fe=te[0],se=te.pop();if(se!==fe){te[0]=se;e:for(var O=0,Q=te.length,me=Q>>>1;O<me;){var Ae=2*(O+1)-1,xe=te[Ae],je=Ae+1,Ue=te[je];if(0>a(xe,se))je<Q&&0>a(Ue,xe)?(te[O]=Ue,te[je]=se,O=je):(te[O]=xe,te[Ae]=se,O=Ae);else if(je<Q&&0>a(Ue,se))te[O]=Ue,te[je]=se,O=je;else break e}}return fe}function a(te,fe){var se=te.sortIndex-fe.sortIndex;return se!==0?se:te.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var v=[],w=[],N=1,x=null,T=3,P=!1,U=!1,q=!1,H=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(te){for(var fe=n(w);fe!==null;){if(fe.callback===null)i(w);else if(fe.startTime<=te)i(w),fe.sortIndex=fe.expirationTime,e(v,fe);else break;fe=n(w)}}function ce(te){if(q=!1,re(te),!U)if(n(v)!==null)U=!0,De(Ve);else{var fe=n(w);fe!==null&&Ie(ce,fe.startTime-te)}}function Ve(te,fe){U=!1,q&&(q=!1,J(S),S=-1),P=!0;var se=T;try{for(re(fe),x=n(v);x!==null&&(!(x.expirationTime>fe)||te&&!A());){var O=x.callback;if(typeof O=="function"){x.callback=null,T=x.priorityLevel;var Q=O(x.expirationTime<=fe);fe=s.unstable_now(),typeof Q=="function"?x.callback=Q:x===n(v)&&i(v),re(fe)}else i(v);x=n(v)}if(x!==null)var me=!0;else{var Ae=n(w);Ae!==null&&Ie(ce,Ae.startTime-fe),me=!1}return me}finally{x=null,T=se,P=!1}}var z=!1,k=null,S=-1,R=5,D=-1;function A(){return!(s.unstable_now()-D<R)}function V(){if(k!==null){var te=s.unstable_now();D=te;var fe=!0;try{fe=k(!0,te)}finally{fe?I():(z=!1,k=null)}}else z=!1}var I;if(typeof Z=="function")I=function(){Z(V)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Pe=_e.port2;_e.port1.onmessage=V,I=function(){Pe.postMessage(null)}}else I=function(){H(V,0)};function De(te){k=te,z||(z=!0,I())}function Ie(te,fe){S=H(function(){te(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_continueExecution=function(){U||P||(U=!0,De(Ve))},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_getFirstCallbackNode=function(){return n(v)},s.unstable_next=function(te){switch(T){case 1:case 2:case 3:var fe=3;break;default:fe=T}var se=T;T=fe;try{return te()}finally{T=se}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var se=T;T=te;try{return fe()}finally{T=se}},s.unstable_scheduleCallback=function(te,fe,se){var O=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?O+se:O):se=O,te){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=se+Q,te={id:N++,callback:fe,priorityLevel:te,startTime:se,expirationTime:Q,sortIndex:-1},se>O?(te.sortIndex=se,e(w,te),n(v)===null&&te===n(w)&&(q?(J(S),S=-1):q=!0,Ie(ce,se-O))):(te.sortIndex=Q,e(v,te),U||P||(U=!0,De(Ve))),te},s.unstable_shouldYield=A,s.unstable_wrapCallback=function(te){var fe=T;return function(){var se=T;T=fe;try{return te.apply(this,arguments)}finally{T=se}}}})(lh)),lh}var Bm;function h_(){return Bm||(Bm=1,ah.exports=c_()),ah.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m;function d_(){if($m)return Yt;$m=1;var s=zh(),e=h_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function c(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(a[t]=r,t=0;t<r.length;t++)i.add(r[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N={},x={};function T(t){return v.call(x,t)?!0:v.call(N,t)?!1:w.test(t)?x[t]=!0:(N[t]=!0,!1)}function P(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U(t,r,o,u){if(r===null||typeof r>"u"||P(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function q(t,r,o,u,h,m,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=m,this.removeEmptyString=_}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){H[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];H[r]=new q(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){H[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){H[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){H[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){H[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){H[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){H[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){H[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function Z(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(J,Z);H[r]=new q(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(J,Z);H[r]=new q(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(J,Z);H[r]=new q(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){H[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),H.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){H[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function re(t,r,o,u){var h=H.hasOwnProperty(r)?H[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(U(r,o,h,u)&&(o=null),u||h===null?T(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var ce=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ve=Symbol.for("react.element"),z=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),A=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),te=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=te&&t[te]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,O;function Q(t){if(O===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||""}return`
`+O+t}var me=!1;function Ae(t,r){if(!t||me)return"";me=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(B){var u=B}Reflect.construct(t,[],r)}else{try{r.call()}catch(B){u=B}t.call(r.prototype)}else{try{throw Error()}catch(B){u=B}t()}}catch(B){if(B&&u&&typeof B.stack=="string"){for(var h=B.stack.split(`
`),m=u.stack.split(`
`),_=h.length-1,C=m.length-1;1<=_&&0<=C&&h[_]!==m[C];)C--;for(;1<=_&&0<=C;_--,C--)if(h[_]!==m[C]){if(_!==1||C!==1)do if(_--,C--,0>C||h[_]!==m[C]){var j=`
`+h[_].replace(" at new "," at ");return t.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",t.displayName)),j}while(1<=_&&0<=C);break}}}finally{me=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?Q(t):""}function xe(t){switch(t.tag){case 5:return Q(t.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return t=Ae(t.type,!1),t;case 11:return t=Ae(t.type.render,!1),t;case 1:return t=Ae(t.type,!0),t;default:return""}}function je(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case z:return"Portal";case R:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case _e:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case D:return(t._context.displayName||"Context")+".Provider";case V:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pe:return r=t.displayName||null,r!==null?r:je(t.type)||"Memo";case De:r=t._payload,t=t._init;try{return je(t(r))}catch{}}return null}function Ue(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ze(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qe(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wt(t){var r=qe(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,m.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function nr(t){t._valueTracker||(t._valueTracker=wt(t))}function Ks(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=qe(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Ir(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ds(t,r){var o=r.checked;return se({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Xs(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=ze(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function so(t,r){r=r.checked,r!=null&&re(t,"checked",r,!1)}function io(t,r){so(t,r);var o=ze(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Ys(t,r.type,o):r.hasOwnProperty("defaultValue")&&Ys(t,r.type,ze(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Na(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Ys(t,r,o){(r!=="number"||Ir(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var rr=Array.isArray;function sr(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+ze(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function oo(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return se({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Js(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(rr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:ze(o)}}function Zs(t,r){var o=ze(r.value),u=ze(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function ao(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function mt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?mt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ir,lo=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ir.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Ar(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ms=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){ms.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),fs[r]=fs[t]})});function uo(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||fs.hasOwnProperty(t)&&fs[t]?(""+r).trim():r+"px"}function co(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=uo(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var ho=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fo(t,r){if(r){if(ho[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function mo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function ei(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ti=null,un=null,Fn=null;function ni(t){if(t=Fo(t)){if(typeof ti!="function")throw Error(n(280));var r=t.stateNode;r&&(r=nl(r),ti(t.stateNode,t.type,r))}}function bn(t){un?Fn?Fn.push(t):Fn=[t]:un=t}function po(){if(un){var t=un,r=Fn;if(Fn=un=null,ni(t),r)for(t=0;t<r.length;t++)ni(r[t])}}function gs(t,r){return t(r)}function go(){}var or=!1;function yo(t,r,o){if(or)return t(r,o);or=!0;try{return gs(t,r,o)}finally{or=!1,(un!==null||Fn!==null)&&(go(),po())}}function it(t,r){var o=t.stateNode;if(o===null)return null;var u=nl(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var ri=!1;if(g)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){ri=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{ri=!1}function ys(t,r,o,u,h,m,_,C,j){var B=Array.prototype.slice.call(arguments,3);try{r.apply(o,B)}catch(X){this.onError(X)}}var vs=!1,si=null,Sn=!1,vo=null,Vu={onError:function(t){vs=!0,si=t}};function ii(t,r,o,u,h,m,_,C,j){vs=!1,si=null,ys.apply(Vu,arguments)}function xa(t,r,o,u,h,m,_,C,j){if(ii.apply(this,arguments),vs){if(vs){var B=si;vs=!1,si=null}else throw Error(n(198));Sn||(Sn=!0,vo=B)}}function In(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function _s(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function An(t){if(In(t)!==t)throw Error(n(188))}function Ca(t){var r=t.alternate;if(!r){if(r=In(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return An(h),t;if(m===u)return An(h),r;m=m.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=m;else{for(var _=!1,C=h.child;C;){if(C===o){_=!0,o=h,u=m;break}if(C===u){_=!0,u=h,o=m;break}C=C.sibling}if(!_){for(C=m.child;C;){if(C===o){_=!0,o=m,u=h;break}if(C===u){_=!0,u=m,o=h;break}C=C.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function _o(t){return t=Ca(t),t!==null?oi(t):null}function oi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=oi(t);if(r!==null)return r;t=t.sibling}return null}var ai=e.unstable_scheduleCallback,wo=e.unstable_cancelCallback,Pa=e.unstable_shouldYield,Du=e.unstable_requestPaint,We=e.unstable_now,Ra=e.unstable_getCurrentPriorityLevel,ws=e.unstable_ImmediatePriority,Nr=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,Eo=e.unstable_LowPriority,ka=e.unstable_IdlePriority,Es=null,en=null;function Va(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Es,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:ja,To=Math.log,Da=Math.LN2;function ja(t){return t>>>=0,t===0?32:31-(To(t)/Da|0)|0}var li=64,ui=4194304;function xr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ts(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,m=t.pingedLanes,_=o&268435455;if(_!==0){var C=_&~h;C!==0?u=xr(C):(m&=_,m!==0&&(u=xr(m)))}else _=o&~h,_!==0?u=xr(_):m!==0&&(u=xr(m));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,m=r&-r,h>=m||h===16&&(m&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Ut(r),h=1<<o,u|=t[o],r&=~h;return u}function ju(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes;0<m;){var _=31-Ut(m),C=1<<_,j=h[_];j===-1?((C&o)===0||(C&u)!==0)&&(h[_]=ju(C,r)):j<=r&&(t.expiredLanes|=C),m&=~C}}function tn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ss(){var t=li;return li<<=1,(li&4194240)===0&&(li=64),t}function Cr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Pr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ut(r),t[r]=o}function He(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Ut(o),m=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~m}}function Rr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Ut(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var ke=0;function kr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ma,ci,Oa,La,Fa,So=!1,Un=[],Nt=null,Nn=null,xn=null,Vr=new Map,hn=new Map,zn=[],Mu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ba(t,r){switch(t){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":Vr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(r.pointerId)}}function Ht(t,r,o,u,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},r!==null&&(r=Fo(r),r!==null&&ci(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Ou(t,r,o,u,h){switch(r){case"focusin":return Nt=Ht(Nt,t,r,o,u,h),!0;case"dragenter":return Nn=Ht(Nn,t,r,o,u,h),!0;case"mouseover":return xn=Ht(xn,t,r,o,u,h),!0;case"pointerover":var m=h.pointerId;return Vr.set(m,Ht(Vr.get(m)||null,t,r,o,u,h)),!0;case"gotpointercapture":return m=h.pointerId,hn.set(m,Ht(hn.get(m)||null,t,r,o,u,h)),!0}return!1}function Ua(t){var r=Cs(t.target);if(r!==null){var o=In(r);if(o!==null){if(r=o.tag,r===13){if(r=_s(o),r!==null){t.blockedOn=r,Fa(t.priority,function(){Oa(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=hi(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);ps=u,o.target.dispatchEvent(u),ps=null}else return r=Fo(o),r!==null&&ci(r),t.blockedOn=o,!1;r.shift()}return!0}function Is(t,r,o){lr(t)&&o.delete(r)}function za(){So=!1,Nt!==null&&lr(Nt)&&(Nt=null),Nn!==null&&lr(Nn)&&(Nn=null),xn!==null&&lr(xn)&&(xn=null),Vr.forEach(Is),hn.forEach(Is)}function Cn(t,r){t.blockedOn===r&&(t.blockedOn=null,So||(So=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,za)))}function Pn(t){function r(h){return Cn(h,t)}if(0<Un.length){Cn(Un[0],t);for(var o=1;o<Un.length;o++){var u=Un[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Nt!==null&&Cn(Nt,t),Nn!==null&&Cn(Nn,t),xn!==null&&Cn(xn,t),Vr.forEach(r),hn.forEach(r),o=0;o<zn.length;o++)u=zn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<zn.length&&(o=zn[0],o.blockedOn===null);)Ua(o),o.blockedOn===null&&zn.shift()}var ur=ce.ReactCurrentBatchConfig,Dr=!0;function Je(t,r,o,u){var h=ke,m=ur.transition;ur.transition=null;try{ke=1,Io(t,r,o,u)}finally{ke=h,ur.transition=m}}function Lu(t,r,o,u){var h=ke,m=ur.transition;ur.transition=null;try{ke=4,Io(t,r,o,u)}finally{ke=h,ur.transition=m}}function Io(t,r,o,u){if(Dr){var h=hi(t,r,o,u);if(h===null)Qu(t,r,u,As,o),ba(t,u);else if(Ou(h,t,r,o,u))u.stopPropagation();else if(ba(t,u),r&4&&-1<Mu.indexOf(t)){for(;h!==null;){var m=Fo(h);if(m!==null&&Ma(m),m=hi(t,r,o,u),m===null&&Qu(t,r,u,As,o),m===h)break;h=m}h!==null&&u.stopPropagation()}else Qu(t,r,u,null,o)}}var As=null;function hi(t,r,o,u){if(As=null,t=ei(u),t=Cs(t),t!==null)if(r=In(t),r===null)t=null;else if(o=r.tag,o===13){if(t=_s(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return As=t,null}function Ao(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ra()){case ws:return 1;case Nr:return 4;case cn:case Eo:return 16;case ka:return 536870912;default:return 16}default:return 16}}var nn=null,di=null,qt=null;function No(){if(qt)return qt;var t,r=di,o=r.length,u,h="value"in nn?nn.value:nn.textContent,m=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[m-u];u++);return qt=h.slice(t,1<u?1-u:void 0)}function fi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Bn(){return!0}function xo(){return!1}function xt(t){function r(o,u,h,m,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(o=t[C],this[C]=o?o(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Bn:xo,this.isPropagationStopped=xo,this}return se(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){},isPersistent:Bn}),r}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=xt(Rn),$n=se({},Rn,{view:0,detail:0}),Fu=xt($n),pi,cr,jr,Ns=se({},$n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jr&&(jr&&t.type==="mousemove"?(pi=t.screenX-jr.screenX,cr=t.screenY-jr.screenY):cr=pi=0,jr=t),pi)},movementY:function(t){return"movementY"in t?t.movementY:cr}}),gi=xt(Ns),Co=se({},Ns,{dataTransfer:0}),Ba=xt(Co),yi=se({},$n,{relatedTarget:0}),vi=xt(yi),$a=se({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),hr=xt($a),Ha=se({},Rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qa=xt(Ha),Wa=se({},Rn,{data:0}),Po=xt(Wa),_i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ga={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qa(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ga[t])?!!r[t]:!1}function Hn(){return Qa}var l=se({},$n,{key:function(t){if(t.key){var r=_i[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=fi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(t){return t.type==="keypress"?fi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f=xt(l),y=se({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=xt(y),L=se({},$n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn}),$=xt(L),ne=se({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$e=xt(ne),gt=se({},Ns,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=xt(gt),Et=[9,13,27,32],ut=g&&"CompositionEvent"in window,dn=null;g&&"documentMode"in document&&(dn=document.documentMode);var rn=g&&"TextEvent"in window&&!dn,xs=g&&(!ut||dn&&8<dn&&11>=dn),wi=" ",Rd=!1;function kd(t,r){switch(t){case"keyup":return Et.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function sv(t,r){switch(t){case"compositionend":return Vd(r);case"keypress":return r.which!==32?null:(Rd=!0,wi);case"textInput":return t=r.data,t===wi&&Rd?null:t;default:return null}}function iv(t,r){if(Ei)return t==="compositionend"||!ut&&kd(t,r)?(t=No(),qt=di=nn=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return xs&&r.locale!=="ko"?null:r.data;default:return null}}var ov={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ov[t.type]:r==="textarea"}function jd(t,r,o,u){bn(u),r=Za(r,"onChange"),0<r.length&&(o=new mi("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Ro=null,ko=null;function av(t){Jd(t,0)}function Ka(t){var r=Ni(t);if(Ks(r))return t}function lv(t,r){if(t==="change")return r}var Md=!1;if(g){var bu;if(g){var Uu="oninput"in document;if(!Uu){var Od=document.createElement("div");Od.setAttribute("oninput","return;"),Uu=typeof Od.oninput=="function"}bu=Uu}else bu=!1;Md=bu&&(!document.documentMode||9<document.documentMode)}function Ld(){Ro&&(Ro.detachEvent("onpropertychange",Fd),ko=Ro=null)}function Fd(t){if(t.propertyName==="value"&&Ka(ko)){var r=[];jd(r,ko,t,ei(t)),yo(av,r)}}function uv(t,r,o){t==="focusin"?(Ld(),Ro=r,ko=o,Ro.attachEvent("onpropertychange",Fd)):t==="focusout"&&Ld()}function cv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ka(ko)}function hv(t,r){if(t==="click")return Ka(r)}function dv(t,r){if(t==="input"||t==="change")return Ka(r)}function fv(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var kn=typeof Object.is=="function"?Object.is:fv;function Vo(t,r){if(kn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!v.call(r,h)||!kn(t[h],r[h]))return!1}return!0}function bd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ud(t,r){var o=bd(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=bd(o)}}function zd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?zd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Bd(){for(var t=window,r=Ir();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Ir(t.document)}return r}function zu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function mv(t){var r=Bd(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&zd(o.ownerDocument.documentElement,o)){if(u!==null&&zu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,m=Math.min(u.start,h);u=u.end===void 0?m:Math.min(u.end,h),!t.extend&&m>u&&(h=u,u=m,m=h),h=Ud(o,m);var _=Ud(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),m>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pv=g&&"documentMode"in document&&11>=document.documentMode,Ti=null,Bu=null,Do=null,$u=!1;function $d(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$u||Ti==null||Ti!==Ir(u)||(u=Ti,"selectionStart"in u&&zu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Do&&Vo(Do,u)||(Do=u,u=Za(Bu,"onSelect"),0<u.length&&(r=new mi("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=Ti)))}function Xa(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Si={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionend:Xa("Transition","TransitionEnd")},Hu={},Hd={};g&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function Ya(t){if(Hu[t])return Hu[t];if(!Si[t])return t;var r=Si[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Hd)return Hu[t]=r[o];return t}var qd=Ya("animationend"),Wd=Ya("animationiteration"),Gd=Ya("animationstart"),Qd=Ya("transitionend"),Kd=new Map,Xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,r){Kd.set(t,r),c(r,[t])}for(var qu=0;qu<Xd.length;qu++){var Wu=Xd[qu],gv=Wu.toLowerCase(),yv=Wu[0].toUpperCase()+Wu.slice(1);Mr(gv,"on"+yv)}Mr(qd,"onAnimationEnd"),Mr(Wd,"onAnimationIteration"),Mr(Gd,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Qd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function Yd(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,xa(u,r,void 0,t),t.currentTarget=null}function Jd(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var _=u.length-1;0<=_;_--){var C=u[_],j=C.instance,B=C.currentTarget;if(C=C.listener,j!==m&&h.isPropagationStopped())break e;Yd(h,C,B),m=j}else for(_=0;_<u.length;_++){if(C=u[_],j=C.instance,B=C.currentTarget,C=C.listener,j!==m&&h.isPropagationStopped())break e;Yd(h,C,B),m=j}}}if(Sn)throw t=vo,Sn=!1,vo=null,t}function Ke(t,r){var o=r[ec];o===void 0&&(o=r[ec]=new Set);var u=t+"__bubble";o.has(u)||(Zd(r,t,2,!1),o.add(u))}function Gu(t,r,o){var u=0;r&&(u|=4),Zd(o,t,u,r)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[Ja]){t[Ja]=!0,i.forEach(function(o){o!=="selectionchange"&&(vv.has(o)||Gu(o,!1,t),Gu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ja]||(r[Ja]=!0,Gu("selectionchange",!1,r))}}function Zd(t,r,o,u){switch(Ao(r)){case 1:var h=Je;break;case 4:h=Lu;break;default:h=Io}o=h.bind(null,r,o,t),h=void 0,!ri||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Qu(t,r,o,u,h){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var C=u.stateNode.containerInfo;if(C===h||C.nodeType===8&&C.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var j=_.tag;if((j===3||j===4)&&(j=_.stateNode.containerInfo,j===h||j.nodeType===8&&j.parentNode===h))return;_=_.return}for(;C!==null;){if(_=Cs(C),_===null)return;if(j=_.tag,j===5||j===6){u=m=_;continue e}C=C.parentNode}}u=u.return}yo(function(){var B=m,X=ei(o),Y=[];e:{var K=Kd.get(t);if(K!==void 0){var oe=mi,ue=t;switch(t){case"keypress":if(fi(o)===0)break e;case"keydown":case"keyup":oe=f;break;case"focusin":ue="focus",oe=vi;break;case"focusout":ue="blur",oe=vi;break;case"beforeblur":case"afterblur":oe=vi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=$;break;case qd:case Wd:case Gd:oe=hr;break;case Qd:oe=$e;break;case"scroll":oe=Fu;break;case"wheel":oe=Me;break;case"copy":case"cut":case"paste":oe=qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=E}var he=(r&4)!==0,ot=!he&&t==="scroll",F=he?K!==null?K+"Capture":null:K;he=[];for(var M=B,b;M!==null;){b=M;var ee=b.stateNode;if(b.tag===5&&ee!==null&&(b=ee,F!==null&&(ee=it(M,F),ee!=null&&he.push(Oo(M,ee,b)))),ot)break;M=M.return}0<he.length&&(K=new oe(K,ue,null,o,X),Y.push({event:K,listeners:he}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",K&&o!==ps&&(ue=o.relatedTarget||o.fromElement)&&(Cs(ue)||ue[dr]))break e;if((oe||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,oe?(ue=o.relatedTarget||o.toElement,oe=B,ue=ue?Cs(ue):null,ue!==null&&(ot=In(ue),ue!==ot||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(oe=null,ue=B),oe!==ue)){if(he=gi,ee="onMouseLeave",F="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(he=E,ee="onPointerLeave",F="onPointerEnter",M="pointer"),ot=oe==null?K:Ni(oe),b=ue==null?K:Ni(ue),K=new he(ee,M+"leave",oe,o,X),K.target=ot,K.relatedTarget=b,ee=null,Cs(X)===B&&(he=new he(F,M+"enter",ue,o,X),he.target=b,he.relatedTarget=ot,ee=he),ot=ee,oe&&ue)t:{for(he=oe,F=ue,M=0,b=he;b;b=Ii(b))M++;for(b=0,ee=F;ee;ee=Ii(ee))b++;for(;0<M-b;)he=Ii(he),M--;for(;0<b-M;)F=Ii(F),b--;for(;M--;){if(he===F||F!==null&&he===F.alternate)break t;he=Ii(he),F=Ii(F)}he=null}else he=null;oe!==null&&ef(Y,K,oe,he,!1),ue!==null&&ot!==null&&ef(Y,ot,ue,he,!0)}}e:{if(K=B?Ni(B):window,oe=K.nodeName&&K.nodeName.toLowerCase(),oe==="select"||oe==="input"&&K.type==="file")var de=lv;else if(Dd(K))if(Md)de=dv;else{de=cv;var ge=uv}else(oe=K.nodeName)&&oe.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(de=hv);if(de&&(de=de(t,B))){jd(Y,de,o,X);break e}ge&&ge(t,K,B),t==="focusout"&&(ge=K._wrapperState)&&ge.controlled&&K.type==="number"&&Ys(K,"number",K.value)}switch(ge=B?Ni(B):window,t){case"focusin":(Dd(ge)||ge.contentEditable==="true")&&(Ti=ge,Bu=B,Do=null);break;case"focusout":Do=Bu=Ti=null;break;case"mousedown":$u=!0;break;case"contextmenu":case"mouseup":case"dragend":$u=!1,$d(Y,o,X);break;case"selectionchange":if(pv)break;case"keydown":case"keyup":$d(Y,o,X)}var ye;if(ut)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ei?kd(t,o)&&(Ee="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Ee="onCompositionStart");Ee&&(xs&&o.locale!=="ko"&&(Ei||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ei&&(ye=No()):(nn=X,di="value"in nn?nn.value:nn.textContent,Ei=!0)),ge=Za(B,Ee),0<ge.length&&(Ee=new Po(Ee,t,null,o,X),Y.push({event:Ee,listeners:ge}),ye?Ee.data=ye:(ye=Vd(o),ye!==null&&(Ee.data=ye)))),(ye=rn?sv(t,o):iv(t,o))&&(B=Za(B,"onBeforeInput"),0<B.length&&(X=new Po("onBeforeInput","beforeinput",null,o,X),Y.push({event:X,listeners:B}),X.data=ye))}Jd(Y,r)})}function Oo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Za(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=it(t,o),m!=null&&u.unshift(Oo(t,m,h)),m=it(t,r),m!=null&&u.push(Oo(t,m,h))),t=t.return}return u}function Ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ef(t,r,o,u,h){for(var m=r._reactName,_=[];o!==null&&o!==u;){var C=o,j=C.alternate,B=C.stateNode;if(j!==null&&j===u)break;C.tag===5&&B!==null&&(C=B,h?(j=it(o,m),j!=null&&_.unshift(Oo(o,j,C))):h||(j=it(o,m),j!=null&&_.push(Oo(o,j,C)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var _v=/\r\n?/g,wv=/\u0000|\uFFFD/g;function tf(t){return(typeof t=="string"?t:""+t).replace(_v,`
`).replace(wv,"")}function el(t,r,o){if(r=tf(r),tf(t)!==r&&o)throw Error(n(425))}function tl(){}var Ku=null,Xu=null;function Yu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ju=typeof setTimeout=="function"?setTimeout:void 0,Ev=typeof clearTimeout=="function"?clearTimeout:void 0,nf=typeof Promise=="function"?Promise:void 0,Tv=typeof queueMicrotask=="function"?queueMicrotask:typeof nf<"u"?function(t){return nf.resolve(null).then(t).catch(Sv)}:Ju;function Sv(t){setTimeout(function(){throw t})}function Zu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Pn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Pn(r)}function Or(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function rf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),qn="__reactFiber$"+Ai,Lo="__reactProps$"+Ai,dr="__reactContainer$"+Ai,ec="__reactEvents$"+Ai,Iv="__reactListeners$"+Ai,Av="__reactHandles$"+Ai;function Cs(t){var r=t[qn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[dr]||o[qn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=rf(t);t!==null;){if(o=t[qn])return o;t=rf(t)}return r}t=o,o=t.parentNode}return null}function Fo(t){return t=t[qn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function nl(t){return t[Lo]||null}var tc=[],xi=-1;function Lr(t){return{current:t}}function Xe(t){0>xi||(t.current=tc[xi],tc[xi]=null,xi--)}function Ge(t,r){xi++,tc[xi]=t.current,t.current=r}var Fr={},Dt=Lr(Fr),Wt=Lr(!1),Ps=Fr;function Ci(t,r){var o=t.type.contextTypes;if(!o)return Fr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in o)h[m]=r[m];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Gt(t){return t=t.childContextTypes,t!=null}function rl(){Xe(Wt),Xe(Dt)}function sf(t,r,o){if(Dt.current!==Fr)throw Error(n(168));Ge(Dt,r),Ge(Wt,o)}function of(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Ue(t)||"Unknown",h));return se({},o,u)}function sl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,Ps=Dt.current,Ge(Dt,t),Ge(Wt,Wt.current),!0}function af(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=of(t,r,Ps),u.__reactInternalMemoizedMergedChildContext=t,Xe(Wt),Xe(Dt),Ge(Dt,t)):Xe(Wt),Ge(Wt,o)}var fr=null,il=!1,nc=!1;function lf(t){fr===null?fr=[t]:fr.push(t)}function Nv(t){il=!0,lf(t)}function br(){if(!nc&&fr!==null){nc=!0;var t=0,r=ke;try{var o=fr;for(ke=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}fr=null,il=!1}catch(h){throw fr!==null&&(fr=fr.slice(t+1)),ai(ws,br),h}finally{ke=r,nc=!1}}return null}var Pi=[],Ri=0,ol=null,al=0,fn=[],mn=0,Rs=null,mr=1,pr="";function ks(t,r){Pi[Ri++]=al,Pi[Ri++]=ol,ol=t,al=r}function uf(t,r,o){fn[mn++]=mr,fn[mn++]=pr,fn[mn++]=Rs,Rs=t;var u=mr;t=pr;var h=32-Ut(u)-1;u&=~(1<<h),o+=1;var m=32-Ut(r)+h;if(30<m){var _=h-h%5;m=(u&(1<<_)-1).toString(32),u>>=_,h-=_,mr=1<<32-Ut(r)+h|o<<h|u,pr=m+t}else mr=1<<m|o<<h|u,pr=t}function rc(t){t.return!==null&&(ks(t,1),uf(t,1,0))}function sc(t){for(;t===ol;)ol=Pi[--Ri],Pi[Ri]=null,al=Pi[--Ri],Pi[Ri]=null;for(;t===Rs;)Rs=fn[--mn],fn[mn]=null,pr=fn[--mn],fn[mn]=null,mr=fn[--mn],fn[mn]=null}var sn=null,on=null,Ze=!1,Vn=null;function cf(t,r){var o=vn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function hf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,sn=t,on=Or(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,sn=t,on=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Rs!==null?{id:mr,overflow:pr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=vn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,sn=t,on=null,!0):!1;default:return!1}}function ic(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oc(t){if(Ze){var r=on;if(r){var o=r;if(!hf(t,r)){if(ic(t))throw Error(n(418));r=Or(o.nextSibling);var u=sn;r&&hf(t,r)?cf(u,o):(t.flags=t.flags&-4097|2,Ze=!1,sn=t)}}else{if(ic(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ze=!1,sn=t}}}function df(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function ll(t){if(t!==sn)return!1;if(!Ze)return df(t),Ze=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Yu(t.type,t.memoizedProps)),r&&(r=on)){if(ic(t))throw ff(),Error(n(418));for(;r;)cf(t,r),r=Or(r.nextSibling)}if(df(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){on=Or(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}on=null}}else on=sn?Or(t.stateNode.nextSibling):null;return!0}function ff(){for(var t=on;t;)t=Or(t.nextSibling)}function ki(){on=sn=null,Ze=!1}function ac(t){Vn===null?Vn=[t]:Vn.push(t)}var xv=ce.ReactCurrentBatchConfig;function bo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,m=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(_){var C=h.refs;_===null?delete C[m]:C[m]=_},r._stringRef=m,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function ul(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function mf(t){var r=t._init;return r(t._payload)}function pf(t){function r(F,M){if(t){var b=F.deletions;b===null?(F.deletions=[M],F.flags|=16):b.push(M)}}function o(F,M){if(!t)return null;for(;M!==null;)r(F,M),M=M.sibling;return null}function u(F,M){for(F=new Map;M!==null;)M.key!==null?F.set(M.key,M):F.set(M.index,M),M=M.sibling;return F}function h(F,M){return F=Gr(F,M),F.index=0,F.sibling=null,F}function m(F,M,b){return F.index=b,t?(b=F.alternate,b!==null?(b=b.index,b<M?(F.flags|=2,M):b):(F.flags|=2,M)):(F.flags|=1048576,M)}function _(F){return t&&F.alternate===null&&(F.flags|=2),F}function C(F,M,b,ee){return M===null||M.tag!==6?(M=Jc(b,F.mode,ee),M.return=F,M):(M=h(M,b),M.return=F,M)}function j(F,M,b,ee){var de=b.type;return de===k?X(F,M,b.props.children,ee,b.key):M!==null&&(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===De&&mf(de)===M.type)?(ee=h(M,b.props),ee.ref=bo(F,M,b),ee.return=F,ee):(ee=Dl(b.type,b.key,b.props,null,F.mode,ee),ee.ref=bo(F,M,b),ee.return=F,ee)}function B(F,M,b,ee){return M===null||M.tag!==4||M.stateNode.containerInfo!==b.containerInfo||M.stateNode.implementation!==b.implementation?(M=Zc(b,F.mode,ee),M.return=F,M):(M=h(M,b.children||[]),M.return=F,M)}function X(F,M,b,ee,de){return M===null||M.tag!==7?(M=bs(b,F.mode,ee,de),M.return=F,M):(M=h(M,b),M.return=F,M)}function Y(F,M,b){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Jc(""+M,F.mode,b),M.return=F,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ve:return b=Dl(M.type,M.key,M.props,null,F.mode,b),b.ref=bo(F,null,M),b.return=F,b;case z:return M=Zc(M,F.mode,b),M.return=F,M;case De:var ee=M._init;return Y(F,ee(M._payload),b)}if(rr(M)||fe(M))return M=bs(M,F.mode,b,null),M.return=F,M;ul(F,M)}return null}function K(F,M,b,ee){var de=M!==null?M.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return de!==null?null:C(F,M,""+b,ee);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ve:return b.key===de?j(F,M,b,ee):null;case z:return b.key===de?B(F,M,b,ee):null;case De:return de=b._init,K(F,M,de(b._payload),ee)}if(rr(b)||fe(b))return de!==null?null:X(F,M,b,ee,null);ul(F,b)}return null}function oe(F,M,b,ee,de){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return F=F.get(b)||null,C(M,F,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Ve:return F=F.get(ee.key===null?b:ee.key)||null,j(M,F,ee,de);case z:return F=F.get(ee.key===null?b:ee.key)||null,B(M,F,ee,de);case De:var ge=ee._init;return oe(F,M,b,ge(ee._payload),de)}if(rr(ee)||fe(ee))return F=F.get(b)||null,X(M,F,ee,de,null);ul(M,ee)}return null}function ue(F,M,b,ee){for(var de=null,ge=null,ye=M,Ee=M=0,It=null;ye!==null&&Ee<b.length;Ee++){ye.index>Ee?(It=ye,ye=null):It=ye.sibling;var be=K(F,ye,b[Ee],ee);if(be===null){ye===null&&(ye=It);break}t&&ye&&be.alternate===null&&r(F,ye),M=m(be,M,Ee),ge===null?de=be:ge.sibling=be,ge=be,ye=It}if(Ee===b.length)return o(F,ye),Ze&&ks(F,Ee),de;if(ye===null){for(;Ee<b.length;Ee++)ye=Y(F,b[Ee],ee),ye!==null&&(M=m(ye,M,Ee),ge===null?de=ye:ge.sibling=ye,ge=ye);return Ze&&ks(F,Ee),de}for(ye=u(F,ye);Ee<b.length;Ee++)It=oe(ye,F,Ee,b[Ee],ee),It!==null&&(t&&It.alternate!==null&&ye.delete(It.key===null?Ee:It.key),M=m(It,M,Ee),ge===null?de=It:ge.sibling=It,ge=It);return t&&ye.forEach(function(Qr){return r(F,Qr)}),Ze&&ks(F,Ee),de}function he(F,M,b,ee){var de=fe(b);if(typeof de!="function")throw Error(n(150));if(b=de.call(b),b==null)throw Error(n(151));for(var ge=de=null,ye=M,Ee=M=0,It=null,be=b.next();ye!==null&&!be.done;Ee++,be=b.next()){ye.index>Ee?(It=ye,ye=null):It=ye.sibling;var Qr=K(F,ye,be.value,ee);if(Qr===null){ye===null&&(ye=It);break}t&&ye&&Qr.alternate===null&&r(F,ye),M=m(Qr,M,Ee),ge===null?de=Qr:ge.sibling=Qr,ge=Qr,ye=It}if(be.done)return o(F,ye),Ze&&ks(F,Ee),de;if(ye===null){for(;!be.done;Ee++,be=b.next())be=Y(F,be.value,ee),be!==null&&(M=m(be,M,Ee),ge===null?de=be:ge.sibling=be,ge=be);return Ze&&ks(F,Ee),de}for(ye=u(F,ye);!be.done;Ee++,be=b.next())be=oe(ye,F,Ee,be.value,ee),be!==null&&(t&&be.alternate!==null&&ye.delete(be.key===null?Ee:be.key),M=m(be,M,Ee),ge===null?de=be:ge.sibling=be,ge=be);return t&&ye.forEach(function(o_){return r(F,o_)}),Ze&&ks(F,Ee),de}function ot(F,M,b,ee){if(typeof b=="object"&&b!==null&&b.type===k&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ve:e:{for(var de=b.key,ge=M;ge!==null;){if(ge.key===de){if(de=b.type,de===k){if(ge.tag===7){o(F,ge.sibling),M=h(ge,b.props.children),M.return=F,F=M;break e}}else if(ge.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===De&&mf(de)===ge.type){o(F,ge.sibling),M=h(ge,b.props),M.ref=bo(F,ge,b),M.return=F,F=M;break e}o(F,ge);break}else r(F,ge);ge=ge.sibling}b.type===k?(M=bs(b.props.children,F.mode,ee,b.key),M.return=F,F=M):(ee=Dl(b.type,b.key,b.props,null,F.mode,ee),ee.ref=bo(F,M,b),ee.return=F,F=ee)}return _(F);case z:e:{for(ge=b.key;M!==null;){if(M.key===ge)if(M.tag===4&&M.stateNode.containerInfo===b.containerInfo&&M.stateNode.implementation===b.implementation){o(F,M.sibling),M=h(M,b.children||[]),M.return=F,F=M;break e}else{o(F,M);break}else r(F,M);M=M.sibling}M=Zc(b,F.mode,ee),M.return=F,F=M}return _(F);case De:return ge=b._init,ot(F,M,ge(b._payload),ee)}if(rr(b))return ue(F,M,b,ee);if(fe(b))return he(F,M,b,ee);ul(F,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,M!==null&&M.tag===6?(o(F,M.sibling),M=h(M,b),M.return=F,F=M):(o(F,M),M=Jc(b,F.mode,ee),M.return=F,F=M),_(F)):o(F,M)}return ot}var Vi=pf(!0),gf=pf(!1),cl=Lr(null),hl=null,Di=null,lc=null;function uc(){lc=Di=hl=null}function cc(t){var r=cl.current;Xe(cl),t._currentValue=r}function hc(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function ji(t,r){hl=t,lc=Di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Qt=!0),t.firstContext=null)}function pn(t){var r=t._currentValue;if(lc!==t)if(t={context:t,memoizedValue:r,next:null},Di===null){if(hl===null)throw Error(n(308));Di=t,hl.dependencies={lanes:0,firstContext:t}}else Di=Di.next=t;return r}var Vs=null;function dc(t){Vs===null?Vs=[t]:Vs.push(t)}function yf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,dc(r)):(o.next=h.next,h.next=o),r.interleaved=o,gr(t,u)}function gr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ur=!1;function fc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function zr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Fe&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,gr(t,o)}return h=u.interleaved,h===null?(r.next=r,dc(u)):(r.next=h.next,h.next=r),u.interleaved=r,gr(t,o)}function dl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Rr(t,o)}}function _f(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};m===null?h=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?h=m=r:m=m.next=r}else h=m=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function fl(t,r,o,u){var h=t.updateQueue;Ur=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var j=C,B=j.next;j.next=null,_===null?m=B:_.next=B,_=j;var X=t.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==_&&(C===null?X.firstBaseUpdate=B:C.next=B,X.lastBaseUpdate=j))}if(m!==null){var Y=h.baseState;_=0,X=B=j=null,C=m;do{var K=C.lane,oe=C.eventTime;if((u&K)===K){X!==null&&(X=X.next={eventTime:oe,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ue=t,he=C;switch(K=r,oe=o,he.tag){case 1:if(ue=he.payload,typeof ue=="function"){Y=ue.call(oe,Y,K);break e}Y=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=he.payload,K=typeof ue=="function"?ue.call(oe,Y,K):ue,K==null)break e;Y=se({},Y,K);break e;case 2:Ur=!0}}C.callback!==null&&C.lane!==0&&(t.flags|=64,K=h.effects,K===null?h.effects=[C]:K.push(C))}else oe={eventTime:oe,lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(B=X=oe,j=Y):X=X.next=oe,_|=K;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;K=C,C=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);if(X===null&&(j=Y),h.baseState=j,h.firstBaseUpdate=B,h.lastBaseUpdate=X,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else m===null&&(h.shared.lanes=0);Ms|=_,t.lanes=_,t.memoizedState=Y}}function wf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Uo={},Wn=Lr(Uo),zo=Lr(Uo),Bo=Lr(Uo);function Ds(t){if(t===Uo)throw Error(n(174));return t}function mc(t,r){switch(Ge(Bo,r),Ge(zo,t),Ge(Wn,Uo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:pt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=pt(r,t)}Xe(Wn),Ge(Wn,r)}function Mi(){Xe(Wn),Xe(zo),Xe(Bo)}function Ef(t){Ds(Bo.current);var r=Ds(Wn.current),o=pt(r,t.type);r!==o&&(Ge(zo,t),Ge(Wn,o))}function pc(t){zo.current===t&&(Xe(Wn),Xe(zo))}var et=Lr(0);function ml(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var gc=[];function yc(){for(var t=0;t<gc.length;t++)gc[t]._workInProgressVersionPrimary=null;gc.length=0}var pl=ce.ReactCurrentDispatcher,vc=ce.ReactCurrentBatchConfig,js=0,tt=null,yt=null,Tt=null,gl=!1,$o=!1,Ho=0,Cv=0;function jt(){throw Error(n(321))}function _c(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!kn(t[o],r[o]))return!1;return!0}function wc(t,r,o,u,h,m){if(js=m,tt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,pl.current=t===null||t.memoizedState===null?Vv:Dv,t=o(u,h),$o){m=0;do{if($o=!1,Ho=0,25<=m)throw Error(n(301));m+=1,Tt=yt=null,r.updateQueue=null,pl.current=jv,t=o(u,h)}while($o)}if(pl.current=_l,r=yt!==null&&yt.next!==null,js=0,Tt=yt=tt=null,gl=!1,r)throw Error(n(300));return t}function Ec(){var t=Ho!==0;return Ho=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?tt.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function gn(){if(yt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var r=Tt===null?tt.memoizedState:Tt.next;if(r!==null)Tt=r,yt=t;else{if(t===null)throw Error(n(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Tt===null?tt.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function qo(t,r){return typeof r=="function"?r(t):r}function Tc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=yt,h=u.baseQueue,m=o.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}u.baseQueue=h=m,o.pending=null}if(h!==null){m=h.next,u=u.baseState;var C=_=null,j=null,B=m;do{var X=B.lane;if((js&X)===X)j!==null&&(j=j.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),u=B.hasEagerState?B.eagerState:t(u,B.action);else{var Y={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};j===null?(C=j=Y,_=u):j=j.next=Y,tt.lanes|=X,Ms|=X}B=B.next}while(B!==null&&B!==m);j===null?_=u:j.next=C,kn(u,r.memoizedState)||(Qt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=j,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do m=h.lane,tt.lanes|=m,Ms|=m,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Sc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,m=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do m=t(m,_.action),_=_.next;while(_!==h);kn(m,r.memoizedState)||(Qt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function Tf(){}function Sf(t,r){var o=tt,u=gn(),h=r(),m=!kn(u.memoizedState,h);if(m&&(u.memoizedState=h,Qt=!0),u=u.queue,Ic(Nf.bind(null,o,u,t),[t]),u.getSnapshot!==r||m||Tt!==null&&Tt.memoizedState.tag&1){if(o.flags|=2048,Wo(9,Af.bind(null,o,u,h,r),void 0,null),St===null)throw Error(n(349));(js&30)!==0||If(o,r,h)}return h}function If(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=tt.updateQueue,r===null?(r={lastEffect:null,stores:null},tt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Af(t,r,o,u){r.value=o,r.getSnapshot=u,xf(r)&&Cf(t)}function Nf(t,r,o){return o(function(){xf(r)&&Cf(t)})}function xf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!kn(t,o)}catch{return!0}}function Cf(t){var r=gr(t,1);r!==null&&On(r,t,1,-1)}function Pf(t){var r=Gn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:t},r.queue=t,t=t.dispatch=kv.bind(null,tt,t),[r.memoizedState,t]}function Wo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=tt.updateQueue,r===null?(r={lastEffect:null,stores:null},tt.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Rf(){return gn().memoizedState}function yl(t,r,o,u){var h=Gn();tt.flags|=t,h.memoizedState=Wo(1|r,o,void 0,u===void 0?null:u)}function vl(t,r,o,u){var h=gn();u=u===void 0?null:u;var m=void 0;if(yt!==null){var _=yt.memoizedState;if(m=_.destroy,u!==null&&_c(u,_.deps)){h.memoizedState=Wo(r,o,m,u);return}}tt.flags|=t,h.memoizedState=Wo(1|r,o,m,u)}function kf(t,r){return yl(8390656,8,t,r)}function Ic(t,r){return vl(2048,8,t,r)}function Vf(t,r){return vl(4,2,t,r)}function Df(t,r){return vl(4,4,t,r)}function jf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Mf(t,r,o){return o=o!=null?o.concat([t]):null,vl(4,4,jf.bind(null,r,t),o)}function Ac(){}function Of(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&_c(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Lf(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&_c(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Ff(t,r,o){return(js&21)===0?(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=o):(kn(o,r)||(o=Ss(),tt.lanes|=o,Ms|=o,t.baseState=!0),r)}function Pv(t,r){var o=ke;ke=o!==0&&4>o?o:4,t(!0);var u=vc.transition;vc.transition={};try{t(!1),r()}finally{ke=o,vc.transition=u}}function bf(){return gn().memoizedState}function Rv(t,r,o){var u=qr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},Uf(t))zf(r,o);else if(o=yf(t,r,o,u),o!==null){var h=$t();On(o,t,u,h),Bf(o,r,u)}}function kv(t,r,o){var u=qr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(Uf(t))zf(r,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,C=m(_,o);if(h.hasEagerState=!0,h.eagerState=C,kn(C,_)){var j=r.interleaved;j===null?(h.next=h,dc(r)):(h.next=j.next,j.next=h),r.interleaved=h;return}}catch{}finally{}o=yf(t,r,h,u),o!==null&&(h=$t(),On(o,t,u,h),Bf(o,r,u))}}function Uf(t){var r=t.alternate;return t===tt||r!==null&&r===tt}function zf(t,r){$o=gl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Bf(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Rr(t,o)}}var _l={readContext:pn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},Vv={readContext:pn,useCallback:function(t,r){return Gn().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:kf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,yl(4194308,4,jf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return yl(4194308,4,t,r)},useInsertionEffect:function(t,r){return yl(4,2,t,r)},useMemo:function(t,r){var o=Gn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Gn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Rv.bind(null,tt,t),[u.memoizedState,t]},useRef:function(t){var r=Gn();return t={current:t},r.memoizedState=t},useState:Pf,useDebugValue:Ac,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=Pf(!1),r=t[0];return t=Pv.bind(null,t[1]),Gn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=tt,h=Gn();if(Ze){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),St===null)throw Error(n(349));(js&30)!==0||If(u,r,o)}h.memoizedState=o;var m={value:o,getSnapshot:r};return h.queue=m,kf(Nf.bind(null,u,m,t),[t]),u.flags|=2048,Wo(9,Af.bind(null,u,m,o,r),void 0,null),o},useId:function(){var t=Gn(),r=St.identifierPrefix;if(Ze){var o=pr,u=mr;o=(u&~(1<<32-Ut(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Ho++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Cv++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Dv={readContext:pn,useCallback:Of,useContext:pn,useEffect:Ic,useImperativeHandle:Mf,useInsertionEffect:Vf,useLayoutEffect:Df,useMemo:Lf,useReducer:Tc,useRef:Rf,useState:function(){return Tc(qo)},useDebugValue:Ac,useDeferredValue:function(t){var r=gn();return Ff(r,yt.memoizedState,t)},useTransition:function(){var t=Tc(qo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:Tf,useSyncExternalStore:Sf,useId:bf,unstable_isNewReconciler:!1},jv={readContext:pn,useCallback:Of,useContext:pn,useEffect:Ic,useImperativeHandle:Mf,useInsertionEffect:Vf,useLayoutEffect:Df,useMemo:Lf,useReducer:Sc,useRef:Rf,useState:function(){return Sc(qo)},useDebugValue:Ac,useDeferredValue:function(t){var r=gn();return yt===null?r.memoizedState=t:Ff(r,yt.memoizedState,t)},useTransition:function(){var t=Sc(qo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:Tf,useSyncExternalStore:Sf,useId:bf,unstable_isNewReconciler:!1};function Dn(t,r){if(t&&t.defaultProps){r=se({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Nc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:se({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var wl={isMounted:function(t){return(t=t._reactInternals)?In(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=$t(),h=qr(t),m=yr(u,h);m.payload=r,o!=null&&(m.callback=o),r=zr(t,m,h),r!==null&&(On(r,t,h,u),dl(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=$t(),h=qr(t),m=yr(u,h);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=zr(t,m,h),r!==null&&(On(r,t,h,u),dl(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=$t(),u=qr(t),h=yr(o,u);h.tag=2,r!=null&&(h.callback=r),r=zr(t,h,u),r!==null&&(On(r,t,u,o),dl(r,t,u))}};function $f(t,r,o,u,h,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,m,_):r.prototype&&r.prototype.isPureReactComponent?!Vo(o,u)||!Vo(h,m):!0}function Hf(t,r,o){var u=!1,h=Fr,m=r.contextType;return typeof m=="object"&&m!==null?m=pn(m):(h=Gt(r)?Ps:Dt.current,u=r.contextTypes,m=(u=u!=null)?Ci(t,h):Fr),r=new r(o,m),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=wl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=m),r}function qf(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&wl.enqueueReplaceState(r,r.state,null)}function xc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},fc(t);var m=r.contextType;typeof m=="object"&&m!==null?h.context=pn(m):(m=Gt(r)?Ps:Dt.current,h.context=Ci(t,m)),h.state=t.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(Nc(t,r,m,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&wl.enqueueReplaceState(h,h.state,null),fl(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Oi(t,r){try{var o="",u=r;do o+=xe(u),u=u.return;while(u);var h=o}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:t,source:r,stack:h,digest:null}}function Cc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Pc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Mv=typeof WeakMap=="function"?WeakMap:Map;function Wf(t,r,o){o=yr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){xl||(xl=!0,Hc=u),Pc(t,r)},o}function Gf(t,r,o){o=yr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){Pc(t,r)}}var m=t.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(o.callback=function(){Pc(t,r),typeof u!="function"&&($r===null?$r=new Set([this]):$r.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Qf(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Mv;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=Kv.bind(null,t,r,o),r.then(t,t))}function Kf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Xf(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=yr(-1,1),r.tag=2,zr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Ov=ce.ReactCurrentOwner,Qt=!1;function Bt(t,r,o,u){r.child=t===null?gf(r,null,o,u):Vi(r,t.child,o,u)}function Yf(t,r,o,u,h){o=o.render;var m=r.ref;return ji(r,h),u=wc(t,r,o,u,m,h),o=Ec(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Ze&&o&&rc(r),r.flags|=1,Bt(t,r,u,h),r.child)}function Jf(t,r,o,u,h){if(t===null){var m=o.type;return typeof m=="function"&&!Yc(m)&&m.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=m,Zf(t,r,m,u,h)):(t=Dl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,(t.lanes&h)===0){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Vo,o(_,u)&&t.ref===r.ref)return vr(t,r,h)}return r.flags|=1,t=Gr(m,u),t.ref=r.ref,t.return=r,r.child=t}function Zf(t,r,o,u,h){if(t!==null){var m=t.memoizedProps;if(Vo(m,u)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=u=m,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Qt=!0);else return r.lanes=t.lanes,vr(t,r,h)}return Rc(t,r,o,u,h)}function em(t,r,o){var u=r.pendingProps,h=u.children,m=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Fi,an),an|=o;else{if((o&1073741824)===0)return t=m!==null?m.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ge(Fi,an),an|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=m!==null?m.baseLanes:o,Ge(Fi,an),an|=u}else m!==null?(u=m.baseLanes|o,r.memoizedState=null):u=o,Ge(Fi,an),an|=u;return Bt(t,r,h,o),r.child}function tm(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Rc(t,r,o,u,h){var m=Gt(o)?Ps:Dt.current;return m=Ci(r,m),ji(r,h),o=wc(t,r,o,u,m,h),u=Ec(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Ze&&u&&rc(r),r.flags|=1,Bt(t,r,o,h),r.child)}function nm(t,r,o,u,h){if(Gt(o)){var m=!0;sl(r)}else m=!1;if(ji(r,h),r.stateNode===null)Tl(t,r),Hf(r,o,u),xc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,C=r.memoizedProps;_.props=C;var j=_.context,B=o.contextType;typeof B=="object"&&B!==null?B=pn(B):(B=Gt(o)?Ps:Dt.current,B=Ci(r,B));var X=o.getDerivedStateFromProps,Y=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function";Y||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==u||j!==B)&&qf(r,_,u,B),Ur=!1;var K=r.memoizedState;_.state=K,fl(r,u,_,h),j=r.memoizedState,C!==u||K!==j||Wt.current||Ur?(typeof X=="function"&&(Nc(r,o,X,u),j=r.memoizedState),(C=Ur||$f(r,o,C,u,K,j,B))?(Y||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=j),_.props=u,_.state=j,_.context=B,u=C):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,vf(t,r),C=r.memoizedProps,B=r.type===r.elementType?C:Dn(r.type,C),_.props=B,Y=r.pendingProps,K=_.context,j=o.contextType,typeof j=="object"&&j!==null?j=pn(j):(j=Gt(o)?Ps:Dt.current,j=Ci(r,j));var oe=o.getDerivedStateFromProps;(X=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==Y||K!==j)&&qf(r,_,u,j),Ur=!1,K=r.memoizedState,_.state=K,fl(r,u,_,h);var ue=r.memoizedState;C!==Y||K!==ue||Wt.current||Ur?(typeof oe=="function"&&(Nc(r,o,oe,u),ue=r.memoizedState),(B=Ur||$f(r,o,B,u,K,ue,j)||!1)?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ue,j),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ue,j)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ue),_.props=u,_.state=ue,_.context=j,u=B):(typeof _.componentDidUpdate!="function"||C===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),u=!1)}return kc(t,r,o,u,m,h)}function kc(t,r,o,u,h,m){tm(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&af(r,o,!1),vr(t,r,m);u=r.stateNode,Ov.current=r;var C=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=Vi(r,t.child,null,m),r.child=Vi(r,null,C,m)):Bt(t,r,C,m),r.memoizedState=u.state,h&&af(r,o,!0),r.child}function rm(t){var r=t.stateNode;r.pendingContext?sf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&sf(t,r.context,!1),mc(t,r.containerInfo)}function sm(t,r,o,u,h){return ki(),ac(h),r.flags|=256,Bt(t,r,o,u),r.child}var Vc={dehydrated:null,treeContext:null,retryLane:0};function Dc(t){return{baseLanes:t,cachePool:null,transitions:null}}function im(t,r,o){var u=r.pendingProps,h=et.current,m=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=t!==null&&t.memoizedState===null?!1:(h&2)!==0),C?(m=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Ge(et,h&1),t===null)return oc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,t=u.fallback,m?(u=r.mode,m=r.child,_={mode:"hidden",children:_},(u&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=_):m=jl(_,u,0,null),t=bs(t,u,o,null),m.return=r,t.return=r,m.sibling=t,r.child=m,r.child.memoizedState=Dc(o),r.memoizedState=Vc,t):jc(r,_));if(h=t.memoizedState,h!==null&&(C=h.dehydrated,C!==null))return Lv(t,r,_,u,C,h,o);if(m){m=u.fallback,_=r.mode,h=t.child,C=h.sibling;var j={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=j,r.deletions=null):(u=Gr(h,j),u.subtreeFlags=h.subtreeFlags&14680064),C!==null?m=Gr(C,m):(m=bs(m,_,o,null),m.flags|=2),m.return=r,u.return=r,u.sibling=m,r.child=u,u=m,m=r.child,_=t.child.memoizedState,_=_===null?Dc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},m.memoizedState=_,m.childLanes=t.childLanes&~o,r.memoizedState=Vc,u}return m=t.child,t=m.sibling,u=Gr(m,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function jc(t,r){return r=jl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function El(t,r,o,u){return u!==null&&ac(u),Vi(r,t.child,null,o),t=jc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Lv(t,r,o,u,h,m,_){if(o)return r.flags&256?(r.flags&=-257,u=Cc(Error(n(422))),El(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(m=u.fallback,h=r.mode,u=jl({mode:"visible",children:u.children},h,0,null),m=bs(m,h,_,null),m.flags|=2,u.return=r,m.return=r,u.sibling=m,r.child=u,(r.mode&1)!==0&&Vi(r,t.child,null,_),r.child.memoizedState=Dc(_),r.memoizedState=Vc,m);if((r.mode&1)===0)return El(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var C=u.dgst;return u=C,m=Error(n(419)),u=Cc(m,u,void 0),El(t,r,_,u)}if(C=(_&t.childLanes)!==0,Qt||C){if(u=St,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,gr(t,h),On(u,t,h,-1))}return Xc(),u=Cc(Error(n(421))),El(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Xv.bind(null,t),h._reactRetry=r,null):(t=m.treeContext,on=Or(h.nextSibling),sn=r,Ze=!0,Vn=null,t!==null&&(fn[mn++]=mr,fn[mn++]=pr,fn[mn++]=Rs,mr=t.id,pr=t.overflow,Rs=r),r=jc(r,u.children),r.flags|=4096,r)}function om(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),hc(t.return,r,o)}function Mc(t,r,o,u,h){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=h)}function am(t,r,o){var u=r.pendingProps,h=u.revealOrder,m=u.tail;if(Bt(t,r,u.children,o),u=et.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&om(t,o,r);else if(t.tag===19)om(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Ge(et,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&ml(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Mc(r,!1,h,o,m);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&ml(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Mc(r,!0,o,null,m);break;case"together":Mc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Tl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function vr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ms|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Gr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Gr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Fv(t,r,o){switch(r.tag){case 3:rm(r),ki();break;case 5:Ef(r);break;case 1:Gt(r.type)&&sl(r);break;case 4:mc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;Ge(cl,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(Ge(et,et.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?im(t,r,o):(Ge(et,et.current&1),t=vr(t,r,o),t!==null?t.sibling:null);Ge(et,et.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return am(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ge(et,et.current),u)break;return null;case 22:case 23:return r.lanes=0,em(t,r,o)}return vr(t,r,o)}var lm,Oc,um,cm;lm=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Oc=function(){},um=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Ds(Wn.current);var m=null;switch(o){case"input":h=ds(t,h),u=ds(t,u),m=[];break;case"select":h=se({},h,{value:void 0}),u=se({},u,{value:void 0}),m=[];break;case"textarea":h=oo(t,h),u=oo(t,u),m=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=tl)}fo(o,u);var _;o=null;for(B in h)if(!u.hasOwnProperty(B)&&h.hasOwnProperty(B)&&h[B]!=null)if(B==="style"){var C=h[B];for(_ in C)C.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(a.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in u){var j=u[B];if(C=h!=null?h[B]:void 0,u.hasOwnProperty(B)&&j!==C&&(j!=null||C!=null))if(B==="style")if(C){for(_ in C)!C.hasOwnProperty(_)||j&&j.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in j)j.hasOwnProperty(_)&&C[_]!==j[_]&&(o||(o={}),o[_]=j[_])}else o||(m||(m=[]),m.push(B,o)),o=j;else B==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,C=C?C.__html:void 0,j!=null&&C!==j&&(m=m||[]).push(B,j)):B==="children"?typeof j!="string"&&typeof j!="number"||(m=m||[]).push(B,""+j):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(a.hasOwnProperty(B)?(j!=null&&B==="onScroll"&&Ke("scroll",t),m||C===j||(m=[])):(m=m||[]).push(B,j))}o&&(m=m||[]).push("style",o);var B=m;(r.updateQueue=B)&&(r.flags|=4)}},cm=function(t,r,o,u){o!==u&&(r.flags|=4)};function Go(t,r){if(!Ze)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Mt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function bv(t,r,o){var u=r.pendingProps;switch(sc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Gt(r.type)&&rl(),Mt(r),null;case 3:return u=r.stateNode,Mi(),Xe(Wt),Xe(Dt),yc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(ll(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Vn!==null&&(Gc(Vn),Vn=null))),Oc(t,r),Mt(r),null;case 5:pc(r);var h=Ds(Bo.current);if(o=r.type,t!==null&&r.stateNode!=null)um(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Mt(r),null}if(t=Ds(Wn.current),ll(r)){u=r.stateNode,o=r.type;var m=r.memoizedProps;switch(u[qn]=r,u[Lo]=m,t=(r.mode&1)!==0,o){case"dialog":Ke("cancel",u),Ke("close",u);break;case"iframe":case"object":case"embed":Ke("load",u);break;case"video":case"audio":for(h=0;h<jo.length;h++)Ke(jo[h],u);break;case"source":Ke("error",u);break;case"img":case"image":case"link":Ke("error",u),Ke("load",u);break;case"details":Ke("toggle",u);break;case"input":Xs(u,m),Ke("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!m.multiple},Ke("invalid",u);break;case"textarea":Js(u,m),Ke("invalid",u)}fo(o,m),h=null;for(var _ in m)if(m.hasOwnProperty(_)){var C=m[_];_==="children"?typeof C=="string"?u.textContent!==C&&(m.suppressHydrationWarning!==!0&&el(u.textContent,C,t),h=["children",C]):typeof C=="number"&&u.textContent!==""+C&&(m.suppressHydrationWarning!==!0&&el(u.textContent,C,t),h=["children",""+C]):a.hasOwnProperty(_)&&C!=null&&_==="onScroll"&&Ke("scroll",u)}switch(o){case"input":nr(u),Na(u,m,!0);break;case"textarea":nr(u),ao(u);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(u.onclick=tl)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[qn]=r,t[Lo]=u,lm(t,r,!1,!1),r.stateNode=t;e:{switch(_=mo(o,u),o){case"dialog":Ke("cancel",t),Ke("close",t),h=u;break;case"iframe":case"object":case"embed":Ke("load",t),h=u;break;case"video":case"audio":for(h=0;h<jo.length;h++)Ke(jo[h],t);h=u;break;case"source":Ke("error",t),h=u;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),h=u;break;case"details":Ke("toggle",t),h=u;break;case"input":Xs(t,u),h=ds(t,u),Ke("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=se({},u,{value:void 0}),Ke("invalid",t);break;case"textarea":Js(t,u),h=oo(t,u),Ke("invalid",t);break;default:h=u}fo(o,h),C=h;for(m in C)if(C.hasOwnProperty(m)){var j=C[m];m==="style"?co(t,j):m==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&lo(t,j)):m==="children"?typeof j=="string"?(o!=="textarea"||j!=="")&&Ar(t,j):typeof j=="number"&&Ar(t,""+j):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(a.hasOwnProperty(m)?j!=null&&m==="onScroll"&&Ke("scroll",t):j!=null&&re(t,m,j,_))}switch(o){case"input":nr(t),Na(t,u,!1);break;case"textarea":nr(t),ao(t);break;case"option":u.value!=null&&t.setAttribute("value",""+ze(u.value));break;case"select":t.multiple=!!u.multiple,m=u.value,m!=null?sr(t,!!u.multiple,m,!1):u.defaultValue!=null&&sr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=tl)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(t&&r.stateNode!=null)cm(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Ds(Bo.current),Ds(Wn.current),ll(r)){if(u=r.stateNode,o=r.memoizedProps,u[qn]=r,(m=u.nodeValue!==o)&&(t=sn,t!==null))switch(t.tag){case 3:el(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&el(u.nodeValue,o,(t.mode&1)!==0)}m&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[qn]=r,r.stateNode=u}return Mt(r),null;case 13:if(Xe(et),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&on!==null&&(r.mode&1)!==0&&(r.flags&128)===0)ff(),ki(),r.flags|=98560,m=!1;else if(m=ll(r),u!==null&&u.dehydrated!==null){if(t===null){if(!m)throw Error(n(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[qn]=r}else ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),m=!1}else Vn!==null&&(Gc(Vn),Vn=null),m=!0;if(!m)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(et.current&1)!==0?vt===0&&(vt=3):Xc())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return Mi(),Oc(t,r),t===null&&Mo(r.stateNode.containerInfo),Mt(r),null;case 10:return cc(r.type._context),Mt(r),null;case 17:return Gt(r.type)&&rl(),Mt(r),null;case 19:if(Xe(et),m=r.memoizedState,m===null)return Mt(r),null;if(u=(r.flags&128)!==0,_=m.rendering,_===null)if(u)Go(m,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=ml(t),_!==null){for(r.flags|=128,Go(m,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)m=o,t=u,m.flags&=14680066,_=m.alternate,_===null?(m.childLanes=0,m.lanes=t,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=_.childLanes,m.lanes=_.lanes,m.child=_.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=_.memoizedProps,m.memoizedState=_.memoizedState,m.updateQueue=_.updateQueue,m.type=_.type,t=_.dependencies,m.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Ge(et,et.current&1|2),r.child}t=t.sibling}m.tail!==null&&We()>bi&&(r.flags|=128,u=!0,Go(m,!1),r.lanes=4194304)}else{if(!u)if(t=ml(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Go(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!Ze)return Mt(r),null}else 2*We()-m.renderingStartTime>bi&&o!==1073741824&&(r.flags|=128,u=!0,Go(m,!1),r.lanes=4194304);m.isBackwards?(_.sibling=r.child,r.child=_):(o=m.last,o!==null?o.sibling=_:r.child=_,m.last=_)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=We(),r.sibling=null,o=et.current,Ge(et,u?o&1|2:o&1),r):(Mt(r),null);case 22:case 23:return Kc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(an&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Uv(t,r){switch(sc(r),r.tag){case 1:return Gt(r.type)&&rl(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Mi(),Xe(Wt),Xe(Dt),yc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return pc(r),null;case 13:if(Xe(et),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ki()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Xe(et),null;case 4:return Mi(),null;case 10:return cc(r.type._context),null;case 22:case 23:return Kc(),null;case 24:return null;default:return null}}var Sl=!1,Ot=!1,zv=typeof WeakSet=="function"?WeakSet:Set,le=null;function Li(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){st(t,r,u)}else o.current=null}function Lc(t,r,o){try{o()}catch(u){st(t,r,u)}}var hm=!1;function Bv(t,r){if(Ku=Dr,t=Bd(),zu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,C=-1,j=-1,B=0,X=0,Y=t,K=null;t:for(;;){for(var oe;Y!==o||h!==0&&Y.nodeType!==3||(C=_+h),Y!==m||u!==0&&Y.nodeType!==3||(j=_+u),Y.nodeType===3&&(_+=Y.nodeValue.length),(oe=Y.firstChild)!==null;)K=Y,Y=oe;for(;;){if(Y===t)break t;if(K===o&&++B===h&&(C=_),K===m&&++X===u&&(j=_),(oe=Y.nextSibling)!==null)break;Y=K,K=Y.parentNode}Y=oe}o=C===-1||j===-1?null:{start:C,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(Xu={focusedElem:t,selectionRange:o},Dr=!1,le=r;le!==null;)if(r=le,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,le=t;else for(;le!==null;){r=le;try{var ue=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var he=ue.memoizedProps,ot=ue.memoizedState,F=r.stateNode,M=F.getSnapshotBeforeUpdate(r.elementType===r.type?he:Dn(r.type,he),ot);F.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ee){st(r,r.return,ee)}if(t=r.sibling,t!==null){t.return=r.return,le=t;break}le=r.return}return ue=hm,hm=!1,ue}function Qo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var m=h.destroy;h.destroy=void 0,m!==void 0&&Lc(r,o,m)}h=h.next}while(h!==u)}}function Il(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Fc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function dm(t){var r=t.alternate;r!==null&&(t.alternate=null,dm(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[qn],delete r[Lo],delete r[ec],delete r[Iv],delete r[Av])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fm(t){return t.tag===5||t.tag===3||t.tag===4}function mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=tl));else if(u!==4&&(t=t.child,t!==null))for(bc(t,r,o),t=t.sibling;t!==null;)bc(t,r,o),t=t.sibling}function Uc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Uc(t,r,o),t=t.sibling;t!==null;)Uc(t,r,o),t=t.sibling}var Ct=null,jn=!1;function Br(t,r,o){for(o=o.child;o!==null;)pm(t,r,o),o=o.sibling}function pm(t,r,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Es,o)}catch{}switch(o.tag){case 5:Ot||Li(o,r);case 6:var u=Ct,h=jn;Ct=null,Br(t,r,o),Ct=u,jn=h,Ct!==null&&(jn?(t=Ct,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Ct.removeChild(o.stateNode));break;case 18:Ct!==null&&(jn?(t=Ct,o=o.stateNode,t.nodeType===8?Zu(t.parentNode,o):t.nodeType===1&&Zu(t,o),Pn(t)):Zu(Ct,o.stateNode));break;case 4:u=Ct,h=jn,Ct=o.stateNode.containerInfo,jn=!0,Br(t,r,o),Ct=u,jn=h;break;case 0:case 11:case 14:case 15:if(!Ot&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var m=h,_=m.destroy;m=m.tag,_!==void 0&&((m&2)!==0||(m&4)!==0)&&Lc(o,r,_),h=h.next}while(h!==u)}Br(t,r,o);break;case 1:if(!Ot&&(Li(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(C){st(o,r,C)}Br(t,r,o);break;case 21:Br(t,r,o);break;case 22:o.mode&1?(Ot=(u=Ot)||o.memoizedState!==null,Br(t,r,o),Ot=u):Br(t,r,o);break;default:Br(t,r,o)}}function gm(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new zv),r.forEach(function(u){var h=Yv.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Mn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var m=t,_=r,C=_;e:for(;C!==null;){switch(C.tag){case 5:Ct=C.stateNode,jn=!1;break e;case 3:Ct=C.stateNode.containerInfo,jn=!0;break e;case 4:Ct=C.stateNode.containerInfo,jn=!0;break e}C=C.return}if(Ct===null)throw Error(n(160));pm(m,_,h),Ct=null,jn=!1;var j=h.alternate;j!==null&&(j.return=null),h.return=null}catch(B){st(h,r,B)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)ym(r,t),r=r.sibling}function ym(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(r,t),Qn(t),u&4){try{Qo(3,t,t.return),Il(3,t)}catch(he){st(t,t.return,he)}try{Qo(5,t,t.return)}catch(he){st(t,t.return,he)}}break;case 1:Mn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return);break;case 5:if(Mn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return),t.flags&32){var h=t.stateNode;try{Ar(h,"")}catch(he){st(t,t.return,he)}}if(u&4&&(h=t.stateNode,h!=null)){var m=t.memoizedProps,_=o!==null?o.memoizedProps:m,C=t.type,j=t.updateQueue;if(t.updateQueue=null,j!==null)try{C==="input"&&m.type==="radio"&&m.name!=null&&so(h,m),mo(C,_);var B=mo(C,m);for(_=0;_<j.length;_+=2){var X=j[_],Y=j[_+1];X==="style"?co(h,Y):X==="dangerouslySetInnerHTML"?lo(h,Y):X==="children"?Ar(h,Y):re(h,X,Y,B)}switch(C){case"input":io(h,m);break;case"textarea":Zs(h,m);break;case"select":var K=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var oe=m.value;oe!=null?sr(h,!!m.multiple,oe,!1):K!==!!m.multiple&&(m.defaultValue!=null?sr(h,!!m.multiple,m.defaultValue,!0):sr(h,!!m.multiple,m.multiple?[]:"",!1))}h[Lo]=m}catch(he){st(t,t.return,he)}}break;case 6:if(Mn(r,t),Qn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,m=t.memoizedProps;try{h.nodeValue=m}catch(he){st(t,t.return,he)}}break;case 3:if(Mn(r,t),Qn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Pn(r.containerInfo)}catch(he){st(t,t.return,he)}break;case 4:Mn(r,t),Qn(t);break;case 13:Mn(r,t),Qn(t),h=t.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||($c=We())),u&4&&gm(t);break;case 22:if(X=o!==null&&o.memoizedState!==null,t.mode&1?(Ot=(B=Ot)||X,Mn(r,t),Ot=B):Mn(r,t),Qn(t),u&8192){if(B=t.memoizedState!==null,(t.stateNode.isHidden=B)&&!X&&(t.mode&1)!==0)for(le=t,X=t.child;X!==null;){for(Y=le=X;le!==null;){switch(K=le,oe=K.child,K.tag){case 0:case 11:case 14:case 15:Qo(4,K,K.return);break;case 1:Li(K,K.return);var ue=K.stateNode;if(typeof ue.componentWillUnmount=="function"){u=K,o=K.return;try{r=u,ue.props=r.memoizedProps,ue.state=r.memoizedState,ue.componentWillUnmount()}catch(he){st(u,o,he)}}break;case 5:Li(K,K.return);break;case 22:if(K.memoizedState!==null){wm(Y);continue}}oe!==null?(oe.return=K,le=oe):wm(Y)}X=X.sibling}e:for(X=null,Y=t;;){if(Y.tag===5){if(X===null){X=Y;try{h=Y.stateNode,B?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(C=Y.stateNode,j=Y.memoizedProps.style,_=j!=null&&j.hasOwnProperty("display")?j.display:null,C.style.display=uo("display",_))}catch(he){st(t,t.return,he)}}}else if(Y.tag===6){if(X===null)try{Y.stateNode.nodeValue=B?"":Y.memoizedProps}catch(he){st(t,t.return,he)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===t)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===t)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===t)break e;X===Y&&(X=null),Y=Y.return}X===Y&&(X=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Mn(r,t),Qn(t),u&4&&gm(t);break;case 21:break;default:Mn(r,t),Qn(t)}}function Qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(fm(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Ar(h,""),u.flags&=-33);var m=mm(t);Uc(t,m,h);break;case 3:case 4:var _=u.stateNode.containerInfo,C=mm(t);bc(t,C,_);break;default:throw Error(n(161))}}catch(j){st(t,t.return,j)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function $v(t,r,o){le=t,vm(t)}function vm(t,r,o){for(var u=(t.mode&1)!==0;le!==null;){var h=le,m=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||Sl;if(!_){var C=h.alternate,j=C!==null&&C.memoizedState!==null||Ot;C=Sl;var B=Ot;if(Sl=_,(Ot=j)&&!B)for(le=h;le!==null;)_=le,j=_.child,_.tag===22&&_.memoizedState!==null?Em(h):j!==null?(j.return=_,le=j):Em(h);for(;m!==null;)le=m,vm(m),m=m.sibling;le=h,Sl=C,Ot=B}_m(t)}else(h.subtreeFlags&8772)!==0&&m!==null?(m.return=h,le=m):_m(t)}}function _m(t){for(;le!==null;){var r=le;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ot||Il(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ot)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Dn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var m=r.updateQueue;m!==null&&wf(r,m,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}wf(r,_,o)}break;case 5:var C=r.stateNode;if(o===null&&r.flags&4){o=C;var j=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&o.focus();break;case"img":j.src&&(o.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var B=r.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var Y=X.dehydrated;Y!==null&&Pn(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ot||r.flags&512&&Fc(r)}catch(K){st(r,r.return,K)}}if(r===t){le=null;break}if(o=r.sibling,o!==null){o.return=r.return,le=o;break}le=r.return}}function wm(t){for(;le!==null;){var r=le;if(r===t){le=null;break}var o=r.sibling;if(o!==null){o.return=r.return,le=o;break}le=r.return}}function Em(t){for(;le!==null;){var r=le;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Il(4,r)}catch(j){st(r,o,j)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(j){st(r,h,j)}}var m=r.return;try{Fc(r)}catch(j){st(r,m,j)}break;case 5:var _=r.return;try{Fc(r)}catch(j){st(r,_,j)}}}catch(j){st(r,r.return,j)}if(r===t){le=null;break}var C=r.sibling;if(C!==null){C.return=r.return,le=C;break}le=r.return}}var Hv=Math.ceil,Al=ce.ReactCurrentDispatcher,zc=ce.ReactCurrentOwner,yn=ce.ReactCurrentBatchConfig,Fe=0,St=null,ct=null,Pt=0,an=0,Fi=Lr(0),vt=0,Ko=null,Ms=0,Nl=0,Bc=0,Xo=null,Kt=null,$c=0,bi=1/0,_r=null,xl=!1,Hc=null,$r=null,Cl=!1,Hr=null,Pl=0,Yo=0,qc=null,Rl=-1,kl=0;function $t(){return(Fe&6)!==0?We():Rl!==-1?Rl:Rl=We()}function qr(t){return(t.mode&1)===0?1:(Fe&2)!==0&&Pt!==0?Pt&-Pt:xv.transition!==null?(kl===0&&(kl=Ss()),kl):(t=ke,t!==0||(t=window.event,t=t===void 0?16:Ao(t.type)),t)}function On(t,r,o,u){if(50<Yo)throw Yo=0,qc=null,Error(n(185));Pr(t,o,u),((Fe&2)===0||t!==St)&&(t===St&&((Fe&2)===0&&(Nl|=o),vt===4&&Wr(t,Pt)),Xt(t,u),o===1&&Fe===0&&(r.mode&1)===0&&(bi=We()+500,il&&br()))}function Xt(t,r){var o=t.callbackNode;ar(t,r);var u=Ts(t,t===St?Pt:0);if(u===0)o!==null&&wo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&wo(o),r===1)t.tag===0?Nv(Sm.bind(null,t)):lf(Sm.bind(null,t)),Tv(function(){(Fe&6)===0&&br()}),o=null;else{switch(kr(u)){case 1:o=ws;break;case 4:o=Nr;break;case 16:o=cn;break;case 536870912:o=ka;break;default:o=cn}o=km(o,Tm.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Tm(t,r){if(Rl=-1,kl=0,(Fe&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Ui()&&t.callbackNode!==o)return null;var u=Ts(t,t===St?Pt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=Vl(t,u);else{r=u;var h=Fe;Fe|=2;var m=Am();(St!==t||Pt!==r)&&(_r=null,bi=We()+500,Ls(t,r));do try{Gv();break}catch(C){Im(t,C)}while(!0);uc(),Al.current=m,Fe=h,ct!==null?r=0:(St=null,Pt=0,r=vt)}if(r!==0){if(r===2&&(h=tn(t),h!==0&&(u=h,r=Wc(t,h))),r===1)throw o=Ko,Ls(t,0),Wr(t,u),Xt(t,We()),o;if(r===6)Wr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!qv(h)&&(r=Vl(t,u),r===2&&(m=tn(t),m!==0&&(u=m,r=Wc(t,m))),r===1))throw o=Ko,Ls(t,0),Wr(t,u),Xt(t,We()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Fs(t,Kt,_r);break;case 3:if(Wr(t,u),(u&130023424)===u&&(r=$c+500-We(),10<r)){if(Ts(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){$t(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Ju(Fs.bind(null,t,Kt,_r),r);break}Fs(t,Kt,_r);break;case 4:if(Wr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-Ut(u);m=1<<_,_=r[_],_>h&&(h=_),u&=~m}if(u=h,u=We()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Hv(u/1960))-u,10<u){t.timeoutHandle=Ju(Fs.bind(null,t,Kt,_r),u);break}Fs(t,Kt,_r);break;case 5:Fs(t,Kt,_r);break;default:throw Error(n(329))}}}return Xt(t,We()),t.callbackNode===o?Tm.bind(null,t):null}function Wc(t,r){var o=Xo;return t.current.memoizedState.isDehydrated&&(Ls(t,r).flags|=256),t=Vl(t,r),t!==2&&(r=Kt,Kt=o,r!==null&&Gc(r)),t}function Gc(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function qv(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],m=h.getSnapshot;h=h.value;try{if(!kn(m(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Wr(t,r){for(r&=~Bc,r&=~Nl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ut(r),u=1<<o;t[o]=-1,r&=~u}}function Sm(t){if((Fe&6)!==0)throw Error(n(327));Ui();var r=Ts(t,0);if((r&1)===0)return Xt(t,We()),null;var o=Vl(t,r);if(t.tag!==0&&o===2){var u=tn(t);u!==0&&(r=u,o=Wc(t,u))}if(o===1)throw o=Ko,Ls(t,0),Wr(t,r),Xt(t,We()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Fs(t,Kt,_r),Xt(t,We()),null}function Qc(t,r){var o=Fe;Fe|=1;try{return t(r)}finally{Fe=o,Fe===0&&(bi=We()+500,il&&br())}}function Os(t){Hr!==null&&Hr.tag===0&&(Fe&6)===0&&Ui();var r=Fe;Fe|=1;var o=yn.transition,u=ke;try{if(yn.transition=null,ke=1,t)return t()}finally{ke=u,yn.transition=o,Fe=r,(Fe&6)===0&&br()}}function Kc(){an=Fi.current,Xe(Fi)}function Ls(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Ev(o)),ct!==null)for(o=ct.return;o!==null;){var u=o;switch(sc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&rl();break;case 3:Mi(),Xe(Wt),Xe(Dt),yc();break;case 5:pc(u);break;case 4:Mi();break;case 13:Xe(et);break;case 19:Xe(et);break;case 10:cc(u.type._context);break;case 22:case 23:Kc()}o=o.return}if(St=t,ct=t=Gr(t.current,null),Pt=an=r,vt=0,Ko=null,Bc=Nl=Ms=0,Kt=Xo=null,Vs!==null){for(r=0;r<Vs.length;r++)if(o=Vs[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,m=o.pending;if(m!==null){var _=m.next;m.next=h,u.next=_}o.pending=u}Vs=null}return t}function Im(t,r){do{var o=ct;try{if(uc(),pl.current=_l,gl){for(var u=tt.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}gl=!1}if(js=0,Tt=yt=tt=null,$o=!1,Ho=0,zc.current=null,o===null||o.return===null){vt=1,Ko=r,ct=null;break}e:{var m=t,_=o.return,C=o,j=r;if(r=Pt,C.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var B=j,X=C,Y=X.tag;if((X.mode&1)===0&&(Y===0||Y===11||Y===15)){var K=X.alternate;K?(X.updateQueue=K.updateQueue,X.memoizedState=K.memoizedState,X.lanes=K.lanes):(X.updateQueue=null,X.memoizedState=null)}var oe=Kf(_);if(oe!==null){oe.flags&=-257,Xf(oe,_,C,m,r),oe.mode&1&&Qf(m,B,r),r=oe,j=B;var ue=r.updateQueue;if(ue===null){var he=new Set;he.add(j),r.updateQueue=he}else ue.add(j);break e}else{if((r&1)===0){Qf(m,B,r),Xc();break e}j=Error(n(426))}}else if(Ze&&C.mode&1){var ot=Kf(_);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),Xf(ot,_,C,m,r),ac(Oi(j,C));break e}}m=j=Oi(j,C),vt!==4&&(vt=2),Xo===null?Xo=[m]:Xo.push(m),m=_;do{switch(m.tag){case 3:m.flags|=65536,r&=-r,m.lanes|=r;var F=Wf(m,j,r);_f(m,F);break e;case 1:C=j;var M=m.type,b=m.stateNode;if((m.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($r===null||!$r.has(b)))){m.flags|=65536,r&=-r,m.lanes|=r;var ee=Gf(m,C,r);_f(m,ee);break e}}m=m.return}while(m!==null)}xm(o)}catch(de){r=de,ct===o&&o!==null&&(ct=o=o.return);continue}break}while(!0)}function Am(){var t=Al.current;return Al.current=_l,t===null?_l:t}function Xc(){(vt===0||vt===3||vt===2)&&(vt=4),St===null||(Ms&268435455)===0&&(Nl&268435455)===0||Wr(St,Pt)}function Vl(t,r){var o=Fe;Fe|=2;var u=Am();(St!==t||Pt!==r)&&(_r=null,Ls(t,r));do try{Wv();break}catch(h){Im(t,h)}while(!0);if(uc(),Fe=o,Al.current=u,ct!==null)throw Error(n(261));return St=null,Pt=0,vt}function Wv(){for(;ct!==null;)Nm(ct)}function Gv(){for(;ct!==null&&!Pa();)Nm(ct)}function Nm(t){var r=Rm(t.alternate,t,an);t.memoizedProps=t.pendingProps,r===null?xm(t):ct=r,zc.current=null}function xm(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=bv(o,r,an),o!==null){ct=o;return}}else{if(o=Uv(o,r),o!==null){o.flags&=32767,ct=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ct=null;return}}if(r=r.sibling,r!==null){ct=r;return}ct=r=t}while(r!==null);vt===0&&(vt=5)}function Fs(t,r,o){var u=ke,h=yn.transition;try{yn.transition=null,ke=1,Qv(t,r,o,u)}finally{yn.transition=h,ke=u}return null}function Qv(t,r,o,u){do Ui();while(Hr!==null);if((Fe&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var m=o.lanes|o.childLanes;if(He(t,m),t===St&&(ct=St=null,Pt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Cl||(Cl=!0,km(cn,function(){return Ui(),null})),m=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||m){m=yn.transition,yn.transition=null;var _=ke;ke=1;var C=Fe;Fe|=4,zc.current=null,Bv(t,o),ym(o,t),mv(Xu),Dr=!!Ku,Xu=Ku=null,t.current=o,$v(o),Du(),Fe=C,ke=_,yn.transition=m}else t.current=o;if(Cl&&(Cl=!1,Hr=t,Pl=h),m=t.pendingLanes,m===0&&($r=null),Va(o.stateNode),Xt(t,We()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(xl)throw xl=!1,t=Hc,Hc=null,t;return(Pl&1)!==0&&t.tag!==0&&Ui(),m=t.pendingLanes,(m&1)!==0?t===qc?Yo++:(Yo=0,qc=t):Yo=0,br(),null}function Ui(){if(Hr!==null){var t=kr(Pl),r=yn.transition,o=ke;try{if(yn.transition=null,ke=16>t?16:t,Hr===null)var u=!1;else{if(t=Hr,Hr=null,Pl=0,(Fe&6)!==0)throw Error(n(331));var h=Fe;for(Fe|=4,le=t.current;le!==null;){var m=le,_=m.child;if((le.flags&16)!==0){var C=m.deletions;if(C!==null){for(var j=0;j<C.length;j++){var B=C[j];for(le=B;le!==null;){var X=le;switch(X.tag){case 0:case 11:case 15:Qo(8,X,m)}var Y=X.child;if(Y!==null)Y.return=X,le=Y;else for(;le!==null;){X=le;var K=X.sibling,oe=X.return;if(dm(X),X===B){le=null;break}if(K!==null){K.return=oe,le=K;break}le=oe}}}var ue=m.alternate;if(ue!==null){var he=ue.child;if(he!==null){ue.child=null;do{var ot=he.sibling;he.sibling=null,he=ot}while(he!==null)}}le=m}}if((m.subtreeFlags&2064)!==0&&_!==null)_.return=m,le=_;else e:for(;le!==null;){if(m=le,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Qo(9,m,m.return)}var F=m.sibling;if(F!==null){F.return=m.return,le=F;break e}le=m.return}}var M=t.current;for(le=M;le!==null;){_=le;var b=_.child;if((_.subtreeFlags&2064)!==0&&b!==null)b.return=_,le=b;else e:for(_=M;le!==null;){if(C=le,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Il(9,C)}}catch(de){st(C,C.return,de)}if(C===_){le=null;break e}var ee=C.sibling;if(ee!==null){ee.return=C.return,le=ee;break e}le=C.return}}if(Fe=h,br(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Es,t)}catch{}u=!0}return u}finally{ke=o,yn.transition=r}}return!1}function Cm(t,r,o){r=Oi(o,r),r=Wf(t,r,1),t=zr(t,r,1),r=$t(),t!==null&&(Pr(t,1,r),Xt(t,r))}function st(t,r,o){if(t.tag===3)Cm(t,t,o);else for(;r!==null;){if(r.tag===3){Cm(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($r===null||!$r.has(u))){t=Oi(o,t),t=Gf(r,t,1),r=zr(r,t,1),t=$t(),r!==null&&(Pr(r,1,t),Xt(r,t));break}}r=r.return}}function Kv(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=$t(),t.pingedLanes|=t.suspendedLanes&o,St===t&&(Pt&o)===o&&(vt===4||vt===3&&(Pt&130023424)===Pt&&500>We()-$c?Ls(t,0):Bc|=o),Xt(t,r)}function Pm(t,r){r===0&&((t.mode&1)===0?r=1:(r=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var o=$t();t=gr(t,r),t!==null&&(Pr(t,r,o),Xt(t,o))}function Xv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Pm(t,o)}function Yv(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),Pm(t,o)}var Rm;Rm=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Wt.current)Qt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Qt=!1,Fv(t,r,o);Qt=(t.flags&131072)!==0}else Qt=!1,Ze&&(r.flags&1048576)!==0&&uf(r,al,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;Tl(t,r),t=r.pendingProps;var h=Ci(r,Dt.current);ji(r,o),h=wc(null,r,u,t,h,o);var m=Ec();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gt(u)?(m=!0,sl(r)):m=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,fc(r),h.updater=wl,r.stateNode=h,h._reactInternals=r,xc(r,u,t,o),r=kc(null,r,u,!0,m,o)):(r.tag=0,Ze&&m&&rc(r),Bt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(Tl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Zv(u),t=Dn(u,t),h){case 0:r=Rc(null,r,u,t,o);break e;case 1:r=nm(null,r,u,t,o);break e;case 11:r=Yf(null,r,u,t,o);break e;case 14:r=Jf(null,r,u,Dn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),Rc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),nm(t,r,u,h,o);case 3:e:{if(rm(r),t===null)throw Error(n(387));u=r.pendingProps,m=r.memoizedState,h=m.element,vf(t,r),fl(r,u,null,o);var _=r.memoizedState;if(u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){h=Oi(Error(n(423)),r),r=sm(t,r,u,o,h);break e}else if(u!==h){h=Oi(Error(n(424)),r),r=sm(t,r,u,o,h);break e}else for(on=Or(r.stateNode.containerInfo.firstChild),sn=r,Ze=!0,Vn=null,o=gf(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ki(),u===h){r=vr(t,r,o);break e}Bt(t,r,u,o)}r=r.child}return r;case 5:return Ef(r),t===null&&oc(r),u=r.type,h=r.pendingProps,m=t!==null?t.memoizedProps:null,_=h.children,Yu(u,h)?_=null:m!==null&&Yu(u,m)&&(r.flags|=32),tm(t,r),Bt(t,r,_,o),r.child;case 6:return t===null&&oc(r),null;case 13:return im(t,r,o);case 4:return mc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Vi(r,null,u,o):Bt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),Yf(t,r,u,h,o);case 7:return Bt(t,r,r.pendingProps,o),r.child;case 8:return Bt(t,r,r.pendingProps.children,o),r.child;case 12:return Bt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,m=r.memoizedProps,_=h.value,Ge(cl,u._currentValue),u._currentValue=_,m!==null)if(kn(m.value,_)){if(m.children===h.children&&!Wt.current){r=vr(t,r,o);break e}}else for(m=r.child,m!==null&&(m.return=r);m!==null;){var C=m.dependencies;if(C!==null){_=m.child;for(var j=C.firstContext;j!==null;){if(j.context===u){if(m.tag===1){j=yr(-1,o&-o),j.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?j.next=j:(j.next=X.next,X.next=j),B.pending=j}}m.lanes|=o,j=m.alternate,j!==null&&(j.lanes|=o),hc(m.return,o,r),C.lanes|=o;break}j=j.next}}else if(m.tag===10)_=m.type===r.type?null:m.child;else if(m.tag===18){if(_=m.return,_===null)throw Error(n(341));_.lanes|=o,C=_.alternate,C!==null&&(C.lanes|=o),hc(_,o,r),_=m.sibling}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===r){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}Bt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,ji(r,o),h=pn(h),u=u(h),r.flags|=1,Bt(t,r,u,o),r.child;case 14:return u=r.type,h=Dn(u,r.pendingProps),h=Dn(u.type,h),Jf(t,r,u,h,o);case 15:return Zf(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),Tl(t,r),r.tag=1,Gt(u)?(t=!0,sl(r)):t=!1,ji(r,o),Hf(r,u,h),xc(r,u,h,o),kc(null,r,u,!0,t,o);case 19:return am(t,r,o);case 22:return em(t,r,o)}throw Error(n(156,r.tag))};function km(t,r){return ai(t,r)}function Jv(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,r,o,u){return new Jv(t,r,o,u)}function Yc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zv(t){if(typeof t=="function")return Yc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===V)return 11;if(t===Pe)return 14}return 2}function Gr(t,r){var o=t.alternate;return o===null?(o=vn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Dl(t,r,o,u,h,m){var _=2;if(u=t,typeof t=="function")Yc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case k:return bs(o.children,h,m,r);case S:_=8,h|=8;break;case R:return t=vn(12,o,r,h|2),t.elementType=R,t.lanes=m,t;case I:return t=vn(13,o,r,h),t.elementType=I,t.lanes=m,t;case _e:return t=vn(19,o,r,h),t.elementType=_e,t.lanes=m,t;case Ie:return jl(o,h,m,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:_=10;break e;case A:_=9;break e;case V:_=11;break e;case Pe:_=14;break e;case De:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=vn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=m,r}function bs(t,r,o,u){return t=vn(7,t,u,r),t.lanes=o,t}function jl(t,r,o,u){return t=vn(22,t,u,r),t.elementType=Ie,t.lanes=o,t.stateNode={isHidden:!1},t}function Jc(t,r,o){return t=vn(6,t,null,r),t.lanes=o,t}function Zc(t,r,o){return r=vn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function e_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function eh(t,r,o,u,h,m,_,C,j){return t=new e_(t,r,o,C,j),r===1?(r=1,m===!0&&(r|=8)):r=0,m=vn(3,null,null,r),t.current=m,m.stateNode=t,m.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},fc(m),t}function t_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function Vm(t){if(!t)return Fr;t=t._reactInternals;e:{if(In(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Gt(o))return of(t,o,r)}return r}function Dm(t,r,o,u,h,m,_,C,j){return t=eh(o,u,!0,t,h,m,_,C,j),t.context=Vm(null),o=t.current,u=$t(),h=qr(o),m=yr(u,h),m.callback=r??null,zr(o,m,h),t.current.lanes=h,Pr(t,h,u),Xt(t,u),t}function Ml(t,r,o,u){var h=r.current,m=$t(),_=qr(h);return o=Vm(o),r.context===null?r.context=o:r.pendingContext=o,r=yr(m,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=zr(h,r,_),t!==null&&(On(t,h,_,m),dl(t,h,_)),_}function Ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jm(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function th(t,r){jm(t,r),(t=t.alternate)&&jm(t,r)}function n_(){return null}var Mm=typeof reportError=="function"?reportError:function(t){console.error(t)};function nh(t){this._internalRoot=t}Ll.prototype.render=nh.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Ml(t,r,null,null)},Ll.prototype.unmount=nh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Os(function(){Ml(null,t,null,null)}),r[dr]=null}};function Ll(t){this._internalRoot=t}Ll.prototype.unstable_scheduleHydration=function(t){if(t){var r=La();t={blockedOn:null,target:t,priority:r};for(var o=0;o<zn.length&&r!==0&&r<zn[o].priority;o++);zn.splice(o,0,t),o===0&&Ua(t)}};function rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Om(){}function r_(t,r,o,u,h){if(h){if(typeof u=="function"){var m=u;u=function(){var B=Ol(_);m.call(B)}}var _=Dm(r,u,t,0,null,!1,!1,"",Om);return t._reactRootContainer=_,t[dr]=_.current,Mo(t.nodeType===8?t.parentNode:t),Os(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var C=u;u=function(){var B=Ol(j);C.call(B)}}var j=eh(t,0,!1,null,null,!1,!1,"",Om);return t._reactRootContainer=j,t[dr]=j.current,Mo(t.nodeType===8?t.parentNode:t),Os(function(){Ml(r,j,o,u)}),j}function bl(t,r,o,u,h){var m=o._reactRootContainer;if(m){var _=m;if(typeof h=="function"){var C=h;h=function(){var j=Ol(_);C.call(j)}}Ml(r,_,t,h)}else _=r_(o,r,t,h,u);return Ol(_)}Ma=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=xr(r.pendingLanes);o!==0&&(Rr(r,o|1),Xt(r,We()),(Fe&6)===0&&(bi=We()+500,br()))}break;case 13:Os(function(){var u=gr(t,1);if(u!==null){var h=$t();On(u,t,1,h)}}),th(t,1)}},ci=function(t){if(t.tag===13){var r=gr(t,134217728);if(r!==null){var o=$t();On(r,t,134217728,o)}th(t,134217728)}},Oa=function(t){if(t.tag===13){var r=qr(t),o=gr(t,r);if(o!==null){var u=$t();On(o,t,r,u)}th(t,r)}},La=function(){return ke},Fa=function(t,r){var o=ke;try{return ke=t,r()}finally{ke=o}},ti=function(t,r,o){switch(r){case"input":if(io(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=nl(u);if(!h)throw Error(n(90));Ks(u),io(u,h)}}}break;case"textarea":Zs(t,o);break;case"select":r=o.value,r!=null&&sr(t,!!o.multiple,r,!1)}},gs=Qc,go=Os;var s_={usingClientEntryPoint:!1,Events:[Fo,Ni,nl,bn,po,Qc]},Jo={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i_={bundleType:Jo.bundleType,version:Jo.version,rendererPackageName:Jo.rendererPackageName,rendererConfig:Jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_o(t),t===null?null:t.stateNode},findFiberByHostInstance:Jo.findFiberByHostInstance||n_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Es=Ul.inject(i_),en=Ul}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s_,Yt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rh(r))throw Error(n(200));return t_(t,r,null,o)},Yt.createRoot=function(t,r){if(!rh(t))throw Error(n(299));var o=!1,u="",h=Mm;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=eh(t,1,!1,null,null,o,!1,u,h),t[dr]=r.current,Mo(t.nodeType===8?t.parentNode:t),new nh(r)},Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=_o(r),t=t===null?null:t.stateNode,t},Yt.flushSync=function(t){return Os(t)},Yt.hydrate=function(t,r,o){if(!Fl(r))throw Error(n(200));return bl(null,t,r,!0,o)},Yt.hydrateRoot=function(t,r,o){if(!rh(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,m="",_=Mm;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Dm(r,null,t,1,o??null,h,!1,m,_),t[dr]=r.current,Mo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Ll(r)},Yt.render=function(t,r,o){if(!Fl(r))throw Error(n(200));return bl(null,t,r,!1,o)},Yt.unmountComponentAtNode=function(t){if(!Fl(t))throw Error(n(40));return t._reactRootContainer?(Os(function(){bl(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1},Yt.unstable_batchedUpdates=Qc,Yt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Fl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return bl(t,r,o,!1,u)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var Hm;function f_(){if(Hm)return oh.exports;Hm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),oh.exports=d_(),oh.exports}var qm;function m_(){if(qm)return zl;qm=1;var s=f_();return zl.createRoot=s.createRoot,zl.hydrateRoot=s.hydrateRoot,zl}var p_=m_();const g_=()=>{};var Wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},y_=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const a=s[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[n++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[n++],d=s[n++],g=s[n++],v=((a&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const c=s[n++],d=s[n++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},og={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],d=a+1<s.length,g=d?s[a+1]:0,v=a+2<s.length,w=v?s[a+2]:0,N=c>>2,x=(c&3)<<4|g>>4;let T=(g&15)<<2|w>>6,P=w&63;v||(P=64,d||(T=64)),i.push(n[N],n[x],n[T],n[P])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(ig(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):y_(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=n[s.charAt(a++)],g=a<s.length?n[s.charAt(a)]:0;++a;const w=a<s.length?n[s.charAt(a)]:64;++a;const x=a<s.length?n[s.charAt(a)]:64;if(++a,c==null||g==null||w==null||x==null)throw new v_;const T=c<<2|g>>4;if(i.push(T),w!==64){const P=g<<4&240|w>>2;if(i.push(P),x!==64){const U=w<<6&192|x;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class v_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const __=function(s){const e=ig(s);return og.encodeByteArray(e,!0)},Zl=function(s){return __(s).replace(/\./g,"")},w_=function(s){try{return og.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=()=>E_().__FIREBASE_DEFAULTS__,S_=()=>{if(typeof process>"u"||typeof Wm>"u")return;const s=Wm.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},I_=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&w_(s[1]);return e&&JSON.parse(e)},Bh=()=>{try{return g_()||T_()||S_()||I_()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},A_=s=>{var e,n;return(n=(e=Bh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},N_=s=>{const e=A_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ag=()=>{var s;return(s=Bh())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C_(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Zl(JSON.stringify(n)),Zl(JSON.stringify(d)),""].join(".")}const sa={};function R_(){const s={prod:[],emulator:[]};for(const e of Object.keys(sa))sa[e]?s.emulator.push(e):s.prod.push(e);return s}function k_(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Gm=!1;function V_(s,e){if(typeof window>"u"||typeof document>"u"||!$h(window.location.host)||sa[s]===e||sa[s]||Gm)return;sa[s]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",c=R_().prod.length>0;function d(){const T=document.getElementById(i);T&&T.remove()}function g(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function v(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function w(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Gm=!0,d()},T}function N(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=k_(i),P=n("text"),U=document.getElementById(P)||document.createElement("span"),q=n("learnmore"),H=document.getElementById(q)||document.createElement("a"),J=n("preprendIcon"),Z=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const re=T.element;g(re),N(H,q);const ce=w();v(Z,J),re.append(Z,U,H,ce),document.body.appendChild(re)}c?(U.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j_(){var s;const e=(s=Bh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M_(){return!j_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O_(){try{return typeof indexedDB=="object"}catch{return!1}}function L_(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="FirebaseError";class Ji extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=F_,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lg.prototype.create)}}class lg{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?b_(c,i):"Error",g=`${this.serviceName}: ${d} (${a}).`;return new Ji(a,g,i)}}function b_(s,e){return s.replace(U_,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const U_=/\{\$([^}]+)}/g;function eu(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const c=s[a],d=e[a];if(Qm(c)&&Qm(d)){if(!eu(c,d))return!1}else if(c!==d)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function Qm(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(s){return s&&s._delegate?s._delegate:s}class ua{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new x_;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($_(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);i===g&&d.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:B_(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B_(s){return s===zs?void 0:s}function $_(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new z_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Le||(Le={}));const q_={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},W_=Le.INFO,G_={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},Q_=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=G_[e];if(a)console[a](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ug{constructor(e){this.name=e,this._logLevel=W_,this._logHandler=Q_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const K_=(s,e)=>e.some(n=>s instanceof n);let Km,Xm;function X_(){return Km||(Km=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y_(){return Xm||(Xm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cg=new WeakMap,yh=new WeakMap,hg=new WeakMap,uh=new WeakMap,Hh=new WeakMap;function J_(s){const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(Xr(s.result)),a()},d=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&cg.set(n,s)}).catch(()=>{}),Hh.set(e,s),e}function Z_(s){if(yh.has(s))return;const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});yh.set(s,e)}let vh={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return yh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||hg.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function e0(s){vh=s(vh)}function t0(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(ch(this),e,...n);return hg.set(i,e.sort?e.sort():[e]),Xr(i)}:Y_().includes(s)?function(...e){return s.apply(ch(this),e),Xr(cg.get(this))}:function(...e){return Xr(s.apply(ch(this),e))}}function n0(s){return typeof s=="function"?t0(s):(s instanceof IDBTransaction&&Z_(s),K_(s,X_())?new Proxy(s,vh):s)}function Xr(s){if(s instanceof IDBRequest)return J_(s);if(uh.has(s))return uh.get(s);const e=n0(s);return e!==s&&(uh.set(s,e),Hh.set(e,s)),e}const ch=s=>Hh.get(s);function r0(s,e,{blocked:n,upgrade:i,blocking:a,terminated:c}={}){const d=indexedDB.open(s,e),g=Xr(d);return i&&d.addEventListener("upgradeneeded",v=>{i(Xr(d.result),v.oldVersion,v.newVersion,Xr(d.transaction),v)}),n&&d.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),g.then(v=>{c&&v.addEventListener("close",()=>c()),a&&v.addEventListener("versionchange",w=>a(w.oldVersion,w.newVersion,w))}).catch(()=>{}),g}const s0=["get","getKey","getAll","getAllKeys","count"],i0=["put","add","delete","clear"],hh=new Map;function Ym(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(hh.get(e))return hh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=i0.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||s0.includes(n)))return;const c=async function(d,...g){const v=this.transaction(d,a?"readwrite":"readonly");let w=v.store;return i&&(w=w.index(g.shift())),(await Promise.all([w[n](...g),a&&v.done]))[0]};return hh.set(e,c),c}e0(s=>({...s,get:(e,n,i)=>Ym(e,n)||s.get(e,n,i),has:(e,n)=>!!Ym(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(a0(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function a0(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _h="@firebase/app",Jm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new ug("@firebase/app"),l0="@firebase/app-compat",u0="@firebase/analytics-compat",c0="@firebase/analytics",h0="@firebase/app-check-compat",d0="@firebase/app-check",f0="@firebase/auth",m0="@firebase/auth-compat",p0="@firebase/database",g0="@firebase/data-connect",y0="@firebase/database-compat",v0="@firebase/functions",_0="@firebase/functions-compat",w0="@firebase/installations",E0="@firebase/installations-compat",T0="@firebase/messaging",S0="@firebase/messaging-compat",I0="@firebase/performance",A0="@firebase/performance-compat",N0="@firebase/remote-config",x0="@firebase/remote-config-compat",C0="@firebase/storage",P0="@firebase/storage-compat",R0="@firebase/firestore",k0="@firebase/ai",V0="@firebase/firestore-compat",D0="firebase",j0="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="[DEFAULT]",M0={[_h]:"fire-core",[l0]:"fire-core-compat",[c0]:"fire-analytics",[u0]:"fire-analytics-compat",[d0]:"fire-app-check",[h0]:"fire-app-check-compat",[f0]:"fire-auth",[m0]:"fire-auth-compat",[p0]:"fire-rtdb",[g0]:"fire-data-connect",[y0]:"fire-rtdb-compat",[v0]:"fire-fn",[_0]:"fire-fn-compat",[w0]:"fire-iid",[E0]:"fire-iid-compat",[T0]:"fire-fcm",[S0]:"fire-fcm-compat",[I0]:"fire-perf",[A0]:"fire-perf-compat",[N0]:"fire-rc",[x0]:"fire-rc-compat",[C0]:"fire-gcs",[P0]:"fire-gcs-compat",[R0]:"fire-fst",[V0]:"fire-fst-compat",[k0]:"fire-vertex","fire-js":"fire-js",[D0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new Map,O0=new Map,Eh=new Map;function Zm(s,e){try{s.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function nu(s){const e=s.name;if(Eh.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Eh.set(e,s);for(const n of tu.values())Zm(n,s);for(const n of O0.values())Zm(n,s);return!0}function L0(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function F0(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new lg("app","Firebase",b0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=j0;function dg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:wh,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Yr.create("bad-app-name",{appName:String(a)});if(n||(n=ag()),!n)throw Yr.create("no-options");const c=tu.get(a);if(c){if(eu(n,c.options)&&eu(i,c.config))return c;throw Yr.create("duplicate-app",{appName:a})}const d=new H_(a);for(const v of Eh.values())d.addComponent(v);const g=new U0(n,i,d);return tu.set(a,g),g}function B0(s=wh){const e=tu.get(s);if(!e&&s===wh&&ag())return dg();if(!e)throw Yr.create("no-app",{appName:s});return e}function qi(s,e,n){var i;let a=(i=M0[s])!==null&&i!==void 0?i:s;n&&(a+=`-${n}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const g=[`Unable to register library "${a}" with version "${e}":`];c&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(g.join(" "));return}nu(new ua(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="firebase-heartbeat-database",H0=1,ca="firebase-heartbeat-store";let dh=null;function fg(){return dh||(dh=r0($0,H0,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ca)}catch(n){console.warn(n)}}}}).catch(s=>{throw Yr.create("idb-open",{originalErrorMessage:s.message})})),dh}async function q0(s){try{const n=(await fg()).transaction(ca),i=await n.objectStore(ca).get(mg(s));return await n.done,i}catch(e){if(e instanceof Ji)wr.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function ep(s,e){try{const i=(await fg()).transaction(ca,"readwrite");await i.objectStore(ca).put(e,mg(s)),await i.done}catch(n){if(n instanceof Ji)wr.warn(n.message);else{const i=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(i.message)}}}function mg(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=1024,G0=30;class Q0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new X0(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=tp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>G0){const d=Y0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){wr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tp(),{heartbeatsToSend:i,unsentEntries:a}=K0(this._heartbeatsCache.heartbeats),c=Zl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return wr.warn(n),""}}}function tp(){return new Date().toISOString().substring(0,10)}function K0(s,e=W0){const n=[];let i=s.slice();for(const a of s){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),np(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),np(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class X0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return O_()?L_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return ep(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return ep(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function np(s){return Zl(JSON.stringify({version:2,heartbeats:s})).length}function Y0(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(s){nu(new ua("platform-logger",e=>new o0(e),"PRIVATE")),nu(new ua("heartbeat",e=>new Q0(e),"PRIVATE")),qi(_h,Jm,s),qi(_h,Jm,"esm2017"),qi("fire-js","")}J0("");var Z0="firebase",ew="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(Z0,ew,"app");var rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,pg;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function R(){}R.prototype=S.prototype,k.D=S.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(D,A,V){for(var I=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)I[_e-2]=arguments[_e];return S.prototype[A].apply(D,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(k,S,R){R||(R=0);var D=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)D[A]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(A=0;16>A;++A)D[A]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=k.g[0],R=k.g[1],A=k.g[2];var V=k.g[3],I=S+(V^R&(A^V))+D[0]+3614090360&4294967295;S=R+(I<<7&4294967295|I>>>25),I=V+(A^S&(R^A))+D[1]+3905402710&4294967295,V=S+(I<<12&4294967295|I>>>20),I=A+(R^V&(S^R))+D[2]+606105819&4294967295,A=V+(I<<17&4294967295|I>>>15),I=R+(S^A&(V^S))+D[3]+3250441966&4294967295,R=A+(I<<22&4294967295|I>>>10),I=S+(V^R&(A^V))+D[4]+4118548399&4294967295,S=R+(I<<7&4294967295|I>>>25),I=V+(A^S&(R^A))+D[5]+1200080426&4294967295,V=S+(I<<12&4294967295|I>>>20),I=A+(R^V&(S^R))+D[6]+2821735955&4294967295,A=V+(I<<17&4294967295|I>>>15),I=R+(S^A&(V^S))+D[7]+4249261313&4294967295,R=A+(I<<22&4294967295|I>>>10),I=S+(V^R&(A^V))+D[8]+1770035416&4294967295,S=R+(I<<7&4294967295|I>>>25),I=V+(A^S&(R^A))+D[9]+2336552879&4294967295,V=S+(I<<12&4294967295|I>>>20),I=A+(R^V&(S^R))+D[10]+4294925233&4294967295,A=V+(I<<17&4294967295|I>>>15),I=R+(S^A&(V^S))+D[11]+2304563134&4294967295,R=A+(I<<22&4294967295|I>>>10),I=S+(V^R&(A^V))+D[12]+1804603682&4294967295,S=R+(I<<7&4294967295|I>>>25),I=V+(A^S&(R^A))+D[13]+4254626195&4294967295,V=S+(I<<12&4294967295|I>>>20),I=A+(R^V&(S^R))+D[14]+2792965006&4294967295,A=V+(I<<17&4294967295|I>>>15),I=R+(S^A&(V^S))+D[15]+1236535329&4294967295,R=A+(I<<22&4294967295|I>>>10),I=S+(A^V&(R^A))+D[1]+4129170786&4294967295,S=R+(I<<5&4294967295|I>>>27),I=V+(R^A&(S^R))+D[6]+3225465664&4294967295,V=S+(I<<9&4294967295|I>>>23),I=A+(S^R&(V^S))+D[11]+643717713&4294967295,A=V+(I<<14&4294967295|I>>>18),I=R+(V^S&(A^V))+D[0]+3921069994&4294967295,R=A+(I<<20&4294967295|I>>>12),I=S+(A^V&(R^A))+D[5]+3593408605&4294967295,S=R+(I<<5&4294967295|I>>>27),I=V+(R^A&(S^R))+D[10]+38016083&4294967295,V=S+(I<<9&4294967295|I>>>23),I=A+(S^R&(V^S))+D[15]+3634488961&4294967295,A=V+(I<<14&4294967295|I>>>18),I=R+(V^S&(A^V))+D[4]+3889429448&4294967295,R=A+(I<<20&4294967295|I>>>12),I=S+(A^V&(R^A))+D[9]+568446438&4294967295,S=R+(I<<5&4294967295|I>>>27),I=V+(R^A&(S^R))+D[14]+3275163606&4294967295,V=S+(I<<9&4294967295|I>>>23),I=A+(S^R&(V^S))+D[3]+4107603335&4294967295,A=V+(I<<14&4294967295|I>>>18),I=R+(V^S&(A^V))+D[8]+1163531501&4294967295,R=A+(I<<20&4294967295|I>>>12),I=S+(A^V&(R^A))+D[13]+2850285829&4294967295,S=R+(I<<5&4294967295|I>>>27),I=V+(R^A&(S^R))+D[2]+4243563512&4294967295,V=S+(I<<9&4294967295|I>>>23),I=A+(S^R&(V^S))+D[7]+1735328473&4294967295,A=V+(I<<14&4294967295|I>>>18),I=R+(V^S&(A^V))+D[12]+2368359562&4294967295,R=A+(I<<20&4294967295|I>>>12),I=S+(R^A^V)+D[5]+4294588738&4294967295,S=R+(I<<4&4294967295|I>>>28),I=V+(S^R^A)+D[8]+2272392833&4294967295,V=S+(I<<11&4294967295|I>>>21),I=A+(V^S^R)+D[11]+1839030562&4294967295,A=V+(I<<16&4294967295|I>>>16),I=R+(A^V^S)+D[14]+4259657740&4294967295,R=A+(I<<23&4294967295|I>>>9),I=S+(R^A^V)+D[1]+2763975236&4294967295,S=R+(I<<4&4294967295|I>>>28),I=V+(S^R^A)+D[4]+1272893353&4294967295,V=S+(I<<11&4294967295|I>>>21),I=A+(V^S^R)+D[7]+4139469664&4294967295,A=V+(I<<16&4294967295|I>>>16),I=R+(A^V^S)+D[10]+3200236656&4294967295,R=A+(I<<23&4294967295|I>>>9),I=S+(R^A^V)+D[13]+681279174&4294967295,S=R+(I<<4&4294967295|I>>>28),I=V+(S^R^A)+D[0]+3936430074&4294967295,V=S+(I<<11&4294967295|I>>>21),I=A+(V^S^R)+D[3]+3572445317&4294967295,A=V+(I<<16&4294967295|I>>>16),I=R+(A^V^S)+D[6]+76029189&4294967295,R=A+(I<<23&4294967295|I>>>9),I=S+(R^A^V)+D[9]+3654602809&4294967295,S=R+(I<<4&4294967295|I>>>28),I=V+(S^R^A)+D[12]+3873151461&4294967295,V=S+(I<<11&4294967295|I>>>21),I=A+(V^S^R)+D[15]+530742520&4294967295,A=V+(I<<16&4294967295|I>>>16),I=R+(A^V^S)+D[2]+3299628645&4294967295,R=A+(I<<23&4294967295|I>>>9),I=S+(A^(R|~V))+D[0]+4096336452&4294967295,S=R+(I<<6&4294967295|I>>>26),I=V+(R^(S|~A))+D[7]+1126891415&4294967295,V=S+(I<<10&4294967295|I>>>22),I=A+(S^(V|~R))+D[14]+2878612391&4294967295,A=V+(I<<15&4294967295|I>>>17),I=R+(V^(A|~S))+D[5]+4237533241&4294967295,R=A+(I<<21&4294967295|I>>>11),I=S+(A^(R|~V))+D[12]+1700485571&4294967295,S=R+(I<<6&4294967295|I>>>26),I=V+(R^(S|~A))+D[3]+2399980690&4294967295,V=S+(I<<10&4294967295|I>>>22),I=A+(S^(V|~R))+D[10]+4293915773&4294967295,A=V+(I<<15&4294967295|I>>>17),I=R+(V^(A|~S))+D[1]+2240044497&4294967295,R=A+(I<<21&4294967295|I>>>11),I=S+(A^(R|~V))+D[8]+1873313359&4294967295,S=R+(I<<6&4294967295|I>>>26),I=V+(R^(S|~A))+D[15]+4264355552&4294967295,V=S+(I<<10&4294967295|I>>>22),I=A+(S^(V|~R))+D[6]+2734768916&4294967295,A=V+(I<<15&4294967295|I>>>17),I=R+(V^(A|~S))+D[13]+1309151649&4294967295,R=A+(I<<21&4294967295|I>>>11),I=S+(A^(R|~V))+D[4]+4149444226&4294967295,S=R+(I<<6&4294967295|I>>>26),I=V+(R^(S|~A))+D[11]+3174756917&4294967295,V=S+(I<<10&4294967295|I>>>22),I=A+(S^(V|~R))+D[2]+718787259&4294967295,A=V+(I<<15&4294967295|I>>>17),I=R+(V^(A|~S))+D[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,k.g[2]=k.g[2]+A&4294967295,k.g[3]=k.g[3]+V&4294967295}i.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var R=S-this.blockSize,D=this.B,A=this.h,V=0;V<S;){if(A==0)for(;V<=R;)a(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<S;)if(D[A++]=k.charCodeAt(V++),A==this.blockSize){a(this,D),A=0;break}}else for(;V<S;)if(D[A++]=k[V++],A==this.blockSize){a(this,D),A=0;break}}this.h=A,this.o+=S},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var R=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=R&255,R/=256;for(this.u(k),k=Array(16),S=R=0;4>S;++S)for(var D=0;32>D;D+=8)k[R++]=this.g[S]>>>D&255;return k};function c(k,S){var R=g;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=S(k)}function d(k,S){this.h=S;for(var R=[],D=!0,A=k.length-1;0<=A;A--){var V=k[A]|0;D&&V==S||(R[A]=V,D=!1)}this.g=R}var g={};function v(k){return-128<=k&&128>k?c(k,function(S){return new d([S|0],0>S?-1:0)}):new d([k|0],0>k?-1:0)}function w(k){if(isNaN(k)||!isFinite(k))return x;if(0>k)return H(w(-k));for(var S=[],R=1,D=0;k>=R;D++)S[D]=k/R|0,R*=4294967296;return new d(S,0)}function N(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return H(N(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=w(Math.pow(S,8)),D=x,A=0;A<k.length;A+=8){var V=Math.min(8,k.length-A),I=parseInt(k.substring(A,A+V),S);8>V?(V=w(Math.pow(S,V)),D=D.j(V).add(w(I))):(D=D.j(R),D=D.add(w(I)))}return D}var x=v(0),T=v(1),P=v(16777216);s=d.prototype,s.m=function(){if(q(this))return-H(this).m();for(var k=0,S=1,R=0;R<this.g.length;R++){var D=this.i(R);k+=(0<=D?D:4294967296+D)*S,S*=4294967296}return k},s.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(U(this))return"0";if(q(this))return"-"+H(this).toString(k);for(var S=w(Math.pow(k,6)),R=this,D="";;){var A=ce(R,S).g;R=J(R,A.j(S));var V=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=A,U(R))return V+D;for(;6>V.length;)V="0"+V;D=V+D}},s.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function U(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function q(k){return k.h==-1}s.l=function(k){return k=J(this,k),q(k)?-1:U(k)?0:1};function H(k){for(var S=k.g.length,R=[],D=0;D<S;D++)R[D]=~k.g[D];return new d(R,~k.h).add(T)}s.abs=function(){return q(this)?H(this):this},s.add=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],D=0,A=0;A<=S;A++){var V=D+(this.i(A)&65535)+(k.i(A)&65535),I=(V>>>16)+(this.i(A)>>>16)+(k.i(A)>>>16);D=I>>>16,V&=65535,I&=65535,R[A]=I<<16|V}return new d(R,R[R.length-1]&-2147483648?-1:0)};function J(k,S){return k.add(H(S))}s.j=function(k){if(U(this)||U(k))return x;if(q(this))return q(k)?H(this).j(H(k)):H(H(this).j(k));if(q(k))return H(this.j(H(k)));if(0>this.l(P)&&0>k.l(P))return w(this.m()*k.m());for(var S=this.g.length+k.g.length,R=[],D=0;D<2*S;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(var A=0;A<k.g.length;A++){var V=this.i(D)>>>16,I=this.i(D)&65535,_e=k.i(A)>>>16,Pe=k.i(A)&65535;R[2*D+2*A]+=I*Pe,Z(R,2*D+2*A),R[2*D+2*A+1]+=V*Pe,Z(R,2*D+2*A+1),R[2*D+2*A+1]+=I*_e,Z(R,2*D+2*A+1),R[2*D+2*A+2]+=V*_e,Z(R,2*D+2*A+2)}for(D=0;D<S;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=S;D<2*S;D++)R[D]=0;return new d(R,0)};function Z(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function re(k,S){this.g=k,this.h=S}function ce(k,S){if(U(S))throw Error("division by zero");if(U(k))return new re(x,x);if(q(k))return S=ce(H(k),S),new re(H(S.g),H(S.h));if(q(S))return S=ce(k,H(S)),new re(H(S.g),S.h);if(30<k.g.length){if(q(k)||q(S))throw Error("slowDivide_ only works with positive integers.");for(var R=T,D=S;0>=D.l(k);)R=Ve(R),D=Ve(D);var A=z(R,1),V=z(D,1);for(D=z(D,2),R=z(R,2);!U(D);){var I=V.add(D);0>=I.l(k)&&(A=A.add(R),V=I),D=z(D,1),R=z(R,1)}return S=J(k,A.j(S)),new re(A,S)}for(A=x;0<=k.l(S);){for(R=Math.max(1,Math.floor(k.m()/S.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),V=w(R),I=V.j(S);q(I)||0<I.l(k);)R-=D,V=w(R),I=V.j(S);U(V)&&(V=T),A=A.add(V),k=J(k,I)}return new re(A,k)}s.A=function(k){return ce(this,k).h},s.and=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],D=0;D<S;D++)R[D]=this.i(D)&k.i(D);return new d(R,this.h&k.h)},s.or=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],D=0;D<S;D++)R[D]=this.i(D)|k.i(D);return new d(R,this.h|k.h)},s.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],D=0;D<S;D++)R[D]=this.i(D)^k.i(D);return new d(R,this.h^k.h)};function Ve(k){for(var S=k.g.length+1,R=[],D=0;D<S;D++)R[D]=k.i(D)<<1|k.i(D-1)>>>31;return new d(R,k.h)}function z(k,S){var R=S>>5;S%=32;for(var D=k.g.length-R,A=[],V=0;V<D;V++)A[V]=0<S?k.i(V+R)>>>S|k.i(V+R+1)<<32-S:k.i(V+R);return new d(A,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,pg=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=w,d.fromString=N,Jr=d}).apply(typeof rp<"u"?rp:typeof self<"u"?self:typeof window<"u"?window:{});var Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gg,ea,yg,Gl,Th,vg,_g,wg;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bl=="object"&&Bl];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function a(l,f){if(f)e:{var y=i;l=l.split(".");for(var E=0;E<l.length-1;E++){var L=l[E];if(!(L in y))break e;y=y[L]}l=l[l.length-1],E=y[l],f=f(E),f!=E&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function c(l,f){l instanceof String&&(l+="");var y=0,E=!1,L={next:function(){if(!E&&y<l.length){var $=y++;return{value:f($,l[$]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function v(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function w(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function N(l,f,y){return l.call.apply(l.bind,arguments)}function x(l,f,y){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),l.apply(f,L)}}return function(){return l.apply(f,arguments)}}function T(l,f,y){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?N:x,T.apply(null,arguments)}function P(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function U(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(E,L,$){for(var ne=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ne[$e-2]=arguments[$e];return f.prototype[L].apply(E,ne)}}function q(l){const f=l.length;if(0<f){const y=Array(f);for(let E=0;E<f;E++)y[E]=l[E];return y}return[]}function H(l,f){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(v(E)){const L=l.length||0,$=E.length||0;l.length=L+$;for(let ne=0;ne<$;ne++)l[L+ne]=E[ne]}else l.push(E)}}class J{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Z(l){return/^[\s\xa0]*$/.test(l)}function re(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function ce(l){return ce[" "](l),l}ce[" "]=function(){};var Ve=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function z(l,f,y){for(const E in l)f.call(y,l[E],E,l)}function k(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function S(l){const f={};for(const y in l)f[y]=l[y];return f}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,f){let y,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(y in E)l[y]=E[y];for(let $=0;$<R.length;$++)y=R[$],Object.prototype.hasOwnProperty.call(E,y)&&(l[y]=E[y])}}function A(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function V(l){g.setTimeout(()=>{throw l},0)}function I(){var l=fe;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class _e{constructor(){this.h=this.g=null}add(f,y){const E=Pe.get();E.set(f,y),this.h?this.h.next=E:this.g=E,this.h=E}}var Pe=new J(()=>new De,l=>l.reset());class De{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,te=!1,fe=new _e,se=()=>{const l=g.Promise.resolve(void 0);Ie=()=>{l.then(O)}};var O=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(y){V(y)}var f=Pe;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}te=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ae=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};g.addEventListener("test",y,f),g.removeEventListener("test",y,f)}catch{}return l})();function xe(l,f){if(me.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Ve){e:{try{ce(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:je[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&xe.aa.h.call(this)}}U(xe,me);var je={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),ze=0;function qe(l,f,y,E,L){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!E,this.ha=L,this.key=++ze,this.da=this.fa=!1}function wt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function nr(l){this.src=l,this.g={},this.h=0}nr.prototype.add=function(l,f,y,E,L){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var ne=Ir(l,f,E,L);return-1<ne?(f=l[ne],y||(f.fa=!1)):(f=new qe(f,this.src,$,!!E,L),f.fa=y,l.push(f)),f};function Ks(l,f){var y=f.type;if(y in l.g){var E=l.g[y],L=Array.prototype.indexOf.call(E,f,void 0),$;($=0<=L)&&Array.prototype.splice.call(E,L,1),$&&(wt(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Ir(l,f,y,E){for(var L=0;L<l.length;++L){var $=l[L];if(!$.da&&$.listener==f&&$.capture==!!y&&$.ha==E)return L}return-1}var ds="closure_lm_"+(1e6*Math.random()|0),Xs={};function so(l,f,y,E,L){if(Array.isArray(f)){for(var $=0;$<f.length;$++)so(l,f[$],y,E,L);return null}return y=ao(y),l&&l[Ue]?l.K(f,y,w(E)?!!E.capture:!1,L):io(l,f,y,!1,E,L)}function io(l,f,y,E,L,$){if(!f)throw Error("Invalid event type");var ne=w(L)?!!L.capture:!!L,$e=Js(l);if($e||(l[ds]=$e=new nr(l)),y=$e.add(f,y,E,ne,$),y.proxy)return y;if(E=Na(),y.proxy=E,E.src=l,E.listener=y,l.addEventListener)Ae||(L=ne),L===void 0&&(L=!1),l.addEventListener(f.toString(),E,L);else if(l.attachEvent)l.attachEvent(sr(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Na(){function l(y){return f.call(l.src,l.listener,y)}const f=oo;return l}function Ys(l,f,y,E,L){if(Array.isArray(f))for(var $=0;$<f.length;$++)Ys(l,f[$],y,E,L);else E=w(E)?!!E.capture:!!E,y=ao(y),l&&l[Ue]?(l=l.i,f=String(f).toString(),f in l.g&&($=l.g[f],y=Ir($,y,E,L),-1<y&&(wt($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete l.g[f],l.h--)))):l&&(l=Js(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Ir(f,y,E,L)),(y=-1<l?f[l]:null)&&rr(y))}function rr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Ue])Ks(f.i,l);else{var y=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(y,E,l.capture):f.detachEvent?f.detachEvent(sr(y),E):f.addListener&&f.removeListener&&f.removeListener(E),(y=Js(f))?(Ks(y,l),y.h==0&&(y.src=null,f[ds]=null)):wt(l)}}}function sr(l){return l in Xs?Xs[l]:Xs[l]="on"+l}function oo(l,f){if(l.da)l=!0;else{f=new xe(f,this);var y=l.listener,E=l.ha||l.src;l.fa&&rr(l),l=y.call(E,f)}return l}function Js(l){return l=l[ds],l instanceof nr?l:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ao(l){return typeof l=="function"?l:(l[Zs]||(l[Zs]=function(f){return l.handleEvent(f)}),l[Zs])}function mt(){Q.call(this),this.i=new nr(this),this.M=this,this.F=null}U(mt,Q),mt.prototype[Ue]=!0,mt.prototype.removeEventListener=function(l,f,y,E){Ys(this,l,f,y,E)};function pt(l,f){var y,E=l.F;if(E)for(y=[];E;E=E.F)y.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new me(f,l);else if(f instanceof me)f.target=f.target||l;else{var L=f;f=new me(E,l),D(f,L)}if(L=!0,y)for(var $=y.length-1;0<=$;$--){var ne=f.g=y[$];L=ir(ne,E,!0,f)&&L}if(ne=f.g=l,L=ir(ne,E,!0,f)&&L,L=ir(ne,E,!1,f)&&L,y)for($=0;$<y.length;$++)ne=f.g=y[$],L=ir(ne,E,!1,f)&&L}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],E=0;E<y.length;E++)wt(y[E]);delete l.g[f],l.h--}}this.F=null},mt.prototype.K=function(l,f,y,E){return this.i.add(String(l),f,!1,y,E)},mt.prototype.L=function(l,f,y,E){return this.i.add(String(l),f,!0,y,E)};function ir(l,f,y,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,$=0;$<f.length;++$){var ne=f[$];if(ne&&!ne.da&&ne.capture==y){var $e=ne.listener,gt=ne.ha||ne.src;ne.fa&&Ks(l.i,ne),L=$e.call(gt,E)!==!1&&L}}return L&&!E.defaultPrevented}function lo(l,f,y){if(typeof l=="function")y&&(l=T(l,y));else if(l&&typeof l.handleEvent=="function")l=T(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:g.setTimeout(l,f||0)}function Ar(l){l.g=lo(()=>{l.g=null,l.i&&(l.i=!1,Ar(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class fs extends Q{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(l){Q.call(this),this.h=l,this.g={}}U(ms,Q);var uo=[];function co(l){z(l.g,function(f,y){this.g.hasOwnProperty(y)&&rr(f)},l),l.g={}}ms.prototype.N=function(){ms.aa.N.call(this),co(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ho=g.JSON.stringify,fo=g.JSON.parse,mo=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function ps(){}ps.prototype.h=null;function ei(l){return l.h||(l.h=l.i())}function ti(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fn(){me.call(this,"d")}U(Fn,me);function ni(){me.call(this,"c")}U(ni,me);var bn={},po=null;function gs(){return po=po||new mt}bn.La="serverreachability";function go(l){me.call(this,bn.La,l)}U(go,me);function or(l){const f=gs();pt(f,new go(f))}bn.STAT_EVENT="statevent";function yo(l,f){me.call(this,bn.STAT_EVENT,l),this.stat=f}U(yo,me);function it(l){const f=gs();pt(f,new yo(f,l))}bn.Ma="timingevent";function ri(l,f){me.call(this,bn.Ma,l),this.size=f}U(ri,me);function Tn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},f)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function vs(l,f,y,E,L,$){l.info(function(){if(l.g)if($)for(var ne="",$e=$.split("&"),gt=0;gt<$e.length;gt++){var Me=$e[gt].split("=");if(1<Me.length){var Et=Me[0];Me=Me[1];var ut=Et.split("_");ne=2<=ut.length&&ut[1]=="type"?ne+(Et+"="+Me+"&"):ne+(Et+"=redacted&")}}else ne=null;else ne=$;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+f+`
`+y+`
`+ne})}function si(l,f,y,E,L,$,ne){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+f+`
`+y+`
`+$+" "+ne})}function Sn(l,f,y,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Vu(l,y)+(E?" "+E:"")})}function vo(l,f){l.info(function(){return"TIMEOUT: "+f})}ys.prototype.info=function(){};function Vu(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var E=y[l];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var ne=1;ne<L.length;ne++)L[ne]=""}}}}return ho(y)}catch{return f}}var ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},In;function _s(){}U(_s,ps),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},In=new _s;function An(l,f,y,E){this.j=l,this.i=f,this.l=y,this.R=E||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ca}function Ca(){this.i=null,this.g="",this.h=!1}var _o={},oi={};function ai(l,f,y){l.L=1,l.v=Rr(tn(f)),l.m=y,l.P=!0,wo(l,null)}function wo(l,f){l.F=Date.now(),We(l),l.A=tn(l.v);var y=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Vr(y.i,"t",E),l.C=0,y=l.j.J,l.h=new Ca,l.g=Wa(l.j,y?f:null,!l.m),0<l.O&&(l.M=new fs(T(l.Y,l,l.g),l.O)),f=l.U,y=l.g,E=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(uo[0]=L.toString()),L=uo);for(var $=0;$<L.length;$++){var ne=so(y,L[$],E||f.handleEvent,!1,f.h||f);if(!ne)break;f.g[ne.key]=ne}f=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),or(),vs(l.i,l.u,l.A,l.l,l.R,l.m)}An.prototype.ca=function(l){l=l.target;const f=this.M;f&&qt(l)==3?f.j():this.Y(l)},An.prototype.Y=function(l){try{if(l==this.g)e:{const ut=qt(this.g);var f=this.g.Ba();const dn=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||No(this.g)))){this.J||ut!=4||f==7||(f==8||0>=dn?or(3):or(2)),ws(this);var y=this.g.Z();this.X=y;t:if(Pa(this)){var E=No(this.g);l="";var L=E.length,$=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),Nr(this);var ne="";break t}this.h.i=new g.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!($&&f==L-1)});E.length=0,this.h.g+=l,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=y==200,si(this.i,this.u,this.A,this.l,this.R,ut,y),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,gt=this.g;if(($e=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z($e)){var Me=$e;break t}}Me=null}if(y=Me)Sn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eo(this,y);else{this.o=!1,this.s=3,it(12),cn(this),Nr(this);break e}}if(this.P){y=!0;let rn;for(;!this.J&&this.C<ne.length;)if(rn=Du(this,ne),rn==oi){ut==4&&(this.s=4,it(14),y=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==_o){this.s=4,it(15),Sn(this.i,this.l,ne,"[Invalid Chunk]"),y=!1;break}else Sn(this.i,this.l,rn,null),Eo(this,rn);if(Pa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||ne.length!=0||this.h.h||(this.s=1,it(16),y=!1),this.o=this.o&&y,!y)Sn(this.i,this.l,ne,"[Invalid Chunked Response]"),cn(this),Nr(this);else if(0<ne.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Co(Et),Et.M=!0,it(11))}}else Sn(this.i,this.l,ne,null),Eo(this,ne);ut==4&&cn(this),this.o&&!this.J&&(ut==4?vi(this.j,this):(this.o=!1,We(this)))}else fi(this.g),y==400&&0<ne.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),cn(this),Nr(this)}}}catch{}finally{}};function Pa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Du(l,f){var y=l.C,E=f.indexOf(`
`,y);return E==-1?oi:(y=Number(f.substring(y,E)),isNaN(y)?_o:(E+=1,E+y>f.length?oi:(f=f.slice(E,E+y),l.C=E+y,f)))}An.prototype.cancel=function(){this.J=!0,cn(this)};function We(l){l.S=Date.now()+l.I,Ra(l,l.I)}function Ra(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Tn(T(l.ba,l),f)}function ws(l){l.B&&(g.clearTimeout(l.B),l.B=null)}An.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(vo(this.i,this.A),this.L!=2&&(or(),it(17)),cn(this),this.s=2,Nr(this)):Ra(this,this.S-l)};function Nr(l){l.j.G==0||l.J||vi(l.j,l)}function cn(l){ws(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,co(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Eo(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||Ut(y.h,l))){if(!l.K&&Ut(y.h,l)&&y.G==3){try{var E=y.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)yi(y),Rn(y);else break e;gi(y),it(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Tn(T(y.Za,y),6e3));if(1>=Va(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else hr(y,11)}else if((l.K||y.g==l)&&yi(y),!Z(f))for(L=y.Da.g.parse(f),f=0;f<L.length;f++){let Me=L[f];if(y.T=Me[0],Me=Me[1],y.G==2)if(Me[0]=="c"){y.K=Me[1],y.ia=Me[2];const Et=Me[3];Et!=null&&(y.la=Et,y.j.info("VER="+y.la));const ut=Me[4];ut!=null&&(y.Aa=ut,y.j.info("SVER="+y.Aa));const dn=Me[5];dn!=null&&typeof dn=="number"&&0<dn&&(E=1.5*dn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const rn=l.g;if(rn){const xs=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xs){var $=E.h;$.g||xs.indexOf("spdy")==-1&&xs.indexOf("quic")==-1&&xs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(To($,$.h),$.h=null))}if(E.D){const wi=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;wi&&(E.ya=wi,He(E.I,E.D,wi))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var ne=l;if(E.qa=qa(E,E.J?E.ia:null,E.W),ne.K){Da(E.h,ne);var $e=ne,gt=E.L;gt&&($e.I=gt),$e.B&&(ws($e),We($e)),E.g=ne}else Ns(E);0<y.i.length&&$n(y)}else Me[0]!="stop"&&Me[0]!="close"||hr(y,7);else y.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?hr(y,7):xt(y):Me[0]!="noop"&&y.l&&y.l.ta(Me),y.v=0)}}or(4)}catch{}}var ka=class{constructor(l,f){this.g=l,this.map=f}};function Es(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Va(l){return l.h?1:l.g?l.g.size:0}function Ut(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function To(l,f){l.g?l.g.add(f):l.h=f}function Da(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Es.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ja(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return q(l.i)}function li(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(v(l)){for(var f=[],y=l.length,E=0;E<y;E++)f.push(l[E]);return f}f=[],y=0;for(E in l)f[y++]=l[E];return f}function ui(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(v(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const E in l)f[y++]=E;return f}}}function xr(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(v(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=ui(l),E=li(l),L=E.length,$=0;$<L;$++)f.call(void 0,E[$],y&&y[$],l)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ju(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var E=l[y].indexOf("="),L=null;if(0<=E){var $=l[y].substring(0,E);L=l[y].substring(E+1)}else $=l[y];f($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ar(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ar){this.h=l.h,Ss(this,l.j),this.o=l.o,this.g=l.g,Cr(this,l.s),this.l=l.l;var f=l.i,y=new Un;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Pr(this,y),this.m=l.m}else l&&(f=String(l).match(Ts))?(this.h=!1,Ss(this,f[1]||"",!0),this.o=ke(f[2]||""),this.g=ke(f[3]||"",!0),Cr(this,f[4]),this.l=ke(f[5]||"",!0),Pr(this,f[6]||"",!0),this.m=ke(f[7]||"")):(this.h=!1,this.i=new Un(null,this.h))}ar.prototype.toString=function(){var l=[],f=this.j;f&&l.push(kr(f,ci,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(kr(f,ci,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(kr(y,y.charAt(0)=="/"?La:Oa,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",kr(y,So)),l.join("")};function tn(l){return new ar(l)}function Ss(l,f,y){l.j=y?ke(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Cr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Pr(l,f,y){f instanceof Un?(l.i=f,zn(l.i,l.h)):(y||(f=kr(f,Fa)),l.i=new Un(f,l.h))}function He(l,f,y){l.i.set(f,y)}function Rr(l){return He(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ke(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function kr(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,Ma),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ma(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ci=/[#\/\?@]/g,Oa=/[#\?:]/g,La=/[#\?]/g,Fa=/[#\?@]/g,So=/#/g;function Un(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Nt(l){l.g||(l.g=new Map,l.h=0,l.i&&ju(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}s=Un.prototype,s.add=function(l,f){Nt(this),this.i=null,l=hn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function Nn(l,f){Nt(l),f=hn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function xn(l,f){return Nt(l),f=hn(l,f),l.g.has(f)}s.forEach=function(l,f){Nt(this),this.g.forEach(function(y,E){y.forEach(function(L){l.call(f,L,E,this)},this)},this)},s.na=function(){Nt(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let E=0;E<f.length;E++){const L=l[E];for(let $=0;$<L.length;$++)y.push(f[E])}return y},s.V=function(l){Nt(this);let f=[];if(typeof l=="string")xn(this,l)&&(f=f.concat(this.g.get(hn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},s.set=function(l,f){return Nt(this),this.i=null,l=hn(this,l),xn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},s.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Vr(l,f,y){Nn(l,f),0<y.length&&(l.i=null,l.g.set(hn(l,f),q(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var E=f[y];const $=encodeURIComponent(String(E)),ne=this.V(E);for(E=0;E<ne.length;E++){var L=$;ne[E]!==""&&(L+="="+encodeURIComponent(String(ne[E]))),l.push(L)}}return this.i=l.join("&")};function hn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function zn(l,f){f&&!l.j&&(Nt(l),l.i=null,l.g.forEach(function(y,E){var L=E.toLowerCase();E!=L&&(Nn(this,E),Vr(this,L,y))},l)),l.j=f}function Mu(l,f){const y=new ys;if(g.Image){const E=new Image;E.onload=P(Ht,y,"TestLoadImage: loaded",!0,f,E),E.onerror=P(Ht,y,"TestLoadImage: error",!1,f,E),E.onabort=P(Ht,y,"TestLoadImage: abort",!1,f,E),E.ontimeout=P(Ht,y,"TestLoadImage: timeout",!1,f,E),g.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function ba(l,f){const y=new ys,E=new AbortController,L=setTimeout(()=>{E.abort(),Ht(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then($=>{clearTimeout(L),$.ok?Ht(y,"TestPingServer: ok",!0,f):Ht(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Ht(y,"TestPingServer: error",!1,f)})}function Ht(l,f,y,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(y)}catch{}}function Ou(){this.g=new mo}function Ua(l,f,y){const E=y||"";try{xr(l,function(L,$){let ne=L;w(L)&&(ne=ho(L)),f.push(E+$+"="+encodeURIComponent(ne))})}catch(L){throw f.push(E+"type="+encodeURIComponent("_badmap")),L}}function lr(l){this.l=l.Ub||null,this.j=l.eb||!1}U(lr,ps),lr.prototype.g=function(){return new Is(this.l,this.j)},lr.prototype.i=(function(l){return function(){return l}})({});function Is(l,f){mt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Is,mt),s=Is.prototype,s.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Pn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||g).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;za(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function za(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Cn(this):Pn(this),this.readyState==3&&za(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Cn(this))},s.Qa=function(l){this.g&&(this.response=l,Cn(this))},s.ga=function(){this.g&&Cn(this)};function Cn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Pn(l)}s.setRequestHeader=function(l,f){this.u.append(l,f)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Pn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ur(l){let f="";return z(l,function(y,E){f+=E,f+=":",f+=y,f+=`\r
`}),f}function Dr(l,f,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=ur(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):He(l,f,y))}function Je(l){mt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Je,mt);var Lu=/^https?$/i,Io=["POST","PUT"];s=Je.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,f,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():In.g(),this.v=this.o?ei(this.o):ei(In),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch($){As(this,$);return}if(l=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)y.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const $ of E.keys())y.set($,E.get($));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),L=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Io,f,void 0))||E||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of y)this.g.setRequestHeader($,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{di(this),this.u=!0,this.g.send(l),this.u=!1}catch($){As(this,$)}};function As(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,hi(l),nn(l)}function hi(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pt(this,"complete"),pt(this,"abort"),nn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nn(this,!0)),Je.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ao(this):this.bb())},s.bb=function(){Ao(this)};function Ao(l){if(l.h&&typeof d<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)lo(l.Ea,0,l);else if(pt(l,"readystatechange"),qt(l)==4){l.h=!1;try{const ne=l.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var E;if(E=ne===0){var L=String(l.D).match(Ts)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),E=!Lu.test(L?L.toLowerCase():"")}y=E}if(y)pt(l,"complete"),pt(l,"success");else{l.m=6;try{var $=2<qt(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",hi(l)}}finally{nn(l)}}}}function nn(l,f){if(l.g){di(l);const y=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||pt(l,"ready");try{y.onreadystatechange=E}catch{}}}function di(l){l.I&&(g.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),fo(f)}};function No(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function fi(l){const f={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(Z(l[E]))continue;var y=A(l[E]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const $=f[L]||[];f[L]=$,$.push(y)}k(f,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bn(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function xo(l){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bn("baseRetryDelayMs",5e3,l),this.cb=Bn("retryDelaySeedMs",1e4,l),this.Wa=Bn("forwardChannelMaxRetries",2,l),this.wa=Bn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Es(l&&l.concurrentRequestLimit),this.Da=new Ou,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=xo.prototype,s.la=8,s.G=1,s.connect=function(l,f,y,E){it(0),this.W=l,this.H=f||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=qa(this,null,this.W),$n(this)};function xt(l){if(mi(l),l.G==3){var f=l.U++,y=tn(l.I);if(He(y,"SID",l.K),He(y,"RID",f),He(y,"TYPE","terminate"),cr(l,y),f=new An(l,l.j,f),f.L=2,f.v=Rr(tn(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=f.v,y=!0),y||(f.g=Wa(f.j,null),f.g.ea(f.v)),f.F=Date.now(),We(f)}Ha(l)}function Rn(l){l.g&&(Co(l),l.g.cancel(),l.g=null)}function mi(l){Rn(l),l.u&&(g.clearTimeout(l.u),l.u=null),yi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function $n(l){if(!en(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ie||se(),te||(Ie(),te=!0),fe.add(f,l),l.B=0}}function Fu(l,f){return Va(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Tn(T(l.Ga,l,f),$a(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new An(this,this.j,l);let $=this.o;if(this.S&&($?($=S($),D($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=jr(this,L,f),y=tn(this.I),He(y,"RID",l),He(y,"CVER",22),this.D&&He(y,"X-HTTP-Session-Id",this.D),cr(this,y),$&&(this.O?f="headers="+encodeURIComponent(String(ur($)))+"&"+f:this.m&&Dr(y,this.m,$)),To(this.h,L),this.Ua&&He(y,"TYPE","init"),this.P?(He(y,"$req",f),He(y,"SID","null"),L.T=!0,ai(L,y,null)):ai(L,y,f),this.G=2}}else this.G==3&&(l?pi(this,l):this.i.length==0||en(this.h)||pi(this))};function pi(l,f){var y;f?y=f.l:y=l.U++;const E=tn(l.I);He(E,"SID",l.K),He(E,"RID",y),He(E,"AID",l.T),cr(l,E),l.m&&l.o&&Dr(E,l.m,l.o),y=new An(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=jr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),To(l.h,y),ai(y,E,f)}function cr(l,f){l.H&&z(l.H,function(y,E){He(f,E,y)}),l.l&&xr({},function(y,E){He(f,E,y)})}function jr(l,f,y){y=Math.min(l.i.length,y);var E=l.l?T(l.l.Na,l.l,l):null;e:{var L=l.i;let $=-1;for(;;){const ne=["count="+y];$==-1?0<y?($=L[0].g,ne.push("ofs="+$)):$=0:ne.push("ofs="+$);let $e=!0;for(let gt=0;gt<y;gt++){let Me=L[gt].g;const Et=L[gt].map;if(Me-=$,0>Me)$=Math.max(0,L[gt].g-100),$e=!1;else try{Ua(Et,ne,"req"+Me+"_")}catch{E&&E(Et)}}if($e){E=ne.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,E}function Ns(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ie||se(),te||(Ie(),te=!0),fe.add(f,l),l.v=0}}function gi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Tn(T(l.Fa,l),$a(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,Ba(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tn(T(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),Rn(this),Ba(this))};function Co(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function Ba(l){l.g=new An(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=tn(l.qa);He(f,"RID","rpc"),He(f,"SID",l.K),He(f,"AID",l.T),He(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&He(f,"TO",l.ja),He(f,"TYPE","xmlhttp"),cr(l,f),l.m&&l.o&&Dr(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Rr(tn(f)),y.m=null,y.P=!0,wo(y,l)}s.Za=function(){this.C!=null&&(this.C=null,Rn(this),gi(this),it(19))};function yi(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function vi(l,f){var y=null;if(l.g==f){yi(l),Co(l),l.g=null;var E=2}else if(Ut(l.h,f))y=f.D,Da(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var L=l.B;E=gs(),pt(E,new ri(E,y)),$n(l)}else Ns(l);else if(L=f.s,L==3||L==0&&0<f.X||!(E==1&&Fu(l,f)||E==2&&gi(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),L){case 1:hr(l,5);break;case 4:hr(l,10);break;case 3:hr(l,6);break;default:hr(l,2)}}}function $a(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function hr(l,f){if(l.j.info("Error code "+f),f==2){var y=T(l.fb,l),E=l.Xa;const L=!E;E=new ar(E||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Ss(E,"https"),Rr(E),L?Mu(E.toString(),y):ba(E.toString(),y)}else it(2);l.G=0,l.l&&l.l.sa(f),Ha(l),mi(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Ha(l){if(l.G=0,l.ka=[],l.l){const f=ja(l.h);(f.length!=0||l.i.length!=0)&&(H(l.ka,f),H(l.ka,l.i),l.h.i.length=0,q(l.i),l.i.length=0),l.l.ra()}}function qa(l,f,y){var E=y instanceof ar?tn(y):new ar(y);if(E.g!="")f&&(E.g=f+"."+E.g),Cr(E,E.s);else{var L=g.location;E=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var $=new ar(null);E&&Ss($,E),f&&($.g=f),L&&Cr($,L),y&&($.l=y),E=$}return y=l.D,f=l.ya,y&&f&&He(E,y,f),He(E,"VER",l.la),cr(l,E),E}function Wa(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Je(new lr({eb:y})):new Je(l.pa),f.Ha(l.J),f}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Po(){}s=Po.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function _i(){}_i.prototype.g=function(l,f){return new zt(l,f)};function zt(l,f){mt.call(this),this.g=new xo(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!Z(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!Z(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Hn(this)}U(zt,mt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){xt(this.g)},zt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=ho(l),l=y);f.i.push(new ka(f.Ya++,l)),f.G==3&&$n(f)},zt.prototype.N=function(){this.g.l=null,delete this.j,xt(this.g),delete this.g,zt.aa.N.call(this)};function Ga(l){Fn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}U(Ga,Fn);function Qa(){ni.call(this),this.status=1}U(Qa,ni);function Hn(l){this.g=l}U(Hn,Po),Hn.prototype.ua=function(){pt(this.g,"a")},Hn.prototype.ta=function(l){pt(this.g,new Ga(l))},Hn.prototype.sa=function(l){pt(this.g,new Qa)},Hn.prototype.ra=function(){pt(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,wg=function(){return new _i},_g=function(){return gs()},vg=bn,Th={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ii.NO_ERROR=0,ii.TIMEOUT=8,ii.HTTP_ERROR=6,Gl=ii,xa.COMPLETE="complete",yg=xa,ti.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",mt.prototype.listen=mt.prototype.K,ea=ti,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,gg=Je}).apply(typeof Bl<"u"?Bl:typeof self<"u"?self:typeof window<"u"?window:{});const sp="@firebase/firestore",ip="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new ug("@firebase/firestore");function zi(){return qs.logLevel}function ae(s,...e){if(qs.logLevel<=Le.DEBUG){const n=e.map(qh);qs.debug(`Firestore (${Zi}): ${s}`,...n)}}function Er(s,...e){if(qs.logLevel<=Le.ERROR){const n=e.map(qh);qs.error(`Firestore (${Zi}): ${s}`,...n)}}function ts(s,...e){if(qs.logLevel<=Le.WARN){const n=e.map(qh);qs.warn(`Firestore (${Zi}): ${s}`,...n)}}function qh(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Eg(s,i,n)}function Eg(s,e,n){let i=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Er(i),new Error(i)}function Be(s,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,s||Eg(e,a,i)}function Se(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ft.UNAUTHENTICATED)))}shutdown(){}}class nw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class rw{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0,42304);let i=this.i;const a=v=>this.i!==i?(i=this.i,n(v)):Promise.resolve();let c=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zr,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},g=v=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string",31837,{l:i}),new Tg(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class sw{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iw{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new sw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class op{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ow{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,F0(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Be(this.o===void 0,3512);const i=c=>{c.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ae("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const a=c=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new op(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new op(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=aw(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<n&&(i+=e.charAt(a[c]%62))}return i}}function Ne(s,e){return s<e?-1:s>e?1:0}function Sh(s,e){let n=0;for(;n<s.length&&n<e.length;){const i=s.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return Ne(i,a);{const c=Sg(),d=lw(c.encode(ap(s,n)),c.encode(ap(e,n)));return d!==0?d:Ne(i,a)}}n+=i>65535?2:1}return Ne(s.length,e.length)}function ap(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function lw(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return Ne(s[n],e[n]);return Ne(s.length,e.length)}function Gi(s,e,n){return s.length===e.length&&s.every(((i,a)=>n(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="__name__";class Kn{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kn?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const c=Kn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Ne(e.length,n.length)}static compareSegments(e,n){const i=Kn.isNumericId(e),a=Kn.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?Kn.extractNumericId(e).compare(Kn.extractNumericId(n)):Sh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class Qe extends Kn{construct(e,n,i){return new Qe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new Qe(n)}static emptyPath(){return new Qe([])}}const uw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Kn{construct(e,n,i){return new kt(e,n,i)}static isValidIdentifier(e){return uw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lp}static keyField(){return new kt([lp])}static fromServerFormat(e){const n=[];let i="",a=0;const c=()=>{if(i.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,a+=2}else g==="`"?(d=!d,a++):g!=="."||d?(i+=g,a++):(c(),a++)}if(c(),d)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Qe.fromString(e))}static fromName(e){return new pe(Qe.fromString(e).popFirst(5))}static empty(){return new pe(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(s,e,n){if(!n)throw new ie(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function cw(s,e,n,i){if(e===!0&&i===!0)throw new ie(W.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function up(s){if(!pe.isDocumentKey(s))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function cp(s){if(pe.isDocumentKey(s))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Ag(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function fu(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":we(12329,{type:typeof s})}function wn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fu(s);throw new ie(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(s,e){const n={typeString:s};return e&&(n.value=e),n}function _a(s,e){if(!Ag(s))throw new ie(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(a&&typeof d!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new ie(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=-62135596800,dp=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*dp);return new Ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hp)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dp}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_a(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:ft("string",Ye._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Ye(0,0))}static max(){return new Te(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=-1;function hw(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Te.fromTimestamp(i===1e9?new Ye(n+1,0):new Ye(n,i));return new ns(a,pe.empty(),e)}function dw(s){return new ns(s.readTime,s.key,ha)}class ns{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ns(Te.min(),pe.empty(),ha)}static max(){return new ns(Te.max(),pe.empty(),ha)}}function fw(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(s.documentKey,e.documentKey),n!==0?n:Ne(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==mw)throw s;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):G.reject(n)}static resolve(e){return new G(((n,i)=>{n(e)}))}static reject(e){return new G(((n,i)=>{i(e)}))}static waitFor(e){return new G(((n,i)=>{let a=0,c=0,d=!1;e.forEach((g=>{++a,g.next((()=>{++c,d&&c===a&&n()}),(v=>i(v)))})),d=!0,c===a&&n()}))}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next((a=>a?G.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,c)=>{i.push(n.call(this,a,c))})),this.waitFor(i)}static mapArray(e,n){return new G(((i,a)=>{const c=e.length,d=new Array(c);let g=0;for(let v=0;v<c;v++){const w=v;n(e[w]).next((N=>{d[w]=N,++g,g===c&&i(d)}),(N=>a(N)))}}))}static doWhile(e,n){return new G(((i,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):i()};c()}))}}function gw(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function to(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}mu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=-1;function pu(s){return s==null}function ru(s){return s===0&&1/s==-1/0}function yw(s){return typeof s=="number"&&Number.isInteger(s)&&!ru(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="";function vw(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=fp(e)),e=_w(s.get(n),e);return fp(e)}function _w(s,e){let n=e;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":n+="";break;case Ng:n+="";break;default:n+=c}}return n}function fp(s){return s+Ng+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function us(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function xg(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,a,c){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=a??Rt.EMPTY,this.right=c??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,c){return new Rt(e??this.key,n??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,i),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Rt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,a,c){return this}insert(e,n,i){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pp(this.data.getIterator())}getIteratorFrom(e){return new pp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class pp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new ln([])}unionWith(e){let n=new _t(kt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Cg("Invalid base64 string: "+c):c}})(e);return new Vt(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c})(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const ww=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(s){if(Be(!!s,39018),typeof s=="string"){let e=0;const n=ww.exec(s);if(Be(!!n,46558,{timestamp:s}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(s.seconds),nanos:at(s.nanos)}}function at(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ss(s){return typeof s=="string"?Vt.fromBase64String(s):Vt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="server_timestamp",Rg="__type__",kg="__previous_value__",Vg="__local_write_time__";function Qh(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Rg])===null||n===void 0?void 0:n.stringValue)===Pg}function gu(s){const e=s.mapValue.fields[kg];return Qh(e)?gu(e):e}function da(s){const e=rs(s.mapValue.fields[Vg].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,i,a,c,d,g,v,w,N){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=w,this.isUsingEmulator=N}}const su="(default)";class fa{constructor(e,n){this.projectId=e,this.database=n||su}static empty(){return new fa("","")}get isDefaultDatabase(){return this.database===su}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="__type__",Tw="__max__",Hl={mapValue:{}},jg="__vector__",iu="value";function is(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Qh(s)?4:Iw(s)?9007199254740991:Sw(s)?10:11:we(28295,{value:s})}function tr(s,e){if(s===e)return!0;const n=is(s);if(n!==is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return da(s).isEqual(da(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=rs(a.timestampValue),g=rs(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,c){return ss(a.bytesValue).isEqual(ss(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,c){return at(a.geoPointValue.latitude)===at(c.geoPointValue.latitude)&&at(a.geoPointValue.longitude)===at(c.geoPointValue.longitude)})(s,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return at(a.integerValue)===at(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=at(a.doubleValue),g=at(c.doubleValue);return d===g?ru(d)===ru(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return Gi(s.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(a,c){const d=a.mapValue.fields||{},g=c.mapValue.fields||{};if(mp(d)!==mp(g))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(g[v]===void 0||!tr(d[v],g[v])))return!1;return!0})(s,e);default:return we(52216,{left:s})}}function ma(s,e){return(s.values||[]).find((n=>tr(n,e)))!==void 0}function Qi(s,e){if(s===e)return 0;const n=is(s),i=is(e);if(n!==i)return Ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=at(c.integerValue||c.doubleValue),v=at(d.integerValue||d.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(s,e);case 3:return gp(s.timestampValue,e.timestampValue);case 4:return gp(da(s),da(e));case 5:return Sh(s.stringValue,e.stringValue);case 6:return(function(c,d){const g=ss(c),v=ss(d);return g.compareTo(v)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),v=d.split("/");for(let w=0;w<g.length&&w<v.length;w++){const N=Ne(g[w],v[w]);if(N!==0)return N}return Ne(g.length,v.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Ne(at(c.latitude),at(d.latitude));return g!==0?g:Ne(at(c.longitude),at(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return yp(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var g,v,w,N;const x=c.fields||{},T=d.fields||{},P=(g=x[iu])===null||g===void 0?void 0:g.arrayValue,U=(v=T[iu])===null||v===void 0?void 0:v.arrayValue,q=Ne(((w=P==null?void 0:P.values)===null||w===void 0?void 0:w.length)||0,((N=U==null?void 0:U.values)===null||N===void 0?void 0:N.length)||0);return q!==0?q:yp(P,U)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Hl.mapValue&&d===Hl.mapValue)return 0;if(c===Hl.mapValue)return 1;if(d===Hl.mapValue)return-1;const g=c.fields||{},v=Object.keys(g),w=d.fields||{},N=Object.keys(w);v.sort(),N.sort();for(let x=0;x<v.length&&x<N.length;++x){const T=Sh(v[x],N[x]);if(T!==0)return T;const P=Qi(g[v[x]],w[N[x]]);if(P!==0)return P}return Ne(v.length,N.length)})(s.mapValue,e.mapValue);default:throw we(23264,{le:n})}}function gp(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ne(s,e);const n=rs(s),i=rs(e),a=Ne(n.seconds,i.seconds);return a!==0?a:Ne(n.nanos,i.nanos)}function yp(s,e){const n=s.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const c=Qi(n[a],i[a]);if(c)return c}return Ne(n.length,i.length)}function Ki(s){return Ih(s)}function Ih(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=rs(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ss(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return pe.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",a=!0;for(const c of n.values||[])a?a=!1:i+=",",i+=Ih(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const d of i)c?c=!1:a+=",",a+=`${d}:${Ih(n.fields[d])}`;return a+"}"})(s.mapValue):we(61005,{value:s})}function Ql(s){switch(is(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gu(s);return e?16+Ql(e):16;case 5:return 2*s.stringValue.length;case 6:return ss(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+Ql(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return us(i.fields,((c,d)=>{a+=c.length+Ql(d)})),a})(s.mapValue);default:throw we(13486,{value:s})}}function vp(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ah(s){return!!s&&"integerValue"in s}function Kh(s){return!!s&&"arrayValue"in s}function _p(s){return!!s&&"nullValue"in s}function wp(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Kl(s){return!!s&&"mapValue"in s}function Sw(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Dg])===null||n===void 0?void 0:n.stringValue)===jg}function ia(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return us(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=ia(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(s.arrayValue.values[n]);return e}return Object.assign({},s)}function Iw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Tw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=kt.emptyPath(),i={},a=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const v=this.getFieldsMap(n);this.applyChanges(v,i,a),i={},a=[],n=g.popLast()}d?i[g.lastSegment()]=ia(d):a.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,a)}delete(e){const n=this.field(e.popLast());Kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Kl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){us(n,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new Zt(ia(this.value))}}function Mg(s){const e=[];return us(s.fields,((n,i)=>{const a=new kt([n]);if(Kl(i)){const c=Mg(i.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)})),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,i,a,c,d,g){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new bt(e,0,Te.min(),Te.min(),Te.min(),Zt.empty(),0)}static newFoundDocument(e,n,i,a){return new bt(e,1,n,Te.min(),i,a,0)}static newNoDocument(e,n){return new bt(e,2,n,Te.min(),Te.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,Te.min(),Te.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n){this.position=e,this.inclusive=n}}function Ep(s,e,n){let i=0;for(let a=0;a<s.position.length;a++){const c=e[a],d=s.position[a];if(c.field.isKeyField()?i=pe.comparator(pe.fromName(d.referenceValue),n.key):i=Qi(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Tp(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!tr(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n="asc"){this.field=e,this.dir=n}}function Aw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{}class dt extends Og{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new xw(e,n,i):n==="array-contains"?new Rw(e,i):n==="in"?new kw(e,i):n==="not-in"?new Vw(e,i):n==="array-contains-any"?new Dw(e,i):new dt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Cw(e,i):new Pw(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qi(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(Qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends Og{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ln(e,n)}matches(e){return Lg(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Lg(s){return s.op==="and"}function Fg(s){return Nw(s)&&Lg(s)}function Nw(s){for(const e of s.filters)if(e instanceof Ln)return!1;return!0}function Nh(s){if(s instanceof dt)return s.field.canonicalString()+s.op.toString()+Ki(s.value);if(Fg(s))return s.filters.map((e=>Nh(e))).join(",");{const e=s.filters.map((n=>Nh(n))).join(",");return`${s.op}(${e})`}}function bg(s,e){return s instanceof dt?(function(i,a){return a instanceof dt&&i.op===a.op&&i.field.isEqual(a.field)&&tr(i.value,a.value)})(s,e):s instanceof Ln?(function(i,a){return a instanceof Ln&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,d,g)=>c&&bg(d,a.filters[g])),!0):!1})(s,e):void we(19439)}function Ug(s){return s instanceof dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ki(n.value)}`})(s):s instanceof Ln?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ug).join(" ,")+"}"})(s):"Filter"}class xw extends dt{constructor(e,n,i){super(e,n,i),this.key=pe.fromName(i.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Cw extends dt{constructor(e,n){super(e,"in",n),this.keys=zg("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Pw extends dt{constructor(e,n){super(e,"not-in",n),this.keys=zg("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function zg(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>pe.fromName(i.referenceValue)))}class Rw extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kh(n)&&ma(n.arrayValue,this.value)}}class kw extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ma(this.value.arrayValue,n)}}class Vw extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ma(this.value.arrayValue,n)}}class Dw extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>ma(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n=null,i=[],a=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=d,this.endAt=g,this.Pe=null}}function Sp(s,e=null,n=[],i=[],a=null,c=null,d=null){return new jw(s,e,n,i,a,c,d)}function Xh(s){const e=Se(s);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Nh(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ki(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ki(i))).join(",")),e.Pe=n}return e.Pe}function Yh(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Aw(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!bg(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Tp(s.startAt,e.startAt)&&Tp(s.endAt,e.endAt)}function xh(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n=null,i=[],a=[],c=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Mw(s,e,n,i,a,c,d,g){return new no(s,e,n,i,a,c,d,g)}function Jh(s){return new no(s)}function Ip(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Bg(s){return s.collectionGroup!==null}function oa(s){const e=Se(s);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new _t(kt.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((w=>{w.isInequality()&&(g=g.add(w.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new pa(c,i))})),n.has(kt.keyField().canonicalString())||e.Te.push(new pa(kt.keyField(),i))}return e.Te}function Xn(s){const e=Se(s);return e.Ie||(e.Ie=Ow(e,oa(s))),e.Ie}function Ow(s,e){if(s.limitType==="F")return Sp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new pa(a.field,c)}));const n=s.endAt?new ou(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new ou(s.startAt.position,s.startAt.inclusive):null;return Sp(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Ch(s,e){const n=s.filters.concat([e]);return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Ph(s,e,n){return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function yu(s,e){return Yh(Xn(s),Xn(e))&&s.limitType===e.limitType}function $g(s){return`${Xh(Xn(s))}|lt:${s.limitType}`}function Bi(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>Ug(a))).join(", ")}]`),pu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Ki(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Ki(a))).join(",")),`Target(${i})`})(Xn(s))}; limitType=${s.limitType})`}function vu(s,e){return e.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):pe.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,a){for(const c of oa(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(d,g,v){const w=Ep(d,g,v);return d.inclusive?w<=0:w<0})(i.startAt,oa(i),a)||i.endAt&&!(function(d,g,v){const w=Ep(d,g,v);return d.inclusive?w>=0:w>0})(i.endAt,oa(i),a))})(s,e)}function Lw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Hg(s){return(e,n)=>{let i=!1;for(const a of oa(s)){const c=Fw(a,e,n);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function Fw(s,e,n){const i=s.field.isKeyField()?pe.comparator(e.key,n.key):(function(c,d,g){const v=d.data.field(c),w=g.data.field(c);return v!==null&&w!==null?Qi(v,w):we(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,((n,i)=>{for(const[a,c]of i)e(a,c)}))}isEmpty(){return xg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new rt(pe.comparator);function Tr(){return bw}const qg=new rt(pe.comparator);function ta(...s){let e=qg;for(const n of s)e=e.insert(n.key,n);return e}function Wg(s){let e=qg;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Bs(){return aa()}function Gg(){return aa()}function aa(){return new Gs((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Uw=new rt(pe.comparator),zw=new _t(pe.comparator);function Re(...s){let e=zw;for(const n of s)e=e.add(n);return e}const Bw=new _t(Ne);function $w(){return Bw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function Qg(s){return{integerValue:""+s}}function Hw(s,e){return yw(e)?Qg(e):Zh(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this._=void 0}}function qw(s,e,n){return s instanceof ga?(function(a,c){const d={fields:{[Rg]:{stringValue:Pg},[Vg]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Qh(c)&&(c=gu(c)),c&&(d.fields[kg]=c),{mapValue:d}})(n,e):s instanceof ya?Xg(s,e):s instanceof va?Yg(s,e):(function(a,c){const d=Kg(a,c),g=Ap(d)+Ap(a.Ee);return Ah(d)&&Ah(a.Ee)?Qg(g):Zh(a.serializer,g)})(s,e)}function Ww(s,e,n){return s instanceof ya?Xg(s,e):s instanceof va?Yg(s,e):n}function Kg(s,e){return s instanceof au?(function(i){return Ah(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class ga extends _u{}class ya extends _u{constructor(e){super(),this.elements=e}}function Xg(s,e){const n=Jg(e);for(const i of s.elements)n.some((a=>tr(a,i)))||n.push(i);return{arrayValue:{values:n}}}class va extends _u{constructor(e){super(),this.elements=e}}function Yg(s,e){let n=Jg(e);for(const i of s.elements)n=n.filter((a=>!tr(a,i)));return{arrayValue:{values:n}}}class au extends _u{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ap(s){return at(s.integerValue||s.doubleValue)}function Jg(s){return Kh(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n){this.field=e,this.transform=n}}function Qw(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof ya&&a instanceof ya||i instanceof va&&a instanceof va?Gi(i.elements,a.elements,tr):i instanceof au&&a instanceof au?tr(i.Ee,a.Ee):i instanceof ga&&a instanceof ga})(s.transform,e.transform)}class Kw{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xl(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class wu{}function Zg(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new ed(s.key,En.none()):new wa(s.key,s.data,En.none());{const n=s.data,i=Zt.empty();let a=new _t(kt.comparator);for(let c of e.fields)if(!a.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),a=a.add(c)}return new cs(s.key,i,new ln(a.toArray()),En.none())}}function Xw(s,e,n){s instanceof wa?(function(a,c,d){const g=a.value.clone(),v=xp(a.fieldTransforms,c,d.transformResults);g.setAll(v),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):s instanceof cs?(function(a,c,d){if(!Xl(a.precondition,c))return void c.convertToUnknownDocument(d.version);const g=xp(a.fieldTransforms,c,d.transformResults),v=c.data;v.setAll(ey(a)),v.setAll(g),c.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(s,e,n):(function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function la(s,e,n,i){return s instanceof wa?(function(c,d,g,v){if(!Xl(c.precondition,d))return g;const w=c.value.clone(),N=Cp(c.fieldTransforms,v,d);return w.setAll(N),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),null})(s,e,n,i):s instanceof cs?(function(c,d,g,v){if(!Xl(c.precondition,d))return g;const w=Cp(c.fieldTransforms,v,d),N=d.data;return N.setAll(ey(c)),N.setAll(w),d.convertToFoundDocument(d.version,N).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((x=>x.field)))})(s,e,n,i):(function(c,d,g){return Xl(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,n)}function Yw(s,e){let n=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),c=Kg(i.transform,a||null);c!=null&&(n===null&&(n=Zt.empty()),n.set(i.field,c))}return n||null}function Np(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Gi(i,a,((c,d)=>Qw(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class wa extends wu{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class cs extends wu{constructor(e,n,i,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ey(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function xp(s,e,n){const i=new Map;Be(s.length===n.length,32656,{Ae:n.length,Re:s.length});for(let a=0;a<n.length;a++){const c=s[a],d=c.transform,g=e.data.field(c.field);i.set(c.field,Ww(d,g,n[a]))}return i}function Cp(s,e,n){const i=new Map;for(const a of s){const c=a.transform,d=n.data.field(a.field);i.set(a.field,qw(c,d,e))}return i}class ed extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jw extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Xw(c,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=la(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=la(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Gg();return this.mutations.forEach((a=>{const c=e.get(a.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(a.key)?null:g;const v=Zg(d,g);v!==null&&i.set(a.key,v),d.isValidDocument()||d.convertToNoDocument(Te.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Re())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,((n,i)=>Np(n,i)))&&Gi(this.baseMutations,e.baseMutations,((n,i)=>Np(n,i)))}}class td{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){Be(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let a=(function(){return Uw})();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,i[d].version);return new td(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Oe;function nE(s){switch(s){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:s})}}function ty(s){if(s===void 0)return Er("GRPC error has no .code"),W.UNKNOWN;switch(s){case ht.OK:return W.OK;case ht.CANCELLED:return W.CANCELLED;case ht.UNKNOWN:return W.UNKNOWN;case ht.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case ht.INTERNAL:return W.INTERNAL;case ht.UNAVAILABLE:return W.UNAVAILABLE;case ht.UNAUTHENTICATED:return W.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case ht.NOT_FOUND:return W.NOT_FOUND;case ht.ALREADY_EXISTS:return W.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return W.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case ht.ABORTED:return W.ABORTED;case ht.OUT_OF_RANGE:return W.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return W.UNIMPLEMENTED;case ht.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:s})}}(Oe=ht||(ht={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Jr([4294967295,4294967295],0);function Pp(s){const e=Sg().encode(s),n=new pg;return n.update(e),new Uint8Array(n.digest())}function Rp(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Jr([n,i],0),new Jr([a,c],0)]}class nd{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new na(`Invalid padding: ${n}`);if(i<0)throw new na(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new na(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new na(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Jr.fromNumber(this.fe)}pe(e,n,i){let a=e.add(n.multiply(Jr.fromNumber(i)));return a.compare(rE)===1&&(a=new Jr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Pp(e),[i,a]=Rp(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(i,a,c);if(!this.ye(d))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new nd(c,a,n);return i.forEach((g=>d.insert(g))),d}insert(e){if(this.fe===0)return;const n=Pp(e),[i,a]=Rp(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(i,a,c);this.we(d)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,i,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Ea.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Eu(Te.min(),a,new rt(Ne),Tr(),Re())}}class Ea{constructor(e,n,i,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ea(i,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n,i,a){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=a}}class ny{constructor(e,n){this.targetId=e,this.De=n}}class ry{constructor(e,n,i=Vt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class kp{constructor(){this.ve=0,this.Ce=Vp(),this.Fe=Vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Re(),n=Re(),i=Re();return this.Ce.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:we(38017,{changeType:c})}})),new Ea(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=Vp()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class sE{constructor(e){this.We=e,this.Ge=new Map,this.ze=Tr(),this.je=ql(),this.Je=ql(),this.He=new rt(Ne)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,i=e.De.count,a=this.st(n);if(a){const c=a.target;if(xh(c))if(i===0){const d=new pe(c.path);this.Xe(n,d,bt.newNoDocument(d,Te.min()))}else Be(i===1,20013,{expectedCount:i});else{const d=this.ot(n);if(d!==i){const g=this._t(e),v=g?this.ut(g,e,d):1;if(v!==0){this.rt(n);const w=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,w)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=n;let d,g;try{d=ss(i).toUint8Array()}catch(v){if(v instanceof Cg)return ts("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new nd(d,a,c)}catch(v){return ts(v instanceof na?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.fe===0?null:g}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let a=0;return i.forEach((c=>{const d=this.We.lt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.Xe(n,c,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((c,d)=>{const g=this.st(d);if(g){if(c.current&&xh(g.target)){const v=new pe(g.target.path);this.Tt(v).has(d)||this.It(d,v)||this.Xe(d,v,bt.newNoDocument(v,e))}c.Ne&&(n.set(d,c.Le()),c.ke())}}));let i=Re();this.Je.forEach(((c,d)=>{let g=!0;d.forEachWhile((v=>{const w=this.st(v);return!w||w.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(c))})),this.ze.forEach(((c,d)=>d.setReadTime(e)));const a=new Eu(e,n,this.He,this.ze,i);return this.ze=Tr(),this.je=ql(),this.Je=ql(),this.He=new rt(Ne),a}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new kp,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new _t(Ne),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new _t(Ne),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new kp),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function ql(){return new rt(pe.comparator)}function Vp(){return new rt(pe.comparator)}const iE={asc:"ASCENDING",desc:"DESCENDING"},oE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aE={and:"AND",or:"OR"};class lE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rh(s,e){return s.useProto3Json||pu(e)?e:{value:e}}function lu(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sy(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function uE(s,e){return lu(s,e.toTimestamp())}function Yn(s){return Be(!!s,49232),Te.fromTimestamp((function(n){const i=rs(n);return new Ye(i.seconds,i.nanos)})(s))}function rd(s,e){return kh(s,e).canonicalString()}function kh(s,e){const n=(function(a){return new Qe(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?n:n.child(e)}function iy(s){const e=Qe.fromString(s);return Be(cy(e),10190,{key:e.toString()}),e}function Vh(s,e){return rd(s.databaseId,e.path)}function fh(s,e){const n=iy(e);if(n.get(1)!==s.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new pe(ay(n))}function oy(s,e){return rd(s.databaseId,e)}function cE(s){const e=iy(s);return e.length===4?Qe.emptyPath():ay(e)}function Dh(s){return new Qe(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function ay(s){return Be(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Dp(s,e,n){return{name:Vh(s,e),fields:n.value.mapValue.fields}}function hE(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:we(39313,{state:w})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(w,N){return w.useProto3Json?(Be(N===void 0||typeof N=="string",58123),Vt.fromBase64String(N||"")):(Be(N===void 0||N instanceof Buffer||N instanceof Uint8Array,16193),Vt.fromUint8Array(N||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(w){const N=w.code===void 0?W.UNKNOWN:ty(w.code);return new ie(N,w.message||"")})(d);n=new ry(i,a,c,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=fh(s,i.document.name),c=Yn(i.document.updateTime),d=i.document.createTime?Yn(i.document.createTime):Te.min(),g=new Zt({mapValue:{fields:i.document.fields}}),v=bt.newFoundDocument(a,c,d,g),w=i.targetIds||[],N=i.removedTargetIds||[];n=new Yl(w,N,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=fh(s,i.document),c=i.readTime?Yn(i.readTime):Te.min(),d=bt.newNoDocument(a,c),g=i.removedTargetIds||[];n=new Yl([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=fh(s,i.document),c=i.removedTargetIds||[];n=new Yl([],c,a,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,d=new tE(a,c),g=i.targetId;n=new ny(g,d)}}return n}function dE(s,e){let n;if(e instanceof wa)n={update:Dp(s,e.key,e.value)};else if(e instanceof ed)n={delete:Vh(s,e.key)};else if(e instanceof cs)n={update:Dp(s,e.key,e.data),updateMask:EE(e.fieldMask)};else{if(!(e instanceof Jw))return we(16599,{Rt:e.type});n={verify:Vh(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const g=d.transform;if(g instanceof ga)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ya)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof va)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof au)return{fieldPath:d.field.canonicalString(),increment:g.Ee};throw we(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:uE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(s,e.precondition)),n}function fE(s,e){return s&&s.length>0?(Be(e!==void 0,14353),s.map((n=>(function(a,c){let d=a.updateTime?Yn(a.updateTime):Yn(c);return d.isEqual(Te.min())&&(d=Yn(c)),new Kw(d,a.transformResults||[])})(n,e)))):[]}function mE(s,e){return{documents:[oy(s,e.path)]}}function pE(s,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=oy(s,a);const c=(function(w){if(w.length!==0)return uy(Ln.create(w,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(w){if(w.length!==0)return w.map((N=>(function(T){return{field:$i(T.field),direction:vE(T.dir)}})(N)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=Rh(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{Vt:n,parent:a}}function gE(s){let e=cE(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){Be(i===1,65062);const N=n.from[0];N.allDescendants?a=N.collectionId:e=e.child(N.collectionId)}let c=[];n.where&&(c=(function(x){const T=ly(x);return T instanceof Ln&&Fg(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(x){return x.map((T=>(function(U){return new pa(Hi(U.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(T)))})(n.orderBy));let g=null;n.limit&&(g=(function(x){let T;return T=typeof x=="object"?x.value:x,pu(T)?null:T})(n.limit));let v=null;n.startAt&&(v=(function(x){const T=!!x.before,P=x.values||[];return new ou(P,T)})(n.startAt));let w=null;return n.endAt&&(w=(function(x){const T=!x.before,P=x.values||[];return new ou(P,T)})(n.endAt)),Mw(e,a,d,c,g,"F",v,w)}function yE(s,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ly(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Hi(n.unaryFilter.field);return dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Hi(n.unaryFilter.field);return dt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Hi(n.unaryFilter.field);return dt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Hi(n.unaryFilter.field);return dt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(s):s.fieldFilter!==void 0?(function(n){return dt.create(Hi(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ln.create(n.compositeFilter.filters.map((i=>ly(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(s):we(30097,{filter:s})}function vE(s){return iE[s]}function _E(s){return oE[s]}function wE(s){return aE[s]}function $i(s){return{fieldPath:s.canonicalString()}}function Hi(s){return kt.fromServerFormat(s.fieldPath)}function uy(s){return s instanceof dt?(function(n){if(n.op==="=="){if(wp(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NAN"}};if(_p(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wp(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NAN"}};if(_p(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(n.field),op:_E(n.op),value:n.value}}})(s):s instanceof Ln?(function(n){const i=n.getFilters().map((a=>uy(a)));return i.length===1?i[0]:{compositeFilter:{op:wE(n.op),filters:i}}})(s):we(54877,{filter:s})}function EE(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function cy(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,i,a,c=Te.min(),d=Te.min(),g=Vt.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.gt=e}}function SE(s){const e=gE({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.Dn=new AE}addToCollectionParentIndex(e,n){return this.Dn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ns.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class AE{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new _t(Qe.comparator),c=!a.has(i);return this.index[n]=a.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new _t(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hy=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(hy,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Xi(0)}static ur(){return new Xi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="LruGarbageCollector",NE=1048576;function Op([s,e],[n,i]){const a=Ne(s,n);return a===0?Ne(e,i):a}class xE{constructor(e){this.Tr=e,this.buffer=new _t(Op),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Op(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CE{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ae(Mp,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){to(n)?ae(Mp,"Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Rr(3e5)}))}}class PE{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return G.resolve(mu.ue);const i=new xE(n);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(jp)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jp):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,a,c,d,g,v,w;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,d=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(i=x,g=Date.now(),this.removeTargets(e,i,n)))).next((x=>(c=x,v=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(w=Date.now(),zi()<=Le.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-N}ms
	Determined least recently used ${a} in `+(g-d)+`ms
	Removed ${c} targets in `+(v-g)+`ms
	Removed ${x} documents in `+(w-v)+`ms
Total Duration: ${w-N}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:x}))))}}function RE(s,e){return new PE(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.changes=new Gs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&la(i.mutation,a,ln.empty(),Ye.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Re()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Re()){const a=Bs();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((c=>{let d=ta();return c.forEach(((g,v)=>{d=d.insert(g,v.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=Bs();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Re())))}populateOverlays(e,n,i){const a=[];return i.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,i,a){let c=Tr();const d=aa(),g=(function(){return aa()})();return n.forEach(((v,w)=>{const N=i.get(w.key);a.has(w.key)&&(N===void 0||N.mutation instanceof cs)?c=c.insert(w.key,w):N!==void 0?(d.set(w.key,N.mutation.getFieldMask()),la(N.mutation,w,N.mutation.getFieldMask(),Ye.now())):d.set(w.key,ln.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((w,N)=>d.set(w,N))),n.forEach(((w,N)=>{var x;return g.set(w,new VE(N,(x=d.get(w))!==null&&x!==void 0?x:null))})),g)))}recalculateAndSaveOverlays(e,n){const i=aa();let a=new rt(((d,g)=>d-g)),c=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((v=>{const w=n.get(v);if(w===null)return;let N=i.get(v)||ln.empty();N=g.applyToLocalView(w,N),i.set(v,N);const x=(a.get(g.batchId)||Re()).add(v);a=a.insert(g.batchId,x)}))})).next((()=>{const d=[],g=a.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),w=v.key,N=v.value,x=Gg();N.forEach((T=>{if(!c.has(T)){const P=Zg(n.get(T),i.get(T));P!==null&&x.set(T,P),c=c.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,w,x))}return G.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return(function(d){return pe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-c.size):G.resolve(Bs());let g=ha,v=c;return d.next((w=>G.forEach(w,((N,x)=>(g<x.largestBatchId&&(g=x.largestBatchId),c.get(N)?G.resolve():this.remoteDocumentCache.getEntry(e,N).next((T=>{v=v.insert(N,T)}))))).next((()=>this.populateOverlays(e,w,c))).next((()=>this.computeViews(e,v,w,Re()))).next((N=>({batchId:g,changes:Wg(N)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next((i=>{let a=ta();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const c=n.collectionGroup;let d=ta();return this.indexManager.getCollectionParents(e,c).next((g=>G.forEach(g,(v=>{const w=(function(x,T){return new no(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,w,i,a).next((N=>{N.forEach(((x,T)=>{d=d.insert(x,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,a)))).next((d=>{c.forEach(((v,w)=>{const N=w.getKey();d.get(N)===null&&(d=d.insert(N,bt.newInvalidDocument(N)))}));let g=ta();return d.forEach(((v,w)=>{const N=c.get(v);N!==void 0&&la(N.mutation,w,ln.empty(),Ye.now()),vu(n,w)&&(g=g.insert(v,w))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return G.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Yn(a.createTime)}})(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:SE(a.bundledQuery),readTime:Yn(a.readTime)}})(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.overlays=new rt(pe.comparator),this.kr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Bs();return G.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,c)=>{this.wt(e,n,c)})),G.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.kr.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const a=Bs(),c=n.length+1,d=new pe(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,w=v.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===c&&v.largestBatchId>i&&a.set(v.getKey(),v)}return G.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let c=new rt(((w,N)=>w-N));const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>i){let N=c.get(w.largestBatchId);N===null&&(N=Bs(),c=c.insert(w.largestBatchId,N)),N.set(w.getKey(),w)}}const g=Bs(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((w,N)=>g.set(w,N))),!(g.size()>=a)););return G.resolve(g)}wt(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const d=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new eE(n,i));let c=this.kr.get(n);c===void 0&&(c=Re(),this.kr.set(n,c)),this.kr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this.qr=new _t(At.Qr),this.$r=new _t(At.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new At(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new At(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new pe(new Qe([])),i=new At(n,e),a=new At(n,e+1),c=[];return this.$r.forEachInRange([i,a],(d=>{this.Wr(d),c.push(d.key)})),c}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new pe(new Qe([])),i=new At(n,e),a=new At(n,e+1);let c=Re();return this.$r.forEachInRange([i,a],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new At(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return pe.comparator(e.key,n.key)||Ne(e.Hr,n.Hr)}static Ur(e,n){return Ne(e.Hr,n.Hr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new _t(At.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Zw(c,n,i,a);this.mutationQueue.push(d);for(const g of a)this.Yr=this.Yr.add(new At(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return G.resolve(d)}lookupMutationBatch(e,n){return G.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.Xr(i),c=a<0?0:a;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Gh:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new At(n,0),a=new At(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([i,a],(d=>{const g=this.Zr(d.Hr);c.push(g)})),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new _t(Ne);return n.forEach((a=>{const c=new At(a,0),d=new At(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,d],(g=>{i=i.add(g.Hr)}))})),G.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let c=i;pe.isDocumentKey(c)||(c=c.child(""));const d=new At(new pe(c),0);let g=new _t(Ne);return this.Yr.forEachWhile((v=>{const w=v.key.path;return!!i.isPrefixOf(w)&&(w.length===a&&(g=g.add(v.Hr)),!0)}),d),G.resolve(this.ei(g))}ei(e){const n=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){Be(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return G.forEach(n.mutations,(a=>{const c=new At(a.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new At(n,0),a=this.Yr.firstAfterOrEqual(i);return G.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.ni=e,this.docs=(function(){return new rt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),c=a?a.size:0,d=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let i=Tr();return n.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():bt.newInvalidDocument(a))})),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let c=Tr();const d=n.path,g=new pe(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:w,value:{document:N}}=v.getNext();if(!d.isPrefixOf(w.path))break;w.path.length>d.length+1||fw(dw(N),i)<=0||(a.has(N.key)||vu(n,N))&&(c=c.insert(N.key,N.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(e,n,i,a){we(9500)}ri(e,n){return G.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new bE(this)}getSize(e){return G.resolve(this.size)}}class bE extends kE{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(i)})),G.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.persistence=e,this.ii=new Gs((n=>Xh(n)),Yh),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new sd,this.targetCount=0,this._i=Xi.ar()}forEachTarget(e,n){return this.ii.forEach(((i,a)=>n(a))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),G.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Xi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.hr(n),G.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let a=0;const c=[];return this.ii.forEach(((d,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.ii.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)})),G.waitFor(c).next((()=>a))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((d=>{c.push(a.markPotentiallyOrphaned(e,d))})),G.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n){this.ai={},this.overlays={},this.ui=new mu(0),this.ci=!1,this.ci=!0,this.li=new OE,this.referenceDelegate=e(this),this.hi=new UE(this),this.indexManager=new IE,this.remoteDocumentCache=(function(a){return new FE(a)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new TE(n),this.Ti=new jE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ME,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new LE(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){ae("MemoryPersistence","Starting transaction:",e);const a=new zE(this.ui.next());return this.referenceDelegate.Ii(),i(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,n){return G.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class zE extends pw{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.Ai=new sd,this.Ri=null}static Vi(e){return new id(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.mi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,(i=>{const a=pe.fromPath(i);return this.fi(e,a).next((c=>{c||n.removeEntry(a,Te.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return G.or([()=>G.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class uu{constructor(e,n){this.persistence=e,this.gi=new Gs((i=>vw(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=RE(this,n)}static Vi(e,n){return new uu(e,n)}Ii(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return G.forEach(this.gi,((i,a)=>this.Sr(e,i,a).next((c=>c?G.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ri(e,(d=>this.Sr(e,d,n).next((g=>{g||(i++,c.removeEntry(d,Te.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ql(e.data.value)),n}Sr(e,n,i){return G.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return G.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=a}static Es(e,n){let i=Re(),a=Re();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new od(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return M_()?8:gw(D_())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,a){const c={result:null};return this.ps(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ys(e,n,a,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new BE;return this.ws(e,n,d).next((g=>{if(c.result=g,this.Rs)return this.Ss(e,n,d,g.size)}))})).next((()=>c.result))}Ss(e,n,i,a){return i.documentReadCount<this.Vs?(zi()<=Le.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(zi()<=Le.DEBUG&&ae("QueryEngine","Query:",Bi(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(zi()<=Le.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):G.resolve())}ps(e,n){if(Ip(n))return G.resolve(null);let i=Xn(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=Ph(n,null,"F"),i=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Re(...c);return this.gs.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,i).next((v=>{const w=this.bs(n,g);return this.Ds(n,w,d,v.readTime)?this.ps(e,Ph(n,null,"F")):this.vs(e,w,n,v)}))))})))))}ys(e,n,i,a){return Ip(n)||a.isEqual(Te.min())?G.resolve(null):this.gs.getDocuments(e,i).next((c=>{const d=this.bs(n,c);return this.Ds(n,d,i,a)?G.resolve(null):(zi()<=Le.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bi(n)),this.vs(e,d,n,hw(a,ha)).next((g=>g)))}))}bs(e,n){let i=new _t(Hg(e));return n.forEach(((a,c)=>{vu(e,c)&&(i=i.add(c))})),i}Ds(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ws(e,n,i){return zi()<=Le.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Bi(n)),this.gs.getDocumentsMatchingQuery(e,n,ns.min(),i)}vs(e,n,i,a){return this.gs.getDocumentsMatchingQuery(e,i,a).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="LocalStore",HE=3e8;class qE{constructor(e,n,i,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new rt(Ne),this.Ms=new Gs((c=>Xh(c)),Yh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function WE(s,e,n,i){return new qE(s,e,n,i)}async function fy(s,e){const n=Se(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],g=[];let v=Re();for(const w of a){d.push(w.batchId);for(const N of w.mutations)v=v.add(N.key)}for(const w of c){g.push(w.batchId);for(const N of w.mutations)v=v.add(N.key)}return n.localDocuments.getDocuments(i,v).next((w=>({Bs:w,removedBatchIds:d,addedBatchIds:g})))}))}))}function GE(s,e){const n=Se(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return(function(g,v,w,N){const x=w.batch,T=x.keys();let P=G.resolve();return T.forEach((U=>{P=P.next((()=>N.getEntry(v,U))).next((q=>{const H=w.docVersions.get(U);Be(H!==null,48541),q.version.compareTo(H)<0&&(x.applyToRemoteDocument(q,w),q.isValidDocument()&&(q.setReadTime(w.commitVersion),N.addEntry(q)))}))})),P.next((()=>g.mutationQueue.removeMutationBatch(v,x)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let v=Re();for(let w=0;w<g.mutationResults.length;++w)g.mutationResults[w].transformResults.length>0&&(v=v.add(g.batch.mutations[w].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function my(s){const e=Se(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function QE(s,e){const n=Se(s),i=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const g=[];e.targetChanges.forEach(((N,x)=>{const T=a.get(x);if(!T)return;g.push(n.hi.removeMatchingKeys(c,N.removedDocuments,x).next((()=>n.hi.addMatchingKeys(c,N.addedDocuments,x))));let P=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?P=P.withResumeToken(Vt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):N.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(N.resumeToken,i)),a=a.insert(x,P),(function(q,H,J){return q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=HE?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(T,P,N)&&g.push(n.hi.updateTargetData(c,P))}));let v=Tr(),w=Re();if(e.documentUpdates.forEach((N=>{e.resolvedLimboDocuments.has(N)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,N))})),g.push(KE(c,d,e.documentUpdates).next((N=>{v=N.Ls,w=N.ks}))),!i.isEqual(Te.min())){const N=n.hi.getLastRemoteSnapshotVersion(c).next((x=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,i)));g.push(N)}return G.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,v,w))).next((()=>v))})).then((c=>(n.Fs=a,c)))}function KE(s,e,n){let i=Re(),a=Re();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let d=Tr();return n.forEach(((g,v)=>{const w=c.get(g);v.isFoundDocument()!==w.isFoundDocument()&&(a=a.add(g)),v.isNoDocument()&&v.version.isEqual(Te.min())?(e.removeEntry(g,v.readTime),d=d.insert(g,v)):!w.isValidDocument()||v.version.compareTo(w.version)>0||v.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(v),d=d.insert(g,v)):ae(ad,"Ignoring outdated watch update for ",g,". Current version:",w.version," Watch version:",v.version)})),{Ls:d,ks:a}}))}function XE(s,e){const n=Se(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Gh),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function YE(s,e){const n=Se(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.hi.getTargetData(i,e).next((c=>c?(a=c,G.resolve(a)):n.hi.allocateTargetId(i).next((d=>(a=new Kr(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function jh(s,e,n){const i=Se(s),a=i.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!to(d))throw d;ae(ad,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(a.target)}function Lp(s,e,n){const i=Se(s);let a=Te.min(),c=Re();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,w,N){const x=Se(v),T=x.Ms.get(N);return T!==void 0?G.resolve(x.Fs.get(T)):x.hi.getTargetData(w,N)})(i,d,Xn(e)).next((g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,g.targetId).next((v=>{c=v}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,n?a:Te.min(),n?c:Re()))).next((g=>(JE(i,Lw(e),g),{documents:g,qs:c})))))}function JE(s,e,n){let i=s.xs.get(e)||Te.min();n.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.xs.set(e,i)}class Fp{constructor(){this.activeTargetIds=$w()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZE{constructor(){this.Fo=new Fp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Fp,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="ConnectivityMonitor";class Up{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ae(bp,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ae(bp,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl=null;function Mh(){return Wl===null?Wl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wl++,"0x"+Wl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="RestConnection",t1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n1{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===su?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,n,i,a,c){const d=Mh(),g=this.Go(e,n.toUriEncodedString());ae(mh,`Sending RPC '${e}' ${d}:`,g,i);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(v,a,c);const{host:w}=new URL(g),N=$h(w);return this.jo(e,g,v,i,N).then((x=>(ae(mh,`Received RPC '${e}' ${d}: `,x),x)),(x=>{throw ts(mh,`RPC '${e}' ${d} failed with error: `,x,"url: ",g,"request:",i),x}))}Jo(e,n,i,a,c,d){return this.Wo(e,n,i,a,c)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),i&&i.headers.forEach(((a,c)=>e[c]=a))}Go(e,n){const i=t1[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class s1 extends n1{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,a,c){const d=Mh();return new Promise(((g,v)=>{const w=new gg;w.setWithCredentials(!0),w.listenOnce(yg.COMPLETE,(()=>{try{switch(w.getLastErrorCode()){case Gl.NO_ERROR:const x=w.getResponseJson();ae(Lt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),g(x);break;case Gl.TIMEOUT:ae(Lt,`RPC '${e}' ${d} timed out`),v(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case Gl.HTTP_ERROR:const T=w.getStatus();if(ae(Lt,`RPC '${e}' ${d} failed with status:`,T,"response text:",w.getResponseText()),T>0){let P=w.getResponseJson();Array.isArray(P)&&(P=P[0]);const U=P==null?void 0:P.error;if(U&&U.status&&U.message){const q=(function(J){const Z=J.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(Z)>=0?Z:W.UNKNOWN})(U.status);v(new ie(q,U.message))}else v(new ie(W.UNKNOWN,"Server responded with status "+w.getStatus()))}else v(new ie(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:d,l_:w.getLastErrorCode(),h_:w.getLastError()})}}finally{ae(Lt,`RPC '${e}' ${d} completed.`)}}));const N=JSON.stringify(a);ae(Lt,`RPC '${e}' ${d} sending request:`,a),w.send(n,"POST",N,i,15)}))}P_(e,n,i){const a=Mh(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=wg(),g=_g(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(v.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(v.useFetchStreams=!0),this.zo(v.initMessageHeaders,n,i),v.encodeInitMessageHeaders=!0;const N=c.join("");ae(Lt,`Creating RPC '${e}' stream ${a}: ${N}`,v);const x=d.createWebChannel(N,v);this.T_(x);let T=!1,P=!1;const U=new r1({Ho:H=>{P?ae(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,H):(T||(ae(Lt,`Opening RPC '${e}' stream ${a} transport.`),x.open(),T=!0),ae(Lt,`RPC '${e}' stream ${a} sending:`,H),x.send(H))},Yo:()=>x.close()}),q=(H,J,Z)=>{H.listen(J,(re=>{try{Z(re)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return q(x,ea.EventType.OPEN,(()=>{P||(ae(Lt,`RPC '${e}' stream ${a} transport opened.`),U.s_())})),q(x,ea.EventType.CLOSE,(()=>{P||(P=!0,ae(Lt,`RPC '${e}' stream ${a} transport closed`),U.__(),this.I_(x))})),q(x,ea.EventType.ERROR,(H=>{P||(P=!0,ts(Lt,`RPC '${e}' stream ${a} transport errored. Name:`,H.name,"Message:",H.message),U.__(new ie(W.UNAVAILABLE,"The operation could not be completed")))})),q(x,ea.EventType.MESSAGE,(H=>{var J;if(!P){const Z=H.data[0];Be(!!Z,16349);const re=Z,ce=(re==null?void 0:re.error)||((J=re[0])===null||J===void 0?void 0:J.error);if(ce){ae(Lt,`RPC '${e}' stream ${a} received error:`,ce);const Ve=ce.status;let z=(function(R){const D=ht[R];if(D!==void 0)return ty(D)})(Ve),k=ce.message;z===void 0&&(z=W.INTERNAL,k="Unknown error status: "+Ve+" with message "+ce.message),P=!0,U.__(new ie(z,k)),x.close()}else ae(Lt,`RPC '${e}' stream ${a} received:`,Z),U.a_(Z)}})),q(g,vg.STAT_EVENT,(H=>{H.stat===Th.PROXY?ae(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):H.stat===Th.NOPROXY&&ae(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{U.o_()}),0),U}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function ph(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(s){return new lE(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,i=1e3,a=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=a,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-i);a>0&&ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="PersistentStream";class gy{constructor(e,n,i,a,c,d,g,v){this.Fi=e,this.w_=i,this.S_=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new py(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.b_===n&&this.W_(i,a)}),(i=>{e((()=>{const a=new ie(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{i((()=>this.G_(a)))})),this.stream.onMessage((a=>{i((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ae(zp,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(ae(zp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class i1 extends gy{constructor(e,n,i,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=hE(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Te.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Te.min():d.readTime?Yn(d.readTime):Te.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Dh(this.serializer),n.addTarget=(function(c,d){let g;const v=d.target;if(g=xh(v)?{documents:mE(c,v)}:{query:pE(c,v).Vt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=sy(c,d.resumeToken);const w=Rh(c,d.expectedCount);w!==null&&(g.expectedCount=w)}else if(d.snapshotVersion.compareTo(Te.min())>0){g.readTime=lu(c,d.snapshotVersion.toTimestamp());const w=Rh(c,d.expectedCount);w!==null&&(g.expectedCount=w)}return g})(this.serializer,e);const i=yE(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Dh(this.serializer),n.removeTarget=e,this.k_(n)}}class o1 extends gy{constructor(e,n,i,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=fE(e.writeResults,e.commitTime),i=Yn(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Dh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>dE(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{}class l1 extends a1{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,kh(n,i),a,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie(W.UNKNOWN,c.toString())}))}Jo(e,n,i,a,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Jo(e,kh(n,i),a,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ie(W.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class u1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Er(n),this._a=!1):ae("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class c1{constructor(e,n,i,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{Qs(this)&&(ae(Ws,"Restarting streams for network reachability change."),await(async function(v){const w=Se(v);w.Ia.add(4),await Ta(w),w.Aa.set("Unknown"),w.Ia.delete(4),await Su(w)})(this))}))})),this.Aa=new u1(i,a)}}async function Su(s){if(Qs(s))for(const e of s.da)await e(!0)}async function Ta(s){for(const e of s.da)await e(!1)}function yy(s,e){const n=Se(s);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),hd(n)?cd(n):ro(n).x_()&&ud(n,e))}function ld(s,e){const n=Se(s),i=ro(n);n.Ta.delete(e),i.x_()&&vy(n,e),n.Ta.size===0&&(i.x_()?i.B_():Qs(n)&&n.Aa.set("Unknown"))}function ud(s,e){if(s.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ro(s).H_(e)}function vy(s,e){s.Ra.$e(e),ro(s).Y_(e)}function cd(s){s.Ra=new sE({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>s.Ta.get(e)||null,lt:()=>s.datastore.serializer.databaseId}),ro(s).start(),s.Aa.aa()}function hd(s){return Qs(s)&&!ro(s).M_()&&s.Ta.size>0}function Qs(s){return Se(s).Ia.size===0}function _y(s){s.Ra=void 0}async function h1(s){s.Aa.set("Online")}async function d1(s){s.Ta.forEach(((e,n)=>{ud(s,e)}))}async function f1(s,e){_y(s),hd(s)?(s.Aa.la(e),cd(s)):s.Aa.set("Unknown")}async function m1(s,e,n){if(s.Aa.set("Online"),e instanceof ry&&e.state===2&&e.cause)try{await(async function(a,c){const d=c.cause;for(const g of c.targetIds)a.Ta.has(g)&&(await a.remoteSyncer.rejectListen(g,d),a.Ta.delete(g),a.Ra.removeTarget(g))})(s,e)}catch(i){ae(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cu(s,i)}else if(e instanceof Yl?s.Ra.Ye(e):e instanceof ny?s.Ra.it(e):s.Ra.et(e),!n.isEqual(Te.min()))try{const i=await my(s.localStore);n.compareTo(i)>=0&&await(function(c,d){const g=c.Ra.Pt(d);return g.targetChanges.forEach(((v,w)=>{if(v.resumeToken.approximateByteSize()>0){const N=c.Ta.get(w);N&&c.Ta.set(w,N.withResumeToken(v.resumeToken,d))}})),g.targetMismatches.forEach(((v,w)=>{const N=c.Ta.get(v);if(!N)return;c.Ta.set(v,N.withResumeToken(Vt.EMPTY_BYTE_STRING,N.snapshotVersion)),vy(c,v);const x=new Kr(N.target,v,w,N.sequenceNumber);ud(c,x)})),c.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(i){ae(Ws,"Failed to raise snapshot:",i),await cu(s,i)}}async function cu(s,e,n){if(!to(e))throw e;s.Ia.add(1),await Ta(s),s.Aa.set("Offline"),n||(n=()=>my(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ae(Ws,"Retrying IndexedDB access"),await n(),s.Ia.delete(1),await Su(s)}))}function wy(s,e){return e().catch((n=>cu(s,n,e)))}async function Iu(s){const e=Se(s),n=os(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Gh;for(;p1(e);)try{const a=await XE(e.localStore,i);if(a===null){e.Pa.length===0&&n.B_();break}i=a.batchId,g1(e,a)}catch(a){await cu(e,a)}Ey(e)&&Ty(e)}function p1(s){return Qs(s)&&s.Pa.length<10}function g1(s,e){s.Pa.push(e);const n=os(s);n.x_()&&n.Z_&&n.X_(e.mutations)}function Ey(s){return Qs(s)&&!os(s).M_()&&s.Pa.length>0}function Ty(s){os(s).start()}async function y1(s){os(s).na()}async function v1(s){const e=os(s);for(const n of s.Pa)e.X_(n.mutations)}async function _1(s,e,n){const i=s.Pa.shift(),a=td.from(i,e,n);await wy(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Iu(s)}async function w1(s,e){e&&os(s).Z_&&await(async function(i,a){if((function(d){return nE(d)&&d!==W.ABORTED})(a.code)){const c=i.Pa.shift();os(i).N_(),await wy(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Iu(i)}})(s,e),Ey(s)&&Ty(s)}async function Bp(s,e){const n=Se(s);n.asyncQueue.verifyOperationInProgress(),ae(Ws,"RemoteStore received new credentials");const i=Qs(n);n.Ia.add(3),await Ta(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Su(n)}async function E1(s,e){const n=Se(s);e?(n.Ia.delete(2),await Su(n)):e||(n.Ia.add(2),await Ta(n),n.Aa.set("Unknown"))}function ro(s){return s.Va||(s.Va=(function(n,i,a){const c=Se(n);return c.ia(),new i1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:h1.bind(null,s),e_:d1.bind(null,s),n_:f1.bind(null,s),J_:m1.bind(null,s)}),s.da.push((async e=>{e?(s.Va.N_(),hd(s)?cd(s):s.Aa.set("Unknown")):(await s.Va.stop(),_y(s))}))),s.Va}function os(s){return s.ma||(s.ma=(function(n,i,a){const c=Se(n);return c.ia(),new o1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),e_:y1.bind(null,s),n_:w1.bind(null,s),ea:v1.bind(null,s),ta:_1.bind(null,s)}),s.da.push((async e=>{e?(s.ma.N_(),await Iu(s)):(await s.ma.stop(),s.Pa.length>0&&(ae(Ws,`Stopping write stream with ${s.Pa.length} pending writes`),s.Pa=[]))}))),s.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n,i,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,c){const d=Date.now()+i,g=new dd(e,n,d,a,c);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fd(s,e){if(Er("AsyncQueue",`${e}: ${s}`),to(s))return new ie(W.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{static emptySet(e){return new Wi(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||pe.comparator(n.key,i.key):(n,i)=>pe.comparator(n.key,i.key),this.keyedMap=ta(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Wi;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.fa=new rt(pe.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):we(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Yi{constructor(e,n,i,a,c,d,g,v,w){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=w}static fromInitialDocuments(e,n,i,a,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new Yi(e,n,Wi.emptySet(n),d,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class S1{constructor(){this.queries=Hp(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const a=Se(n),c=a.queries;a.queries=Hp(),c.forEach(((d,g)=>{for(const v of g.wa)v.onError(i)}))})(this,new ie(W.ABORTED,"Firestore shutting down"))}}function Hp(){return new Gs((s=>$g(s)),yu)}async function Sy(s,e){const n=Se(s);let i=3;const a=e.query;let c=n.queries.get(a);c?!c.Sa()&&e.ba()&&(i=2):(c=new T1,i=e.ba()?0:1);try{switch(i){case 0:c.ya=await n.onListen(a,!0);break;case 1:c.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(d){const g=fd(d,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(g)}n.queries.set(a,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&md(n)}async function Iy(s,e){const n=Se(s),i=e.query;let a=3;const c=n.queries.get(i);if(c){const d=c.wa.indexOf(e);d>=0&&(c.wa.splice(d,1),c.wa.length===0?a=e.ba()?0:1:!c.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function I1(s,e){const n=Se(s);let i=!1;for(const a of e){const c=a.query,d=n.queries.get(c);if(d){for(const g of d.wa)g.Ca(a)&&(i=!0);d.ya=a}}i&&md(n)}function A1(s,e,n){const i=Se(s),a=i.queries.get(e);if(a)for(const c of a.wa)c.onError(n);i.queries.delete(e)}function md(s){s.Da.forEach((e=>{e.next()}))}var Oh,qp;(qp=Oh||(Oh={})).Fa="default",qp.Cache="cache";class Ay{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Yi(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Yi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Oh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e){this.key=e}}class xy{constructor(e){this.key=e}}class N1{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Re(),this.mutatedKeys=Re(),this.Xa=Hg(e),this.eu=new Wi(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new $p,a=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,d=a,g=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,w=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((N,x)=>{const T=a.get(N),P=vu(this.query,x)?x:null,U=!!T&&this.mutatedKeys.has(T.key),q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let H=!1;T&&P?T.data.isEqual(P.data)?U!==q&&(i.track({type:3,doc:P}),H=!0):this.iu(T,P)||(i.track({type:2,doc:P}),H=!0,(v&&this.Xa(P,v)>0||w&&this.Xa(P,w)<0)&&(g=!0)):!T&&P?(i.track({type:0,doc:P}),H=!0):T&&!P&&(i.track({type:1,doc:T}),H=!0,(v||w)&&(g=!0)),H&&(P?(d=d.add(P),c=q?c.add(N):c.delete(N)):(d=d.delete(N),c=c.delete(N)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const N=this.query.limitType==="F"?d.last():d.first();d=d.delete(N.key),c=c.delete(N.key),i.track({type:1,doc:N})}return{eu:d,ru:i,Ds:g,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((N,x)=>(function(P,U){const q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:H})}};return q(P)-q(U)})(N.type,x.type)||this.Xa(N.doc,x.doc))),this.su(i),a=a!=null&&a;const g=n&&!a?this.ou():[],v=this.Za.size===0&&this.current&&!a?1:0,w=v!==this.Ya;return this.Ya=v,d.length!==0||w?{snapshot:new Yi(this.query,e.eu,c,d,e.mutatedKeys,v===0,w,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:g}:{_u:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $p,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Re(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new xy(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new Ny(i))})),n}uu(e){this.Ha=e.qs,this.Za=Re();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Yi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const pd="SyncEngine";class x1{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class C1{constructor(e){this.key=e,this.lu=!1}}class P1{constructor(e,n,i,a,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Gs((g=>$g(g)),yu),this.Tu=new Map,this.Iu=new Set,this.du=new rt(pe.comparator),this.Eu=new Map,this.Au=new sd,this.Ru={},this.Vu=new Map,this.mu=Xi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function R1(s,e,n=!0){const i=Dy(s);let a;const c=i.Pu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.cu()):a=await Cy(i,e,n,!0),a}async function k1(s,e){const n=Dy(s);await Cy(n,e,!0,!1)}async function Cy(s,e,n,i){const a=await YE(s.localStore,Xn(e)),c=a.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let g;return i&&(g=await V1(s,e,c,d==="current",a.resumeToken)),s.isPrimaryClient&&n&&yy(s.remoteStore,a),g}async function V1(s,e,n,i,a){s.gu=(x,T,P)=>(async function(q,H,J,Z){let re=H.view.nu(J);re.Ds&&(re=await Lp(q.localStore,H.query,!1).then((({documents:k})=>H.view.nu(k,re))));const ce=Z&&Z.targetChanges.get(H.targetId),Ve=Z&&Z.targetMismatches.get(H.targetId)!=null,z=H.view.applyChanges(re,q.isPrimaryClient,ce,Ve);return Gp(q,H.targetId,z._u),z.snapshot})(s,x,T,P);const c=await Lp(s.localStore,e,!0),d=new N1(e,c.qs),g=d.nu(c.documents),v=Ea.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",a),w=d.applyChanges(g,s.isPrimaryClient,v);Gp(s,n,w._u);const N=new x1(e,n,d);return s.Pu.set(e,N),s.Tu.has(n)?s.Tu.get(n).push(e):s.Tu.set(n,[e]),w.snapshot}async function D1(s,e,n){const i=Se(s),a=i.Pu.get(e),c=i.Tu.get(a.targetId);if(c.length>1)return i.Tu.set(a.targetId,c.filter((d=>!yu(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await jh(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&ld(i.remoteStore,a.targetId),Lh(i,a.targetId)})).catch(eo)):(Lh(i,a.targetId),await jh(i.localStore,a.targetId,!0))}async function j1(s,e){const n=Se(s),i=n.Pu.get(e),a=n.Tu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ld(n.remoteStore,i.targetId))}async function M1(s,e,n){const i=B1(s);try{const a=await(function(d,g){const v=Se(d),w=Ye.now(),N=g.reduce(((P,U)=>P.add(U.key)),Re());let x,T;return v.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let U=Tr(),q=Re();return v.Os.getEntries(P,N).next((H=>{U=H,U.forEach(((J,Z)=>{Z.isValidDocument()||(q=q.add(J))}))})).next((()=>v.localDocuments.getOverlayedDocuments(P,U))).next((H=>{x=H;const J=[];for(const Z of g){const re=Yw(Z,x.get(Z.key).overlayedDocument);re!=null&&J.push(new cs(Z.key,re,Mg(re.value.mapValue),En.exists(!0)))}return v.mutationQueue.addMutationBatch(P,w,J,g)})).next((H=>{T=H;const J=H.applyToLocalDocumentSet(x,q);return v.documentOverlayCache.saveOverlays(P,H.batchId,J)}))})).then((()=>({batchId:T.batchId,changes:Wg(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(d,g,v){let w=d.Ru[d.currentUser.toKey()];w||(w=new rt(Ne)),w=w.insert(g,v),d.Ru[d.currentUser.toKey()]=w})(i,a.batchId,n),await Sa(i,a.changes),await Iu(i.remoteStore)}catch(a){const c=fd(a,"Failed to persist write");n.reject(c)}}async function Py(s,e){const n=Se(s);try{const i=await QE(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const d=n.Eu.get(c);d&&(Be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.lu=!0:a.modifiedDocuments.size>0?Be(d.lu,14607):a.removedDocuments.size>0&&(Be(d.lu,42227),d.lu=!1))})),await Sa(n,i,e)}catch(i){await eo(i)}}function Wp(s,e,n){const i=Se(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Pu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&a.push(g.snapshot)})),(function(d,g){const v=Se(d);v.onlineState=g;let w=!1;v.queries.forEach(((N,x)=>{for(const T of x.wa)T.va(g)&&(w=!0)})),w&&md(v)})(i.eventManager,e),a.length&&i.hu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function O1(s,e,n){const i=Se(s);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),c=a&&a.key;if(c){let d=new rt(pe.comparator);d=d.insert(c,bt.newNoDocument(c,Te.min()));const g=Re().add(c),v=new Eu(Te.min(),new Map,new rt(Ne),d,g);await Py(i,v),i.du=i.du.remove(c),i.Eu.delete(e),gd(i)}else await jh(i.localStore,e,!1).then((()=>Lh(i,e,n))).catch(eo)}async function L1(s,e){const n=Se(s),i=e.batch.batchId;try{const a=await GE(n.localStore,e);ky(n,i,null),Ry(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Sa(n,a)}catch(a){await eo(a)}}async function F1(s,e,n){const i=Se(s);try{const a=await(function(d,g){const v=Se(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let N;return v.mutationQueue.lookupMutationBatch(w,g).next((x=>(Be(x!==null,37113),N=x.keys(),v.mutationQueue.removeMutationBatch(w,x)))).next((()=>v.mutationQueue.performConsistencyCheck(w))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(w,N,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,N))).next((()=>v.localDocuments.getDocuments(w,N)))}))})(i.localStore,e);ky(i,e,n),Ry(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Sa(i,a)}catch(a){await eo(a)}}function Ry(s,e){(s.Vu.get(e)||[]).forEach((n=>{n.resolve()})),s.Vu.delete(e)}function ky(s,e,n){const i=Se(s);let a=i.Ru[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),i.Ru[i.currentUser.toKey()]=a}}function Lh(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Tu.get(e))s.Pu.delete(i),n&&s.hu.pu(i,n);s.Tu.delete(e),s.isPrimaryClient&&s.Au.zr(e).forEach((i=>{s.Au.containsKey(i)||Vy(s,i)}))}function Vy(s,e){s.Iu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(ld(s.remoteStore,n),s.du=s.du.remove(e),s.Eu.delete(n),gd(s))}function Gp(s,e,n){for(const i of n)i instanceof Ny?(s.Au.addReference(i.key,e),b1(s,i)):i instanceof xy?(ae(pd,"Document no longer in limbo: "+i.key),s.Au.removeReference(i.key,e),s.Au.containsKey(i.key)||Vy(s,i.key)):we(19791,{yu:i})}function b1(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Iu.has(i)||(ae(pd,"New document in limbo: "+n),s.Iu.add(i),gd(s))}function gd(s){for(;s.Iu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Iu.values().next().value;s.Iu.delete(e);const n=new pe(Qe.fromString(e)),i=s.mu.next();s.Eu.set(i,new C1(n)),s.du=s.du.insert(n,i),yy(s.remoteStore,new Kr(Xn(Jh(n.path)),i,"TargetPurposeLimboResolution",mu.ue))}}async function Sa(s,e,n){const i=Se(s),a=[],c=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((g,v)=>{d.push(i.gu(v,e,n).then((w=>{var N;if((w||n)&&i.isPrimaryClient){const x=w?!w.fromCache:(N=n==null?void 0:n.targetChanges.get(v.targetId))===null||N===void 0?void 0:N.current;i.sharedClientState.updateQueryState(v.targetId,x?"current":"not-current")}if(w){a.push(w);const x=od.Es(v.targetId,w);c.push(x)}})))})),await Promise.all(d),i.hu.J_(a),await(async function(v,w){const N=Se(v);try{await N.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>G.forEach(w,(T=>G.forEach(T.Is,(P=>N.persistence.referenceDelegate.addReference(x,T.targetId,P))).next((()=>G.forEach(T.ds,(P=>N.persistence.referenceDelegate.removeReference(x,T.targetId,P)))))))))}catch(x){if(!to(x))throw x;ae(ad,"Failed to update sequence numbers: "+x)}for(const x of w){const T=x.targetId;if(!x.fromCache){const P=N.Fs.get(T),U=P.snapshotVersion,q=P.withLastLimboFreeSnapshotVersion(U);N.Fs=N.Fs.insert(T,q)}}})(i.localStore,c))}async function U1(s,e){const n=Se(s);if(!n.currentUser.isEqual(e)){ae(pd,"User change. New user:",e.toKey());const i=await fy(n.localStore,e);n.currentUser=e,(function(c,d){c.Vu.forEach((g=>{g.forEach((v=>{v.reject(new ie(W.CANCELLED,d))}))})),c.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Sa(n,i.Bs)}}function z1(s,e){const n=Se(s),i=n.Eu.get(e);if(i&&i.lu)return Re().add(i.key);{let a=Re();const c=n.Tu.get(e);if(!c)return a;for(const d of c){const g=n.Pu.get(d);a=a.unionWith(g.view.tu)}return a}}function Dy(s){const e=Se(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Py.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O1.bind(null,e),e.hu.J_=I1.bind(null,e.eventManager),e.hu.pu=A1.bind(null,e.eventManager),e}function B1(s){const e=Se(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F1.bind(null,e),e}class hu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return WE(this.persistence,new $E,e.initialUser,this.serializer)}Du(e){return new dy(id.Vi,this.serializer)}bu(e){return new ZE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hu.provider={build:()=>new hu};class $1 extends hu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Be(this.persistence.referenceDelegate instanceof uu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new CE(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new dy((i=>uu.Vi(i,n)),this.serializer)}}class Fh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Wp(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=U1.bind(null,this.syncEngine),await E1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new S1})()}createDatastore(e){const n=Tu(e.databaseInfo.databaseId),i=(function(c){return new s1(c)})(e.databaseInfo);return(function(c,d,g,v){return new l1(c,d,g,v)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,c,d,g){return new c1(i,a,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Wp(this.syncEngine,n,0)),(function(){return Up.C()?new Up:new e1})())}createSyncEngine(e,n){return(function(a,c,d,g,v,w,N){const x=new P1(a,c,d,g,v,w);return N&&(x.fu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const c=Se(a);ae(Ws,"RemoteStore shutting down."),c.Ia.add(5),await Ta(c),c.Ea.shutdown(),c.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Fh.provider={build:()=>new Fh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="FirestoreClient";class H1{constructor(e,n,i,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=Ft.UNAUTHENTICATED,this.clientId=Wh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{ae(as,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ae(as,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=fd(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function gh(s,e){s.asyncQueue.verifyOperationInProgress(),ae(as,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await fy(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>{ts("Terminating Firestore due to IndexedDb database deletion"),s.terminate().then((()=>{ae("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{ts("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),s._offlineComponents=e}async function Qp(s,e){s.asyncQueue.verifyOperationInProgress();const n=await q1(s);ae(as,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>Bp(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>Bp(e.remoteStore,a))),s._onlineComponents=e}async function q1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ae(as,"Using user provided OfflineComponentProvider");try{await gh(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;ts("Error using user provided cache. Falling back to memory cache: "+n),await gh(s,new hu)}}else ae(as,"Using default OfflineComponentProvider"),await gh(s,new $1(void 0));return s._offlineComponents}async function My(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ae(as,"Using user provided OnlineComponentProvider"),await Qp(s,s._uninitializedComponentsProvider._online)):(ae(as,"Using default OnlineComponentProvider"),await Qp(s,new Fh))),s._onlineComponents}function W1(s){return My(s).then((e=>e.syncEngine))}async function bh(s){const e=await My(s),n=e.eventManager;return n.onListen=R1.bind(null,e.syncEngine),n.onUnlisten=D1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=k1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=j1.bind(null,e.syncEngine),n}function G1(s,e,n={}){const i=new Zr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,v,w){const N=new jy({next:T=>{N.Ou(),d.enqueueAndForget((()=>Iy(c,x))),T.fromCache&&v.source==="server"?w.reject(new ie(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(T)},error:T=>w.reject(T)}),x=new Ay(g,N,{includeMetadataChanges:!0,ka:!0});return Sy(c,x)})(await bh(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="firestore.googleapis.com",Xp=!0;class Yp{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ly,this.ssl=Xp}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Xp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NE)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Oy((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Au{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new tw;switch(i.type){case"firstParty":return new iw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Kp.get(n);i&&(ae("ComponentProvider","Removing Datastore"),Kp.delete(n),i.terminate())})(this),Promise.resolve()}}function Q1(s,e,n,i={}){var a;s=wn(s,Au);const c=$h(e),d=s._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:s._getEmulatorOptions()}),v=`${e}:${n}`;c&&(C_(`https://${v}`),V_("Firestore",!0)),d.host!==Ly&&d.host!==v&&ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w=Object.assign(Object.assign({},d),{host:v,ssl:c,emulatorOptions:i});if(!eu(w,g)&&(s._setSettings(w),i.mockUserToken)){let N,x;if(typeof i.mockUserToken=="string")N=i.mockUserToken,x=Ft.MOCK_USER;else{N=P_(i.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ie(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Ft(T)}s._authCredentials=new nw(new Tg(N,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class lt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}toJSON(){return{type:lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(_a(n,lt._jsonSchema))return new lt(e,i||null,new pe(Qe.fromString(n.referencePath)))}}lt._jsonSchemaVersion="firestore/documentReference/1.0",lt._jsonSchema={type:ft("string",lt._jsonSchemaVersion),referencePath:ft("string")};class es extends hs{constructor(e,n,i){super(e,n,Jh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new pe(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function Fy(s,e,...n){if(s=er(s),Ig("collection","path",e),s instanceof Au){const i=Qe.fromString(e,...n);return cp(i),new es(s,null,i)}{if(!(s instanceof lt||s instanceof es))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Qe.fromString(e,...n));return cp(i),new es(s.firestore,null,i)}}function Nu(s,e,...n){if(s=er(s),arguments.length===1&&(e=Wh.newId()),Ig("doc","path",e),s instanceof Au){const i=Qe.fromString(e,...n);return up(i),new lt(s,null,new pe(i))}{if(!(s instanceof lt||s instanceof es))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Qe.fromString(e,...n));return up(i),new lt(s.firestore,s instanceof es?s.converter:null,new pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="AsyncQueue";class Zp{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new py(this,"async_queue_retry"),this.oc=()=>{const i=ph();i&&ae(Jp,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=ph();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=ph();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Zr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!to(e))throw e;ae(Jp,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Er("INTERNAL UNHANDLED ERROR: ",eg(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=dd.createAndSchedule(this,e,n,i,(c=>this.lc(c)));return this.ec.push(a),a}ac(){this.tc&&we(47125,{hc:eg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function eg(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of i)if(c in a&&typeof a[c]=="function")return!0;return!1})(s,["next","error","complete"])}class ls extends Au{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new Zp,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zp(e),this._firestoreClient=void 0,await e}}}function K1(s,e){const n=typeof s=="object"?s:B0(),i=typeof s=="string"?s:su,a=L0(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=N_("firestore");c&&Q1(a,...c)}return a}function yd(s){if(s._terminated)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||X1(s),s._firestoreClient}function X1(s){var e,n,i;const a=s._freezeSettings(),c=(function(g,v,w,N){return new Ew(g,v,w,N.host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,Oy(N.experimentalLongPollingOptions),N.useFetchStreams,N.isUsingEmulator)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new H1(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&(function(g){const v=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(v),_online:v}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Vt.fromBase64String(e))}catch(n){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_a(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:ft("string",_n._jsonSchemaVersion),bytes:ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jn._jsonSchemaVersion}}static fromJSON(e){if(_a(e,Jn._jsonSchema))return new Jn(e.latitude,e.longitude)}}Jn._jsonSchemaVersion="firestore/geoPoint/1.0",Jn._jsonSchema={type:ft("string",Jn._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_a(e,Zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zn(e.vectorValues);throw new ie(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:ft("string",Zn._jsonSchemaVersion),vectorValues:ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=/^__.*__$/;class J1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new wa(e,this.data,n,this.fieldTransforms)}}class by{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Uy(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:s})}}class vd{constructor(e,n,i,a,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.fc(e),a}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return du(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Uy(this.Ec)&&Y1.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Z1{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Tu(e)}Dc(e,n,i,a=!1){return new vd({Ec:e,methodName:n,bc:i,path:kt.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pu(s){const e=s._freezeSettings(),n=Tu(s._databaseId);return new Z1(s._databaseId,!!e.ignoreUndefinedProperties,n)}function zy(s,e,n,i,a,c={}){const d=s.Dc(c.merge||c.mergeFields?2:0,e,n,a);wd("Data must be an object, but it was:",d,i);const g=By(i,d);let v,w;if(c.merge)v=new ln(d.fieldMask),w=d.fieldTransforms;else if(c.mergeFields){const N=[];for(const x of c.mergeFields){const T=Uh(e,x,n);if(!d.contains(T))throw new ie(W.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Hy(N,T)||N.push(T)}v=new ln(N),w=d.fieldTransforms.filter((x=>v.covers(x.field)))}else v=null,w=d.fieldTransforms;return new J1(new Zt(g),v,w)}class Ru extends Cu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ru}}class _d extends Cu{_toFieldTransform(e){return new Gw(e.path,new ga)}isEqual(e){return e instanceof _d}}function eT(s,e,n,i){const a=s.Dc(1,e,n);wd("Data must be an object, but it was:",a,i);const c=[],d=Zt.empty();us(i,((v,w)=>{const N=Ed(e,v,n);w=er(w);const x=a.gc(N);if(w instanceof Ru)c.push(N);else{const T=Ia(w,x);T!=null&&(c.push(N),d.set(N,T))}}));const g=new ln(c);return new by(d,g,a.fieldTransforms)}function tT(s,e,n,i,a,c){const d=s.Dc(1,e,n),g=[Uh(e,i,n)],v=[a];if(c.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)g.push(Uh(e,c[T])),v.push(c[T+1]);const w=[],N=Zt.empty();for(let T=g.length-1;T>=0;--T)if(!Hy(w,g[T])){const P=g[T];let U=v[T];U=er(U);const q=d.gc(P);if(U instanceof Ru)w.push(P);else{const H=Ia(U,q);H!=null&&(w.push(P),N.set(P,H))}}const x=new ln(w);return new by(N,x,d.fieldTransforms)}function nT(s,e,n,i=!1){return Ia(n,s.Dc(i?4:3,e))}function Ia(s,e){if($y(s=er(s)))return wd("Unsupported field value:",e,s),By(s,e);if(s instanceof Cu)return(function(i,a){if(!Uy(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,a){const c=[];let d=0;for(const g of i){let v=Ia(g,a.yc(d));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),d++}return{arrayValue:{values:c}}})(s,e)}return(function(i,a){if((i=er(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Hw(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ye.fromDate(i);return{timestampValue:lu(a.serializer,c)}}if(i instanceof Ye){const c=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lu(a.serializer,c)}}if(i instanceof Jn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _n)return{bytesValue:sy(a.serializer,i._byteString)};if(i instanceof lt){const c=a.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw a.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:rd(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Zn)return(function(d,g){return{mapValue:{fields:{[Dg]:{stringValue:jg},[iu]:{arrayValue:{values:d.toArray().map((w=>{if(typeof w!="number")throw g.wc("VectorValues must only contain numeric values.");return Zh(g.serializer,w)}))}}}}}})(i,a);throw a.wc(`Unsupported field value: ${fu(i)}`)})(s,e)}function By(s,e){const n={};return xg(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(s,((i,a)=>{const c=Ia(a,e.Vc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function $y(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ye||s instanceof Jn||s instanceof _n||s instanceof lt||s instanceof Cu||s instanceof Zn)}function wd(s,e,n){if(!$y(n)||!Ag(n)){const i=fu(n);throw i==="an object"?e.wc(s+" a custom object"):e.wc(s+" "+i)}}function Uh(s,e,n){if((e=er(e))instanceof xu)return e._internalPath;if(typeof e=="string")return Ed(s,e);throw du("Field path arguments must be of type string or ",s,!1,void 0,n)}const rT=new RegExp("[~\\*/\\[\\]]");function Ed(s,e,n){if(e.search(rT)>=0)throw du(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new xu(...e.split("."))._internalPath}catch{throw du(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function du(s,e,n,i,a){const c=i&&!i.isEmpty(),d=a!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(c||d)&&(v+=" (found",c&&(v+=` in field ${i}`),d&&(v+=` in document ${a}`),v+=")"),new ie(W.INVALID_ARGUMENT,g+s+v)}function Hy(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,i,a,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Td("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sT extends qy{data(){return super.data()}}function Td(s,e){return typeof e=="string"?Ed(s,e):e instanceof xu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sd{}class Gy extends Sd{}function Qy(s,e,...n){let i=[];e instanceof Sd&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((v=>v instanceof Ad)).length,g=c.filter((v=>v instanceof Id)).length;if(d>1||d>0&&g>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class Id extends Gy{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Id(e,n,i)}_apply(e){const n=this._parse(e);return Xy(e._query,n),new hs(e.firestore,e.converter,Ch(e._query,n))}_parse(e){const n=Pu(e.firestore);return(function(c,d,g,v,w,N,x){let T;if(w.isKeyField()){if(N==="array-contains"||N==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${N}' queries on documentId().`);if(N==="in"||N==="not-in"){rg(x,N);const U=[];for(const q of x)U.push(ng(v,c,q));T={arrayValue:{values:U}}}else T=ng(v,c,x)}else N!=="in"&&N!=="not-in"&&N!=="array-contains-any"||rg(x,N),T=nT(g,d,x,N==="in"||N==="not-in");return dt.create(w,N,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ad extends Sd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ad(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let d=a;const g=c.getFlattenedFilters();for(const v of g)Xy(d,v),d=Ch(d,v)})(e._query,n),new hs(e.firestore,e.converter,Ch(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nd extends Gy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Nd(e,n)}_apply(e){const n=(function(a,c,d){if(a.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pa(c,d)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(a,c){const d=a.explicitOrderBy.concat([c]);return new no(a.path,a.collectionGroup,d,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Ky(s,e="asc"){const n=e,i=Td("orderBy",s);return Nd._create(i,n)}function ng(s,e,n){if(typeof(n=er(n))=="string"){if(n==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bg(e)&&n.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Qe.fromString(n));if(!pe.isDocumentKey(i))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vp(s,new pe(i))}if(n instanceof lt)return vp(s,n._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fu(n)}.`)}function rg(s,e){if(!Array.isArray(s)||s.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xy(s,e){const n=(function(a,c){for(const d of a)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iT{convertValue(e,n="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return us(e,((a,c)=>{i[a]=this.convertValue(c,n)})),i}convertVectorValue(e){var n,i,a;const c=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[iu].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map((d=>at(d.doubleValue)));return new Zn(c)}convertGeoPoint(e){return new Jn(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=gu(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(da(e));default:return null}}convertTimestamp(e){const n=rs(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Qe.fromString(e);Be(cy(i),9688,{name:e});const a=new fa(i.get(1),i.get(3)),c=new pe(i.popFirst(5));return a.isEqual(n)||Er(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class ra{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $s extends qy{constructor(e,n,i,a,c,d){super(e,n,i,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Td("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$s._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$s._jsonSchemaVersion="firestore/documentSnapshot/1.0",$s._jsonSchema={type:ft("string",$s._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};class Jl extends $s{data(e={}){return super.data(e)}}class Hs{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new ra(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Jl(this._firestore,this._userDataWriter,i.key,i,new ra(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((g=>{const v=new Jl(a._firestore,a._userDataWriter,g.doc.key,g.doc,new ra(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const v=new Jl(a._firestore,a._userDataWriter,g.doc.key,g.doc,new ra(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let w=-1,N=-1;return g.type!==0&&(w=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),N=d.indexOf(g.doc.key)),{type:oT(g.type),doc:v,oldIndex:w,newIndex:N}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oT(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:s})}}Hs._jsonSchemaVersion="firestore/querySnapshot/1.0",Hs._jsonSchema={type:ft("string",Hs._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};class xd extends iT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}function Jy(s){s=wn(s,hs);const e=wn(s.firestore,ls),n=yd(e),i=new xd(e);return Wy(s._query),G1(n,s._query).then((a=>new Hs(e,i,s,a)))}function aT(s,e,n){s=wn(s,lt);const i=wn(s.firestore,ls),a=Yy(s.converter,e);return ku(i,[zy(Pu(i),"setDoc",s._key,a,s.converter!==null,n).toMutation(s._key,En.none())])}function lT(s,e,n,...i){s=wn(s,lt);const a=wn(s.firestore,ls),c=Pu(a);let d;return d=typeof(e=er(e))=="string"||e instanceof xu?tT(c,"updateDoc",s._key,e,n,i):eT(c,"updateDoc",s._key,e),ku(a,[d.toMutation(s._key,En.exists(!0))])}function Zy(s){return ku(wn(s.firestore,ls),[new ed(s._key,En.none())])}function uT(s,e){const n=wn(s.firestore,ls),i=Nu(s),a=Yy(s.converter,e);return ku(n,[zy(Pu(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,En.exists(!1))]).then((()=>i))}function ev(s,...e){var n,i,a;s=er(s);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||tg(e[d])||(c=e[d++]);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(tg(e[d])){const x=e[d];e[d]=(n=x.next)===null||n===void 0?void 0:n.bind(x),e[d+1]=(i=x.error)===null||i===void 0?void 0:i.bind(x),e[d+2]=(a=x.complete)===null||a===void 0?void 0:a.bind(x)}let v,w,N;if(s instanceof lt)w=wn(s.firestore,ls),N=Jh(s._key.path),v={next:x=>{e[d]&&e[d](cT(w,s,x))},error:e[d+1],complete:e[d+2]};else{const x=wn(s,hs);w=wn(x.firestore,ls),N=x._query;const T=new xd(w);v={next:P=>{e[d]&&e[d](new Hs(w,T,x,P))},error:e[d+1],complete:e[d+2]},Wy(s._query)}return(function(T,P,U,q){const H=new jy(q),J=new Ay(P,H,U);return T.asyncQueue.enqueueAndForget((async()=>Sy(await bh(T),J))),()=>{H.Ou(),T.asyncQueue.enqueueAndForget((async()=>Iy(await bh(T),J)))}})(yd(w),N,g,v)}function ku(s,e){return(function(i,a){const c=new Zr;return i.asyncQueue.enqueueAndForget((async()=>M1(await W1(i),a,c))),c.promise})(yd(s),e)}function cT(s,e,n){const i=n.docs.get(e._key),a=new xd(s);return new $s(s,a,e._key,i,new ra(n.hasPendingWrites,n.fromCache),e.converter)}function Cd(){return new _d("serverTimestamp")}(function(e,n=!0){(function(a){Zi=a})(z0),nu(new ua("firestore",((i,{instanceIdentifier:a,options:c})=>{const d=i.getProvider("app").getImmediate(),g=new ls(new rw(i.getProvider("auth-internal")),new ow(d,i.getProvider("app-check-internal")),(function(w,N){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(w.options.projectId,N)})(d,a),d);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),qi(sp,ip,e),qi(sp,ip,"esm2017")})();const hT={"2026-01-29":{day:1,name:"Matchday 1",ground:"Kicks on Grass",icon:""},"2026-01-30":{day:2,name:"Matchday 2",ground:"Kicks on Grass (With Roof)",icon:""},"2026-02-02":{day:3,name:"Matchday 3",ground:"Vplay (Opposite Office)",icon:""}},dT=s=>hT[s]||{day:0,name:"Match",ground:"TBD",icon:""},fT=[{id:"match-1",matchNumber:1,home:"feel-united",away:"dhurandhars",date:"2026-01-29",time:"17:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-2",matchNumber:2,home:"userflow",away:"goaldiggers",date:"2026-01-29",time:"17:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-3",matchNumber:3,home:"userflow",away:"dhurandhars",date:"2026-01-29",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-4",matchNumber:4,home:"goaldiggers",away:"dhurandhars",date:"2026-01-29",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-5",matchNumber:5,home:"feel-united",away:"userflow",date:"2026-01-30",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-6",matchNumber:6,home:"goaldiggers",away:"feel-united",date:"2026-01-30",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-7",matchNumber:7,home:"dhurandhars",away:"userflow",date:"2026-01-30",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-8",matchNumber:8,home:"goaldiggers",away:"userflow",date:"2026-01-30",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-9",matchNumber:9,home:"dhurandhars",away:"feel-united",date:"2026-01-30",time:"20:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-10",matchNumber:10,home:"feel-united",away:"goaldiggers",date:"2026-02-02",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-11",matchNumber:11,home:"dhurandhars",away:"goaldiggers",date:"2026-02-02",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-12",matchNumber:12,home:"userflow",away:"feel-united",date:"2026-02-02",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-13",matchNumber:13,home:"tbd",away:"tbd",date:"2026-02-02",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!0}],tv=s=>new Date(s).toLocaleDateString("en-IN",{weekday:"short",month:"short",day:"numeric"}),mT=s=>{const[e,n]=s.split(":"),i=parseInt(e),a=i>=12?"PM":"AM";return`${i%12||12}:${n} ${a}`},pT={apiKey:"AIzaSyAYRukNJGOvVmL2jRAMgLtKkDzU7c6wo88",authDomain:"republic-cup-live.firebaseapp.com",projectId:"republic-cup-live",storageBucket:"republic-cup-live.firebasestorage.app",messagingSenderId:"642499294047",appId:"1:642499294047:web:f5a8b111b79bb8673abcea"},gT=dg(pT),Aa=K1(gT),nv=Fy(Aa,"matches"),Pd=Fy(Aa,"predictions"),yT=async()=>{try{if((await Jy(nv)).empty){console.log("Seeding matches collection...");for(const e of fT)await aT(Nu(Aa,"matches",e.id),{...e,createdAt:Cd()});return console.log("Matches seeded successfully!"),!0}return!1}catch(s){return console.error("Error seeding matches:",s),!1}},vT=s=>{const e=Qy(nv,Ky("matchNumber"));return ev(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)},n=>{console.error("Error subscribing to matches:",n)})},Us=async(s,e)=>{try{const n=Nu(Aa,"matches",s);return await lT(n,{...e,updatedAt:Cd()}),!0}catch(n){return console.error("Error updating match:",n),!1}},_T=async s=>{try{return await uT(Pd,{...s,submittedAt:Cd()}),!0}catch(e){return console.error("Error submitting prediction:",e),!1}},wT=s=>{const e=Qy(Pd,Ky("submittedAt","desc"));return ev(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)})},ET=async()=>{try{const e=(await Jy(Pd)).docs.map(n=>Zy(n.ref));return await Promise.all(e),console.log("All predictions deleted"),!0}catch(s){return console.error("Error deleting predictions:",s),!1}},TT=async s=>{try{return await Zy(Nu(Aa,"predictions",s)),console.log("Prediction deleted:",s),!0}catch(e){return console.error("Error deleting prediction:",e),!1}},nt={"feel-united":{id:"feel-united",name:"Feel United",shortName:"FEE",color:"#FFFFFF",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249520/spitha_prod_uploads/2026_01/feel_united_1769249519167.webp",manager:"Aniruddh Agrawal",players:["Ninad","Aditya Thakur","Umair","Sagar Awasthi","Sandipan Bala","Gahan","Rishab Khanna"]},dhurandhars:{id:"dhurandhars",name:"Dhurandhars",shortName:"DHU",color:"#000000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249469/spitha_prod_uploads/2026_01/durandhars_1769249467581.webp",manager:"Trivedi",players:["Sagar Singh","Raghu","Sukhpal","Mayank","Manish Pandey","Bharath Kumar","Shashank"]},goaldiggers:{id:"goaldiggers",name:"The Goaldiggers",shortName:"GDG",color:"#87CEEB",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249929/spitha_prod_uploads/2026_01/the_goaldiggers2_1769249927876.webp",manager:"AKG",players:["Parth Jhawar","Abdul Rehman","Pratham P","Durgesh Suthar","Navdeep","Rajendra Ranka","Dhrouv Pujari"]},userflow:{id:"userflow",name:"Userflow United",shortName:"UFU",color:"#FF0000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249558/spitha_prod_uploads/2026_01/userflow_united_1769249557427.webp",manager:"Mani",players:["Sumedh Zope","Avaneesh Kulkarni","Kushal","Jalaj Varshney","Anurag Kumar Singh","Sandeep Xavier","Hriday Bhatia"]}},rv=ve.createContext(null),Sr=()=>{const s=ve.useContext(rv);if(!s)throw new Error("useApp must be used within AppProvider");return s},ST=({children:s})=>{const[e,n]=ve.useState([]),[i,a]=ve.useState([]),[c,d]=ve.useState(!1),[g,v]=ve.useState(!0),[w,N]=ve.useState("matches");ve.useEffect(()=>{localStorage.getItem("republic-cup-admin")==="true"&&d(!0)},[]),ve.useEffect(()=>{let J,Z;return(async()=>{await yT(),J=vT(ce=>{n(ce),v(!1)}),Z=wT(ce=>{a(ce)})})(),()=>{J&&J(),Z&&Z()}},[]);const x=ve.useCallback(J=>J==="5555"?(d(!0),localStorage.setItem("republic-cup-admin","true"),!0):!1,[]),T=ve.useCallback(()=>{d(!1),localStorage.removeItem("republic-cup-admin")},[]),P=ve.useCallback(()=>{const J={};return Object.keys(nt).forEach(Z=>{J[Z]={teamId:Z,played:0,won:0,drawn:0,lost:0,goalsFor:0,goalsAgainst:0,goalDifference:0,points:0}}),e.filter(Z=>Z.status==="ft"&&!Z.isFinal).forEach(Z=>{const re=Z.home,ce=Z.away,Ve=Z.scoreHome||0,z=Z.scoreAway||0;!J[re]||!J[ce]||(J[re].played++,J[ce].played++,J[re].goalsFor+=Ve,J[re].goalsAgainst+=z,J[ce].goalsFor+=z,J[ce].goalsAgainst+=Ve,Ve>z?(J[re].won++,J[re].points+=3,J[ce].lost++):Ve<z?(J[ce].won++,J[ce].points+=3,J[re].lost++):(J[re].drawn++,J[ce].drawn++,J[re].points++,J[ce].points++))}),Object.values(J).map(Z=>({...Z,goalDifference:Z.goalsFor-Z.goalsAgainst})).sort((Z,re)=>re.points!==Z.points?re.points-Z.points:re.goalDifference!==Z.goalDifference?re.goalDifference-Z.goalDifference:re.goalsFor-Z.goalsFor)},[e]),U=ve.useCallback(()=>{const J={};return e.filter(Z=>Z.status==="ft").forEach(Z=>{(Z.goals||[]).forEach(re=>{const ce=`${re.player}-${re.team}`;J[ce]||(J[ce]={player:re.player,team:re.team,goals:0}),J[ce].goals++})}),Object.values(J).sort((Z,re)=>re.goals-Z.goals).slice(0,10)},[e]),q=ve.useCallback(()=>e.filter(J=>J.status==="upcoming"&&J.home!=="tbd"),[e]),H={matches:e,predictions:i,isAdmin:c,loading:g,activeTab:w,setActiveTab:N,loginAdmin:x,logoutAdmin:T,calculateTable:P,calculateTopScorers:U,getUpcomingMatches:q};return p.jsx(rv.Provider,{value:H,children:s})},IT=({onClose:s})=>{const{loginAdmin:e}=Sr(),[n,i]=ve.useState(["","","",""]),[a,c]=ve.useState(!1),[d,g]=ve.useState(!1),v=[ve.useRef(),ve.useRef(),ve.useRef(),ve.useRef()];ve.useEffect(()=>{var T;(T=v[0].current)==null||T.focus()},[]);const w=(T,P)=>{var q;if(P&&!/^\d$/.test(P))return;const U=[...n];if(U[T]=P,i(U),c(!1),P&&T<3&&((q=v[T+1].current)==null||q.focus()),P&&T===3){const H=U.join("");setTimeout(()=>{e(H)?s():(c(!0),g(!0),setTimeout(()=>{var J;g(!1),i(["","","",""]),(J=v[0].current)==null||J.focus()},500))},100)}},N=(T,P)=>{var U;P.key==="Backspace"&&!n[T]&&T>0&&((U=v[T-1].current)==null||U.focus())},x=T=>{T.preventDefault();const P=T.clipboardData.getData("text").slice(0,4);if(/^\d+$/.test(P)){const U=P.split("").concat(["","","",""]).slice(0,4);i(U),U[3]&&setTimeout(()=>{e(U.join(""))?s():(c(!0),g(!0),setTimeout(()=>{var q;g(!1),i(["","","",""]),(q=v[0].current)==null||q.focus()},500))},100)}};return p.jsx("div",{className:"modal-overlay",onClick:s,children:p.jsxs("div",{className:`modal-content pin-modal ${d?"shake":""}`,onClick:T=>T.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{children:"Admin Access"}),p.jsx("button",{className:"modal-close",onClick:s,children:""})]}),p.jsxs("div",{className:"pin-content",children:[p.jsx("p",{className:"pin-label",children:"Enter 4-digit PIN"}),p.jsx("div",{className:"pin-inputs",onPaste:x,children:n.map((T,P)=>p.jsx("input",{ref:v[P],type:"password",inputMode:"numeric",maxLength:1,value:T,onChange:U=>w(P,U.target.value),onKeyDown:U=>N(P,U),className:`pin-input ${a?"error":""}`,autoComplete:"off"},P))}),a&&p.jsx("p",{className:"pin-error",children:"Incorrect PIN. Try again."})]})]})})},AT=()=>{const{isAdmin:s,logoutAdmin:e}=Sr(),[n,i]=ve.useState(!1),[a,c]=ve.useState(0),d=()=>{const g=a+1;c(g),g>=3&&(i(!0),c(0)),setTimeout(()=>c(0),2e3)};return p.jsxs(p.Fragment,{children:[p.jsxs("header",{className:"header",children:[p.jsxs("div",{className:"header-content",children:[p.jsxs("div",{className:"header-brand",children:[p.jsx("img",{src:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249500/spitha_prod_uploads/2026_01/logo_1769249499164.webp",alt:"Scapia Offside",className:"header-logo"}),p.jsxs("div",{className:"header-title-group",children:[p.jsx("h1",{className:"header-title",children:"SCAPIA OFFSIDE"}),p.jsx("span",{className:"header-year",children:"2026"})]})]}),p.jsxs("div",{className:"header-actions",children:[s&&p.jsx("button",{className:"admin-badge",onClick:e,children:"ADMIN"}),p.jsx("span",{className:"version-tag",onClick:d,children:"v1.0"})]})]}),s&&p.jsx("div",{className:"admin-banner",children:"Admin Mode Active - You can edit matches"})]}),n&&p.jsx(IT,{onClose:()=>i(!1)})]})},NT=()=>{const{activeTab:s,setActiveTab:e,matches:n}=Sr(),i=n.filter(c=>c.status==="live").length,a=[{id:"matches",label:"Matches",icon:p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}),p.jsx("path",{d:"M2 12h20"})]}),badge:i>0?i:null},{id:"table",label:"Table",icon:p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("path",{d:"M3 3h18v18H3zM3 9h18M3 15h18M9 3v18"})})},{id:"polls",label:"Polls",icon:p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("path",{d:"M18 20V10M12 20V4M6 20v-6"})})},{id:"rules",label:"Rules",icon:p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),p.jsx("polyline",{points:"14 2 14 8 20 8"}),p.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),p.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),p.jsx("polyline",{points:"10 9 9 9 8 9"})]})}];return p.jsx("nav",{className:"bottom-nav",children:p.jsx("div",{className:"nav-content",children:a.map(c=>p.jsxs("button",{className:`nav-item ${s===c.id?"active":""}`,onClick:()=>e(c.id),children:[p.jsxs("div",{className:"nav-icon-wrapper",children:[p.jsx("span",{className:"nav-icon",children:c.icon}),c.badge&&p.jsx("span",{className:"nav-badge",children:c.badge})]}),p.jsx("span",{className:"nav-label",children:c.label})]},c.id))})})},xT=({teamId:s,otherTeamId:e,isHome:n,onSelect:i,onClose:a})=>{const c=nt[s],[d,g]=ve.useState(null),[v,w]=ve.useState("scorer");if(!c)return null;const N=P=>{P==="Own Goal"?i(P,s,null):(g(P),w("assist"))},x=P=>{i(d,s,P)},T=((c==null?void 0:c.players)||[]).filter(P=>P!==d).map(P=>({name:P,team:s,teamName:c.shortName}));return p.jsx("div",{className:"modal-overlay",onClick:a,children:p.jsxs("div",{className:"modal-content goal-modal",onClick:P=>P.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{children:v==="scorer"?"Who Scored?":"Who Assisted?"}),p.jsx("button",{className:"modal-close",onClick:a,children:""})]}),p.jsx("div",{className:"goal-modal-content",children:v==="scorer"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"goal-team-header",children:[p.jsx("img",{src:c.logo,alt:c.name,className:"goal-team-logo"}),p.jsx("span",{className:"goal-team-name",children:c.name})]}),p.jsxs("div",{className:"player-grid",children:[c.players.map(P=>p.jsxs("button",{className:"player-btn",onClick:()=>N(P),children:[p.jsx("span",{className:"player-initial",children:P.charAt(0)}),p.jsx("span",{className:"player-name",children:P})]},P)),p.jsxs("button",{className:"player-btn own-goal",onClick:()=>N("Own Goal"),children:[p.jsx("span",{className:"player-initial",children:"OG"}),p.jsx("span",{className:"player-name",children:"Own Goal"})]})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"assist-header",children:p.jsxs("span",{className:"scorer-info",children:["Goal: ",p.jsx("strong",{children:d})]})}),p.jsxs("div",{className:"player-grid assist-grid",children:[p.jsxs("button",{className:"player-btn no-assist",onClick:()=>x(null),children:[p.jsx("span",{className:"player-initial",children:"-"}),p.jsx("span",{className:"player-name",children:"No Assist"})]}),T.map(P=>p.jsxs("button",{className:"player-btn",onClick:()=>x(P.name),children:[p.jsx("span",{className:"player-initial",children:P.name.charAt(0)}),p.jsx("span",{className:"player-name",children:P.name}),p.jsx("span",{className:"player-team-tag",children:P.teamName})]},`${P.name}-${P.team}`))]}),p.jsx("button",{className:"back-btn",onClick:()=>w("scorer"),children:" Back to scorer"})]})})]})})},CT=({match:s,onClose:e})=>{var Ve;const{predictions:n}=Sr(),[i,a]=ve.useState(s.status),[c,d]=ve.useState(null),[g,v]=ve.useState(!1),[w,N]=ve.useState(s.manOfTheMatch||""),x=nt[s.home]||{name:"TBD",shortName:"TBD"},T=nt[s.away]||{name:"TBD",shortName:"TBD"},P=async z=>{v(!0),await Us(s.id,{status:z}),a(z),v(!1)},U=async()=>{window.confirm("Are you sure you want to reset the score to 0-0?")&&(v(!0),await Us(s.id,{scoreHome:0,scoreAway:0,goals:[]}),v(!1))},q=async(z,k,S,R)=>{v(!0);const D={player:z,team:k,assist:S||null,timestamp:new Date().toISOString()},A=[...s.goals||[],D],V=A.filter(_e=>_e.team===s.home).length,I=A.filter(_e=>_e.team===s.away).length;await Us(s.id,{goals:A,scoreHome:V,scoreAway:I}),d(null),v(!1)},H=async z=>{const k=z?s.home:s.away;if((s.goals||[]).filter(I=>I.team===k).length===0)return;const R=s.goals.map(I=>I.team).lastIndexOf(k),D=s.goals.filter((I,_e)=>_e!==R),A=D.filter(I=>I.team===s.home).length,V=D.filter(I=>I.team===s.away).length;v(!0),await Us(s.id,{goals:D,scoreHome:A,scoreAway:V}),v(!1)},J=ve.useMemo(()=>n.filter(z=>z.matchId===s.id).sort((z,k)=>{var D,A,V,I;const S=((A=(D=z.submittedAt)==null?void 0:D.toDate)==null?void 0:A.call(D))||new Date(z.submittedAt),R=((I=(V=k.submittedAt)==null?void 0:V.toDate)==null?void 0:I.call(V))||new Date(k.submittedAt);return S-R}),[n,s.id]),Z=ve.useMemo(()=>{const z=new Set;return J.map(k=>{var D;const S=(D=k.userName)==null?void 0:D.toLowerCase().trim(),R=!z.has(S);return z.add(S),{...k,isFirstEntry:R}})},[J]),re=ve.useMemo(()=>{const z={};return(s.goals||[]).forEach(k=>{const S=`${k.player}-${k.team}`;z[S]||(z[S]={player:k.player,team:k.team,goals:0}),z[S].goals++}),Object.values(z).sort((k,S)=>S.goals-k.goals)},[s.goals]),ce=async()=>{if(!w){alert("Please select a Man of the Match");return}v(!0);const k=Z.filter(S=>S.isFirstEntry&&S.predictedPlayer===w).map(S=>S.userName);await Us(s.id,{manOfTheMatch:w,momWinners:k,momPublishedAt:new Date().toISOString()}),v(!1),alert(`Man of the Match: ${w}
Winners: ${k.length>0?k.join(", "):"No correct predictions"}`)};return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content admin-modal",onClick:z=>z.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h2",{children:["Edit Match ",s.matchNumber]}),p.jsx("button",{className:"modal-close",onClick:e,children:""})]}),p.jsxs("div",{className:"admin-content",children:[p.jsxs("div",{className:"admin-match-info",children:[p.jsxs("div",{className:"admin-team",children:[x.logo&&p.jsx("img",{src:x.logo,alt:x.name}),p.jsx("span",{children:x.shortName})]}),p.jsxs("div",{className:"admin-score",children:[p.jsx("span",{children:s.scoreHome}),p.jsx("span",{className:"admin-score-sep",children:"-"}),p.jsx("span",{children:s.scoreAway})]}),p.jsxs("div",{className:"admin-team",children:[T.logo&&p.jsx("img",{src:T.logo,alt:T.name}),p.jsx("span",{children:T.shortName})]})]}),p.jsxs("div",{className:"admin-section",children:[p.jsx("label",{children:"Match Status"}),p.jsx("div",{className:"status-buttons",children:["upcoming","live","ft"].map(z=>p.jsx("button",{className:`status-btn ${i===z?"active":""} status-${z}`,onClick:()=>P(z),disabled:g,children:z==="upcoming"?"Upcoming":z==="live"?"Live":"Full Time"},z))})]}),p.jsxs("div",{className:"admin-section",children:[p.jsx("label",{children:"Predictions Lock (2 PM Rule)"}),p.jsx("button",{className:`lock-btn ${s.predictionsLocked?"locked":""}`,onClick:async()=>{v(!0),await Us(s.id,{predictionsLocked:!s.predictionsLocked}),v(!1)},disabled:g,children:s.predictionsLocked?" Predictions Locked":" Predictions Open"})]}),p.jsxs("div",{className:"admin-section",children:[p.jsx("label",{children:"Add Goal"}),p.jsxs("div",{className:"goal-buttons",children:[p.jsxs("button",{className:"goal-btn home",onClick:()=>d("home"),disabled:g||s.home==="tbd",children:["+ Goal ",x.shortName]}),p.jsxs("button",{className:"goal-btn away",onClick:()=>d("away"),disabled:g||s.away==="tbd",children:["+ Goal ",T.shortName]})]})]}),p.jsxs("div",{className:"admin-section",children:[p.jsx("label",{children:"Remove Last Goal"}),p.jsxs("div",{className:"goal-buttons",children:[p.jsxs("button",{className:"remove-btn",onClick:()=>H(!0),disabled:g||!(s.goals||[]).some(z=>z.team===s.home),children:["- ",x.shortName]}),p.jsxs("button",{className:"remove-btn",onClick:()=>H(!1),disabled:g||!(s.goals||[]).some(z=>z.team===s.away),children:["- ",T.shortName]})]})]}),s.goals&&s.goals.length>0&&p.jsxs("div",{className:"admin-section",children:[p.jsx("label",{children:"Goal Log"}),p.jsx("div",{className:"goal-log",children:s.goals.map((z,k)=>{const S=nt[z.team];return p.jsxs("div",{className:"goal-log-item",children:[p.jsxs("span",{className:"goal-time",children:[k+1,"."]}),p.jsx("span",{className:"goal-player",children:z.player}),p.jsxs("span",{className:"goal-team",children:["(",S==null?void 0:S.shortName,")"]}),z.assist&&p.jsxs("span",{className:"goal-assist",children:["A: ",z.assist]})]},k)})})]}),i==="ft"&&p.jsxs("div",{className:"admin-section mom-section",children:[p.jsx("label",{children:"Man of the Match"}),re.length>0?p.jsxs(p.Fragment,{children:[p.jsxs("select",{className:"mom-select",value:w,onChange:z=>N(z.target.value),disabled:g||s.momPublishedAt,children:[p.jsx("option",{value:"",children:"-- Select Man of the Match --"}),re.map(z=>{const k=nt[z.team];return p.jsxs("option",{value:z.player,children:[z.player," (",k==null?void 0:k.shortName,") - ",z.goals," goal",z.goals>1?"s":""]},`${z.player}-${z.team}`)}),p.jsx("option",{value:"referee_decision",children:"Referee Decision (0-0 Draw)"})]}),s.momPublishedAt?p.jsxs("div",{className:"mom-published",children:["Published: ",s.manOfTheMatch,((Ve=s.momWinners)==null?void 0:Ve.length)>0&&p.jsxs("span",{className:"mom-winners",children:["Winners: ",s.momWinners.join(", ")]})]}):p.jsx("button",{className:"publish-btn",onClick:ce,disabled:g||!w,children:"Publish Winner"})]}):p.jsx("p",{className:"no-goals-msg",children:'No goals scored yet. Add goals or select "Referee Decision".'})]}),Z.length>0&&p.jsxs("div",{className:"admin-section",children:[p.jsxs("label",{children:["Predictions (",Z.length,") - Sorted by submission time (earliest first)"]}),p.jsx("div",{className:"predictions-log",children:Z.map((z,k)=>{var D,A;const R=(((A=(D=z.submittedAt)==null?void 0:D.toDate)==null?void 0:A.call(D))||new Date(z.submittedAt)).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"});return p.jsxs("div",{className:`prediction-log-item ${z.isFirstEntry?"":"duplicate"} ${z.predictedPlayer===w?"winner":""}`,children:[p.jsxs("span",{className:"pred-index",children:[k+1,"."]}),p.jsx("span",{className:"pred-time",children:R}),p.jsx("span",{className:"pred-user",children:z.userName}),p.jsx("span",{className:"pred-arrow",children:""}),p.jsx("span",{className:"pred-player",children:z.predictedPlayer}),!z.isFirstEntry&&p.jsx("span",{className:"pred-dup-badge",children:"DUP"}),z.isFirstEntry&&z.predictedPlayer===w&&p.jsx("span",{className:"pred-win-badge",children:"WIN"}),p.jsx("button",{className:"pred-delete-btn",onClick:()=>{window.confirm(`Delete prediction by ${z.userName}?`)&&TT(z.id)},disabled:g,children:""})]},z.id)})})]}),p.jsxs("div",{className:"admin-section",children:[p.jsx("label",{children:"Reset Options"}),p.jsxs("div",{className:"reset-buttons",children:[p.jsx("button",{className:"reset-btn",onClick:U,disabled:g,children:"Reset Score (0-0)"}),p.jsx("button",{className:"reset-btn danger",onClick:async()=>{window.confirm("Reset ALL match data? This will clear score, goals, and MoM. Predictions will remain.")&&(v(!0),await Us(s.id,{scoreHome:0,scoreAway:0,goals:[],manOfTheMatch:null,momWinners:null,momPublishedAt:null,status:"upcoming",predictionsLocked:!1}),a("upcoming"),N(""),v(!1))},disabled:g,children:"Reset All Match Data"})]})]})]})]})}),c&&p.jsx(xT,{teamId:c==="home"?s.home:s.away,otherTeamId:c==="home"?s.away:s.home,isHome:c==="home",onSelect:(z,k,S)=>q(z,k,S),onClose:()=>d(null)})]})},sg=({match:s})=>{const{isAdmin:e}=Sr(),[n,i]=ve.useState(!1),[a,c]=ve.useState(!1),d=nt[s.home]||{name:"TBD",logo:null},g=nt[s.away]||{name:"TBD",logo:null},v=()=>{switch(s.status){case"live":return"status-live";case"ft":return"status-ft";default:return"status-upcoming"}},w=()=>{switch(s.status){case"live":return"LIVE";case"ft":return"FT";default:return mT(s.time)}},N=H=>(s.goals||[]).filter(J=>J.team===H),x=N(s.home),T=N(s.away),P=x.length>0||T.length>0,U=s.status==="ft"&&P,q=()=>{U&&c(!a)};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:`match-card ${s.status} ${s.isFinal?"final":""} ${a?"expanded":""} ${U?"clickable":""}`,onClick:q,children:[s.isFinal&&p.jsx("div",{className:"final-badge",children:"FINAL"}),p.jsxs("div",{className:"match-header",children:[p.jsxs("span",{className:"match-number",children:["Match ",s.matchNumber]}),p.jsxs("span",{className:`match-status ${v()}`,children:[s.status==="live"&&p.jsx("span",{className:"live-dot"}),w()]})]}),p.jsxs("div",{className:"match-body",children:[p.jsxs("div",{className:"team home-team",children:[p.jsx("div",{className:"team-logo-wrapper",children:d.logo?p.jsx("img",{src:d.logo,alt:d.name,className:"team-logo"}):p.jsx("div",{className:"team-logo-placeholder",children:"?"})}),p.jsx("span",{className:"team-name",children:d.name})]}),p.jsx("div",{className:"score-container",children:s.status==="upcoming"?p.jsx("span",{className:"vs-text",children:"VS"}):p.jsxs("div",{className:"score",children:[p.jsx("span",{className:"score-home",children:s.scoreHome}),p.jsx("span",{className:"score-separator",children:"-"}),p.jsx("span",{className:"score-away",children:s.scoreAway})]})}),p.jsxs("div",{className:"team away-team",children:[p.jsx("div",{className:"team-logo-wrapper",children:g.logo?p.jsx("img",{src:g.logo,alt:g.name,className:"team-logo"}):p.jsx("div",{className:"team-logo-placeholder",children:"?"})}),p.jsx("span",{className:"team-name",children:g.name})]})]}),U&&!a&&p.jsxs("div",{className:"expand-hint",children:[p.jsx("span",{children:"Tap to see scorers"}),p.jsx("span",{className:"expand-icon",children:""})]}),a&&p.jsxs("div",{className:"goals-detail",children:[p.jsx("div",{className:"goals-column home-goals",children:x.length>0?x.map((H,J)=>p.jsxs("div",{className:"goal-item",children:[p.jsx("span",{className:"goal-icon",children:""}),p.jsx("span",{className:"goal-scorer",children:H.player}),H.assist&&p.jsxs("span",{className:"goal-assist",children:["(A: ",H.assist,")"]})]},J)):p.jsx("span",{className:"no-goals",children:"-"})}),p.jsx("div",{className:"goals-divider"}),p.jsx("div",{className:"goals-column away-goals",children:T.length>0?T.map((H,J)=>p.jsxs("div",{className:"goal-item",children:[p.jsx("span",{className:"goal-icon",children:""}),p.jsx("span",{className:"goal-scorer",children:H.player}),H.assist&&p.jsxs("span",{className:"goal-assist",children:["(A: ",H.assist,")"]})]},J)):p.jsx("span",{className:"no-goals",children:"-"})})]}),e&&p.jsx("button",{className:"edit-button",onClick:H=>{H.stopPropagation(),i(!0)},children:"Edit"})]}),n&&p.jsx(CT,{match:s,onClose:()=>i(!1)})]})},PT=()=>{const{matches:s,loading:e}=Sr(),n=ve.useMemo(()=>{const a={};return s.forEach(c=>{const d=c.date;a[d]||(a[d]=[]),a[d].push(c)}),Object.entries(a).sort(([c],[d])=>new Date(c)-new Date(d)).map(([c,d])=>{const g=dT(c);return{date:c,dateLabel:tv(c),matchday:g,matches:d.sort((v,w)=>v.time.localeCompare(w.time))}})},[s]),i=s.filter(a=>a.status==="live");return e?p.jsx("div",{className:"tab-content",children:p.jsx("div",{className:"loading-container",style:{minHeight:"200px"},children:p.jsx("div",{className:"loading-spinner"})})}):p.jsxs("div",{className:"tab-content",children:[i.length>0&&p.jsxs("section",{className:"live-section animate-fade-in",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{className:"section-title",children:"PLAYING NOW"}),p.jsxs("span",{className:"section-badge live-badge",children:[i.length," LIVE"]})]}),i.map(a=>p.jsx(sg,{match:a},a.id))]}),n.map(a=>p.jsxs("section",{className:"matchday-section",children:[p.jsxs("div",{className:"matchday-header",children:[p.jsxs("div",{className:"matchday-info",children:[p.jsx("span",{className:"matchday-icon",children:a.matchday.icon}),p.jsxs("div",{className:"matchday-text",children:[p.jsx("span",{className:"matchday-name",children:a.matchday.name}),p.jsx("span",{className:"matchday-date",children:a.dateLabel})]})]}),p.jsx("div",{className:"ground-info",children:p.jsx("span",{className:"ground-name",children:a.matchday.ground})})]}),a.matches.map(c=>p.jsx(sg,{match:c},c.id))]},a.date)),s.length===0&&p.jsxs("div",{className:"empty-state",children:[p.jsx("div",{className:"empty-state-icon",children:""}),p.jsx("h3",{children:"No Matches Yet"}),p.jsx("p",{children:"Check back when the tournament begins!"})]})]})},RT=()=>{const{calculateTable:s,calculateTopScorers:e,matches:n,predictions:i}=Sr(),a=ve.useMemo(()=>s(),[s]),c=ve.useMemo(()=>e(),[e]),d=n.filter(T=>T.status==="ft"&&!T.isFinal).length,g=ve.useMemo(()=>{const T={};return n.filter(P=>P.status==="ft").forEach(P=>{(P.goals||[]).forEach(U=>{if(U.assist){const q=U.assist;T[q]||(T[q]={player:U.assist,assists:0}),T[q].assists++}})}),Object.values(T).sort((P,U)=>U.assists-P.assists).slice(0,5)},[n]),v=ve.useMemo(()=>{const T={};return Object.keys(nt).forEach(P=>{T[P]=0}),n.filter(P=>P.status==="ft").forEach(P=>{P.scoreAway===0&&T[P.home]!==void 0&&T[P.home]++,P.scoreHome===0&&T[P.away]!==void 0&&T[P.away]++}),Object.entries(T).map(([P,U])=>({teamId:P,count:U})).sort((P,U)=>U.count-P.count)},[n]),w=1e3,N=ve.useMemo(()=>{const T={};return n.filter(P=>{var U;return P.momPublishedAt&&((U=P.momWinners)==null?void 0:U.length)>0}).forEach(P=>{const U=Math.floor(w/P.momWinners.length);P.momWinners.forEach(q=>{T[q]||(T[q]={name:q,coins:0,wins:0}),T[q].coins+=U,T[q].wins++})}),Object.values(T).sort((P,U)=>U.coins-P.coins).slice(0,15)},[n]),x=ve.useMemo(()=>{var Ve;const T=n.filter(z=>z.status==="ft");if(T.length===0)return null;let P=null,U=0;T.forEach(z=>{var S,R;const k=Math.abs(z.scoreHome-z.scoreAway);if(k>U){U=k;const D=z.scoreHome>z.scoreAway?z.home:z.away,A=z.scoreHome>z.scoreAway?z.away:z.home;P={winner:((S=nt[D])==null?void 0:S.shortName)||D,loser:((R=nt[A])==null?void 0:R.shortName)||A,score:z.scoreHome>z.scoreAway?`${z.scoreHome}-${z.scoreAway}`:`${z.scoreAway}-${z.scoreHome}`,matchNum:z.matchNumber}}});let q=null,H=0;T.forEach(z=>{var S,R;const k=(z.scoreHome||0)+(z.scoreAway||0);k>H&&(H=k,q={home:((S=nt[z.home])==null?void 0:S.shortName)||z.home,away:((R=nt[z.away])==null?void 0:R.shortName)||z.away,score:`${z.scoreHome}-${z.scoreAway}`,total:k,matchNum:z.matchNumber})});const J=T.filter(z=>z.scoreHome===z.scoreAway).length,Z={};T.forEach(z=>{z.scoreHome>z.scoreAway?Z[z.home]=(Z[z.home]||0)+1:z.scoreAway>z.scoreHome&&(Z[z.away]=(Z[z.away]||0)+1)});const re=Object.entries(Z).sort((z,k)=>k[1]-z[1])[0],ce=[];return T.forEach(z=>{const k={};(z.goals||[]).forEach(S=>{k[S.player]=(k[S.player]||0)+1}),Object.entries(k).forEach(([S,R])=>{R>=3&&ce.push({player:S,goals:R,matchNum:z.matchNumber})})}),{biggestWin:P,highestScoring:q,draws:J,topWinner:re?{team:((Ve=nt[re[0]])==null?void 0:Ve.shortName)||re[0],wins:re[1]}:null,hatTricks:ce}},[n]);return p.jsxs("div",{className:"tab-content",children:[p.jsxs("section",{className:"table-section animate-slide-up",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{className:"section-title",children:"STANDINGS"}),p.jsxs("span",{className:"section-badge",children:[d," PLAYED"]})]}),p.jsxs("div",{className:"league-table",children:[p.jsxs("div",{className:"table-header",children:[p.jsx("span",{className:"col-pos",children:"#"}),p.jsx("span",{className:"col-team",children:"Team"}),p.jsx("span",{className:"col-stat",children:"P"}),p.jsx("span",{className:"col-stat col-wdl",children:"W"}),p.jsx("span",{className:"col-stat col-wdl",children:"D"}),p.jsx("span",{className:"col-stat col-wdl",children:"L"}),p.jsx("span",{className:"col-stat",children:"GD"}),p.jsx("span",{className:"col-pts",children:"PTS"})]}),a.map((T,P)=>{const U=nt[T.teamId];return U?p.jsxs("div",{className:`table-row ${P<2?"qualified":""}`,style:{animationDelay:`${P*.05}s`},children:[p.jsx("span",{className:"col-pos",children:p.jsx("span",{className:`position ${P<2?"top":""}`,children:P+1})}),p.jsxs("span",{className:"col-team",children:[p.jsx("img",{src:U.logo,alt:U.name,className:"table-team-logo"}),p.jsx("span",{className:"table-team-name",children:U.name})]}),p.jsx("span",{className:"col-stat",children:T.played}),p.jsx("span",{className:"col-stat col-wdl",children:T.won}),p.jsx("span",{className:"col-stat col-wdl",children:T.drawn}),p.jsx("span",{className:"col-stat col-wdl",children:T.lost}),p.jsxs("span",{className:"col-stat",children:[T.goalDifference>0?"+":"",T.goalDifference]}),p.jsx("span",{className:"col-pts",children:T.points})]},T.teamId):null})]}),p.jsx("div",{className:"table-legend",children:p.jsxs("span",{className:"legend-item qualified-legend",children:[p.jsx("span",{className:"legend-dot"}),"Qualifies for Final"]})})]}),p.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.2s"},children:[p.jsx("div",{className:"section-header",children:p.jsx("h2",{className:"section-title",children:"GOLDEN BOOT"})}),c.length>0?p.jsx("div",{className:"scorers-list",children:c.map((T,P)=>{const U=nt[T.team];return p.jsxs("div",{className:`scorer-row ${P===0?"leader":""}`,style:{animationDelay:`${(P+4)*.05}s`},children:[p.jsx("span",{className:"scorer-rank",children:P===0?"":P===1?"":P===2?"":P+1}),p.jsxs("div",{className:"scorer-info",children:[p.jsx("span",{className:"scorer-name",children:T.player}),p.jsx("span",{className:"scorer-team",children:(U==null?void 0:U.name)||T.team})]}),p.jsx("span",{className:"scorer-goals",children:T.goals})]},`${T.player}-${T.team}`)})}):p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No goals scored yet"})})]}),g.length>0&&p.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.25s"},children:[p.jsx("div",{className:"section-header",children:p.jsx("h2",{className:"section-title",children:"TOP ASSISTS"})}),p.jsx("div",{className:"scorers-list",children:g.map((T,P)=>p.jsxs("div",{className:`scorer-row ${P===0?"leader assist-leader":""}`,style:{animationDelay:`${(P+4)*.05}s`},children:[p.jsx("span",{className:"scorer-rank",children:P===0?"":P+1}),p.jsx("div",{className:"scorer-info",children:p.jsx("span",{className:"scorer-name",children:T.player})}),p.jsx("span",{className:"scorer-goals assist-count",children:T.assists})]},T.player))})]}),p.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.3s"},children:[p.jsx("div",{className:"section-header",children:p.jsx("h2",{className:"section-title",children:"CLEAN SHEETS"})}),p.jsx("div",{className:"scorers-list",children:v.map((T,P)=>{const U=nt[T.teamId];return U?p.jsxs("div",{className:`scorer-row ${P===0&&T.count>0?"leader clean-leader":""}`,style:{animationDelay:`${(P+4)*.05}s`},children:[p.jsx("span",{className:"scorer-rank",children:P===0&&T.count>0?"":P+1}),p.jsxs("div",{className:"scorer-info",children:[p.jsx("img",{src:U.logo,alt:U.name,className:"table-team-logo"}),p.jsx("span",{className:"scorer-name",children:U.name})]}),p.jsx("span",{className:"scorer-goals",children:T.count})]},T.teamId):null})})]}),p.jsxs("section",{className:"stats-section animate-slide-up",style:{animationDelay:"0.35s"},children:[p.jsx("div",{className:"section-header",children:p.jsx("h2",{className:"section-title",children:"TOURNAMENT STATS"})}),p.jsxs("div",{className:"stats-grid",children:[p.jsxs("div",{className:"stat-card",children:[p.jsx("span",{className:"stat-value",children:n.filter(T=>T.status==="ft").reduce((T,P)=>T+(P.scoreHome||0)+(P.scoreAway||0),0)}),p.jsx("span",{className:"stat-label",children:"Total Goals"})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("span",{className:"stat-value",children:d}),p.jsx("span",{className:"stat-label",children:"Matches Played"})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("span",{className:"stat-value",children:d>0?(n.filter(T=>T.status==="ft").reduce((T,P)=>T+(P.scoreHome||0)+(P.scoreAway||0),0)/d).toFixed(1):"0.0"}),p.jsx("span",{className:"stat-label",children:"Goals/Match"})]})]})]}),N.length>0&&p.jsxs("section",{className:"scorers-section poll-leaderboard animate-slide-up",style:{animationDelay:"0.4s"},children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{className:"section-title",children:"POLL LEADERBOARD"}),p.jsx("span",{className:"section-badge coins-badge",children:"COINS"})]}),p.jsx("div",{className:"scorers-list",children:N.map((T,P)=>p.jsxs("div",{className:`scorer-row ${P===0?"leader coins-leader":""}`,style:{animationDelay:`${(P+4)*.05}s`},children:[p.jsx("span",{className:"scorer-rank",children:P===0?"":P===1?"":P===2?"":P+1}),p.jsxs("div",{className:"scorer-info",children:[p.jsx("span",{className:"scorer-name",children:T.name}),p.jsxs("span",{className:"scorer-team",children:[T.wins," win",T.wins!==1?"s":""]})]}),p.jsx("span",{className:"scorer-goals coins-value",children:T.coins})]},T.name))})]}),x&&p.jsxs("section",{className:"achievements-section animate-slide-up",style:{animationDelay:"0.45s"},children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{className:"section-title",children:"ACHIEVEMENTS"}),p.jsx("span",{className:"scroll-hint",children:" swipe "})]}),p.jsxs("div",{className:"achievements-carousel",children:[x.hatTricks.length>0&&x.hatTricks.map((T,P)=>p.jsxs("div",{className:"achievement-card legendary",children:[p.jsx("div",{className:"achievement-glow"}),p.jsx("div",{className:"achievement-icon",children:""}),p.jsx("div",{className:"achievement-badge",children:"HAT-TRICK"}),p.jsx("div",{className:"achievement-name",children:T.player}),p.jsxs("div",{className:"achievement-detail",children:[T.goals," goals in Match ",T.matchNum]})]},`ht-${P}`)),x.biggestWin&&x.biggestWin.score!=="0-0"&&p.jsxs("div",{className:"achievement-card epic",children:[p.jsx("div",{className:"achievement-glow"}),p.jsx("div",{className:"achievement-icon",children:""}),p.jsx("div",{className:"achievement-badge",children:"BIGGEST WIN"}),p.jsx("div",{className:"achievement-name",children:x.biggestWin.winner}),p.jsx("div",{className:"achievement-score",children:x.biggestWin.score}),p.jsxs("div",{className:"achievement-detail",children:["vs ",x.biggestWin.loser]})]}),x.highestScoring&&x.highestScoring.total>0&&p.jsxs("div",{className:"achievement-card rare",children:[p.jsx("div",{className:"achievement-glow"}),p.jsx("div",{className:"achievement-icon",children:""}),p.jsx("div",{className:"achievement-badge",children:"GOAL FEST"}),p.jsxs("div",{className:"achievement-name",children:[x.highestScoring.total," Goals"]}),p.jsxs("div",{className:"achievement-detail",children:[x.highestScoring.home," vs ",x.highestScoring.away]})]}),x.topWinner&&p.jsxs("div",{className:"achievement-card epic",children:[p.jsx("div",{className:"achievement-glow"}),p.jsx("div",{className:"achievement-icon",children:""}),p.jsx("div",{className:"achievement-badge",children:"DOMINANT"}),p.jsx("div",{className:"achievement-name",children:x.topWinner.team}),p.jsxs("div",{className:"achievement-detail",children:[x.topWinner.wins," wins"]})]}),x.draws>0&&p.jsxs("div",{className:"achievement-card common",children:[p.jsx("div",{className:"achievement-icon",children:""}),p.jsx("div",{className:"achievement-badge",children:"STALEMATES"}),p.jsx("div",{className:"achievement-name",children:x.draws}),p.jsx("div",{className:"achievement-detail",children:"draws so far"})]})]})]})]})},kT=()=>{const{getUpcomingMatches:s,predictions:e,matches:n,isAdmin:i}=Sr(),[a,c]=ve.useState(""),[d,g]=ve.useState({}),[v,w]=ve.useState(null),[N,x]=ve.useState({}),[T,P]=ve.useState(""),[U,q]=ve.useState({}),[H,J]=ve.useState(null),Z=ve.useMemo(()=>s(),[s]),re=A=>{var _e,Pe;const V=nt[A.home],I=nt[A.away];return{home:((_e=V==null?void 0:V.players)==null?void 0:_e.map(De=>({name:De,team:A.home,teamName:V.shortName})))||[],away:((Pe=I==null?void 0:I.players)==null?void 0:Pe.map(De=>({name:De,team:A.away,teamName:I.shortName})))||[]}},ce=A=>{const V=n.find(I=>I.id===A);return(V==null?void 0:V.predictionsLocked)===!0},Ve=A=>e.some(V=>{var I;return V.matchId===A&&((I=V.userName)==null?void 0:I.toLowerCase())===a.toLowerCase().trim()}),z=(A,V)=>{g(I=>({...I,[A]:V}))},k=async A=>{if(P(""),!a.trim()){P("Please enter your Scapia email first");return}if(!a.trim().endsWith("@scapia.cards")){P("Please use your Scapia email (@scapia.cards)");return}const V=d[A];if(!V){P("Please select a player first");return}if(ce(A)){P("Predictions are locked for this match");return}w(A);try{const I=Z.find(_e=>_e.id===A);await _T({userName:a.trim().toLowerCase(),matchId:A,matchNumber:I==null?void 0:I.matchNumber,predictedPlayer:V.name,predictedTeam:V.team,predictedTeamName:V.teamName}),x(_e=>({..._e,[A]:!0})),g(_e=>{const Pe={..._e};return delete Pe[A],Pe}),setTimeout(()=>{x(_e=>{const Pe={..._e};return delete Pe[A],Pe})},3e3)}catch{P("Failed to submit. Please try again.")}finally{w(null)}},S=A=>{const V=n.find(I=>I.id===A);return V&&(V.status==="live"||V.status==="ft")},R=1e3,D=ve.useMemo(()=>n.filter(A=>A.momPublishedAt).sort((A,V)=>A.matchNumber-V.matchNumber).map(A=>{var _e,Pe;const V=A.momWinners||[],I=V.length>0?Math.floor(R/V.length):0;return{matchNumber:A.matchNumber,homeTeam:((_e=nt[A.home])==null?void 0:_e.shortName)||A.home,awayTeam:((Pe=nt[A.away])==null?void 0:Pe.shortName)||A.away,score:`${A.scoreHome}-${A.scoreAway}`,manOfTheMatch:A.manOfTheMatch,winners:V,coinsPerWinner:I}}),[n]);return p.jsxs("div",{className:"tab-content",children:[p.jsx("section",{className:"rules-section animate-slide-up",children:p.jsxs("div",{className:"rules-card",children:[p.jsxs("div",{className:"rules-header",children:[p.jsx("span",{className:"rules-icon",children:""}),p.jsx("h3",{children:"Man of the Match Prediction"})]}),p.jsxs("div",{className:"rules-structured",children:[p.jsxs("div",{className:"rule-group",children:[p.jsx("h4",{className:"rule-group-title",children:"How to Win"}),p.jsxs("ul",{className:"rules-list",children:[p.jsxs("li",{children:["Predict who will score the ",p.jsx("strong",{children:"most goals"})," in the match"]}),p.jsxs("li",{children:["Prize pool: ",p.jsx("strong",{children:"1000 coins"})," per match"]}),p.jsx("li",{children:"Multiple winners split the prize equally"})]})]}),p.jsxs("div",{className:"rule-group",children:[p.jsx("h4",{className:"rule-group-title",children:"Tie-breakers"}),p.jsxs("ul",{className:"rules-list",children:[p.jsxs("li",{children:["If tied on goals, player from ",p.jsx("strong",{children:"winning team"})," wins"]}),p.jsxs("li",{children:["If match is a draw, ",p.jsx("strong",{children:"referee decides"})," MoM"]})]})]}),p.jsxs("div",{className:"rule-group",children:[p.jsx("h4",{className:"rule-group-title",children:"Terms & Conditions"}),p.jsxs("ul",{className:"rules-list",children:[p.jsxs("li",{children:["Only your ",p.jsx("strong",{children:"first entry"})," per match counts"]}),p.jsxs("li",{children:["Predictions lock at ",p.jsx("strong",{children:"2:00 PM"})," on matchday"]})]})]})]})]})}),D.length>0&&p.jsxs("section",{className:"winners-section animate-slide-up",style:{animationDelay:"0.05s"},children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{className:"section-title",children:"WINNERS HALL OF FAME"}),p.jsx("span",{className:"section-badge trophy-badge",children:""})]}),p.jsx("div",{className:"winners-list",children:D.map(A=>{const V=U[A.matchNumber],I=2,_e=A.winners.length>I,Pe=V?A.winners:A.winners.slice(0,I),De=A.winners.length-I;return p.jsxs("div",{className:"winner-card",children:[p.jsxs("div",{className:"winner-match-info",children:[p.jsxs("span",{className:"winner-match-num",children:["M",A.matchNumber]}),p.jsxs("span",{className:"winner-teams",children:[A.homeTeam," vs ",A.awayTeam]}),p.jsx("span",{className:"winner-score",children:A.score})]}),p.jsxs("div",{className:"winner-details",children:[p.jsxs("div",{className:"mom-player",children:[p.jsx("span",{className:"mom-label",children:"MoM:"}),p.jsx("span",{className:"mom-name",children:A.manOfTheMatch})]}),A.winners.length>0?p.jsxs("div",{className:"winner-info",children:[p.jsxs("div",{className:"winner-names",children:[Pe.map((Ie,te)=>p.jsx("span",{className:"winner-badge",children:Ie},te)),_e&&!V&&p.jsxs("button",{className:"winner-more-btn",onClick:()=>q(Ie=>({...Ie,[A.matchNumber]:!0})),children:["+",De," more"]}),V&&_e&&p.jsx("button",{className:"winner-less-btn",onClick:()=>q(Ie=>({...Ie,[A.matchNumber]:!1})),children:"show less"})]}),p.jsxs("span",{className:"coins-earned",children:[A.coinsPerWinner," coins each"]})]}):p.jsx("span",{className:"no-winners",children:"No correct predictions"})]})]},A.matchNumber)})})]}),p.jsxs("section",{className:"poll-section animate-slide-up",style:{animationDelay:"0.1s"},children:[p.jsx("div",{className:"section-header",children:p.jsx("h2",{className:"section-title",children:"MAKE YOUR PREDICTION"})}),T&&p.jsx("div",{className:"error-message animate-scale-in",children:T}),p.jsxs("div",{className:"email-input-section",children:[p.jsx("label",{htmlFor:"userName",children:"Your Scapia Email"}),p.jsx("input",{type:"email",id:"userName",value:a,onChange:A=>c(A.target.value.toLowerCase()),placeholder:"yourname@scapia.cards",maxLength:50})]}),p.jsx("div",{className:"prediction-matches",children:Z.map(A=>{const V=nt[A.home],I=nt[A.away],_e=ce(A.id),Pe=a&&Ve(A.id),De=d[A.id],Ie=H===A.id,te=N[A.id],fe=v===A.id,se=re(A);return p.jsxs("div",{className:`prediction-card ${_e?"locked":""} ${Pe?"already-predicted":""} ${Ie?"expanded":""} ${te?"submitted":""}`,children:[p.jsxs("div",{className:"prediction-card-header",onClick:()=>!_e&&!Pe&&J(Ie?null:A.id),children:[p.jsxs("div",{className:"prediction-match-info",children:[p.jsxs("span",{className:"prediction-match-num",children:["M",A.matchNumber]}),p.jsxs("div",{className:"prediction-teams",children:[p.jsx("img",{src:V==null?void 0:V.logo,alt:"",className:"prediction-team-logo"}),p.jsxs("span",{className:"prediction-vs",children:[V==null?void 0:V.shortName," vs ",I==null?void 0:I.shortName]}),p.jsx("img",{src:I==null?void 0:I.logo,alt:"",className:"prediction-team-logo"})]}),p.jsx("span",{className:"prediction-date",children:tv(A.date)})]}),p.jsxs("div",{className:"prediction-status",children:[_e&&p.jsx("span",{className:"status-tag locked",children:" Locked"}),Pe&&p.jsx("span",{className:"status-tag predicted",children:" Predicted"}),te&&p.jsx("span",{className:"status-tag success",children:" Submitted!"}),De&&!te&&p.jsx("span",{className:"status-tag selected",children:De.name}),!_e&&!Pe&&!De&&!te&&p.jsx("span",{className:"expand-arrow",children:Ie?"":""})]})]}),Ie&&!_e&&!Pe&&p.jsxs("div",{className:"prediction-card-body",children:[p.jsxs("div",{className:"player-selection",children:[p.jsxs("div",{className:"team-players",children:[p.jsx("div",{className:"team-label",children:V==null?void 0:V.shortName}),p.jsx("div",{className:"player-buttons",children:se.home.map(O=>p.jsx("button",{className:`player-btn ${(De==null?void 0:De.name)===O.name?"selected":""}`,onClick:()=>z(A.id,O),children:O.name},O.name))})]}),p.jsxs("div",{className:"team-players",children:[p.jsx("div",{className:"team-label",children:I==null?void 0:I.shortName}),p.jsx("div",{className:"player-buttons",children:se.away.map(O=>p.jsx("button",{className:`player-btn ${(De==null?void 0:De.name)===O.name?"selected":""}`,onClick:()=>z(A.id,O),children:O.name},O.name))})]})]}),De&&p.jsx("button",{className:"submit-prediction-btn",onClick:()=>k(A.id),disabled:fe,children:fe?"Submitting...":`Submit: ${De.name}`})]})]},A.id)})})]}),e.length>0&&p.jsxs("section",{className:"recent-section animate-slide-up",style:{animationDelay:"0.2s"},children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{className:"section-title",children:"RECENT PREDICTIONS"}),p.jsx("span",{className:"section-badge",children:e.length})]}),p.jsx("div",{className:"predictions-list",children:e.slice(0,10).map(A=>{var V;return p.jsxs("div",{className:"prediction-item",children:[p.jsxs("div",{className:"prediction-user",children:[p.jsx("span",{className:"user-avatar",children:(V=A.userName)==null?void 0:V.charAt(0).toUpperCase()}),p.jsx("span",{className:"user-name",children:A.userName})]}),p.jsxs("div",{className:"prediction-detail",children:[S(A.matchId)?p.jsx("span",{className:"predicted-player",children:A.predictedPlayer}):p.jsx("span",{className:"predicted-player hidden-vote",children:"Hidden"}),p.jsxs("span",{className:"predicted-match",children:["Match ",A.matchNumber]})]})]},A.id)})})]}),Z.length===0&&p.jsxs("div",{className:"empty-state",children:[p.jsx("div",{className:"empty-state-icon",children:""}),p.jsx("h3",{children:"No Upcoming Matches"}),p.jsx("p",{children:"Predictions open before each match!"})]}),i&&e.length>0&&p.jsxs("section",{className:"admin-poll-section animate-slide-up",style:{animationDelay:"0.3s"},children:[p.jsx("div",{className:"section-header",children:p.jsx("h2",{className:"section-title",children:"ADMIN CONTROLS"})}),p.jsxs("button",{className:"delete-all-btn",onClick:async()=>{window.confirm(`Delete all ${e.length} predictions? This cannot be undone.`)&&await ET()},children:["Delete All Predictions (",e.length,")"]})]})]})},VT=()=>p.jsxs("div",{className:"tab-content",children:[p.jsx("section",{className:"rules-page-section animate-slide-up",children:p.jsxs("div",{className:"rules-page-card",children:[p.jsxs("div",{className:"rules-page-header",children:[p.jsx("span",{className:"rules-page-icon",children:""}),p.jsx("h3",{children:"Tournament Format"})]}),p.jsxs("div",{className:"rules-page-content",children:[p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-number",children:"1"}),p.jsxs("div",{className:"rule-text",children:[p.jsx("strong",{children:"Group Stage:"})," All 4 teams play each other (6 matches per team)"]})]}),p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-number",children:"2"}),p.jsxs("div",{className:"rule-text",children:[p.jsx("strong",{children:"Final:"})," Top 2 teams qualify for the final match"]})]}),p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-number",children:"3"}),p.jsxs("div",{className:"rule-text",children:[p.jsx("strong",{children:"Match Duration:"})," As per tournament regulations"]})]})]})]})}),p.jsx("section",{className:"rules-page-section animate-slide-up",style:{animationDelay:"0.05s"},children:p.jsxs("div",{className:"rules-page-card",children:[p.jsxs("div",{className:"rules-page-header",children:[p.jsx("span",{className:"rules-page-icon",children:""}),p.jsx("h3",{children:"Points System"})]}),p.jsxs("div",{className:"points-grid",children:[p.jsxs("div",{className:"points-item",children:[p.jsx("span",{className:"points-value",children:"3"}),p.jsx("span",{className:"points-label",children:"Win"})]}),p.jsxs("div",{className:"points-item",children:[p.jsx("span",{className:"points-value",children:"1"}),p.jsx("span",{className:"points-label",children:"Draw"})]}),p.jsxs("div",{className:"points-item",children:[p.jsx("span",{className:"points-value",children:"0"}),p.jsx("span",{className:"points-label",children:"Loss"})]})]}),p.jsx("div",{className:"rules-page-content",children:p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-number",children:"TB"}),p.jsxs("div",{className:"rule-text",children:[p.jsx("strong",{children:"Tie-breaker order:"})," Points  Goal Difference  Goals Scored"]})]})})]})}),p.jsx("section",{className:"rules-page-section animate-slide-up",style:{animationDelay:"0.1s"},children:p.jsxs("div",{className:"rules-page-card highlight-card",children:[p.jsxs("div",{className:"rules-page-header",children:[p.jsx("span",{className:"rules-page-icon",children:""}),p.jsx("h3",{children:"Man of the Match Prediction"})]}),p.jsxs("div",{className:"rules-page-content",children:[p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-number",children:"1"}),p.jsxs("div",{className:"rule-text",children:["Predict who will score the ",p.jsx("strong",{children:"most goals"})," in each match"]})]}),p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-number",children:"2"}),p.jsxs("div",{className:"rule-text",children:["Prize pool: ",p.jsx("strong",{children:"1000 coins"})," per match"]})]}),p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-number",children:"3"}),p.jsx("div",{className:"rule-text",children:"Multiple winners share the prize equally"})]}),p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-number",children:"4"}),p.jsxs("div",{className:"rule-text",children:["Tie-breaker: Player from ",p.jsx("strong",{children:"winning team"})," wins"]})]}),p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-number",children:"5"}),p.jsxs("div",{className:"rule-text",children:["If match is a draw, ",p.jsx("strong",{children:"referee decides"})," Man of the Match"]})]})]})]})}),p.jsx("section",{className:"rules-page-section animate-slide-up",style:{animationDelay:"0.15s"},children:p.jsxs("div",{className:"rules-page-card terms-card",children:[p.jsxs("div",{className:"rules-page-header",children:[p.jsx("span",{className:"rules-page-icon",children:""}),p.jsx("h3",{children:"Terms & Conditions"})]}),p.jsxs("div",{className:"rules-page-content",children:[p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-bullet"}),p.jsxs("div",{className:"rule-text",children:["Only your ",p.jsx("strong",{children:"first entry"})," per match will be considered"]})]}),p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-bullet"}),p.jsxs("div",{className:"rule-text",children:["Predictions lock at ",p.jsx("strong",{children:"2:00 PM"})," on matchday"]})]}),p.jsxs("div",{className:"rule-item",children:[p.jsx("span",{className:"rule-bullet"}),p.jsx("div",{className:"rule-text",children:"Winners are announced after Man of the Match is confirmed"})]})]})]})})]}),DT=()=>{const{activeTab:s,loading:e}=Sr();return e?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("span",{className:"loading-text",children:"LOADING SCAPIA OFFSIDE..."})]}):p.jsxs("div",{className:"app",children:[p.jsx(AT,{}),p.jsxs("main",{className:"main-content",children:[s==="matches"&&p.jsx(PT,{}),s==="table"&&p.jsx(RT,{}),s==="polls"&&p.jsx(kT,{}),s==="rules"&&p.jsx(VT,{})]}),p.jsx(NT,{})]})},jT=()=>p.jsx(ST,{children:p.jsx(DT,{})});p_.createRoot(document.getElementById("root")).render(p.jsx(ve.StrictMode,{children:p.jsx(jT,{})}));
