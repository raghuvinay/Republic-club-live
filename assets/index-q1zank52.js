(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var oh={exports:{}},ea={},ah={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um;function u_(){if(Um)return Ce;Um=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=x&&L[x]||L["@@iterator"],typeof L=="function"?L:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function H(L,Q,pe){this.props=L,this.context=Q,this.refs=q,this.updater=pe||k}H.prototype.isReactComponent={},H.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},H.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ce(){}ce.prototype=H.prototype;function se(L,Q,pe){this.props=L,this.context=Q,this.refs=q,this.updater=pe||k}var Y=se.prototype=new ce;Y.constructor=se,U(Y,H.prototype),Y.isPureReactComponent=!0;var ee=Array.isArray,he=Object.prototype.hasOwnProperty,M={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(L,Q,pe){var Ne,xe={},ke=null,be=null;if(Q!=null)for(Ne in Q.ref!==void 0&&(be=Q.ref),Q.key!==void 0&&(ke=""+Q.key),Q)he.call(Q,Ne)&&!C.hasOwnProperty(Ne)&&(xe[Ne]=Q[Ne]);var Fe=arguments.length-2;if(Fe===1)xe.children=pe;else if(1<Fe){for(var $e=Array(Fe),wt=0;wt<Fe;wt++)$e[wt]=arguments[wt+2];xe.children=$e}if(L&&L.defaultProps)for(Ne in Fe=L.defaultProps,Fe)xe[Ne]===void 0&&(xe[Ne]=Fe[Ne]);return{$$typeof:s,type:L,key:ke,ref:be,props:xe,_owner:M.current}}function j(L,Q){return{$$typeof:s,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function E(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function P(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(pe){return Q[pe]})}var V=/\/+/g;function A(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?P(""+L.key):Q.toString(36)}function we(L,Q,pe,Ne,xe){var ke=typeof L;(ke==="undefined"||ke==="boolean")&&(L=null);var be=!1;if(L===null)be=!0;else switch(ke){case"string":case"number":be=!0;break;case"object":switch(L.$$typeof){case s:case e:be=!0}}if(be)return be=L,xe=xe(be),L=Ne===""?"."+A(be,0):Ne,ee(xe)?(pe="",L!=null&&(pe=L.replace(V,"$&/")+"/"),we(xe,Q,pe,"",function(wt){return wt})):xe!=null&&(E(xe)&&(xe=j(xe,pe+(!xe.key||be&&be.key===xe.key?"":(""+xe.key).replace(V,"$&/")+"/")+L)),Q.push(xe)),1;if(be=0,Ne=Ne===""?".":Ne+":",ee(L))for(var Fe=0;Fe<L.length;Fe++){ke=L[Fe];var $e=Ne+A(ke,Fe);be+=we(ke,Q,pe,$e,xe)}else if($e=I(L),typeof $e=="function")for(L=$e.call(L),Fe=0;!(ke=L.next()).done;)ke=ke.value,$e=Ne+A(ke,Fe++),be+=we(ke,Q,pe,$e,xe);else if(ke==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return be}function Xe(L,Q,pe){if(L==null)return L;var Ne=[],xe=0;return we(L,Ne,"","",function(ke){return Q.call(pe,ke,xe++)}),Ne}function ft(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(pe){(L._status===0||L._status===-1)&&(L._status=1,L._result=pe)},function(pe){(L._status===0||L._status===-1)&&(L._status=2,L._result=pe)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var Le={current:null},ne={transition:null},me={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:ne,ReactCurrentOwner:M};function re(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Xe,forEach:function(L,Q,pe){Xe(L,function(){Q.apply(this,arguments)},pe)},count:function(L){var Q=0;return Xe(L,function(){Q++}),Q},toArray:function(L){return Xe(L,function(Q){return Q})||[]},only:function(L){if(!E(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ce.Component=H,Ce.Fragment=n,Ce.Profiler=a,Ce.PureComponent=se,Ce.StrictMode=i,Ce.Suspense=v,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ce.act=re,Ce.cloneElement=function(L,Q,pe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ne=U({},L.props),xe=L.key,ke=L.ref,be=L._owner;if(Q!=null){if(Q.ref!==void 0&&(ke=Q.ref,be=M.current),Q.key!==void 0&&(xe=""+Q.key),L.type&&L.type.defaultProps)var Fe=L.type.defaultProps;for($e in Q)he.call(Q,$e)&&!C.hasOwnProperty($e)&&(Ne[$e]=Q[$e]===void 0&&Fe!==void 0?Fe[$e]:Q[$e])}var $e=arguments.length-2;if($e===1)Ne.children=pe;else if(1<$e){Fe=Array($e);for(var wt=0;wt<$e;wt++)Fe[wt]=arguments[wt+2];Ne.children=Fe}return{$$typeof:s,type:L.type,key:xe,ref:ke,props:Ne,_owner:be}},Ce.createContext=function(L){return L={$$typeof:f,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:c,_context:L},L.Consumer=L},Ce.createElement=S,Ce.createFactory=function(L){var Q=S.bind(null,L);return Q.type=L,Q},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(L){return{$$typeof:g,render:L}},Ce.isValidElement=E,Ce.lazy=function(L){return{$$typeof:N,_payload:{_status:-1,_result:L},_init:ft}},Ce.memo=function(L,Q){return{$$typeof:w,type:L,compare:Q===void 0?null:Q}},Ce.startTransition=function(L){var Q=ne.transition;ne.transition={};try{L()}finally{ne.transition=Q}},Ce.unstable_act=re,Ce.useCallback=function(L,Q){return Le.current.useCallback(L,Q)},Ce.useContext=function(L){return Le.current.useContext(L)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(L){return Le.current.useDeferredValue(L)},Ce.useEffect=function(L,Q){return Le.current.useEffect(L,Q)},Ce.useId=function(){return Le.current.useId()},Ce.useImperativeHandle=function(L,Q,pe){return Le.current.useImperativeHandle(L,Q,pe)},Ce.useInsertionEffect=function(L,Q){return Le.current.useInsertionEffect(L,Q)},Ce.useLayoutEffect=function(L,Q){return Le.current.useLayoutEffect(L,Q)},Ce.useMemo=function(L,Q){return Le.current.useMemo(L,Q)},Ce.useReducer=function(L,Q,pe){return Le.current.useReducer(L,Q,pe)},Ce.useRef=function(L){return Le.current.useRef(L)},Ce.useState=function(L){return Le.current.useState(L)},Ce.useSyncExternalStore=function(L,Q,pe){return Le.current.useSyncExternalStore(L,Q,pe)},Ce.useTransition=function(){return Le.current.useTransition()},Ce.version="18.3.1",Ce}var zm;function $h(){return zm||(zm=1,ah.exports=u_()),ah.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function c_(){if(Bm)return ea;Bm=1;var s=$h(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(g,v,w){var N,x={},I=null,k=null;w!==void 0&&(I=""+w),v.key!==void 0&&(I=""+v.key),v.ref!==void 0&&(k=v.ref);for(N in v)i.call(v,N)&&!c.hasOwnProperty(N)&&(x[N]=v[N]);if(g&&g.defaultProps)for(N in v=g.defaultProps,v)x[N]===void 0&&(x[N]=v[N]);return{$$typeof:e,type:g,key:I,ref:k,props:x,_owner:a.current}}return ea.Fragment=n,ea.jsx=f,ea.jsxs=f,ea}var $m;function h_(){return $m||($m=1,oh.exports=c_()),oh.exports}var d=h_(),ge=$h(),$l={},lh={exports:{}},Xt={},uh={exports:{}},ch={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function d_(){return Hm||(Hm=1,(function(s){function e(ne,me){var re=ne.length;ne.push(me);e:for(;0<re;){var L=re-1>>>1,Q=ne[L];if(0<a(Q,me))ne[L]=me,ne[re]=Q,re=L;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var me=ne[0],re=ne.pop();if(re!==me){ne[0]=re;e:for(var L=0,Q=ne.length,pe=Q>>>1;L<pe;){var Ne=2*(L+1)-1,xe=ne[Ne],ke=Ne+1,be=ne[ke];if(0>a(xe,re))ke<Q&&0>a(be,xe)?(ne[L]=be,ne[ke]=re,L=ke):(ne[L]=xe,ne[Ne]=re,L=Ne);else if(ke<Q&&0>a(be,re))ne[L]=be,ne[ke]=re,L=ke;else break e}}return me}function a(ne,me){var re=ne.sortIndex-me.sortIndex;return re!==0?re:ne.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var v=[],w=[],N=1,x=null,I=3,k=!1,U=!1,q=!1,H=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(ne){for(var me=n(w);me!==null;){if(me.callback===null)i(w);else if(me.startTime<=ne)i(w),me.sortIndex=me.expirationTime,e(v,me);else break;me=n(w)}}function ee(ne){if(q=!1,Y(ne),!U)if(n(v)!==null)U=!0,ft(he);else{var me=n(w);me!==null&&Le(ee,me.startTime-ne)}}function he(ne,me){U=!1,q&&(q=!1,ce(S),S=-1),k=!0;var re=I;try{for(Y(me),x=n(v);x!==null&&(!(x.expirationTime>me)||ne&&!P());){var L=x.callback;if(typeof L=="function"){x.callback=null,I=x.priorityLevel;var Q=L(x.expirationTime<=me);me=s.unstable_now(),typeof Q=="function"?x.callback=Q:x===n(v)&&i(v),Y(me)}else i(v);x=n(v)}if(x!==null)var pe=!0;else{var Ne=n(w);Ne!==null&&Le(ee,Ne.startTime-me),pe=!1}return pe}finally{x=null,I=re,k=!1}}var M=!1,C=null,S=-1,j=5,E=-1;function P(){return!(s.unstable_now()-E<j)}function V(){if(C!==null){var ne=s.unstable_now();E=ne;var me=!0;try{me=C(!0,ne)}finally{me?A():(M=!1,C=null)}}else M=!1}var A;if(typeof se=="function")A=function(){se(V)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Xe=we.port2;we.port1.onmessage=V,A=function(){Xe.postMessage(null)}}else A=function(){H(V,0)};function ft(ne){C=ne,M||(M=!0,A())}function Le(ne,me){S=H(function(){ne(s.unstable_now())},me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ne){ne.callback=null},s.unstable_continueExecution=function(){U||k||(U=!0,ft(he))},s.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<ne?Math.floor(1e3/ne):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_getFirstCallbackNode=function(){return n(v)},s.unstable_next=function(ne){switch(I){case 1:case 2:case 3:var me=3;break;default:me=I}var re=I;I=me;try{return ne()}finally{I=re}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ne,me){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var re=I;I=ne;try{return me()}finally{I=re}},s.unstable_scheduleCallback=function(ne,me,re){var L=s.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?L+re:L):re=L,ne){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=re+Q,ne={id:N++,callback:me,priorityLevel:ne,startTime:re,expirationTime:Q,sortIndex:-1},re>L?(ne.sortIndex=re,e(w,ne),n(v)===null&&ne===n(w)&&(q?(ce(S),S=-1):q=!0,Le(ee,re-L))):(ne.sortIndex=Q,e(v,ne),U||k||(U=!0,ft(he))),ne},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(ne){var me=I;return function(){var re=I;I=me;try{return ne.apply(this,arguments)}finally{I=re}}}})(ch)),ch}var qm;function f_(){return qm||(qm=1,uh.exports=d_()),uh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function m_(){if(Wm)return Xt;Wm=1;var s=$h(),e=f_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)i.add(r[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N={},x={};function I(t){return v.call(x,t)?!0:v.call(N,t)?!1:w.test(t)?x[t]=!0:(N[t]=!0,!1)}function k(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U(t,r,o,u){if(r===null||typeof r>"u"||k(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function q(t,r,o,u,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){H[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];H[r]=new q(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){H[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){H[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){H[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){H[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){H[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){H[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){H[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var ce=/[\-:]([a-z])/g;function se(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(ce,se);H[r]=new q(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(ce,se);H[r]=new q(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(ce,se);H[r]=new q(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){H[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),H.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){H[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function Y(t,r,o,u){var h=H.hasOwnProperty(r)?H[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(U(r,o,h,u)&&(o=null),u||h===null?I(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var ee=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,he=Symbol.for("react.element"),M=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),P=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),ne=Symbol.iterator;function me(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,L;function Q(t){if(L===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+t}var pe=!1;function Ne(t,r){if(!t||pe)return"";pe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(B){var u=B}Reflect.construct(t,[],r)}else{try{r.call()}catch(B){u=B}t.call(r.prototype)}else{try{throw Error()}catch(B){u=B}t()}}catch(B){if(B&&u&&typeof B.stack=="string"){for(var h=B.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,R=p.length-1;1<=_&&0<=R&&h[_]!==p[R];)R--;for(;1<=_&&0<=R;_--,R--)if(h[_]!==p[R]){if(_!==1||R!==1)do if(_--,R--,0>R||h[_]!==p[R]){var D=`
`+h[_].replace(" at new "," at ");return t.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",t.displayName)),D}while(1<=_&&0<=R);break}}}finally{pe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?Q(t):""}function xe(t){switch(t.tag){case 5:return Q(t.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return t=Ne(t.type,!1),t;case 11:return t=Ne(t.type.render,!1),t;case 1:return t=Ne(t.type,!0),t;default:return""}}function ke(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case M:return"Portal";case j:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case we:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case V:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xe:return r=t.displayName||null,r!==null?r:ke(t.type)||"Memo";case ft:r=t._payload,t=t._init;try{return ke(t(r))}catch{}}return null}function be(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $e(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wt(t){var r=$e(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function nr(t){t._valueTracker||(t._valueTracker=wt(t))}function Ks(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=$e(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Sr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ds(t,r){var o=r.checked;return re({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Ys(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Fe(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function io(t,r){r=r.checked,r!=null&&Y(t,"checked",r,!1)}function oo(t,r){io(t,r);var o=Fe(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Xs(t,r.type,o):r.hasOwnProperty("defaultValue")&&Xs(t,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ca(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Xs(t,r,o){(r!=="number"||Sr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var rr=Array.isArray;function sr(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Fe(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function ao(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return re({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Js(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(rr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Fe(o)}}function Zs(t,r){var o=Fe(r.value),u=Fe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function lo(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function mt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?mt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ir,uo=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ir.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Nr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ms=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){ms.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),fs[r]=fs[t]})});function co(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||fs.hasOwnProperty(t)&&fs[t]?(""+r).trim():r+"px"}function ho(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=co(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var fo=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mo(t,r){if(r){if(fo[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function po(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function ei(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ti=null,un=null,bn=null;function ni(t){if(t=Fo(t)){if(typeof ti!="function")throw Error(n(280));var r=t.stateNode;r&&(r=sl(r),ti(t.stateNode,t.type,r))}}function Fn(t){un?bn?bn.push(t):bn=[t]:un=t}function go(){if(un){var t=un,r=bn;if(bn=un=null,ni(t),r)for(t=0;t<r.length;t++)ni(r[t])}}function gs(t,r){return t(r)}function yo(){}var or=!1;function vo(t,r,o){if(or)return t(r,o);or=!0;try{return gs(t,r,o)}finally{or=!1,(un!==null||bn!==null)&&(yo(),go())}}function st(t,r){var o=t.stateNode;if(o===null)return null;var u=sl(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var ri=!1;if(g)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){ri=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{ri=!1}function ys(t,r,o,u,h,p,_,R,D){var B=Array.prototype.slice.call(arguments,3);try{r.apply(o,B)}catch(X){this.onError(X)}}var vs=!1,si=null,In=!1,_o=null,Du={onError:function(t){vs=!0,si=t}};function ii(t,r,o,u,h,p,_,R,D){vs=!1,si=null,ys.apply(Du,arguments)}function Pa(t,r,o,u,h,p,_,R,D){if(ii.apply(this,arguments),vs){if(vs){var B=si;vs=!1,si=null}else throw Error(n(198));In||(In=!0,_o=B)}}function Sn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function _s(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Nn(t){if(Sn(t)!==t)throw Error(n(188))}function Ra(t){var r=t.alternate;if(!r){if(r=Sn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Nn(h),t;if(p===u)return Nn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,R=h.child;R;){if(R===o){_=!0,o=h,u=p;break}if(R===u){_=!0,u=h,o=p;break}R=R.sibling}if(!_){for(R=p.child;R;){if(R===o){_=!0,o=p,u=h;break}if(R===u){_=!0,u=p,o=h;break}R=R.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function wo(t){return t=Ra(t),t!==null?oi(t):null}function oi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=oi(t);if(r!==null)return r;t=t.sibling}return null}var ai=e.unstable_scheduleCallback,Eo=e.unstable_cancelCallback,ka=e.unstable_shouldYield,Mu=e.unstable_requestPaint,He=e.unstable_now,ja=e.unstable_getCurrentPriorityLevel,ws=e.unstable_ImmediatePriority,Ar=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,To=e.unstable_LowPriority,Va=e.unstable_IdlePriority,Es=null,en=null;function Da(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Es,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Oa,Io=Math.log,Ma=Math.LN2;function Oa(t){return t>>>=0,t===0?32:31-(Io(t)/Ma|0)|0}var li=64,ui=4194304;function xr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ts(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var R=_&~h;R!==0?u=xr(R):(p&=_,p!==0&&(u=xr(p)))}else _=o&~h,_!==0?u=xr(_):p!==0&&(u=xr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Ut(r),h=1<<o,u|=t[o],r&=~h;return u}function Ou(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Ut(p),R=1<<_,D=h[_];D===-1?((R&o)===0||(R&u)!==0)&&(h[_]=Ou(R,r)):D<=r&&(t.expiredLanes|=R),p&=~R}}function tn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Is(){var t=li;return li<<=1,(li&4194240)===0&&(li=64),t}function Cr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Pr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ut(r),t[r]=o}function Be(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Ut(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Rr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Ut(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Re=0;function kr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var La,ci,ba,Fa,Ua,So=!1,Un=[],At=null,An=null,xn=null,jr=new Map,hn=new Map,zn=[],Lu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function za(t,r){switch(t){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":jr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(r.pointerId)}}function Ht(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Fo(r),r!==null&&ci(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function bu(t,r,o,u,h){switch(r){case"focusin":return At=Ht(At,t,r,o,u,h),!0;case"dragenter":return An=Ht(An,t,r,o,u,h),!0;case"mouseover":return xn=Ht(xn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return jr.set(p,Ht(jr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,hn.set(p,Ht(hn.get(p)||null,t,r,o,u,h)),!0}return!1}function Ba(t){var r=Cs(t.target);if(r!==null){var o=Sn(r);if(o!==null){if(r=o.tag,r===13){if(r=_s(o),r!==null){t.blockedOn=r,Ua(t.priority,function(){ba(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=hi(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);ps=u,o.target.dispatchEvent(u),ps=null}else return r=Fo(o),r!==null&&ci(r),t.blockedOn=o,!1;r.shift()}return!0}function Ss(t,r,o){lr(t)&&o.delete(r)}function $a(){So=!1,At!==null&&lr(At)&&(At=null),An!==null&&lr(An)&&(An=null),xn!==null&&lr(xn)&&(xn=null),jr.forEach(Ss),hn.forEach(Ss)}function Cn(t,r){t.blockedOn===r&&(t.blockedOn=null,So||(So=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$a)))}function Pn(t){function r(h){return Cn(h,t)}if(0<Un.length){Cn(Un[0],t);for(var o=1;o<Un.length;o++){var u=Un[o];u.blockedOn===t&&(u.blockedOn=null)}}for(At!==null&&Cn(At,t),An!==null&&Cn(An,t),xn!==null&&Cn(xn,t),jr.forEach(r),hn.forEach(r),o=0;o<zn.length;o++)u=zn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<zn.length&&(o=zn[0],o.blockedOn===null);)Ba(o),o.blockedOn===null&&zn.shift()}var ur=ee.ReactCurrentBatchConfig,Vr=!0;function Je(t,r,o,u){var h=Re,p=ur.transition;ur.transition=null;try{Re=1,No(t,r,o,u)}finally{Re=h,ur.transition=p}}function Fu(t,r,o,u){var h=Re,p=ur.transition;ur.transition=null;try{Re=4,No(t,r,o,u)}finally{Re=h,ur.transition=p}}function No(t,r,o,u){if(Vr){var h=hi(t,r,o,u);if(h===null)Yu(t,r,u,Ns,o),za(t,u);else if(bu(h,t,r,o,u))u.stopPropagation();else if(za(t,u),r&4&&-1<Lu.indexOf(t)){for(;h!==null;){var p=Fo(h);if(p!==null&&La(p),p=hi(t,r,o,u),p===null&&Yu(t,r,u,Ns,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Yu(t,r,u,null,o)}}var Ns=null;function hi(t,r,o,u){if(Ns=null,t=ei(u),t=Cs(t),t!==null)if(r=Sn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=_s(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Ns=t,null}function Ao(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ja()){case ws:return 1;case Ar:return 4;case cn:case To:return 16;case Va:return 536870912;default:return 16}default:return 16}}var nn=null,di=null,qt=null;function xo(){if(qt)return qt;var t,r=di,o=r.length,u,h="value"in nn?nn.value:nn.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[p-u];u++);return qt=h.slice(t,1<u?1-u:void 0)}function fi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Bn(){return!0}function Co(){return!1}function xt(t){function r(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(o=t[R],this[R]=o?o(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Bn:Co,this.isPropagationStopped=Co,this}return re(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){},isPersistent:Bn}),r}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=xt(Rn),$n=re({},Rn,{view:0,detail:0}),Uu=xt($n),pi,cr,Dr,As=re({},$n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(pi=t.screenX-Dr.screenX,cr=t.screenY-Dr.screenY):cr=pi=0,Dr=t),pi)},movementY:function(t){return"movementY"in t?t.movementY:cr}}),gi=xt(As),Po=re({},As,{dataTransfer:0}),Ha=xt(Po),yi=re({},$n,{relatedTarget:0}),vi=xt(yi),qa=re({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),hr=xt(qa),Wa=re({},Rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ga=xt(Wa),Qa=re({},Rn,{data:0}),Ro=xt(Qa),_i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ka={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ya(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ka[t])?!!r[t]:!1}function Hn(){return Ya}var l=re({},$n,{key:function(t){if(t.key){var r=_i[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=fi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(t){return t.type==="keypress"?fi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),m=xt(l),y=re({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=xt(y),b=re({},$n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn}),$=xt(b),te=re({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=xt(te),gt=re({},As,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),je=xt(gt),Et=[9,13,27,32],lt=g&&"CompositionEvent"in window,dn=null;g&&"documentMode"in document&&(dn=document.documentMode);var rn=g&&"TextEvent"in window&&!dn,xs=g&&(!lt||dn&&8<dn&&11>=dn),wi=" ",Vd=!1;function Dd(t,r){switch(t){case"keyup":return Et.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Md(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function ov(t,r){switch(t){case"compositionend":return Md(r);case"keypress":return r.which!==32?null:(Vd=!0,wi);case"textInput":return t=r.data,t===wi&&Vd?null:t;default:return null}}function av(t,r){if(Ei)return t==="compositionend"||!lt&&Dd(t,r)?(t=xo(),qt=di=nn=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return xs&&r.locale!=="ko"?null:r.data;default:return null}}var lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Od(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!lv[t.type]:r==="textarea"}function Ld(t,r,o,u){Fn(u),r=tl(r,"onChange"),0<r.length&&(o=new mi("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var ko=null,jo=null;function uv(t){tf(t,0)}function Xa(t){var r=Ai(t);if(Ks(r))return t}function cv(t,r){if(t==="change")return r}var bd=!1;if(g){var zu;if(g){var Bu="oninput"in document;if(!Bu){var Fd=document.createElement("div");Fd.setAttribute("oninput","return;"),Bu=typeof Fd.oninput=="function"}zu=Bu}else zu=!1;bd=zu&&(!document.documentMode||9<document.documentMode)}function Ud(){ko&&(ko.detachEvent("onpropertychange",zd),jo=ko=null)}function zd(t){if(t.propertyName==="value"&&Xa(jo)){var r=[];Ld(r,jo,t,ei(t)),vo(uv,r)}}function hv(t,r,o){t==="focusin"?(Ud(),ko=r,jo=o,ko.attachEvent("onpropertychange",zd)):t==="focusout"&&Ud()}function dv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xa(jo)}function fv(t,r){if(t==="click")return Xa(r)}function mv(t,r){if(t==="input"||t==="change")return Xa(r)}function pv(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var kn=typeof Object.is=="function"?Object.is:pv;function Vo(t,r){if(kn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!v.call(r,h)||!kn(t[h],r[h]))return!1}return!0}function Bd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $d(t,r){var o=Bd(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Bd(o)}}function Hd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Hd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function qd(){for(var t=window,r=Sr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Sr(t.document)}return r}function $u(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function gv(t){var r=qd(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&Hd(o.ownerDocument.documentElement,o)){if(u!==null&&$u(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=$d(o,p);var _=$d(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yv=g&&"documentMode"in document&&11>=document.documentMode,Ti=null,Hu=null,Do=null,qu=!1;function Wd(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qu||Ti==null||Ti!==Sr(u)||(u=Ti,"selectionStart"in u&&$u(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Do&&Vo(Do,u)||(Do=u,u=tl(Hu,"onSelect"),0<u.length&&(r=new mi("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=Ti)))}function Ja(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Ii={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionend:Ja("Transition","TransitionEnd")},Wu={},Gd={};g&&(Gd=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function Za(t){if(Wu[t])return Wu[t];if(!Ii[t])return t;var r=Ii[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Gd)return Wu[t]=r[o];return t}var Qd=Za("animationend"),Kd=Za("animationiteration"),Yd=Za("animationstart"),Xd=Za("transitionend"),Jd=new Map,Zd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,r){Jd.set(t,r),c(r,[t])}for(var Gu=0;Gu<Zd.length;Gu++){var Qu=Zd[Gu],vv=Qu.toLowerCase(),_v=Qu[0].toUpperCase()+Qu.slice(1);Mr(vv,"on"+_v)}Mr(Qd,"onAnimationEnd"),Mr(Kd,"onAnimationIteration"),Mr(Yd,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Xd,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mo));function ef(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,Pa(u,r,void 0,t),t.currentTarget=null}function tf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var R=u[_],D=R.instance,B=R.currentTarget;if(R=R.listener,D!==p&&h.isPropagationStopped())break e;ef(h,R,B),p=D}else for(_=0;_<u.length;_++){if(R=u[_],D=R.instance,B=R.currentTarget,R=R.listener,D!==p&&h.isPropagationStopped())break e;ef(h,R,B),p=D}}}if(In)throw t=_o,In=!1,_o=null,t}function Ge(t,r){var o=r[nc];o===void 0&&(o=r[nc]=new Set);var u=t+"__bubble";o.has(u)||(nf(r,t,2,!1),o.add(u))}function Ku(t,r,o){var u=0;r&&(u|=4),nf(o,t,u,r)}var el="_reactListening"+Math.random().toString(36).slice(2);function Oo(t){if(!t[el]){t[el]=!0,i.forEach(function(o){o!=="selectionchange"&&(wv.has(o)||Ku(o,!1,t),Ku(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[el]||(r[el]=!0,Ku("selectionchange",!1,r))}}function nf(t,r,o,u){switch(Ao(r)){case 1:var h=Je;break;case 4:h=Fu;break;default:h=No}o=h.bind(null,r,o,t),h=void 0,!ri||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Yu(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var R=u.stateNode.containerInfo;if(R===h||R.nodeType===8&&R.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var D=_.tag;if((D===3||D===4)&&(D=_.stateNode.containerInfo,D===h||D.nodeType===8&&D.parentNode===h))return;_=_.return}for(;R!==null;){if(_=Cs(R),_===null)return;if(D=_.tag,D===5||D===6){u=p=_;continue e}R=R.parentNode}}u=u.return}vo(function(){var B=p,X=ei(o),J=[];e:{var K=Jd.get(t);if(K!==void 0){var oe=mi,ue=t;switch(t){case"keypress":if(fi(o)===0)break e;case"keydown":case"keyup":oe=m;break;case"focusin":ue="focus",oe=vi;break;case"focusout":ue="blur",oe=vi;break;case"beforeblur":case"afterblur":oe=vi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Ha;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=$;break;case Qd:case Kd:case Yd:oe=hr;break;case Xd:oe=ze;break;case"scroll":oe=Uu;break;case"wheel":oe=je;break;case"copy":case"cut":case"paste":oe=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=T}var de=(r&4)!==0,it=!de&&t==="scroll",F=de?K!==null?K+"Capture":null:K;de=[];for(var O=B,z;O!==null;){z=O;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,F!==null&&(Z=st(O,F),Z!=null&&de.push(Lo(O,Z,z)))),it)break;O=O.return}0<de.length&&(K=new oe(K,ue,null,o,X),J.push({event:K,listeners:de}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",K&&o!==ps&&(ue=o.relatedTarget||o.fromElement)&&(Cs(ue)||ue[dr]))break e;if((oe||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,oe?(ue=o.relatedTarget||o.toElement,oe=B,ue=ue?Cs(ue):null,ue!==null&&(it=Sn(ue),ue!==it||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(oe=null,ue=B),oe!==ue)){if(de=gi,Z="onMouseLeave",F="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(de=T,Z="onPointerLeave",F="onPointerEnter",O="pointer"),it=oe==null?K:Ai(oe),z=ue==null?K:Ai(ue),K=new de(Z,O+"leave",oe,o,X),K.target=it,K.relatedTarget=z,Z=null,Cs(X)===B&&(de=new de(F,O+"enter",ue,o,X),de.target=z,de.relatedTarget=it,Z=de),it=Z,oe&&ue)t:{for(de=oe,F=ue,O=0,z=de;z;z=Si(z))O++;for(z=0,Z=F;Z;Z=Si(Z))z++;for(;0<O-z;)de=Si(de),O--;for(;0<z-O;)F=Si(F),z--;for(;O--;){if(de===F||F!==null&&de===F.alternate)break t;de=Si(de),F=Si(F)}de=null}else de=null;oe!==null&&rf(J,K,oe,de,!1),ue!==null&&it!==null&&rf(J,it,ue,de,!0)}}e:{if(K=B?Ai(B):window,oe=K.nodeName&&K.nodeName.toLowerCase(),oe==="select"||oe==="input"&&K.type==="file")var fe=cv;else if(Od(K))if(bd)fe=mv;else{fe=dv;var ve=hv}else(oe=K.nodeName)&&oe.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(fe=fv);if(fe&&(fe=fe(t,B))){Ld(J,fe,o,X);break e}ve&&ve(t,K,B),t==="focusout"&&(ve=K._wrapperState)&&ve.controlled&&K.type==="number"&&Xs(K,"number",K.value)}switch(ve=B?Ai(B):window,t){case"focusin":(Od(ve)||ve.contentEditable==="true")&&(Ti=ve,Hu=B,Do=null);break;case"focusout":Do=Hu=Ti=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,Wd(J,o,X);break;case"selectionchange":if(yv)break;case"keydown":case"keyup":Wd(J,o,X)}var _e;if(lt)e:{switch(t){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Ei?Dd(t,o)&&(Te="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(xs&&o.locale!=="ko"&&(Ei||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Ei&&(_e=xo()):(nn=X,di="value"in nn?nn.value:nn.textContent,Ei=!0)),ve=tl(B,Te),0<ve.length&&(Te=new Ro(Te,t,null,o,X),J.push({event:Te,listeners:ve}),_e?Te.data=_e:(_e=Md(o),_e!==null&&(Te.data=_e)))),(_e=rn?ov(t,o):av(t,o))&&(B=tl(B,"onBeforeInput"),0<B.length&&(X=new Ro("onBeforeInput","beforeinput",null,o,X),J.push({event:X,listeners:B}),X.data=_e))}tf(J,r)})}function Lo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function tl(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=st(t,o),p!=null&&u.unshift(Lo(t,p,h)),p=st(t,r),p!=null&&u.push(Lo(t,p,h))),t=t.return}return u}function Si(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rf(t,r,o,u,h){for(var p=r._reactName,_=[];o!==null&&o!==u;){var R=o,D=R.alternate,B=R.stateNode;if(D!==null&&D===u)break;R.tag===5&&B!==null&&(R=B,h?(D=st(o,p),D!=null&&_.unshift(Lo(o,D,R))):h||(D=st(o,p),D!=null&&_.push(Lo(o,D,R)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var Ev=/\r\n?/g,Tv=/\u0000|\uFFFD/g;function sf(t){return(typeof t=="string"?t:""+t).replace(Ev,`
`).replace(Tv,"")}function nl(t,r,o){if(r=sf(r),sf(t)!==r&&o)throw Error(n(425))}function rl(){}var Xu=null,Ju=null;function Zu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,Iv=typeof clearTimeout=="function"?clearTimeout:void 0,of=typeof Promise=="function"?Promise:void 0,Sv=typeof queueMicrotask=="function"?queueMicrotask:typeof of<"u"?function(t){return of.resolve(null).then(t).catch(Nv)}:ec;function Nv(t){setTimeout(function(){throw t})}function tc(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Pn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Pn(r)}function Or(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function af(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),qn="__reactFiber$"+Ni,bo="__reactProps$"+Ni,dr="__reactContainer$"+Ni,nc="__reactEvents$"+Ni,Av="__reactListeners$"+Ni,xv="__reactHandles$"+Ni;function Cs(t){var r=t[qn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[dr]||o[qn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=af(t);t!==null;){if(o=t[qn])return o;t=af(t)}return r}t=o,o=t.parentNode}return null}function Fo(t){return t=t[qn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function sl(t){return t[bo]||null}var rc=[],xi=-1;function Lr(t){return{current:t}}function Qe(t){0>xi||(t.current=rc[xi],rc[xi]=null,xi--)}function qe(t,r){xi++,rc[xi]=t.current,t.current=r}var br={},Vt=Lr(br),Wt=Lr(!1),Ps=br;function Ci(t,r){var o=t.type.contextTypes;if(!o)return br;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Gt(t){return t=t.childContextTypes,t!=null}function il(){Qe(Wt),Qe(Vt)}function lf(t,r,o){if(Vt.current!==br)throw Error(n(168));qe(Vt,r),qe(Wt,o)}function uf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,be(t)||"Unknown",h));return re({},o,u)}function ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,Ps=Vt.current,qe(Vt,t),qe(Wt,Wt.current),!0}function cf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=uf(t,r,Ps),u.__reactInternalMemoizedMergedChildContext=t,Qe(Wt),Qe(Vt),qe(Vt,t)):Qe(Wt),qe(Wt,o)}var fr=null,al=!1,sc=!1;function hf(t){fr===null?fr=[t]:fr.push(t)}function Cv(t){al=!0,hf(t)}function Fr(){if(!sc&&fr!==null){sc=!0;var t=0,r=Re;try{var o=fr;for(Re=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}fr=null,al=!1}catch(h){throw fr!==null&&(fr=fr.slice(t+1)),ai(ws,Fr),h}finally{Re=r,sc=!1}}return null}var Pi=[],Ri=0,ll=null,ul=0,fn=[],mn=0,Rs=null,mr=1,pr="";function ks(t,r){Pi[Ri++]=ul,Pi[Ri++]=ll,ll=t,ul=r}function df(t,r,o){fn[mn++]=mr,fn[mn++]=pr,fn[mn++]=Rs,Rs=t;var u=mr;t=pr;var h=32-Ut(u)-1;u&=~(1<<h),o+=1;var p=32-Ut(r)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,mr=1<<32-Ut(r)+h|o<<h|u,pr=p+t}else mr=1<<p|o<<h|u,pr=t}function ic(t){t.return!==null&&(ks(t,1),df(t,1,0))}function oc(t){for(;t===ll;)ll=Pi[--Ri],Pi[Ri]=null,ul=Pi[--Ri],Pi[Ri]=null;for(;t===Rs;)Rs=fn[--mn],fn[mn]=null,pr=fn[--mn],fn[mn]=null,mr=fn[--mn],fn[mn]=null}var sn=null,on=null,Ze=!1,jn=null;function ff(t,r){var o=vn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function mf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,sn=t,on=Or(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,sn=t,on=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Rs!==null?{id:mr,overflow:pr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=vn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,sn=t,on=null,!0):!1;default:return!1}}function ac(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lc(t){if(Ze){var r=on;if(r){var o=r;if(!mf(t,r)){if(ac(t))throw Error(n(418));r=Or(o.nextSibling);var u=sn;r&&mf(t,r)?ff(u,o):(t.flags=t.flags&-4097|2,Ze=!1,sn=t)}}else{if(ac(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ze=!1,sn=t}}}function pf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function cl(t){if(t!==sn)return!1;if(!Ze)return pf(t),Ze=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Zu(t.type,t.memoizedProps)),r&&(r=on)){if(ac(t))throw gf(),Error(n(418));for(;r;)ff(t,r),r=Or(r.nextSibling)}if(pf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){on=Or(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}on=null}}else on=sn?Or(t.stateNode.nextSibling):null;return!0}function gf(){for(var t=on;t;)t=Or(t.nextSibling)}function ki(){on=sn=null,Ze=!1}function uc(t){jn===null?jn=[t]:jn.push(t)}var Pv=ee.ReactCurrentBatchConfig;function Uo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var R=h.refs;_===null?delete R[p]:R[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function hl(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function yf(t){var r=t._init;return r(t._payload)}function vf(t){function r(F,O){if(t){var z=F.deletions;z===null?(F.deletions=[O],F.flags|=16):z.push(O)}}function o(F,O){if(!t)return null;for(;O!==null;)r(F,O),O=O.sibling;return null}function u(F,O){for(F=new Map;O!==null;)O.key!==null?F.set(O.key,O):F.set(O.index,O),O=O.sibling;return F}function h(F,O){return F=Gr(F,O),F.index=0,F.sibling=null,F}function p(F,O,z){return F.index=z,t?(z=F.alternate,z!==null?(z=z.index,z<O?(F.flags|=2,O):z):(F.flags|=2,O)):(F.flags|=1048576,O)}function _(F){return t&&F.alternate===null&&(F.flags|=2),F}function R(F,O,z,Z){return O===null||O.tag!==6?(O=eh(z,F.mode,Z),O.return=F,O):(O=h(O,z),O.return=F,O)}function D(F,O,z,Z){var fe=z.type;return fe===C?X(F,O,z.props.children,Z,z.key):O!==null&&(O.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ft&&yf(fe)===O.type)?(Z=h(O,z.props),Z.ref=Uo(F,O,z),Z.return=F,Z):(Z=Ml(z.type,z.key,z.props,null,F.mode,Z),Z.ref=Uo(F,O,z),Z.return=F,Z)}function B(F,O,z,Z){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=th(z,F.mode,Z),O.return=F,O):(O=h(O,z.children||[]),O.return=F,O)}function X(F,O,z,Z,fe){return O===null||O.tag!==7?(O=Fs(z,F.mode,Z,fe),O.return=F,O):(O=h(O,z),O.return=F,O)}function J(F,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=eh(""+O,F.mode,z),O.return=F,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case he:return z=Ml(O.type,O.key,O.props,null,F.mode,z),z.ref=Uo(F,null,O),z.return=F,z;case M:return O=th(O,F.mode,z),O.return=F,O;case ft:var Z=O._init;return J(F,Z(O._payload),z)}if(rr(O)||me(O))return O=Fs(O,F.mode,z,null),O.return=F,O;hl(F,O)}return null}function K(F,O,z,Z){var fe=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return fe!==null?null:R(F,O,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case he:return z.key===fe?D(F,O,z,Z):null;case M:return z.key===fe?B(F,O,z,Z):null;case ft:return fe=z._init,K(F,O,fe(z._payload),Z)}if(rr(z)||me(z))return fe!==null?null:X(F,O,z,Z,null);hl(F,z)}return null}function oe(F,O,z,Z,fe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return F=F.get(z)||null,R(O,F,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case he:return F=F.get(Z.key===null?z:Z.key)||null,D(O,F,Z,fe);case M:return F=F.get(Z.key===null?z:Z.key)||null,B(O,F,Z,fe);case ft:var ve=Z._init;return oe(F,O,z,ve(Z._payload),fe)}if(rr(Z)||me(Z))return F=F.get(z)||null,X(O,F,Z,fe,null);hl(O,Z)}return null}function ue(F,O,z,Z){for(var fe=null,ve=null,_e=O,Te=O=0,St=null;_e!==null&&Te<z.length;Te++){_e.index>Te?(St=_e,_e=null):St=_e.sibling;var Oe=K(F,_e,z[Te],Z);if(Oe===null){_e===null&&(_e=St);break}t&&_e&&Oe.alternate===null&&r(F,_e),O=p(Oe,O,Te),ve===null?fe=Oe:ve.sibling=Oe,ve=Oe,_e=St}if(Te===z.length)return o(F,_e),Ze&&ks(F,Te),fe;if(_e===null){for(;Te<z.length;Te++)_e=J(F,z[Te],Z),_e!==null&&(O=p(_e,O,Te),ve===null?fe=_e:ve.sibling=_e,ve=_e);return Ze&&ks(F,Te),fe}for(_e=u(F,_e);Te<z.length;Te++)St=oe(_e,F,Te,z[Te],Z),St!==null&&(t&&St.alternate!==null&&_e.delete(St.key===null?Te:St.key),O=p(St,O,Te),ve===null?fe=St:ve.sibling=St,ve=St);return t&&_e.forEach(function(Qr){return r(F,Qr)}),Ze&&ks(F,Te),fe}function de(F,O,z,Z){var fe=me(z);if(typeof fe!="function")throw Error(n(150));if(z=fe.call(z),z==null)throw Error(n(151));for(var ve=fe=null,_e=O,Te=O=0,St=null,Oe=z.next();_e!==null&&!Oe.done;Te++,Oe=z.next()){_e.index>Te?(St=_e,_e=null):St=_e.sibling;var Qr=K(F,_e,Oe.value,Z);if(Qr===null){_e===null&&(_e=St);break}t&&_e&&Qr.alternate===null&&r(F,_e),O=p(Qr,O,Te),ve===null?fe=Qr:ve.sibling=Qr,ve=Qr,_e=St}if(Oe.done)return o(F,_e),Ze&&ks(F,Te),fe;if(_e===null){for(;!Oe.done;Te++,Oe=z.next())Oe=J(F,Oe.value,Z),Oe!==null&&(O=p(Oe,O,Te),ve===null?fe=Oe:ve.sibling=Oe,ve=Oe);return Ze&&ks(F,Te),fe}for(_e=u(F,_e);!Oe.done;Te++,Oe=z.next())Oe=oe(_e,F,Te,Oe.value,Z),Oe!==null&&(t&&Oe.alternate!==null&&_e.delete(Oe.key===null?Te:Oe.key),O=p(Oe,O,Te),ve===null?fe=Oe:ve.sibling=Oe,ve=Oe);return t&&_e.forEach(function(l_){return r(F,l_)}),Ze&&ks(F,Te),fe}function it(F,O,z,Z){if(typeof z=="object"&&z!==null&&z.type===C&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case he:e:{for(var fe=z.key,ve=O;ve!==null;){if(ve.key===fe){if(fe=z.type,fe===C){if(ve.tag===7){o(F,ve.sibling),O=h(ve,z.props.children),O.return=F,F=O;break e}}else if(ve.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ft&&yf(fe)===ve.type){o(F,ve.sibling),O=h(ve,z.props),O.ref=Uo(F,ve,z),O.return=F,F=O;break e}o(F,ve);break}else r(F,ve);ve=ve.sibling}z.type===C?(O=Fs(z.props.children,F.mode,Z,z.key),O.return=F,F=O):(Z=Ml(z.type,z.key,z.props,null,F.mode,Z),Z.ref=Uo(F,O,z),Z.return=F,F=Z)}return _(F);case M:e:{for(ve=z.key;O!==null;){if(O.key===ve)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){o(F,O.sibling),O=h(O,z.children||[]),O.return=F,F=O;break e}else{o(F,O);break}else r(F,O);O=O.sibling}O=th(z,F.mode,Z),O.return=F,F=O}return _(F);case ft:return ve=z._init,it(F,O,ve(z._payload),Z)}if(rr(z))return ue(F,O,z,Z);if(me(z))return de(F,O,z,Z);hl(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(o(F,O.sibling),O=h(O,z),O.return=F,F=O):(o(F,O),O=eh(z,F.mode,Z),O.return=F,F=O),_(F)):o(F,O)}return it}var ji=vf(!0),_f=vf(!1),dl=Lr(null),fl=null,Vi=null,cc=null;function hc(){cc=Vi=fl=null}function dc(t){var r=dl.current;Qe(dl),t._currentValue=r}function fc(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Di(t,r){fl=t,cc=Vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Qt=!0),t.firstContext=null)}function pn(t){var r=t._currentValue;if(cc!==t)if(t={context:t,memoizedValue:r,next:null},Vi===null){if(fl===null)throw Error(n(308));Vi=t,fl.dependencies={lanes:0,firstContext:t}}else Vi=Vi.next=t;return r}var js=null;function mc(t){js===null?js=[t]:js.push(t)}function wf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,mc(r)):(o.next=h.next,h.next=o),r.interleaved=o,gr(t,u)}function gr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ur=!1;function pc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ef(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function zr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Me&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,gr(t,o)}return h=u.interleaved,h===null?(r.next=r,mc(u)):(r.next=h.next,h.next=r),u.interleaved=r,gr(t,o)}function ml(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Rr(t,o)}}function Tf(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function pl(t,r,o,u){var h=t.updateQueue;Ur=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,R=h.shared.pending;if(R!==null){h.shared.pending=null;var D=R,B=D.next;D.next=null,_===null?p=B:_.next=B,_=D;var X=t.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==_&&(R===null?X.firstBaseUpdate=B:R.next=B,X.lastBaseUpdate=D))}if(p!==null){var J=h.baseState;_=0,X=B=D=null,R=p;do{var K=R.lane,oe=R.eventTime;if((u&K)===K){X!==null&&(X=X.next={eventTime:oe,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ue=t,de=R;switch(K=r,oe=o,de.tag){case 1:if(ue=de.payload,typeof ue=="function"){J=ue.call(oe,J,K);break e}J=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=de.payload,K=typeof ue=="function"?ue.call(oe,J,K):ue,K==null)break e;J=re({},J,K);break e;case 2:Ur=!0}}R.callback!==null&&R.lane!==0&&(t.flags|=64,K=h.effects,K===null?h.effects=[R]:K.push(R))}else oe={eventTime:oe,lane:K,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(B=X=oe,D=J):X=X.next=oe,_|=K;if(R=R.next,R===null){if(R=h.shared.pending,R===null)break;K=R,R=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);if(X===null&&(D=J),h.baseState=D,h.firstBaseUpdate=B,h.lastBaseUpdate=X,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Ms|=_,t.lanes=_,t.memoizedState=J}}function If(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var zo={},Wn=Lr(zo),Bo=Lr(zo),$o=Lr(zo);function Vs(t){if(t===zo)throw Error(n(174));return t}function gc(t,r){switch(qe($o,r),qe(Bo,t),qe(Wn,zo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:pt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=pt(r,t)}Qe(Wn),qe(Wn,r)}function Mi(){Qe(Wn),Qe(Bo),Qe($o)}function Sf(t){Vs($o.current);var r=Vs(Wn.current),o=pt(r,t.type);r!==o&&(qe(Bo,t),qe(Wn,o))}function yc(t){Bo.current===t&&(Qe(Wn),Qe(Bo))}var et=Lr(0);function gl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vc=[];function _c(){for(var t=0;t<vc.length;t++)vc[t]._workInProgressVersionPrimary=null;vc.length=0}var yl=ee.ReactCurrentDispatcher,wc=ee.ReactCurrentBatchConfig,Ds=0,tt=null,yt=null,Tt=null,vl=!1,Ho=!1,qo=0,Rv=0;function Dt(){throw Error(n(321))}function Ec(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!kn(t[o],r[o]))return!1;return!0}function Tc(t,r,o,u,h,p){if(Ds=p,tt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,yl.current=t===null||t.memoizedState===null?Dv:Mv,t=o(u,h),Ho){p=0;do{if(Ho=!1,qo=0,25<=p)throw Error(n(301));p+=1,Tt=yt=null,r.updateQueue=null,yl.current=Ov,t=o(u,h)}while(Ho)}if(yl.current=El,r=yt!==null&&yt.next!==null,Ds=0,Tt=yt=tt=null,vl=!1,r)throw Error(n(300));return t}function Ic(){var t=qo!==0;return qo=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?tt.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function gn(){if(yt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var r=Tt===null?tt.memoizedState:Tt.next;if(r!==null)Tt=r,yt=t;else{if(t===null)throw Error(n(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Tt===null?tt.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Wo(t,r){return typeof r=="function"?r(t):r}function Sc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=yt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var R=_=null,D=null,B=p;do{var X=B.lane;if((Ds&X)===X)D!==null&&(D=D.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),u=B.hasEagerState?B.eagerState:t(u,B.action);else{var J={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};D===null?(R=D=J,_=u):D=D.next=J,tt.lanes|=X,Ms|=X}B=B.next}while(B!==null&&B!==p);D===null?_=u:D.next=R,kn(u,r.memoizedState)||(Qt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=D,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,tt.lanes|=p,Ms|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Nc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);kn(p,r.memoizedState)||(Qt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Nf(){}function Af(t,r){var o=tt,u=gn(),h=r(),p=!kn(u.memoizedState,h);if(p&&(u.memoizedState=h,Qt=!0),u=u.queue,Ac(Pf.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||Tt!==null&&Tt.memoizedState.tag&1){if(o.flags|=2048,Go(9,Cf.bind(null,o,u,h,r),void 0,null),It===null)throw Error(n(349));(Ds&30)!==0||xf(o,r,h)}return h}function xf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=tt.updateQueue,r===null?(r={lastEffect:null,stores:null},tt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Cf(t,r,o,u){r.value=o,r.getSnapshot=u,Rf(r)&&kf(t)}function Pf(t,r,o){return o(function(){Rf(r)&&kf(t)})}function Rf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!kn(t,o)}catch{return!0}}function kf(t){var r=gr(t,1);r!==null&&On(r,t,1,-1)}function jf(t){var r=Gn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:t},r.queue=t,t=t.dispatch=Vv.bind(null,tt,t),[r.memoizedState,t]}function Go(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=tt.updateQueue,r===null?(r={lastEffect:null,stores:null},tt.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Vf(){return gn().memoizedState}function _l(t,r,o,u){var h=Gn();tt.flags|=t,h.memoizedState=Go(1|r,o,void 0,u===void 0?null:u)}function wl(t,r,o,u){var h=gn();u=u===void 0?null:u;var p=void 0;if(yt!==null){var _=yt.memoizedState;if(p=_.destroy,u!==null&&Ec(u,_.deps)){h.memoizedState=Go(r,o,p,u);return}}tt.flags|=t,h.memoizedState=Go(1|r,o,p,u)}function Df(t,r){return _l(8390656,8,t,r)}function Ac(t,r){return wl(2048,8,t,r)}function Mf(t,r){return wl(4,2,t,r)}function Of(t,r){return wl(4,4,t,r)}function Lf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function bf(t,r,o){return o=o!=null?o.concat([t]):null,wl(4,4,Lf.bind(null,r,t),o)}function xc(){}function Ff(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Ec(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Uf(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Ec(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function zf(t,r,o){return(Ds&21)===0?(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=o):(kn(o,r)||(o=Is(),tt.lanes|=o,Ms|=o,t.baseState=!0),r)}function kv(t,r){var o=Re;Re=o!==0&&4>o?o:4,t(!0);var u=wc.transition;wc.transition={};try{t(!1),r()}finally{Re=o,wc.transition=u}}function Bf(){return gn().memoizedState}function jv(t,r,o){var u=qr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},$f(t))Hf(r,o);else if(o=wf(t,r,o,u),o!==null){var h=$t();On(o,t,u,h),qf(o,r,u)}}function Vv(t,r,o){var u=qr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if($f(t))Hf(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,R=p(_,o);if(h.hasEagerState=!0,h.eagerState=R,kn(R,_)){var D=r.interleaved;D===null?(h.next=h,mc(r)):(h.next=D.next,D.next=h),r.interleaved=h;return}}catch{}finally{}o=wf(t,r,h,u),o!==null&&(h=$t(),On(o,t,u,h),qf(o,r,u))}}function $f(t){var r=t.alternate;return t===tt||r!==null&&r===tt}function Hf(t,r){Ho=vl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function qf(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Rr(t,o)}}var El={readContext:pn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},Dv={readContext:pn,useCallback:function(t,r){return Gn().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:Df,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,_l(4194308,4,Lf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return _l(4194308,4,t,r)},useInsertionEffect:function(t,r){return _l(4,2,t,r)},useMemo:function(t,r){var o=Gn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Gn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=jv.bind(null,tt,t),[u.memoizedState,t]},useRef:function(t){var r=Gn();return t={current:t},r.memoizedState=t},useState:jf,useDebugValue:xc,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=jf(!1),r=t[0];return t=kv.bind(null,t[1]),Gn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=tt,h=Gn();if(Ze){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),It===null)throw Error(n(349));(Ds&30)!==0||xf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,Df(Pf.bind(null,u,p,t),[t]),u.flags|=2048,Go(9,Cf.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Gn(),r=It.identifierPrefix;if(Ze){var o=pr,u=mr;o=(u&~(1<<32-Ut(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=qo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Rv++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Mv={readContext:pn,useCallback:Ff,useContext:pn,useEffect:Ac,useImperativeHandle:bf,useInsertionEffect:Mf,useLayoutEffect:Of,useMemo:Uf,useReducer:Sc,useRef:Vf,useState:function(){return Sc(Wo)},useDebugValue:xc,useDeferredValue:function(t){var r=gn();return zf(r,yt.memoizedState,t)},useTransition:function(){var t=Sc(Wo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:Nf,useSyncExternalStore:Af,useId:Bf,unstable_isNewReconciler:!1},Ov={readContext:pn,useCallback:Ff,useContext:pn,useEffect:Ac,useImperativeHandle:bf,useInsertionEffect:Mf,useLayoutEffect:Of,useMemo:Uf,useReducer:Nc,useRef:Vf,useState:function(){return Nc(Wo)},useDebugValue:xc,useDeferredValue:function(t){var r=gn();return yt===null?r.memoizedState=t:zf(r,yt.memoizedState,t)},useTransition:function(){var t=Nc(Wo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:Nf,useSyncExternalStore:Af,useId:Bf,unstable_isNewReconciler:!1};function Vn(t,r){if(t&&t.defaultProps){r=re({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Cc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:re({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Tl={isMounted:function(t){return(t=t._reactInternals)?Sn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=$t(),h=qr(t),p=yr(u,h);p.payload=r,o!=null&&(p.callback=o),r=zr(t,p,h),r!==null&&(On(r,t,h,u),ml(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=$t(),h=qr(t),p=yr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=zr(t,p,h),r!==null&&(On(r,t,h,u),ml(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=$t(),u=qr(t),h=yr(o,u);h.tag=2,r!=null&&(h.callback=r),r=zr(t,h,u),r!==null&&(On(r,t,u,o),ml(r,t,u))}};function Wf(t,r,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!Vo(o,u)||!Vo(h,p):!0}function Gf(t,r,o){var u=!1,h=br,p=r.contextType;return typeof p=="object"&&p!==null?p=pn(p):(h=Gt(r)?Ps:Vt.current,u=r.contextTypes,p=(u=u!=null)?Ci(t,h):br),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Tl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function Qf(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&Tl.enqueueReplaceState(r,r.state,null)}function Pc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},pc(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=pn(p):(p=Gt(r)?Ps:Vt.current,h.context=Ci(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Cc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Tl.enqueueReplaceState(h,h.state,null),pl(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Oi(t,r){try{var o="",u=r;do o+=xe(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function Rc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function kc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Lv=typeof WeakMap=="function"?WeakMap:Map;function Kf(t,r,o){o=yr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){Pl||(Pl=!0,Wc=u),kc(t,r)},o}function Yf(t,r,o){o=yr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){kc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){kc(t,r),typeof u!="function"&&($r===null?$r=new Set([this]):$r.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Xf(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Lv;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=Xv.bind(null,t,r,o),r.then(t,t))}function Jf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Zf(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=yr(-1,1),r.tag=2,zr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var bv=ee.ReactCurrentOwner,Qt=!1;function Bt(t,r,o,u){r.child=t===null?_f(r,null,o,u):ji(r,t.child,o,u)}function em(t,r,o,u,h){o=o.render;var p=r.ref;return Di(r,h),u=Tc(t,r,o,u,p,h),o=Ic(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Ze&&o&&ic(r),r.flags|=1,Bt(t,r,u,h),r.child)}function tm(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Zc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,nm(t,r,p,u,h)):(t=Ml(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:Vo,o(_,u)&&t.ref===r.ref)return vr(t,r,h)}return r.flags|=1,t=Gr(p,u),t.ref=r.ref,t.return=r,r.child=t}function nm(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(Vo(p,u)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Qt=!0);else return r.lanes=t.lanes,vr(t,r,h)}return jc(t,r,o,u,h)}function rm(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(bi,an),an|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,qe(bi,an),an|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,qe(bi,an),an|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,qe(bi,an),an|=u;return Bt(t,r,h,o),r.child}function sm(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function jc(t,r,o,u,h){var p=Gt(o)?Ps:Vt.current;return p=Ci(r,p),Di(r,h),o=Tc(t,r,o,u,p,h),u=Ic(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Ze&&u&&ic(r),r.flags|=1,Bt(t,r,o,h),r.child)}function im(t,r,o,u,h){if(Gt(o)){var p=!0;ol(r)}else p=!1;if(Di(r,h),r.stateNode===null)Sl(t,r),Gf(r,o,u),Pc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,R=r.memoizedProps;_.props=R;var D=_.context,B=o.contextType;typeof B=="object"&&B!==null?B=pn(B):(B=Gt(o)?Ps:Vt.current,B=Ci(r,B));var X=o.getDerivedStateFromProps,J=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function";J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==u||D!==B)&&Qf(r,_,u,B),Ur=!1;var K=r.memoizedState;_.state=K,pl(r,u,_,h),D=r.memoizedState,R!==u||K!==D||Wt.current||Ur?(typeof X=="function"&&(Cc(r,o,X,u),D=r.memoizedState),(R=Ur||Wf(r,o,R,u,K,D,B))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=D),_.props=u,_.state=D,_.context=B,u=R):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Ef(t,r),R=r.memoizedProps,B=r.type===r.elementType?R:Vn(r.type,R),_.props=B,J=r.pendingProps,K=_.context,D=o.contextType,typeof D=="object"&&D!==null?D=pn(D):(D=Gt(o)?Ps:Vt.current,D=Ci(r,D));var oe=o.getDerivedStateFromProps;(X=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==J||K!==D)&&Qf(r,_,u,D),Ur=!1,K=r.memoizedState,_.state=K,pl(r,u,_,h);var ue=r.memoizedState;R!==J||K!==ue||Wt.current||Ur?(typeof oe=="function"&&(Cc(r,o,oe,u),ue=r.memoizedState),(B=Ur||Wf(r,o,B,u,K,ue,D)||!1)?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ue,D),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ue,D)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||R===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ue),_.props=u,_.state=ue,_.context=D,u=B):(typeof _.componentDidUpdate!="function"||R===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),u=!1)}return Vc(t,r,o,u,p,h)}function Vc(t,r,o,u,h,p){sm(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&cf(r,o,!1),vr(t,r,p);u=r.stateNode,bv.current=r;var R=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=ji(r,t.child,null,p),r.child=ji(r,null,R,p)):Bt(t,r,R,p),r.memoizedState=u.state,h&&cf(r,o,!0),r.child}function om(t){var r=t.stateNode;r.pendingContext?lf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&lf(t,r.context,!1),gc(t,r.containerInfo)}function am(t,r,o,u,h){return ki(),uc(h),r.flags|=256,Bt(t,r,o,u),r.child}var Dc={dehydrated:null,treeContext:null,retryLane:0};function Mc(t){return{baseLanes:t,cachePool:null,transitions:null}}function lm(t,r,o){var u=r.pendingProps,h=et.current,p=!1,_=(r.flags&128)!==0,R;if((R=_)||(R=t!==null&&t.memoizedState===null?!1:(h&2)!==0),R?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),qe(et,h&1),t===null)return lc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Ol(_,u,0,null),t=Fs(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=Mc(o),r.memoizedState=Dc,t):Oc(r,_));if(h=t.memoizedState,h!==null&&(R=h.dehydrated,R!==null))return Fv(t,r,_,u,R,h,o);if(p){p=u.fallback,_=r.mode,h=t.child,R=h.sibling;var D={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=D,r.deletions=null):(u=Gr(h,D),u.subtreeFlags=h.subtreeFlags&14680064),R!==null?p=Gr(R,p):(p=Fs(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?Mc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=Dc,u}return p=t.child,t=p.sibling,u=Gr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function Oc(t,r){return r=Ol({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Il(t,r,o,u){return u!==null&&uc(u),ji(r,t.child,null,o),t=Oc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Fv(t,r,o,u,h,p,_){if(o)return r.flags&256?(r.flags&=-257,u=Rc(Error(n(422))),Il(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=Ol({mode:"visible",children:u.children},h,0,null),p=Fs(p,h,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&ji(r,t.child,null,_),r.child.memoizedState=Mc(_),r.memoizedState=Dc,p);if((r.mode&1)===0)return Il(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var R=u.dgst;return u=R,p=Error(n(419)),u=Rc(p,u,void 0),Il(t,r,_,u)}if(R=(_&t.childLanes)!==0,Qt||R){if(u=It,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,gr(t,h),On(u,t,h,-1))}return Jc(),u=Rc(Error(n(421))),Il(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Jv.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,on=Or(h.nextSibling),sn=r,Ze=!0,jn=null,t!==null&&(fn[mn++]=mr,fn[mn++]=pr,fn[mn++]=Rs,mr=t.id,pr=t.overflow,Rs=r),r=Oc(r,u.children),r.flags|=4096,r)}function um(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),fc(t.return,r,o)}function Lc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function cm(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Bt(t,r,u.children,o),u=et.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&um(t,o,r);else if(t.tag===19)um(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(qe(et,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&gl(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Lc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&gl(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Lc(r,!0,o,null,p);break;case"together":Lc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Sl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function vr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ms|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Gr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Gr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Uv(t,r,o){switch(r.tag){case 3:om(r),ki();break;case 5:Sf(r);break;case 1:Gt(r.type)&&ol(r);break;case 4:gc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;qe(dl,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(qe(et,et.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?lm(t,r,o):(qe(et,et.current&1),t=vr(t,r,o),t!==null?t.sibling:null);qe(et,et.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return cm(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),qe(et,et.current),u)break;return null;case 22:case 23:return r.lanes=0,rm(t,r,o)}return vr(t,r,o)}var hm,bc,dm,fm;hm=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},bc=function(){},dm=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Vs(Wn.current);var p=null;switch(o){case"input":h=ds(t,h),u=ds(t,u),p=[];break;case"select":h=re({},h,{value:void 0}),u=re({},u,{value:void 0}),p=[];break;case"textarea":h=ao(t,h),u=ao(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=rl)}mo(o,u);var _;o=null;for(B in h)if(!u.hasOwnProperty(B)&&h.hasOwnProperty(B)&&h[B]!=null)if(B==="style"){var R=h[B];for(_ in R)R.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(a.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in u){var D=u[B];if(R=h!=null?h[B]:void 0,u.hasOwnProperty(B)&&D!==R&&(D!=null||R!=null))if(B==="style")if(R){for(_ in R)!R.hasOwnProperty(_)||D&&D.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in D)D.hasOwnProperty(_)&&R[_]!==D[_]&&(o||(o={}),o[_]=D[_])}else o||(p||(p=[]),p.push(B,o)),o=D;else B==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,R=R?R.__html:void 0,D!=null&&R!==D&&(p=p||[]).push(B,D)):B==="children"?typeof D!="string"&&typeof D!="number"||(p=p||[]).push(B,""+D):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(a.hasOwnProperty(B)?(D!=null&&B==="onScroll"&&Ge("scroll",t),p||R===D||(p=[])):(p=p||[]).push(B,D))}o&&(p=p||[]).push("style",o);var B=p;(r.updateQueue=B)&&(r.flags|=4)}},fm=function(t,r,o,u){o!==u&&(r.flags|=4)};function Qo(t,r){if(!Ze)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Mt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function zv(t,r,o){var u=r.pendingProps;switch(oc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Gt(r.type)&&il(),Mt(r),null;case 3:return u=r.stateNode,Mi(),Qe(Wt),Qe(Vt),_c(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(cl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,jn!==null&&(Kc(jn),jn=null))),bc(t,r),Mt(r),null;case 5:yc(r);var h=Vs($o.current);if(o=r.type,t!==null&&r.stateNode!=null)dm(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Mt(r),null}if(t=Vs(Wn.current),cl(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[qn]=r,u[bo]=p,t=(r.mode&1)!==0,o){case"dialog":Ge("cancel",u),Ge("close",u);break;case"iframe":case"object":case"embed":Ge("load",u);break;case"video":case"audio":for(h=0;h<Mo.length;h++)Ge(Mo[h],u);break;case"source":Ge("error",u);break;case"img":case"image":case"link":Ge("error",u),Ge("load",u);break;case"details":Ge("toggle",u);break;case"input":Ys(u,p),Ge("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ge("invalid",u);break;case"textarea":Js(u,p),Ge("invalid",u)}mo(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var R=p[_];_==="children"?typeof R=="string"?u.textContent!==R&&(p.suppressHydrationWarning!==!0&&nl(u.textContent,R,t),h=["children",R]):typeof R=="number"&&u.textContent!==""+R&&(p.suppressHydrationWarning!==!0&&nl(u.textContent,R,t),h=["children",""+R]):a.hasOwnProperty(_)&&R!=null&&_==="onScroll"&&Ge("scroll",u)}switch(o){case"input":nr(u),Ca(u,p,!0);break;case"textarea":nr(u),lo(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=rl)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[qn]=r,t[bo]=u,hm(t,r,!1,!1),r.stateNode=t;e:{switch(_=po(o,u),o){case"dialog":Ge("cancel",t),Ge("close",t),h=u;break;case"iframe":case"object":case"embed":Ge("load",t),h=u;break;case"video":case"audio":for(h=0;h<Mo.length;h++)Ge(Mo[h],t);h=u;break;case"source":Ge("error",t),h=u;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),h=u;break;case"details":Ge("toggle",t),h=u;break;case"input":Ys(t,u),h=ds(t,u),Ge("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=re({},u,{value:void 0}),Ge("invalid",t);break;case"textarea":Js(t,u),h=ao(t,u),Ge("invalid",t);break;default:h=u}mo(o,h),R=h;for(p in R)if(R.hasOwnProperty(p)){var D=R[p];p==="style"?ho(t,D):p==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&uo(t,D)):p==="children"?typeof D=="string"?(o!=="textarea"||D!=="")&&Nr(t,D):typeof D=="number"&&Nr(t,""+D):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?D!=null&&p==="onScroll"&&Ge("scroll",t):D!=null&&Y(t,p,D,_))}switch(o){case"input":nr(t),Ca(t,u,!1);break;case"textarea":nr(t),lo(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Fe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?sr(t,!!u.multiple,p,!1):u.defaultValue!=null&&sr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=rl)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(t&&r.stateNode!=null)fm(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Vs($o.current),Vs(Wn.current),cl(r)){if(u=r.stateNode,o=r.memoizedProps,u[qn]=r,(p=u.nodeValue!==o)&&(t=sn,t!==null))switch(t.tag){case 3:nl(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nl(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[qn]=r,r.stateNode=u}return Mt(r),null;case 13:if(Qe(et),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&on!==null&&(r.mode&1)!==0&&(r.flags&128)===0)gf(),ki(),r.flags|=98560,p=!1;else if(p=cl(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[qn]=r}else ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),p=!1}else jn!==null&&(Kc(jn),jn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(et.current&1)!==0?vt===0&&(vt=3):Jc())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return Mi(),bc(t,r),t===null&&Oo(r.stateNode.containerInfo),Mt(r),null;case 10:return dc(r.type._context),Mt(r),null;case 17:return Gt(r.type)&&il(),Mt(r),null;case 19:if(Qe(et),p=r.memoizedState,p===null)return Mt(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)Qo(p,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=gl(t),_!==null){for(r.flags|=128,Qo(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return qe(et,et.current&1|2),r.child}t=t.sibling}p.tail!==null&&He()>Fi&&(r.flags|=128,u=!0,Qo(p,!1),r.lanes=4194304)}else{if(!u)if(t=gl(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Qo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ze)return Mt(r),null}else 2*He()-p.renderingStartTime>Fi&&o!==1073741824&&(r.flags|=128,u=!0,Qo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=He(),r.sibling=null,o=et.current,qe(et,u?o&1|2:o&1),r):(Mt(r),null);case 22:case 23:return Xc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(an&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Bv(t,r){switch(oc(r),r.tag){case 1:return Gt(r.type)&&il(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Mi(),Qe(Wt),Qe(Vt),_c(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return yc(r),null;case 13:if(Qe(et),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ki()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Qe(et),null;case 4:return Mi(),null;case 10:return dc(r.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var Nl=!1,Ot=!1,$v=typeof WeakSet=="function"?WeakSet:Set,le=null;function Li(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){rt(t,r,u)}else o.current=null}function Fc(t,r,o){try{o()}catch(u){rt(t,r,u)}}var mm=!1;function Hv(t,r){if(Xu=Vr,t=qd(),$u(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,R=-1,D=-1,B=0,X=0,J=t,K=null;t:for(;;){for(var oe;J!==o||h!==0&&J.nodeType!==3||(R=_+h),J!==p||u!==0&&J.nodeType!==3||(D=_+u),J.nodeType===3&&(_+=J.nodeValue.length),(oe=J.firstChild)!==null;)K=J,J=oe;for(;;){if(J===t)break t;if(K===o&&++B===h&&(R=_),K===p&&++X===u&&(D=_),(oe=J.nextSibling)!==null)break;J=K,K=J.parentNode}J=oe}o=R===-1||D===-1?null:{start:R,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ju={focusedElem:t,selectionRange:o},Vr=!1,le=r;le!==null;)if(r=le,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,le=t;else for(;le!==null;){r=le;try{var ue=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var de=ue.memoizedProps,it=ue.memoizedState,F=r.stateNode,O=F.getSnapshotBeforeUpdate(r.elementType===r.type?de:Vn(r.type,de),it);F.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=r.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Z){rt(r,r.return,Z)}if(t=r.sibling,t!==null){t.return=r.return,le=t;break}le=r.return}return ue=mm,mm=!1,ue}function Ko(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Fc(r,o,p)}h=h.next}while(h!==u)}}function Al(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Uc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function pm(t){var r=t.alternate;r!==null&&(t.alternate=null,pm(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[qn],delete r[bo],delete r[nc],delete r[Av],delete r[xv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gm(t){return t.tag===5||t.tag===3||t.tag===4}function ym(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=rl));else if(u!==4&&(t=t.child,t!==null))for(zc(t,r,o),t=t.sibling;t!==null;)zc(t,r,o),t=t.sibling}function Bc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Bc(t,r,o),t=t.sibling;t!==null;)Bc(t,r,o),t=t.sibling}var Ct=null,Dn=!1;function Br(t,r,o){for(o=o.child;o!==null;)vm(t,r,o),o=o.sibling}function vm(t,r,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Es,o)}catch{}switch(o.tag){case 5:Ot||Li(o,r);case 6:var u=Ct,h=Dn;Ct=null,Br(t,r,o),Ct=u,Dn=h,Ct!==null&&(Dn?(t=Ct,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Ct.removeChild(o.stateNode));break;case 18:Ct!==null&&(Dn?(t=Ct,o=o.stateNode,t.nodeType===8?tc(t.parentNode,o):t.nodeType===1&&tc(t,o),Pn(t)):tc(Ct,o.stateNode));break;case 4:u=Ct,h=Dn,Ct=o.stateNode.containerInfo,Dn=!0,Br(t,r,o),Ct=u,Dn=h;break;case 0:case 11:case 14:case 15:if(!Ot&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&Fc(o,r,_),h=h.next}while(h!==u)}Br(t,r,o);break;case 1:if(!Ot&&(Li(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(R){rt(o,r,R)}Br(t,r,o);break;case 21:Br(t,r,o);break;case 22:o.mode&1?(Ot=(u=Ot)||o.memoizedState!==null,Br(t,r,o),Ot=u):Br(t,r,o);break;default:Br(t,r,o)}}function _m(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new $v),r.forEach(function(u){var h=Zv.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Mn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=r,R=_;e:for(;R!==null;){switch(R.tag){case 5:Ct=R.stateNode,Dn=!1;break e;case 3:Ct=R.stateNode.containerInfo,Dn=!0;break e;case 4:Ct=R.stateNode.containerInfo,Dn=!0;break e}R=R.return}if(Ct===null)throw Error(n(160));vm(p,_,h),Ct=null,Dn=!1;var D=h.alternate;D!==null&&(D.return=null),h.return=null}catch(B){rt(h,r,B)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)wm(r,t),r=r.sibling}function wm(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(r,t),Qn(t),u&4){try{Ko(3,t,t.return),Al(3,t)}catch(de){rt(t,t.return,de)}try{Ko(5,t,t.return)}catch(de){rt(t,t.return,de)}}break;case 1:Mn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return);break;case 5:if(Mn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return),t.flags&32){var h=t.stateNode;try{Nr(h,"")}catch(de){rt(t,t.return,de)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,R=t.type,D=t.updateQueue;if(t.updateQueue=null,D!==null)try{R==="input"&&p.type==="radio"&&p.name!=null&&io(h,p),po(R,_);var B=po(R,p);for(_=0;_<D.length;_+=2){var X=D[_],J=D[_+1];X==="style"?ho(h,J):X==="dangerouslySetInnerHTML"?uo(h,J):X==="children"?Nr(h,J):Y(h,X,J,B)}switch(R){case"input":oo(h,p);break;case"textarea":Zs(h,p);break;case"select":var K=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var oe=p.value;oe!=null?sr(h,!!p.multiple,oe,!1):K!==!!p.multiple&&(p.defaultValue!=null?sr(h,!!p.multiple,p.defaultValue,!0):sr(h,!!p.multiple,p.multiple?[]:"",!1))}h[bo]=p}catch(de){rt(t,t.return,de)}}break;case 6:if(Mn(r,t),Qn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(de){rt(t,t.return,de)}}break;case 3:if(Mn(r,t),Qn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Pn(r.containerInfo)}catch(de){rt(t,t.return,de)}break;case 4:Mn(r,t),Qn(t);break;case 13:Mn(r,t),Qn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(qc=He())),u&4&&_m(t);break;case 22:if(X=o!==null&&o.memoizedState!==null,t.mode&1?(Ot=(B=Ot)||X,Mn(r,t),Ot=B):Mn(r,t),Qn(t),u&8192){if(B=t.memoizedState!==null,(t.stateNode.isHidden=B)&&!X&&(t.mode&1)!==0)for(le=t,X=t.child;X!==null;){for(J=le=X;le!==null;){switch(K=le,oe=K.child,K.tag){case 0:case 11:case 14:case 15:Ko(4,K,K.return);break;case 1:Li(K,K.return);var ue=K.stateNode;if(typeof ue.componentWillUnmount=="function"){u=K,o=K.return;try{r=u,ue.props=r.memoizedProps,ue.state=r.memoizedState,ue.componentWillUnmount()}catch(de){rt(u,o,de)}}break;case 5:Li(K,K.return);break;case 22:if(K.memoizedState!==null){Im(J);continue}}oe!==null?(oe.return=K,le=oe):Im(J)}X=X.sibling}e:for(X=null,J=t;;){if(J.tag===5){if(X===null){X=J;try{h=J.stateNode,B?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(R=J.stateNode,D=J.memoizedProps.style,_=D!=null&&D.hasOwnProperty("display")?D.display:null,R.style.display=co("display",_))}catch(de){rt(t,t.return,de)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(de){rt(t,t.return,de)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===t)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===t)break e;for(;J.sibling===null;){if(J.return===null||J.return===t)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Mn(r,t),Qn(t),u&4&&_m(t);break;case 21:break;default:Mn(r,t),Qn(t)}}function Qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(gm(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Nr(h,""),u.flags&=-33);var p=ym(t);Bc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,R=ym(t);zc(t,R,_);break;default:throw Error(n(161))}}catch(D){rt(t,t.return,D)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function qv(t,r,o){le=t,Em(t)}function Em(t,r,o){for(var u=(t.mode&1)!==0;le!==null;){var h=le,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||Nl;if(!_){var R=h.alternate,D=R!==null&&R.memoizedState!==null||Ot;R=Nl;var B=Ot;if(Nl=_,(Ot=D)&&!B)for(le=h;le!==null;)_=le,D=_.child,_.tag===22&&_.memoizedState!==null?Sm(h):D!==null?(D.return=_,le=D):Sm(h);for(;p!==null;)le=p,Em(p),p=p.sibling;le=h,Nl=R,Ot=B}Tm(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,le=p):Tm(t)}}function Tm(t){for(;le!==null;){var r=le;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ot||Al(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ot)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Vn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&If(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}If(r,_,o)}break;case 5:var R=r.stateNode;if(o===null&&r.flags&4){o=R;var D=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&o.focus();break;case"img":D.src&&(o.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var B=r.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&Pn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ot||r.flags&512&&Uc(r)}catch(K){rt(r,r.return,K)}}if(r===t){le=null;break}if(o=r.sibling,o!==null){o.return=r.return,le=o;break}le=r.return}}function Im(t){for(;le!==null;){var r=le;if(r===t){le=null;break}var o=r.sibling;if(o!==null){o.return=r.return,le=o;break}le=r.return}}function Sm(t){for(;le!==null;){var r=le;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Al(4,r)}catch(D){rt(r,o,D)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(D){rt(r,h,D)}}var p=r.return;try{Uc(r)}catch(D){rt(r,p,D)}break;case 5:var _=r.return;try{Uc(r)}catch(D){rt(r,_,D)}}}catch(D){rt(r,r.return,D)}if(r===t){le=null;break}var R=r.sibling;if(R!==null){R.return=r.return,le=R;break}le=r.return}}var Wv=Math.ceil,xl=ee.ReactCurrentDispatcher,$c=ee.ReactCurrentOwner,yn=ee.ReactCurrentBatchConfig,Me=0,It=null,ut=null,Pt=0,an=0,bi=Lr(0),vt=0,Yo=null,Ms=0,Cl=0,Hc=0,Xo=null,Kt=null,qc=0,Fi=1/0,_r=null,Pl=!1,Wc=null,$r=null,Rl=!1,Hr=null,kl=0,Jo=0,Gc=null,jl=-1,Vl=0;function $t(){return(Me&6)!==0?He():jl!==-1?jl:jl=He()}function qr(t){return(t.mode&1)===0?1:(Me&2)!==0&&Pt!==0?Pt&-Pt:Pv.transition!==null?(Vl===0&&(Vl=Is()),Vl):(t=Re,t!==0||(t=window.event,t=t===void 0?16:Ao(t.type)),t)}function On(t,r,o,u){if(50<Jo)throw Jo=0,Gc=null,Error(n(185));Pr(t,o,u),((Me&2)===0||t!==It)&&(t===It&&((Me&2)===0&&(Cl|=o),vt===4&&Wr(t,Pt)),Yt(t,u),o===1&&Me===0&&(r.mode&1)===0&&(Fi=He()+500,al&&Fr()))}function Yt(t,r){var o=t.callbackNode;ar(t,r);var u=Ts(t,t===It?Pt:0);if(u===0)o!==null&&Eo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&Eo(o),r===1)t.tag===0?Cv(Am.bind(null,t)):hf(Am.bind(null,t)),Sv(function(){(Me&6)===0&&Fr()}),o=null;else{switch(kr(u)){case 1:o=ws;break;case 4:o=Ar;break;case 16:o=cn;break;case 536870912:o=Va;break;default:o=cn}o=Dm(o,Nm.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Nm(t,r){if(jl=-1,Vl=0,(Me&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Ui()&&t.callbackNode!==o)return null;var u=Ts(t,t===It?Pt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=Dl(t,u);else{r=u;var h=Me;Me|=2;var p=Cm();(It!==t||Pt!==r)&&(_r=null,Fi=He()+500,Ls(t,r));do try{Kv();break}catch(R){xm(t,R)}while(!0);hc(),xl.current=p,Me=h,ut!==null?r=0:(It=null,Pt=0,r=vt)}if(r!==0){if(r===2&&(h=tn(t),h!==0&&(u=h,r=Qc(t,h))),r===1)throw o=Yo,Ls(t,0),Wr(t,u),Yt(t,He()),o;if(r===6)Wr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Gv(h)&&(r=Dl(t,u),r===2&&(p=tn(t),p!==0&&(u=p,r=Qc(t,p))),r===1))throw o=Yo,Ls(t,0),Wr(t,u),Yt(t,He()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:bs(t,Kt,_r);break;case 3:if(Wr(t,u),(u&130023424)===u&&(r=qc+500-He(),10<r)){if(Ts(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){$t(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=ec(bs.bind(null,t,Kt,_r),r);break}bs(t,Kt,_r);break;case 4:if(Wr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-Ut(u);p=1<<_,_=r[_],_>h&&(h=_),u&=~p}if(u=h,u=He()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Wv(u/1960))-u,10<u){t.timeoutHandle=ec(bs.bind(null,t,Kt,_r),u);break}bs(t,Kt,_r);break;case 5:bs(t,Kt,_r);break;default:throw Error(n(329))}}}return Yt(t,He()),t.callbackNode===o?Nm.bind(null,t):null}function Qc(t,r){var o=Xo;return t.current.memoizedState.isDehydrated&&(Ls(t,r).flags|=256),t=Dl(t,r),t!==2&&(r=Kt,Kt=o,r!==null&&Kc(r)),t}function Kc(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function Gv(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!kn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Wr(t,r){for(r&=~Hc,r&=~Cl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ut(r),u=1<<o;t[o]=-1,r&=~u}}function Am(t){if((Me&6)!==0)throw Error(n(327));Ui();var r=Ts(t,0);if((r&1)===0)return Yt(t,He()),null;var o=Dl(t,r);if(t.tag!==0&&o===2){var u=tn(t);u!==0&&(r=u,o=Qc(t,u))}if(o===1)throw o=Yo,Ls(t,0),Wr(t,r),Yt(t,He()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,bs(t,Kt,_r),Yt(t,He()),null}function Yc(t,r){var o=Me;Me|=1;try{return t(r)}finally{Me=o,Me===0&&(Fi=He()+500,al&&Fr())}}function Os(t){Hr!==null&&Hr.tag===0&&(Me&6)===0&&Ui();var r=Me;Me|=1;var o=yn.transition,u=Re;try{if(yn.transition=null,Re=1,t)return t()}finally{Re=u,yn.transition=o,Me=r,(Me&6)===0&&Fr()}}function Xc(){an=bi.current,Qe(bi)}function Ls(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Iv(o)),ut!==null)for(o=ut.return;o!==null;){var u=o;switch(oc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&il();break;case 3:Mi(),Qe(Wt),Qe(Vt),_c();break;case 5:yc(u);break;case 4:Mi();break;case 13:Qe(et);break;case 19:Qe(et);break;case 10:dc(u.type._context);break;case 22:case 23:Xc()}o=o.return}if(It=t,ut=t=Gr(t.current,null),Pt=an=r,vt=0,Yo=null,Hc=Cl=Ms=0,Kt=Xo=null,js!==null){for(r=0;r<js.length;r++)if(o=js[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}js=null}return t}function xm(t,r){do{var o=ut;try{if(hc(),yl.current=El,vl){for(var u=tt.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}vl=!1}if(Ds=0,Tt=yt=tt=null,Ho=!1,qo=0,$c.current=null,o===null||o.return===null){vt=1,Yo=r,ut=null;break}e:{var p=t,_=o.return,R=o,D=r;if(r=Pt,R.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var B=D,X=R,J=X.tag;if((X.mode&1)===0&&(J===0||J===11||J===15)){var K=X.alternate;K?(X.updateQueue=K.updateQueue,X.memoizedState=K.memoizedState,X.lanes=K.lanes):(X.updateQueue=null,X.memoizedState=null)}var oe=Jf(_);if(oe!==null){oe.flags&=-257,Zf(oe,_,R,p,r),oe.mode&1&&Xf(p,B,r),r=oe,D=B;var ue=r.updateQueue;if(ue===null){var de=new Set;de.add(D),r.updateQueue=de}else ue.add(D);break e}else{if((r&1)===0){Xf(p,B,r),Jc();break e}D=Error(n(426))}}else if(Ze&&R.mode&1){var it=Jf(_);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),Zf(it,_,R,p,r),uc(Oi(D,R));break e}}p=D=Oi(D,R),vt!==4&&(vt=2),Xo===null?Xo=[p]:Xo.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var F=Kf(p,D,r);Tf(p,F);break e;case 1:R=D;var O=p.type,z=p.stateNode;if((p.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&($r===null||!$r.has(z)))){p.flags|=65536,r&=-r,p.lanes|=r;var Z=Yf(p,R,r);Tf(p,Z);break e}}p=p.return}while(p!==null)}Rm(o)}catch(fe){r=fe,ut===o&&o!==null&&(ut=o=o.return);continue}break}while(!0)}function Cm(){var t=xl.current;return xl.current=El,t===null?El:t}function Jc(){(vt===0||vt===3||vt===2)&&(vt=4),It===null||(Ms&268435455)===0&&(Cl&268435455)===0||Wr(It,Pt)}function Dl(t,r){var o=Me;Me|=2;var u=Cm();(It!==t||Pt!==r)&&(_r=null,Ls(t,r));do try{Qv();break}catch(h){xm(t,h)}while(!0);if(hc(),Me=o,xl.current=u,ut!==null)throw Error(n(261));return It=null,Pt=0,vt}function Qv(){for(;ut!==null;)Pm(ut)}function Kv(){for(;ut!==null&&!ka();)Pm(ut)}function Pm(t){var r=Vm(t.alternate,t,an);t.memoizedProps=t.pendingProps,r===null?Rm(t):ut=r,$c.current=null}function Rm(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=zv(o,r,an),o!==null){ut=o;return}}else{if(o=Bv(o,r),o!==null){o.flags&=32767,ut=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ut=null;return}}if(r=r.sibling,r!==null){ut=r;return}ut=r=t}while(r!==null);vt===0&&(vt=5)}function bs(t,r,o){var u=Re,h=yn.transition;try{yn.transition=null,Re=1,Yv(t,r,o,u)}finally{yn.transition=h,Re=u}return null}function Yv(t,r,o,u){do Ui();while(Hr!==null);if((Me&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Be(t,p),t===It&&(ut=It=null,Pt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Rl||(Rl=!0,Dm(cn,function(){return Ui(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=yn.transition,yn.transition=null;var _=Re;Re=1;var R=Me;Me|=4,$c.current=null,Hv(t,o),wm(o,t),gv(Ju),Vr=!!Xu,Ju=Xu=null,t.current=o,qv(o),Mu(),Me=R,Re=_,yn.transition=p}else t.current=o;if(Rl&&(Rl=!1,Hr=t,kl=h),p=t.pendingLanes,p===0&&($r=null),Da(o.stateNode),Yt(t,He()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(Pl)throw Pl=!1,t=Wc,Wc=null,t;return(kl&1)!==0&&t.tag!==0&&Ui(),p=t.pendingLanes,(p&1)!==0?t===Gc?Jo++:(Jo=0,Gc=t):Jo=0,Fr(),null}function Ui(){if(Hr!==null){var t=kr(kl),r=yn.transition,o=Re;try{if(yn.transition=null,Re=16>t?16:t,Hr===null)var u=!1;else{if(t=Hr,Hr=null,kl=0,(Me&6)!==0)throw Error(n(331));var h=Me;for(Me|=4,le=t.current;le!==null;){var p=le,_=p.child;if((le.flags&16)!==0){var R=p.deletions;if(R!==null){for(var D=0;D<R.length;D++){var B=R[D];for(le=B;le!==null;){var X=le;switch(X.tag){case 0:case 11:case 15:Ko(8,X,p)}var J=X.child;if(J!==null)J.return=X,le=J;else for(;le!==null;){X=le;var K=X.sibling,oe=X.return;if(pm(X),X===B){le=null;break}if(K!==null){K.return=oe,le=K;break}le=oe}}}var ue=p.alternate;if(ue!==null){var de=ue.child;if(de!==null){ue.child=null;do{var it=de.sibling;de.sibling=null,de=it}while(de!==null)}}le=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,le=_;else e:for(;le!==null;){if(p=le,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Ko(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,le=F;break e}le=p.return}}var O=t.current;for(le=O;le!==null;){_=le;var z=_.child;if((_.subtreeFlags&2064)!==0&&z!==null)z.return=_,le=z;else e:for(_=O;le!==null;){if(R=le,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Al(9,R)}}catch(fe){rt(R,R.return,fe)}if(R===_){le=null;break e}var Z=R.sibling;if(Z!==null){Z.return=R.return,le=Z;break e}le=R.return}}if(Me=h,Fr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Es,t)}catch{}u=!0}return u}finally{Re=o,yn.transition=r}}return!1}function km(t,r,o){r=Oi(o,r),r=Kf(t,r,1),t=zr(t,r,1),r=$t(),t!==null&&(Pr(t,1,r),Yt(t,r))}function rt(t,r,o){if(t.tag===3)km(t,t,o);else for(;r!==null;){if(r.tag===3){km(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($r===null||!$r.has(u))){t=Oi(o,t),t=Yf(r,t,1),r=zr(r,t,1),t=$t(),r!==null&&(Pr(r,1,t),Yt(r,t));break}}r=r.return}}function Xv(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=$t(),t.pingedLanes|=t.suspendedLanes&o,It===t&&(Pt&o)===o&&(vt===4||vt===3&&(Pt&130023424)===Pt&&500>He()-qc?Ls(t,0):Hc|=o),Yt(t,r)}function jm(t,r){r===0&&((t.mode&1)===0?r=1:(r=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var o=$t();t=gr(t,r),t!==null&&(Pr(t,r,o),Yt(t,o))}function Jv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),jm(t,o)}function Zv(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),jm(t,o)}var Vm;Vm=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Wt.current)Qt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Qt=!1,Uv(t,r,o);Qt=(t.flags&131072)!==0}else Qt=!1,Ze&&(r.flags&1048576)!==0&&df(r,ul,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;Sl(t,r),t=r.pendingProps;var h=Ci(r,Vt.current);Di(r,o),h=Tc(null,r,u,t,h,o);var p=Ic();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gt(u)?(p=!0,ol(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,pc(r),h.updater=Tl,r.stateNode=h,h._reactInternals=r,Pc(r,u,t,o),r=Vc(null,r,u,!0,p,o)):(r.tag=0,Ze&&p&&ic(r),Bt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(Sl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=t_(u),t=Vn(u,t),h){case 0:r=jc(null,r,u,t,o);break e;case 1:r=im(null,r,u,t,o);break e;case 11:r=em(null,r,u,t,o);break e;case 14:r=tm(null,r,u,Vn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Vn(u,h),jc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Vn(u,h),im(t,r,u,h,o);case 3:e:{if(om(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Ef(t,r),pl(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Oi(Error(n(423)),r),r=am(t,r,u,o,h);break e}else if(u!==h){h=Oi(Error(n(424)),r),r=am(t,r,u,o,h);break e}else for(on=Or(r.stateNode.containerInfo.firstChild),sn=r,Ze=!0,jn=null,o=_f(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ki(),u===h){r=vr(t,r,o);break e}Bt(t,r,u,o)}r=r.child}return r;case 5:return Sf(r),t===null&&lc(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,Zu(u,h)?_=null:p!==null&&Zu(u,p)&&(r.flags|=32),sm(t,r),Bt(t,r,_,o),r.child;case 6:return t===null&&lc(r),null;case 13:return lm(t,r,o);case 4:return gc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=ji(r,null,u,o):Bt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Vn(u,h),em(t,r,u,h,o);case 7:return Bt(t,r,r.pendingProps,o),r.child;case 8:return Bt(t,r,r.pendingProps.children,o),r.child;case 12:return Bt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,qe(dl,u._currentValue),u._currentValue=_,p!==null)if(kn(p.value,_)){if(p.children===h.children&&!Wt.current){r=vr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var R=p.dependencies;if(R!==null){_=p.child;for(var D=R.firstContext;D!==null;){if(D.context===u){if(p.tag===1){D=yr(-1,o&-o),D.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?D.next=D:(D.next=X.next,X.next=D),B.pending=D}}p.lanes|=o,D=p.alternate,D!==null&&(D.lanes|=o),fc(p.return,o,r),R.lanes|=o;break}D=D.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,R=_.alternate,R!==null&&(R.lanes|=o),fc(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Bt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Di(r,o),h=pn(h),u=u(h),r.flags|=1,Bt(t,r,u,o),r.child;case 14:return u=r.type,h=Vn(u,r.pendingProps),h=Vn(u.type,h),tm(t,r,u,h,o);case 15:return nm(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Vn(u,h),Sl(t,r),r.tag=1,Gt(u)?(t=!0,ol(r)):t=!1,Di(r,o),Gf(r,u,h),Pc(r,u,h,o),Vc(null,r,u,!0,t,o);case 19:return cm(t,r,o);case 22:return rm(t,r,o)}throw Error(n(156,r.tag))};function Dm(t,r){return ai(t,r)}function e_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,r,o,u){return new e_(t,r,o,u)}function Zc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function t_(t){if(typeof t=="function")return Zc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===V)return 11;if(t===Xe)return 14}return 2}function Gr(t,r){var o=t.alternate;return o===null?(o=vn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Ml(t,r,o,u,h,p){var _=2;if(u=t,typeof t=="function")Zc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case C:return Fs(o.children,h,p,r);case S:_=8,h|=8;break;case j:return t=vn(12,o,r,h|2),t.elementType=j,t.lanes=p,t;case A:return t=vn(13,o,r,h),t.elementType=A,t.lanes=p,t;case we:return t=vn(19,o,r,h),t.elementType=we,t.lanes=p,t;case Le:return Ol(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E:_=10;break e;case P:_=9;break e;case V:_=11;break e;case Xe:_=14;break e;case ft:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=vn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Fs(t,r,o,u){return t=vn(7,t,u,r),t.lanes=o,t}function Ol(t,r,o,u){return t=vn(22,t,u,r),t.elementType=Le,t.lanes=o,t.stateNode={isHidden:!1},t}function eh(t,r,o){return t=vn(6,t,null,r),t.lanes=o,t}function th(t,r,o){return r=vn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function n_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function nh(t,r,o,u,h,p,_,R,D){return t=new n_(t,r,o,R,D),r===1?(r=1,p===!0&&(r|=8)):r=0,p=vn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},pc(p),t}function r_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function Mm(t){if(!t)return br;t=t._reactInternals;e:{if(Sn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Gt(o))return uf(t,o,r)}return r}function Om(t,r,o,u,h,p,_,R,D){return t=nh(o,u,!0,t,h,p,_,R,D),t.context=Mm(null),o=t.current,u=$t(),h=qr(o),p=yr(u,h),p.callback=r??null,zr(o,p,h),t.current.lanes=h,Pr(t,h,u),Yt(t,u),t}function Ll(t,r,o,u){var h=r.current,p=$t(),_=qr(h);return o=Mm(o),r.context===null?r.context=o:r.pendingContext=o,r=yr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=zr(h,r,_),t!==null&&(On(t,h,_,p),ml(t,h,_)),_}function bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lm(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function rh(t,r){Lm(t,r),(t=t.alternate)&&Lm(t,r)}function s_(){return null}var bm=typeof reportError=="function"?reportError:function(t){console.error(t)};function sh(t){this._internalRoot=t}Fl.prototype.render=sh.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Ll(t,r,null,null)},Fl.prototype.unmount=sh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Os(function(){Ll(null,t,null,null)}),r[dr]=null}};function Fl(t){this._internalRoot=t}Fl.prototype.unstable_scheduleHydration=function(t){if(t){var r=Fa();t={blockedOn:null,target:t,priority:r};for(var o=0;o<zn.length&&r!==0&&r<zn[o].priority;o++);zn.splice(o,0,t),o===0&&Ba(t)}};function ih(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ul(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fm(){}function i_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var B=bl(_);p.call(B)}}var _=Om(r,u,t,0,null,!1,!1,"",Fm);return t._reactRootContainer=_,t[dr]=_.current,Oo(t.nodeType===8?t.parentNode:t),Os(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var R=u;u=function(){var B=bl(D);R.call(B)}}var D=nh(t,0,!1,null,null,!1,!1,"",Fm);return t._reactRootContainer=D,t[dr]=D.current,Oo(t.nodeType===8?t.parentNode:t),Os(function(){Ll(r,D,o,u)}),D}function zl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var R=h;h=function(){var D=bl(_);R.call(D)}}Ll(r,_,t,h)}else _=i_(o,r,t,h,u);return bl(_)}La=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=xr(r.pendingLanes);o!==0&&(Rr(r,o|1),Yt(r,He()),(Me&6)===0&&(Fi=He()+500,Fr()))}break;case 13:Os(function(){var u=gr(t,1);if(u!==null){var h=$t();On(u,t,1,h)}}),rh(t,1)}},ci=function(t){if(t.tag===13){var r=gr(t,134217728);if(r!==null){var o=$t();On(r,t,134217728,o)}rh(t,134217728)}},ba=function(t){if(t.tag===13){var r=qr(t),o=gr(t,r);if(o!==null){var u=$t();On(o,t,r,u)}rh(t,r)}},Fa=function(){return Re},Ua=function(t,r){var o=Re;try{return Re=t,r()}finally{Re=o}},ti=function(t,r,o){switch(r){case"input":if(oo(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=sl(u);if(!h)throw Error(n(90));Ks(u),oo(u,h)}}}break;case"textarea":Zs(t,o);break;case"select":r=o.value,r!=null&&sr(t,!!o.multiple,r,!1)}},gs=Yc,yo=Os;var o_={usingClientEntryPoint:!1,Events:[Fo,Ai,sl,Fn,go,Yc]},Zo={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a_={bundleType:Zo.bundleType,version:Zo.version,rendererPackageName:Zo.rendererPackageName,rendererConfig:Zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wo(t),t===null?null:t.stateNode},findFiberByHostInstance:Zo.findFiberByHostInstance||s_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Es=Bl.inject(a_),en=Bl}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o_,Xt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ih(r))throw Error(n(200));return r_(t,r,null,o)},Xt.createRoot=function(t,r){if(!ih(t))throw Error(n(299));var o=!1,u="",h=bm;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=nh(t,1,!1,null,null,o,!1,u,h),t[dr]=r.current,Oo(t.nodeType===8?t.parentNode:t),new sh(r)},Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=wo(r),t=t===null?null:t.stateNode,t},Xt.flushSync=function(t){return Os(t)},Xt.hydrate=function(t,r,o){if(!Ul(r))throw Error(n(200));return zl(null,t,r,!0,o)},Xt.hydrateRoot=function(t,r,o){if(!ih(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=bm;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Om(r,null,t,1,o??null,h,!1,p,_),t[dr]=r.current,Oo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Fl(r)},Xt.render=function(t,r,o){if(!Ul(r))throw Error(n(200));return zl(null,t,r,!1,o)},Xt.unmountComponentAtNode=function(t){if(!Ul(t))throw Error(n(40));return t._reactRootContainer?(Os(function(){zl(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1},Xt.unstable_batchedUpdates=Yc,Xt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Ul(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return zl(t,r,o,!1,u)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var Gm;function p_(){if(Gm)return lh.exports;Gm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),lh.exports=m_(),lh.exports}var Qm;function g_(){if(Qm)return $l;Qm=1;var s=p_();return $l.createRoot=s.createRoot,$l.hydrateRoot=s.hydrateRoot,$l}var y_=g_();const v_=()=>{};var Km={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},__=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const a=s[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[n++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[n++],f=s[n++],g=s[n++],v=((a&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const c=s[n++],f=s[n++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},ug={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],f=a+1<s.length,g=f?s[a+1]:0,v=a+2<s.length,w=v?s[a+2]:0,N=c>>2,x=(c&3)<<4|g>>4;let I=(g&15)<<2|w>>6,k=w&63;v||(k=64,f||(I=64)),i.push(n[N],n[x],n[I],n[k])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(lg(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):__(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=n[s.charAt(a++)],g=a<s.length?n[s.charAt(a)]:0;++a;const w=a<s.length?n[s.charAt(a)]:64;++a;const x=a<s.length?n[s.charAt(a)]:64;if(++a,c==null||g==null||w==null||x==null)throw new w_;const I=c<<2|g>>4;if(i.push(I),w!==64){const k=g<<4&240|w>>2;if(i.push(k),x!==64){const U=w<<6&192|x;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class w_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E_=function(s){const e=lg(s);return ug.encodeByteArray(e,!0)},tu=function(s){return E_(s).replace(/\./g,"")},T_=function(s){try{return ug.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=()=>I_().__FIREBASE_DEFAULTS__,N_=()=>{if(typeof process>"u"||typeof Km>"u")return;const s=Km.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},A_=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&T_(s[1]);return e&&JSON.parse(e)},Hh=()=>{try{return v_()||S_()||N_()||A_()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},x_=s=>{var e,n;return(n=(e=Hh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},C_=s=>{const e=x_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},cg=()=>{var s;return(s=Hh())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function R_(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[tu(JSON.stringify(n)),tu(JSON.stringify(f)),""].join(".")}const oa={};function j_(){const s={prod:[],emulator:[]};for(const e of Object.keys(oa))oa[e]?s.emulator.push(e):s.prod.push(e);return s}function V_(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Ym=!1;function D_(s,e){if(typeof window>"u"||typeof document>"u"||!qh(window.location.host)||oa[s]===e||oa[s]||Ym)return;oa[s]=e;function n(I){return`__firebase__banner__${I}`}const i="__firebase__banner",c=j_().prod.length>0;function f(){const I=document.getElementById(i);I&&I.remove()}function g(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function v(I,k){I.setAttribute("width","24"),I.setAttribute("id",k),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function w(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Ym=!0,f()},I}function N(I,k){I.setAttribute("id",k),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function x(){const I=V_(i),k=n("text"),U=document.getElementById(k)||document.createElement("span"),q=n("learnmore"),H=document.getElementById(q)||document.createElement("a"),ce=n("preprendIcon"),se=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const Y=I.element;g(Y),N(H,q);const ee=w();v(se,ce),Y.append(se,U,H,ee),document.body.appendChild(Y)}c?(U.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O_(){var s;const e=(s=Hh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L_(){return!O_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b_(){try{return typeof indexedDB=="object"}catch{return!1}}function F_(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="FirebaseError";class Ji extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=U_,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hg.prototype.create)}}class hg{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?z_(c,i):"Error",g=`${this.serviceName}: ${f} (${a}).`;return new Ji(a,g,i)}}function z_(s,e){return s.replace(B_,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const B_=/\{\$([^}]+)}/g;function nu(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const c=s[a],f=e[a];if(Xm(c)&&Xm(f)){if(!nu(c,f))return!1}else if(c!==f)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function Xm(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(s){return s&&s._delegate?s._delegate:s}class ha{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new P_;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q_(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);i===g&&f.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:H_(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H_(s){return s===zs?void 0:s}function q_(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(De||(De={}));const G_={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Q_=De.INFO,K_={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},Y_=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=K_[e];if(a)console[a](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dg{constructor(e){this.name=e,this._logLevel=Q_,this._logHandler=Y_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const X_=(s,e)=>e.some(n=>s instanceof n);let Jm,Zm;function J_(){return Jm||(Jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z_(){return Zm||(Zm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fg=new WeakMap,_h=new WeakMap,mg=new WeakMap,hh=new WeakMap,Wh=new WeakMap;function e0(s){const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{n(Yr(s.result)),a()},f=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&fg.set(n,s)}).catch(()=>{}),Wh.set(e,s),e}function t0(s){if(_h.has(s))return;const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});_h.set(s,e)}let wh={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return _h.get(s);if(e==="objectStoreNames")return s.objectStoreNames||mg.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function n0(s){wh=s(wh)}function r0(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(dh(this),e,...n);return mg.set(i,e.sort?e.sort():[e]),Yr(i)}:Z_().includes(s)?function(...e){return s.apply(dh(this),e),Yr(fg.get(this))}:function(...e){return Yr(s.apply(dh(this),e))}}function s0(s){return typeof s=="function"?r0(s):(s instanceof IDBTransaction&&t0(s),X_(s,J_())?new Proxy(s,wh):s)}function Yr(s){if(s instanceof IDBRequest)return e0(s);if(hh.has(s))return hh.get(s);const e=s0(s);return e!==s&&(hh.set(s,e),Wh.set(e,s)),e}const dh=s=>Wh.get(s);function i0(s,e,{blocked:n,upgrade:i,blocking:a,terminated:c}={}){const f=indexedDB.open(s,e),g=Yr(f);return i&&f.addEventListener("upgradeneeded",v=>{i(Yr(f.result),v.oldVersion,v.newVersion,Yr(f.transaction),v)}),n&&f.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),g.then(v=>{c&&v.addEventListener("close",()=>c()),a&&v.addEventListener("versionchange",w=>a(w.oldVersion,w.newVersion,w))}).catch(()=>{}),g}const o0=["get","getKey","getAll","getAllKeys","count"],a0=["put","add","delete","clear"],fh=new Map;function ep(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(fh.get(e))return fh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=a0.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||o0.includes(n)))return;const c=async function(f,...g){const v=this.transaction(f,a?"readwrite":"readonly");let w=v.store;return i&&(w=w.index(g.shift())),(await Promise.all([w[n](...g),a&&v.done]))[0]};return fh.set(e,c),c}n0(s=>({...s,get:(e,n,i)=>ep(e,n)||s.get(e,n,i),has:(e,n)=>!!ep(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u0(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function u0(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Eh="@firebase/app",tp="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new dg("@firebase/app"),c0="@firebase/app-compat",h0="@firebase/analytics-compat",d0="@firebase/analytics",f0="@firebase/app-check-compat",m0="@firebase/app-check",p0="@firebase/auth",g0="@firebase/auth-compat",y0="@firebase/database",v0="@firebase/data-connect",_0="@firebase/database-compat",w0="@firebase/functions",E0="@firebase/functions-compat",T0="@firebase/installations",I0="@firebase/installations-compat",S0="@firebase/messaging",N0="@firebase/messaging-compat",A0="@firebase/performance",x0="@firebase/performance-compat",C0="@firebase/remote-config",P0="@firebase/remote-config-compat",R0="@firebase/storage",k0="@firebase/storage-compat",j0="@firebase/firestore",V0="@firebase/ai",D0="@firebase/firestore-compat",M0="firebase",O0="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="[DEFAULT]",L0={[Eh]:"fire-core",[c0]:"fire-core-compat",[d0]:"fire-analytics",[h0]:"fire-analytics-compat",[m0]:"fire-app-check",[f0]:"fire-app-check-compat",[p0]:"fire-auth",[g0]:"fire-auth-compat",[y0]:"fire-rtdb",[v0]:"fire-data-connect",[_0]:"fire-rtdb-compat",[w0]:"fire-fn",[E0]:"fire-fn-compat",[T0]:"fire-iid",[I0]:"fire-iid-compat",[S0]:"fire-fcm",[N0]:"fire-fcm-compat",[A0]:"fire-perf",[x0]:"fire-perf-compat",[C0]:"fire-rc",[P0]:"fire-rc-compat",[R0]:"fire-gcs",[k0]:"fire-gcs-compat",[j0]:"fire-fst",[D0]:"fire-fst-compat",[V0]:"fire-vertex","fire-js":"fire-js",[M0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,b0=new Map,Ih=new Map;function np(s,e){try{s.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function su(s){const e=s.name;if(Ih.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Ih.set(e,s);for(const n of ru.values())np(n,s);for(const n of b0.values())np(n,s);return!0}function F0(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function U0(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new hg("app","Firebase",z0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=O0;function pg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Th,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Xr.create("bad-app-name",{appName:String(a)});if(n||(n=cg()),!n)throw Xr.create("no-options");const c=ru.get(a);if(c){if(nu(n,c.options)&&nu(i,c.config))return c;throw Xr.create("duplicate-app",{appName:a})}const f=new W_(a);for(const v of Ih.values())f.addComponent(v);const g=new B0(n,i,f);return ru.set(a,g),g}function H0(s=Th){const e=ru.get(s);if(!e&&s===Th&&cg())return pg();if(!e)throw Xr.create("no-app",{appName:s});return e}function qi(s,e,n){var i;let a=(i=L0[s])!==null&&i!==void 0?i:s;n&&(a+=`-${n}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const g=[`Unable to register library "${a}" with version "${e}":`];c&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(g.join(" "));return}su(new ha(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="firebase-heartbeat-database",W0=1,da="firebase-heartbeat-store";let mh=null;function gg(){return mh||(mh=i0(q0,W0,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(da)}catch(n){console.warn(n)}}}}).catch(s=>{throw Xr.create("idb-open",{originalErrorMessage:s.message})})),mh}async function G0(s){try{const n=(await gg()).transaction(da),i=await n.objectStore(da).get(yg(s));return await n.done,i}catch(e){if(e instanceof Ji)wr.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function rp(s,e){try{const i=(await gg()).transaction(da,"readwrite");await i.objectStore(da).put(e,yg(s)),await i.done}catch(n){if(n instanceof Ji)wr.warn(n.message);else{const i=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(i.message)}}}function yg(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=1024,K0=30;class Y0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new J0(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=sp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>K0){const f=Z0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){wr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sp(),{heartbeatsToSend:i,unsentEntries:a}=X0(this._heartbeatsCache.heartbeats),c=tu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return wr.warn(n),""}}}function sp(){return new Date().toISOString().substring(0,10)}function X0(s,e=Q0){const n=[];let i=s.slice();for(const a of s){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),ip(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),ip(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class J0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b_()?F_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await G0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return rp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return rp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ip(s){return tu(JSON.stringify({version:2,heartbeats:s})).length}function Z0(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(s){su(new ha("platform-logger",e=>new l0(e),"PRIVATE")),su(new ha("heartbeat",e=>new Y0(e),"PRIVATE")),qi(Eh,tp,s),qi(Eh,tp,"esm2017"),qi("fire-js","")}ew("");var tw="firebase",nw="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(tw,nw,"app");var op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,vg;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function j(){}j.prototype=S.prototype,C.D=S.prototype,C.prototype=new j,C.prototype.constructor=C,C.C=function(E,P,V){for(var A=Array(arguments.length-2),we=2;we<arguments.length;we++)A[we-2]=arguments[we];return S.prototype[P].apply(E,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,S,j){j||(j=0);var E=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)E[P]=S.charCodeAt(j++)|S.charCodeAt(j++)<<8|S.charCodeAt(j++)<<16|S.charCodeAt(j++)<<24;else for(P=0;16>P;++P)E[P]=S[j++]|S[j++]<<8|S[j++]<<16|S[j++]<<24;S=C.g[0],j=C.g[1],P=C.g[2];var V=C.g[3],A=S+(V^j&(P^V))+E[0]+3614090360&4294967295;S=j+(A<<7&4294967295|A>>>25),A=V+(P^S&(j^P))+E[1]+3905402710&4294967295,V=S+(A<<12&4294967295|A>>>20),A=P+(j^V&(S^j))+E[2]+606105819&4294967295,P=V+(A<<17&4294967295|A>>>15),A=j+(S^P&(V^S))+E[3]+3250441966&4294967295,j=P+(A<<22&4294967295|A>>>10),A=S+(V^j&(P^V))+E[4]+4118548399&4294967295,S=j+(A<<7&4294967295|A>>>25),A=V+(P^S&(j^P))+E[5]+1200080426&4294967295,V=S+(A<<12&4294967295|A>>>20),A=P+(j^V&(S^j))+E[6]+2821735955&4294967295,P=V+(A<<17&4294967295|A>>>15),A=j+(S^P&(V^S))+E[7]+4249261313&4294967295,j=P+(A<<22&4294967295|A>>>10),A=S+(V^j&(P^V))+E[8]+1770035416&4294967295,S=j+(A<<7&4294967295|A>>>25),A=V+(P^S&(j^P))+E[9]+2336552879&4294967295,V=S+(A<<12&4294967295|A>>>20),A=P+(j^V&(S^j))+E[10]+4294925233&4294967295,P=V+(A<<17&4294967295|A>>>15),A=j+(S^P&(V^S))+E[11]+2304563134&4294967295,j=P+(A<<22&4294967295|A>>>10),A=S+(V^j&(P^V))+E[12]+1804603682&4294967295,S=j+(A<<7&4294967295|A>>>25),A=V+(P^S&(j^P))+E[13]+4254626195&4294967295,V=S+(A<<12&4294967295|A>>>20),A=P+(j^V&(S^j))+E[14]+2792965006&4294967295,P=V+(A<<17&4294967295|A>>>15),A=j+(S^P&(V^S))+E[15]+1236535329&4294967295,j=P+(A<<22&4294967295|A>>>10),A=S+(P^V&(j^P))+E[1]+4129170786&4294967295,S=j+(A<<5&4294967295|A>>>27),A=V+(j^P&(S^j))+E[6]+3225465664&4294967295,V=S+(A<<9&4294967295|A>>>23),A=P+(S^j&(V^S))+E[11]+643717713&4294967295,P=V+(A<<14&4294967295|A>>>18),A=j+(V^S&(P^V))+E[0]+3921069994&4294967295,j=P+(A<<20&4294967295|A>>>12),A=S+(P^V&(j^P))+E[5]+3593408605&4294967295,S=j+(A<<5&4294967295|A>>>27),A=V+(j^P&(S^j))+E[10]+38016083&4294967295,V=S+(A<<9&4294967295|A>>>23),A=P+(S^j&(V^S))+E[15]+3634488961&4294967295,P=V+(A<<14&4294967295|A>>>18),A=j+(V^S&(P^V))+E[4]+3889429448&4294967295,j=P+(A<<20&4294967295|A>>>12),A=S+(P^V&(j^P))+E[9]+568446438&4294967295,S=j+(A<<5&4294967295|A>>>27),A=V+(j^P&(S^j))+E[14]+3275163606&4294967295,V=S+(A<<9&4294967295|A>>>23),A=P+(S^j&(V^S))+E[3]+4107603335&4294967295,P=V+(A<<14&4294967295|A>>>18),A=j+(V^S&(P^V))+E[8]+1163531501&4294967295,j=P+(A<<20&4294967295|A>>>12),A=S+(P^V&(j^P))+E[13]+2850285829&4294967295,S=j+(A<<5&4294967295|A>>>27),A=V+(j^P&(S^j))+E[2]+4243563512&4294967295,V=S+(A<<9&4294967295|A>>>23),A=P+(S^j&(V^S))+E[7]+1735328473&4294967295,P=V+(A<<14&4294967295|A>>>18),A=j+(V^S&(P^V))+E[12]+2368359562&4294967295,j=P+(A<<20&4294967295|A>>>12),A=S+(j^P^V)+E[5]+4294588738&4294967295,S=j+(A<<4&4294967295|A>>>28),A=V+(S^j^P)+E[8]+2272392833&4294967295,V=S+(A<<11&4294967295|A>>>21),A=P+(V^S^j)+E[11]+1839030562&4294967295,P=V+(A<<16&4294967295|A>>>16),A=j+(P^V^S)+E[14]+4259657740&4294967295,j=P+(A<<23&4294967295|A>>>9),A=S+(j^P^V)+E[1]+2763975236&4294967295,S=j+(A<<4&4294967295|A>>>28),A=V+(S^j^P)+E[4]+1272893353&4294967295,V=S+(A<<11&4294967295|A>>>21),A=P+(V^S^j)+E[7]+4139469664&4294967295,P=V+(A<<16&4294967295|A>>>16),A=j+(P^V^S)+E[10]+3200236656&4294967295,j=P+(A<<23&4294967295|A>>>9),A=S+(j^P^V)+E[13]+681279174&4294967295,S=j+(A<<4&4294967295|A>>>28),A=V+(S^j^P)+E[0]+3936430074&4294967295,V=S+(A<<11&4294967295|A>>>21),A=P+(V^S^j)+E[3]+3572445317&4294967295,P=V+(A<<16&4294967295|A>>>16),A=j+(P^V^S)+E[6]+76029189&4294967295,j=P+(A<<23&4294967295|A>>>9),A=S+(j^P^V)+E[9]+3654602809&4294967295,S=j+(A<<4&4294967295|A>>>28),A=V+(S^j^P)+E[12]+3873151461&4294967295,V=S+(A<<11&4294967295|A>>>21),A=P+(V^S^j)+E[15]+530742520&4294967295,P=V+(A<<16&4294967295|A>>>16),A=j+(P^V^S)+E[2]+3299628645&4294967295,j=P+(A<<23&4294967295|A>>>9),A=S+(P^(j|~V))+E[0]+4096336452&4294967295,S=j+(A<<6&4294967295|A>>>26),A=V+(j^(S|~P))+E[7]+1126891415&4294967295,V=S+(A<<10&4294967295|A>>>22),A=P+(S^(V|~j))+E[14]+2878612391&4294967295,P=V+(A<<15&4294967295|A>>>17),A=j+(V^(P|~S))+E[5]+4237533241&4294967295,j=P+(A<<21&4294967295|A>>>11),A=S+(P^(j|~V))+E[12]+1700485571&4294967295,S=j+(A<<6&4294967295|A>>>26),A=V+(j^(S|~P))+E[3]+2399980690&4294967295,V=S+(A<<10&4294967295|A>>>22),A=P+(S^(V|~j))+E[10]+4293915773&4294967295,P=V+(A<<15&4294967295|A>>>17),A=j+(V^(P|~S))+E[1]+2240044497&4294967295,j=P+(A<<21&4294967295|A>>>11),A=S+(P^(j|~V))+E[8]+1873313359&4294967295,S=j+(A<<6&4294967295|A>>>26),A=V+(j^(S|~P))+E[15]+4264355552&4294967295,V=S+(A<<10&4294967295|A>>>22),A=P+(S^(V|~j))+E[6]+2734768916&4294967295,P=V+(A<<15&4294967295|A>>>17),A=j+(V^(P|~S))+E[13]+1309151649&4294967295,j=P+(A<<21&4294967295|A>>>11),A=S+(P^(j|~V))+E[4]+4149444226&4294967295,S=j+(A<<6&4294967295|A>>>26),A=V+(j^(S|~P))+E[11]+3174756917&4294967295,V=S+(A<<10&4294967295|A>>>22),A=P+(S^(V|~j))+E[2]+718787259&4294967295,P=V+(A<<15&4294967295|A>>>17),A=j+(V^(P|~S))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+V&4294967295}i.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var j=S-this.blockSize,E=this.B,P=this.h,V=0;V<S;){if(P==0)for(;V<=j;)a(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<S;)if(E[P++]=C.charCodeAt(V++),P==this.blockSize){a(this,E),P=0;break}}else for(;V<S;)if(E[P++]=C[V++],P==this.blockSize){a(this,E),P=0;break}}this.h=P,this.o+=S},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var j=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=j&255,j/=256;for(this.u(C),C=Array(16),S=j=0;4>S;++S)for(var E=0;32>E;E+=8)C[j++]=this.g[S]>>>E&255;return C};function c(C,S){var j=g;return Object.prototype.hasOwnProperty.call(j,C)?j[C]:j[C]=S(C)}function f(C,S){this.h=S;for(var j=[],E=!0,P=C.length-1;0<=P;P--){var V=C[P]|0;E&&V==S||(j[P]=V,E=!1)}this.g=j}var g={};function v(C){return-128<=C&&128>C?c(C,function(S){return new f([S|0],0>S?-1:0)}):new f([C|0],0>C?-1:0)}function w(C){if(isNaN(C)||!isFinite(C))return x;if(0>C)return H(w(-C));for(var S=[],j=1,E=0;C>=j;E++)S[E]=C/j|0,j*=4294967296;return new f(S,0)}function N(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return H(N(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=w(Math.pow(S,8)),E=x,P=0;P<C.length;P+=8){var V=Math.min(8,C.length-P),A=parseInt(C.substring(P,P+V),S);8>V?(V=w(Math.pow(S,V)),E=E.j(V).add(w(A))):(E=E.j(j),E=E.add(w(A)))}return E}var x=v(0),I=v(1),k=v(16777216);s=f.prototype,s.m=function(){if(q(this))return-H(this).m();for(var C=0,S=1,j=0;j<this.g.length;j++){var E=this.i(j);C+=(0<=E?E:4294967296+E)*S,S*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(U(this))return"0";if(q(this))return"-"+H(this).toString(C);for(var S=w(Math.pow(C,6)),j=this,E="";;){var P=ee(j,S).g;j=ce(j,P.j(S));var V=((0<j.g.length?j.g[0]:j.h)>>>0).toString(C);if(j=P,U(j))return V+E;for(;6>V.length;)V="0"+V;E=V+E}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function U(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function q(C){return C.h==-1}s.l=function(C){return C=ce(this,C),q(C)?-1:U(C)?0:1};function H(C){for(var S=C.g.length,j=[],E=0;E<S;E++)j[E]=~C.g[E];return new f(j,~C.h).add(I)}s.abs=function(){return q(this)?H(this):this},s.add=function(C){for(var S=Math.max(this.g.length,C.g.length),j=[],E=0,P=0;P<=S;P++){var V=E+(this.i(P)&65535)+(C.i(P)&65535),A=(V>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);E=A>>>16,V&=65535,A&=65535,j[P]=A<<16|V}return new f(j,j[j.length-1]&-2147483648?-1:0)};function ce(C,S){return C.add(H(S))}s.j=function(C){if(U(this)||U(C))return x;if(q(this))return q(C)?H(this).j(H(C)):H(H(this).j(C));if(q(C))return H(this.j(H(C)));if(0>this.l(k)&&0>C.l(k))return w(this.m()*C.m());for(var S=this.g.length+C.g.length,j=[],E=0;E<2*S;E++)j[E]=0;for(E=0;E<this.g.length;E++)for(var P=0;P<C.g.length;P++){var V=this.i(E)>>>16,A=this.i(E)&65535,we=C.i(P)>>>16,Xe=C.i(P)&65535;j[2*E+2*P]+=A*Xe,se(j,2*E+2*P),j[2*E+2*P+1]+=V*Xe,se(j,2*E+2*P+1),j[2*E+2*P+1]+=A*we,se(j,2*E+2*P+1),j[2*E+2*P+2]+=V*we,se(j,2*E+2*P+2)}for(E=0;E<S;E++)j[E]=j[2*E+1]<<16|j[2*E];for(E=S;E<2*S;E++)j[E]=0;return new f(j,0)};function se(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function Y(C,S){this.g=C,this.h=S}function ee(C,S){if(U(S))throw Error("division by zero");if(U(C))return new Y(x,x);if(q(C))return S=ee(H(C),S),new Y(H(S.g),H(S.h));if(q(S))return S=ee(C,H(S)),new Y(H(S.g),S.h);if(30<C.g.length){if(q(C)||q(S))throw Error("slowDivide_ only works with positive integers.");for(var j=I,E=S;0>=E.l(C);)j=he(j),E=he(E);var P=M(j,1),V=M(E,1);for(E=M(E,2),j=M(j,2);!U(E);){var A=V.add(E);0>=A.l(C)&&(P=P.add(j),V=A),E=M(E,1),j=M(j,1)}return S=ce(C,P.j(S)),new Y(P,S)}for(P=x;0<=C.l(S);){for(j=Math.max(1,Math.floor(C.m()/S.m())),E=Math.ceil(Math.log(j)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),V=w(j),A=V.j(S);q(A)||0<A.l(C);)j-=E,V=w(j),A=V.j(S);U(V)&&(V=I),P=P.add(V),C=ce(C,A)}return new Y(P,C)}s.A=function(C){return ee(this,C).h},s.and=function(C){for(var S=Math.max(this.g.length,C.g.length),j=[],E=0;E<S;E++)j[E]=this.i(E)&C.i(E);return new f(j,this.h&C.h)},s.or=function(C){for(var S=Math.max(this.g.length,C.g.length),j=[],E=0;E<S;E++)j[E]=this.i(E)|C.i(E);return new f(j,this.h|C.h)},s.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),j=[],E=0;E<S;E++)j[E]=this.i(E)^C.i(E);return new f(j,this.h^C.h)};function he(C){for(var S=C.g.length+1,j=[],E=0;E<S;E++)j[E]=C.i(E)<<1|C.i(E-1)>>>31;return new f(j,C.h)}function M(C,S){var j=S>>5;S%=32;for(var E=C.g.length-j,P=[],V=0;V<E;V++)P[V]=0<S?C.i(V+j)>>>S|C.i(V+j+1)<<32-S:C.i(V+j);return new f(P,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vg=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=w,f.fromString=N,Jr=f}).apply(typeof op<"u"?op:typeof self<"u"?self:typeof window<"u"?window:{});var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _g,na,wg,Kl,Sh,Eg,Tg,Ig;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,y){return l==Array.prototype||l==Object.prototype||(l[m]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hl=="object"&&Hl];for(var m=0;m<l.length;++m){var y=l[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function a(l,m){if(m)e:{var y=i;l=l.split(".");for(var T=0;T<l.length-1;T++){var b=l[T];if(!(b in y))break e;y=y[b]}l=l[l.length-1],T=y[l],m=m(T),m!=T&&m!=null&&e(y,l,{configurable:!0,writable:!0,value:m})}}function c(l,m){l instanceof String&&(l+="");var y=0,T=!1,b={next:function(){if(!T&&y<l.length){var $=y++;return{value:m($,l[$]),done:!1}}return T=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}a("Array.prototype.values",function(l){return l||function(){return c(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function v(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function w(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function N(l,m,y){return l.call.apply(l.bind,arguments)}function x(l,m,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,T),l.apply(m,b)}}return function(){return l.apply(m,arguments)}}function I(l,m,y){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?N:x,I.apply(null,arguments)}function k(l,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function U(l,m){function y(){}y.prototype=m.prototype,l.aa=m.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,b,$){for(var te=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)te[ze-2]=arguments[ze];return m.prototype[b].apply(T,te)}}function q(l){const m=l.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=l[T];return y}return[]}function H(l,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(v(T)){const b=l.length||0,$=T.length||0;l.length=b+$;for(let te=0;te<$;te++)l[b+te]=T[te]}else l.push(T)}}class ce{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function se(l){return/^[\s\xa0]*$/.test(l)}function Y(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function ee(l){return ee[" "](l),l}ee[" "]=function(){};var he=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function M(l,m,y){for(const T in l)m.call(y,l[T],T,l)}function C(l,m){for(const y in l)m.call(void 0,l[y],y,l)}function S(l){const m={};for(const y in l)m[y]=l[y];return m}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(l,m){let y,T;for(let b=1;b<arguments.length;b++){T=arguments[b];for(y in T)l[y]=T[y];for(let $=0;$<j.length;$++)y=j[$],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function P(l){var m=1;l=l.split(":");const y=[];for(;0<m&&l.length;)y.push(l.shift()),m--;return l.length&&y.push(l.join(":")),y}function V(l){g.setTimeout(()=>{throw l},0)}function A(){var l=me;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class we{constructor(){this.h=this.g=null}add(m,y){const T=Xe.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var Xe=new ce(()=>new ft,l=>l.reset());class ft{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,ne=!1,me=new we,re=()=>{const l=g.Promise.resolve(void 0);Le=()=>{l.then(L)}};var L=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(y){V(y)}var m=Xe;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}ne=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ne=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};g.addEventListener("test",y,m),g.removeEventListener("test",y,m)}catch{}return l})();function xe(l,m){if(pe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(he){e:{try{ee(m.nodeName);var b=!0;break e}catch{}b=!1}b||(m=null)}}else y=="mouseover"?m=l.fromElement:y=="mouseout"&&(m=l.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ke[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&xe.aa.h.call(this)}}U(xe,pe);var ke={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function $e(l,m,y,T,b){this.listener=l,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=b,this.key=++Fe,this.da=this.fa=!1}function wt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function nr(l){this.src=l,this.g={},this.h=0}nr.prototype.add=function(l,m,y,T,b){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var te=Sr(l,m,T,b);return-1<te?(m=l[te],y||(m.fa=!1)):(m=new $e(m,this.src,$,!!T,b),m.fa=y,l.push(m)),m};function Ks(l,m){var y=m.type;if(y in l.g){var T=l.g[y],b=Array.prototype.indexOf.call(T,m,void 0),$;($=0<=b)&&Array.prototype.splice.call(T,b,1),$&&(wt(m),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Sr(l,m,y,T){for(var b=0;b<l.length;++b){var $=l[b];if(!$.da&&$.listener==m&&$.capture==!!y&&$.ha==T)return b}return-1}var ds="closure_lm_"+(1e6*Math.random()|0),Ys={};function io(l,m,y,T,b){if(Array.isArray(m)){for(var $=0;$<m.length;$++)io(l,m[$],y,T,b);return null}return y=lo(y),l&&l[be]?l.K(m,y,w(T)?!!T.capture:!1,b):oo(l,m,y,!1,T,b)}function oo(l,m,y,T,b,$){if(!m)throw Error("Invalid event type");var te=w(b)?!!b.capture:!!b,ze=Js(l);if(ze||(l[ds]=ze=new nr(l)),y=ze.add(m,y,T,te,$),y.proxy)return y;if(T=Ca(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)Ne||(b=te),b===void 0&&(b=!1),l.addEventListener(m.toString(),T,b);else if(l.attachEvent)l.attachEvent(sr(m.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ca(){function l(y){return m.call(l.src,l.listener,y)}const m=ao;return l}function Xs(l,m,y,T,b){if(Array.isArray(m))for(var $=0;$<m.length;$++)Xs(l,m[$],y,T,b);else T=w(T)?!!T.capture:!!T,y=lo(y),l&&l[be]?(l=l.i,m=String(m).toString(),m in l.g&&($=l.g[m],y=Sr($,y,T,b),-1<y&&(wt($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete l.g[m],l.h--)))):l&&(l=Js(l))&&(m=l.g[m.toString()],l=-1,m&&(l=Sr(m,y,T,b)),(y=-1<l?m[l]:null)&&rr(y))}function rr(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[be])Ks(m.i,l);else{var y=l.type,T=l.proxy;m.removeEventListener?m.removeEventListener(y,T,l.capture):m.detachEvent?m.detachEvent(sr(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=Js(m))?(Ks(y,l),y.h==0&&(y.src=null,m[ds]=null)):wt(l)}}}function sr(l){return l in Ys?Ys[l]:Ys[l]="on"+l}function ao(l,m){if(l.da)l=!0;else{m=new xe(m,this);var y=l.listener,T=l.ha||l.src;l.fa&&rr(l),l=y.call(T,m)}return l}function Js(l){return l=l[ds],l instanceof nr?l:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function lo(l){return typeof l=="function"?l:(l[Zs]||(l[Zs]=function(m){return l.handleEvent(m)}),l[Zs])}function mt(){Q.call(this),this.i=new nr(this),this.M=this,this.F=null}U(mt,Q),mt.prototype[be]=!0,mt.prototype.removeEventListener=function(l,m,y,T){Xs(this,l,m,y,T)};function pt(l,m){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=m.type||m,typeof m=="string")m=new pe(m,l);else if(m instanceof pe)m.target=m.target||l;else{var b=m;m=new pe(T,l),E(m,b)}if(b=!0,y)for(var $=y.length-1;0<=$;$--){var te=m.g=y[$];b=ir(te,T,!0,m)&&b}if(te=m.g=l,b=ir(te,T,!0,m)&&b,b=ir(te,T,!1,m)&&b,y)for($=0;$<y.length;$++)te=m.g=y[$],b=ir(te,T,!1,m)&&b}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var y=l.g[m],T=0;T<y.length;T++)wt(y[T]);delete l.g[m],l.h--}}this.F=null},mt.prototype.K=function(l,m,y,T){return this.i.add(String(l),m,!1,y,T)},mt.prototype.L=function(l,m,y,T){return this.i.add(String(l),m,!0,y,T)};function ir(l,m,y,T){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var b=!0,$=0;$<m.length;++$){var te=m[$];if(te&&!te.da&&te.capture==y){var ze=te.listener,gt=te.ha||te.src;te.fa&&Ks(l.i,te),b=ze.call(gt,T)!==!1&&b}}return b&&!T.defaultPrevented}function uo(l,m,y){if(typeof l=="function")y&&(l=I(l,y));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(l,m||0)}function Nr(l){l.g=uo(()=>{l.g=null,l.i&&(l.i=!1,Nr(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class fs extends Q{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Nr(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(l){Q.call(this),this.h=l,this.g={}}U(ms,Q);var co=[];function ho(l){M(l.g,function(m,y){this.g.hasOwnProperty(y)&&rr(m)},l),l.g={}}ms.prototype.N=function(){ms.aa.N.call(this),ho(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fo=g.JSON.stringify,mo=g.JSON.parse,po=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function ps(){}ps.prototype.h=null;function ei(l){return l.h||(l.h=l.i())}function ti(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bn(){pe.call(this,"d")}U(bn,pe);function ni(){pe.call(this,"c")}U(ni,pe);var Fn={},go=null;function gs(){return go=go||new mt}Fn.La="serverreachability";function yo(l){pe.call(this,Fn.La,l)}U(yo,pe);function or(l){const m=gs();pt(m,new yo(m))}Fn.STAT_EVENT="statevent";function vo(l,m){pe.call(this,Fn.STAT_EVENT,l),this.stat=m}U(vo,pe);function st(l){const m=gs();pt(m,new vo(m,l))}Fn.Ma="timingevent";function ri(l,m){pe.call(this,Fn.Ma,l),this.size=m}U(ri,pe);function Tn(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},m)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function vs(l,m,y,T,b,$){l.info(function(){if(l.g)if($)for(var te="",ze=$.split("&"),gt=0;gt<ze.length;gt++){var je=ze[gt].split("=");if(1<je.length){var Et=je[0];je=je[1];var lt=Et.split("_");te=2<=lt.length&&lt[1]=="type"?te+(Et+"="+je+"&"):te+(Et+"=redacted&")}}else te=null;else te=$;return"XMLHTTP REQ ("+T+") [attempt "+b+"]: "+m+`
`+y+`
`+te})}function si(l,m,y,T,b,$,te){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+b+"]: "+m+`
`+y+`
`+$+" "+te})}function In(l,m,y,T){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+Du(l,y)+(T?" "+T:"")})}function _o(l,m){l.info(function(){return"TIMEOUT: "+m})}ys.prototype.info=function(){};function Du(l,m){if(!l.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var b=T[1];if(Array.isArray(b)&&!(1>b.length)){var $=b[0];if($!="noop"&&$!="stop"&&$!="close")for(var te=1;te<b.length;te++)b[te]=""}}}}return fo(y)}catch{return m}}var ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sn;function _s(){}U(_s,ps),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},Sn=new _s;function Nn(l,m,y,T){this.j=l,this.i=m,this.l=y,this.R=T||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ra}function Ra(){this.i=null,this.g="",this.h=!1}var wo={},oi={};function ai(l,m,y){l.L=1,l.v=Rr(tn(m)),l.m=y,l.P=!0,Eo(l,null)}function Eo(l,m){l.F=Date.now(),He(l),l.A=tn(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),jr(y.i,"t",T),l.C=0,y=l.j.J,l.h=new Ra,l.g=Qa(l.j,y?m:null,!l.m),0<l.O&&(l.M=new fs(I(l.Y,l,l.g),l.O)),m=l.U,y=l.g,T=l.ca;var b="readystatechange";Array.isArray(b)||(b&&(co[0]=b.toString()),b=co);for(var $=0;$<b.length;$++){var te=io(y,b[$],T||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),or(),vs(l.i,l.u,l.A,l.l,l.R,l.m)}Nn.prototype.ca=function(l){l=l.target;const m=this.M;m&&qt(l)==3?m.j():this.Y(l)},Nn.prototype.Y=function(l){try{if(l==this.g)e:{const lt=qt(this.g);var m=this.g.Ba();const dn=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||xo(this.g)))){this.J||lt!=4||m==7||(m==8||0>=dn?or(3):or(2)),ws(this);var y=this.g.Z();this.X=y;t:if(ka(this)){var T=xo(this.g);l="";var b=T.length,$=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),Ar(this);var te="";break t}this.h.i=new g.TextDecoder}for(m=0;m<b;m++)this.h.h=!0,l+=this.h.i.decode(T[m],{stream:!($&&m==b-1)});T.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=y==200,si(this.i,this.u,this.A,this.l,this.R,lt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,gt=this.g;if((ze=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(ze)){var je=ze;break t}}je=null}if(y=je)In(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,To(this,y);else{this.o=!1,this.s=3,st(12),cn(this),Ar(this);break e}}if(this.P){y=!0;let rn;for(;!this.J&&this.C<te.length;)if(rn=Mu(this,te),rn==oi){lt==4&&(this.s=4,st(14),y=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==wo){this.s=4,st(15),In(this.i,this.l,te,"[Invalid Chunk]"),y=!1;break}else In(this.i,this.l,rn,null),To(this,rn);if(ka(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||te.length!=0||this.h.h||(this.s=1,st(16),y=!1),this.o=this.o&&y,!y)In(this.i,this.l,te,"[Invalid Chunked Response]"),cn(this),Ar(this);else if(0<te.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Po(Et),Et.M=!0,st(11))}}else In(this.i,this.l,te,null),To(this,te);lt==4&&cn(this),this.o&&!this.J&&(lt==4?vi(this.j,this):(this.o=!1,He(this)))}else fi(this.g),y==400&&0<te.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),cn(this),Ar(this)}}}catch{}finally{}};function ka(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Mu(l,m){var y=l.C,T=m.indexOf(`
`,y);return T==-1?oi:(y=Number(m.substring(y,T)),isNaN(y)?wo:(T+=1,T+y>m.length?oi:(m=m.slice(T,T+y),l.C=T+y,m)))}Nn.prototype.cancel=function(){this.J=!0,cn(this)};function He(l){l.S=Date.now()+l.I,ja(l,l.I)}function ja(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Tn(I(l.ba,l),m)}function ws(l){l.B&&(g.clearTimeout(l.B),l.B=null)}Nn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(_o(this.i,this.A),this.L!=2&&(or(),st(17)),cn(this),this.s=2,Ar(this)):ja(this,this.S-l)};function Ar(l){l.j.G==0||l.J||vi(l.j,l)}function cn(l){ws(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,ho(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function To(l,m){try{var y=l.j;if(y.G!=0&&(y.g==l||Ut(y.h,l))){if(!l.K&&Ut(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var b=T;if(b[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)yi(y),Rn(y);else break e;gi(y),st(18)}}else y.za=b[1],0<y.za-y.T&&37500>b[2]&&y.F&&y.v==0&&!y.C&&(y.C=Tn(I(y.Za,y),6e3));if(1>=Da(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else hr(y,11)}else if((l.K||y.g==l)&&yi(y),!se(m))for(b=y.Da.g.parse(m),m=0;m<b.length;m++){let je=b[m];if(y.T=je[0],je=je[1],y.G==2)if(je[0]=="c"){y.K=je[1],y.ia=je[2];const Et=je[3];Et!=null&&(y.la=Et,y.j.info("VER="+y.la));const lt=je[4];lt!=null&&(y.Aa=lt,y.j.info("SVER="+y.Aa));const dn=je[5];dn!=null&&typeof dn=="number"&&0<dn&&(T=1.5*dn,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const rn=l.g;if(rn){const xs=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xs){var $=T.h;$.g||xs.indexOf("spdy")==-1&&xs.indexOf("quic")==-1&&xs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Io($,$.h),$.h=null))}if(T.D){const wi=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;wi&&(T.ya=wi,Be(T.I,T.D,wi))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var te=l;if(T.qa=Ga(T,T.J?T.ia:null,T.W),te.K){Ma(T.h,te);var ze=te,gt=T.L;gt&&(ze.I=gt),ze.B&&(ws(ze),He(ze)),T.g=te}else As(T);0<y.i.length&&$n(y)}else je[0]!="stop"&&je[0]!="close"||hr(y,7);else y.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?hr(y,7):xt(y):je[0]!="noop"&&y.l&&y.l.ta(je),y.v=0)}}or(4)}catch{}}var Va=class{constructor(l,m){this.g=l,this.map=m}};function Es(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Da(l){return l.h?1:l.g?l.g.size:0}function Ut(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function Io(l,m){l.g?l.g.add(m):l.h=m}function Ma(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}Es.prototype.cancel=function(){if(this.i=Oa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Oa(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const y of l.g.values())m=m.concat(y.D);return m}return q(l.i)}function li(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(v(l)){for(var m=[],y=l.length,T=0;T<y;T++)m.push(l[T]);return m}m=[],y=0;for(T in l)m[y++]=l[T];return m}function ui(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(v(l)||typeof l=="string"){var m=[];l=l.length;for(var y=0;y<l;y++)m.push(y);return m}m=[],y=0;for(const T in l)m[y++]=T;return m}}}function xr(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(v(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var y=ui(l),T=li(l),b=T.length,$=0;$<b;$++)m.call(void 0,T[$],y&&y[$],l)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ou(l,m){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),b=null;if(0<=T){var $=l[y].substring(0,T);b=l[y].substring(T+1)}else $=l[y];m($,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ar(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ar){this.h=l.h,Is(this,l.j),this.o=l.o,this.g=l.g,Cr(this,l.s),this.l=l.l;var m=l.i,y=new Un;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Pr(this,y),this.m=l.m}else l&&(m=String(l).match(Ts))?(this.h=!1,Is(this,m[1]||"",!0),this.o=Re(m[2]||""),this.g=Re(m[3]||"",!0),Cr(this,m[4]),this.l=Re(m[5]||"",!0),Pr(this,m[6]||"",!0),this.m=Re(m[7]||"")):(this.h=!1,this.i=new Un(null,this.h))}ar.prototype.toString=function(){var l=[],m=this.j;m&&l.push(kr(m,ci,!0),":");var y=this.g;return(y||m=="file")&&(l.push("//"),(m=this.o)&&l.push(kr(m,ci,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(kr(y,y.charAt(0)=="/"?Fa:ba,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",kr(y,So)),l.join("")};function tn(l){return new ar(l)}function Is(l,m,y){l.j=y?Re(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Cr(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function Pr(l,m,y){m instanceof Un?(l.i=m,zn(l.i,l.h)):(y||(m=kr(m,Ua)),l.i=new Un(m,l.h))}function Be(l,m,y){l.i.set(m,y)}function Rr(l){return Be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Re(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function kr(l,m,y){return typeof l=="string"?(l=encodeURI(l).replace(m,La),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function La(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ci=/[#\/\?@]/g,ba=/[#\?:]/g,Fa=/[#\?]/g,Ua=/[#\?@]/g,So=/#/g;function Un(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function At(l){l.g||(l.g=new Map,l.h=0,l.i&&Ou(l.i,function(m,y){l.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}s=Un.prototype,s.add=function(l,m){At(this),this.i=null,l=hn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(m),this.h+=1,this};function An(l,m){At(l),m=hn(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function xn(l,m){return At(l),m=hn(l,m),l.g.has(m)}s.forEach=function(l,m){At(this),this.g.forEach(function(y,T){y.forEach(function(b){l.call(m,b,T,this)},this)},this)},s.na=function(){At(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const b=l[T];for(let $=0;$<b.length;$++)y.push(m[T])}return y},s.V=function(l){At(this);let m=[];if(typeof l=="string")xn(this,l)&&(m=m.concat(this.g.get(hn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)m=m.concat(l[y])}return m},s.set=function(l,m){return At(this),this.i=null,l=hn(this,l),xn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},s.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function jr(l,m,y){An(l,m),0<y.length&&(l.i=null,l.g.set(hn(l,m),q(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const $=encodeURIComponent(String(T)),te=this.V(T);for(T=0;T<te.length;T++){var b=$;te[T]!==""&&(b+="="+encodeURIComponent(String(te[T]))),l.push(b)}}return this.i=l.join("&")};function hn(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function zn(l,m){m&&!l.j&&(At(l),l.i=null,l.g.forEach(function(y,T){var b=T.toLowerCase();T!=b&&(An(this,T),jr(this,b,y))},l)),l.j=m}function Lu(l,m){const y=new ys;if(g.Image){const T=new Image;T.onload=k(Ht,y,"TestLoadImage: loaded",!0,m,T),T.onerror=k(Ht,y,"TestLoadImage: error",!1,m,T),T.onabort=k(Ht,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=k(Ht,y,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else m(!1)}function za(l,m){const y=new ys,T=new AbortController,b=setTimeout(()=>{T.abort(),Ht(y,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:T.signal}).then($=>{clearTimeout(b),$.ok?Ht(y,"TestPingServer: ok",!0,m):Ht(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(b),Ht(y,"TestPingServer: error",!1,m)})}function Ht(l,m,y,T,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),T(y)}catch{}}function bu(){this.g=new po}function Ba(l,m,y){const T=y||"";try{xr(l,function(b,$){let te=b;w(b)&&(te=fo(b)),m.push(T+$+"="+encodeURIComponent(te))})}catch(b){throw m.push(T+"type="+encodeURIComponent("_badmap")),b}}function lr(l){this.l=l.Ub||null,this.j=l.eb||!1}U(lr,ps),lr.prototype.g=function(){return new Ss(this.l,this.j)},lr.prototype.i=(function(l){return function(){return l}})({});function Ss(l,m){mt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Ss,mt),s=Ss.prototype,s.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,Pn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$a(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function $a(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?Cn(this):Pn(this),this.readyState==3&&$a(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Cn(this))},s.Qa=function(l){this.g&&(this.response=l,Cn(this))},s.ga=function(){this.g&&Cn(this)};function Cn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Pn(l)}s.setRequestHeader=function(l,m){this.u.append(l,m)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=m.next();return l.join(`\r
`)};function Pn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ur(l){let m="";return M(l,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function Vr(l,m,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=ur(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Be(l,m,y))}function Je(l){mt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Je,mt);var Fu=/^https?$/i,No=["POST","PUT"];s=Je.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sn.g(),this.v=this.o?ei(this.o):ei(Sn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch($){Ns(this,$);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var b in T)y.set(b,T[b]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())y.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),b=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(No,m,void 0))||T||b||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,te]of y)this.g.setRequestHeader($,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{di(this),this.u=!0,this.g.send(l),this.u=!1}catch($){Ns(this,$)}};function Ns(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,hi(l),nn(l)}function hi(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pt(this,"complete"),pt(this,"abort"),nn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nn(this,!0)),Je.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ao(this):this.bb())},s.bb=function(){Ao(this)};function Ao(l){if(l.h&&typeof f<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)uo(l.Ea,0,l);else if(pt(l,"readystatechange"),qt(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var T;if(T=te===0){var b=String(l.D).match(Ts)[1]||null;!b&&g.self&&g.self.location&&(b=g.self.location.protocol.slice(0,-1)),T=!Fu.test(b?b.toLowerCase():"")}y=T}if(y)pt(l,"complete"),pt(l,"success");else{l.m=6;try{var $=2<qt(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",hi(l)}}finally{nn(l)}}}}function nn(l,m){if(l.g){di(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||pt(l,"ready");try{y.onreadystatechange=T}catch{}}}function di(l){l.I&&(g.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),mo(m)}};function xo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function fi(l){const m={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(se(l[T]))continue;var y=P(l[T]);const b=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const $=m[b]||[];m[b]=$,$.push(y)}C(m,function(T){return T.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bn(l,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||m}function Co(l){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bn("baseRetryDelayMs",5e3,l),this.cb=Bn("retryDelaySeedMs",1e4,l),this.Wa=Bn("forwardChannelMaxRetries",2,l),this.wa=Bn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Es(l&&l.concurrentRequestLimit),this.Da=new bu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Co.prototype,s.la=8,s.G=1,s.connect=function(l,m,y,T){st(0),this.W=l,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=Ga(this,null,this.W),$n(this)};function xt(l){if(mi(l),l.G==3){var m=l.U++,y=tn(l.I);if(Be(y,"SID",l.K),Be(y,"RID",m),Be(y,"TYPE","terminate"),cr(l,y),m=new Nn(l,l.j,m),m.L=2,m.v=Rr(tn(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=m.v,y=!0),y||(m.g=Qa(m.j,null),m.g.ea(m.v)),m.F=Date.now(),He(m)}Wa(l)}function Rn(l){l.g&&(Po(l),l.g.cancel(),l.g=null)}function mi(l){Rn(l),l.u&&(g.clearTimeout(l.u),l.u=null),yi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function $n(l){if(!en(l.h)&&!l.s){l.s=!0;var m=l.Ga;Le||re(),ne||(Le(),ne=!0),me.add(m,l),l.B=0}}function Uu(l,m){return Da(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Tn(I(l.Ga,l,m),qa(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const b=new Nn(this,this.j,l);let $=this.o;if(this.S&&($?($=S($),E($,this.S)):$=this.S),this.m!==null||this.O||(b.H=$,$=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Dr(this,b,m),y=tn(this.I),Be(y,"RID",l),Be(y,"CVER",22),this.D&&Be(y,"X-HTTP-Session-Id",this.D),cr(this,y),$&&(this.O?m="headers="+encodeURIComponent(String(ur($)))+"&"+m:this.m&&Vr(y,this.m,$)),Io(this.h,b),this.Ua&&Be(y,"TYPE","init"),this.P?(Be(y,"$req",m),Be(y,"SID","null"),b.T=!0,ai(b,y,null)):ai(b,y,m),this.G=2}}else this.G==3&&(l?pi(this,l):this.i.length==0||en(this.h)||pi(this))};function pi(l,m){var y;m?y=m.l:y=l.U++;const T=tn(l.I);Be(T,"SID",l.K),Be(T,"RID",y),Be(T,"AID",l.T),cr(l,T),l.m&&l.o&&Vr(T,l.m,l.o),y=new Nn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),m&&(l.i=m.D.concat(l.i)),m=Dr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Io(l.h,y),ai(y,T,m)}function cr(l,m){l.H&&M(l.H,function(y,T){Be(m,T,y)}),l.l&&xr({},function(y,T){Be(m,T,y)})}function Dr(l,m,y){y=Math.min(l.i.length,y);var T=l.l?I(l.l.Na,l.l,l):null;e:{var b=l.i;let $=-1;for(;;){const te=["count="+y];$==-1?0<y?($=b[0].g,te.push("ofs="+$)):$=0:te.push("ofs="+$);let ze=!0;for(let gt=0;gt<y;gt++){let je=b[gt].g;const Et=b[gt].map;if(je-=$,0>je)$=Math.max(0,b[gt].g-100),ze=!1;else try{Ba(Et,te,"req"+je+"_")}catch{T&&T(Et)}}if(ze){T=te.join("&");break e}}}return l=l.i.splice(0,y),m.D=l,T}function As(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;Le||re(),ne||(Le(),ne=!0),me.add(m,l),l.v=0}}function gi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Tn(I(l.Fa,l),qa(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,Ha(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tn(I(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Rn(this),Ha(this))};function Po(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function Ha(l){l.g=new Nn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=tn(l.qa);Be(m,"RID","rpc"),Be(m,"SID",l.K),Be(m,"AID",l.T),Be(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&Be(m,"TO",l.ja),Be(m,"TYPE","xmlhttp"),cr(l,m),l.m&&l.o&&Vr(m,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Rr(tn(m)),y.m=null,y.P=!0,Eo(y,l)}s.Za=function(){this.C!=null&&(this.C=null,Rn(this),gi(this),st(19))};function yi(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function vi(l,m){var y=null;if(l.g==m){yi(l),Po(l),l.g=null;var T=2}else if(Ut(l.h,m))y=m.D,Ma(l.h,m),T=1;else return;if(l.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var b=l.B;T=gs(),pt(T,new ri(T,y)),$n(l)}else As(l);else if(b=m.s,b==3||b==0&&0<m.X||!(T==1&&Uu(l,m)||T==2&&gi(l)))switch(y&&0<y.length&&(m=l.h,m.i=m.i.concat(y)),b){case 1:hr(l,5);break;case 4:hr(l,10);break;case 3:hr(l,6);break;default:hr(l,2)}}}function qa(l,m){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*m}function hr(l,m){if(l.j.info("Error code "+m),m==2){var y=I(l.fb,l),T=l.Xa;const b=!T;T=new ar(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Is(T,"https"),Rr(T),b?Lu(T.toString(),y):za(T.toString(),y)}else st(2);l.G=0,l.l&&l.l.sa(m),Wa(l),mi(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Wa(l){if(l.G=0,l.ka=[],l.l){const m=Oa(l.h);(m.length!=0||l.i.length!=0)&&(H(l.ka,m),H(l.ka,l.i),l.h.i.length=0,q(l.i),l.i.length=0),l.l.ra()}}function Ga(l,m,y){var T=y instanceof ar?tn(y):new ar(y);if(T.g!="")m&&(T.g=m+"."+T.g),Cr(T,T.s);else{var b=g.location;T=b.protocol,m=m?m+"."+b.hostname:b.hostname,b=+b.port;var $=new ar(null);T&&Is($,T),m&&($.g=m),b&&Cr($,b),y&&($.l=y),T=$}return y=l.D,m=l.ya,y&&m&&Be(T,y,m),Be(T,"VER",l.la),cr(l,T),T}function Qa(l,m,y){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new Je(new lr({eb:y})):new Je(l.pa),m.Ha(l.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ro(){}s=Ro.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function _i(){}_i.prototype.g=function(l,m){return new zt(l,m)};function zt(l,m){mt.call(this),this.g=new Co(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!se(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!se(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new Hn(this)}U(zt,mt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){xt(this.g)},zt.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=fo(l),l=y);m.i.push(new Va(m.Ya++,l)),m.G==3&&$n(m)},zt.prototype.N=function(){this.g.l=null,delete this.j,xt(this.g),delete this.g,zt.aa.N.call(this)};function Ka(l){bn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const y in m){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}U(Ka,bn);function Ya(){ni.call(this),this.status=1}U(Ya,ni);function Hn(l){this.g=l}U(Hn,Ro),Hn.prototype.ua=function(){pt(this.g,"a")},Hn.prototype.ta=function(l){pt(this.g,new Ka(l))},Hn.prototype.sa=function(l){pt(this.g,new Ya)},Hn.prototype.ra=function(){pt(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Ig=function(){return new _i},Tg=function(){return gs()},Eg=Fn,Sh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ii.NO_ERROR=0,ii.TIMEOUT=8,ii.HTTP_ERROR=6,Kl=ii,Pa.COMPLETE="complete",wg=Pa,ti.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",mt.prototype.listen=mt.prototype.K,na=ti,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,_g=Je}).apply(typeof Hl<"u"?Hl:typeof self<"u"?self:typeof window<"u"?window:{});const ap="@firebase/firestore",lp="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new dg("@firebase/firestore");function zi(){return qs.logLevel}function ae(s,...e){if(qs.logLevel<=De.DEBUG){const n=e.map(Gh);qs.debug(`Firestore (${Zi}): ${s}`,...n)}}function Er(s,...e){if(qs.logLevel<=De.ERROR){const n=e.map(Gh);qs.error(`Firestore (${Zi}): ${s}`,...n)}}function ts(s,...e){if(qs.logLevel<=De.WARN){const n=e.map(Gh);qs.warn(`Firestore (${Zi}): ${s}`,...n)}}function Gh(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Sg(s,i,n)}function Sg(s,e,n){let i=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Er(i),new Error(i)}function Ue(s,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,s||Sg(e,a,i)}function Se(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(bt.UNAUTHENTICATED)))}shutdown(){}}class sw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class iw{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let i=this.i;const a=v=>this.i!==i?(i=this.i,n(v)):Promise.resolve();let c=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zr,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},g=v=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string",31837,{l:i}),new Ng(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class ow{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aw{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new ow(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(bt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class up{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lw{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,U0(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const i=c=>{c.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ae("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const a=c=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new up(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new up(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=uw(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<n&&(i+=e.charAt(a[c]%62))}return i}}function Ae(s,e){return s<e?-1:s>e?1:0}function Nh(s,e){let n=0;for(;n<s.length&&n<e.length;){const i=s.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return Ae(i,a);{const c=Ag(),f=cw(c.encode(cp(s,n)),c.encode(cp(e,n)));return f!==0?f:Ae(i,a)}}n+=i>65535?2:1}return Ae(s.length,e.length)}function cp(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function cw(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return Ae(s[n],e[n]);return Ae(s.length,e.length)}function Gi(s,e,n){return s.length===e.length&&s.every(((i,a)=>n(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="__name__";class Kn{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ee(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kn?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const c=Kn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Ae(e.length,n.length)}static compareSegments(e,n){const i=Kn.isNumericId(e),a=Kn.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?Kn.extractNumericId(e).compare(Kn.extractNumericId(n)):Nh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class We extends Kn{construct(e,n,i){return new We(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new We(n)}static emptyPath(){return new We([])}}const hw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Kn{construct(e,n,i){return new kt(e,n,i)}static isValidIdentifier(e){return hw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hp}static keyField(){return new kt([hp])}static fromServerFormat(e){const n=[];let i="",a=0;const c=()=>{if(i.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let f=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,a+=2}else g==="`"?(f=!f,a++):g!=="."||f?(i+=g,a++):(c(),a++)}if(c(),f)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(We.fromString(e))}static fromName(e){return new ye(We.fromString(e).popFirst(5))}static empty(){return new ye(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(s,e,n){if(!n)throw new ie(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function dw(s,e,n,i){if(e===!0&&i===!0)throw new ie(W.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function dp(s){if(!ye.isDocumentKey(s))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function fp(s){if(ye.isDocumentKey(s))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Cg(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function pu(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ee(12329,{type:typeof s})}function wn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pu(s);throw new ie(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Ea(s,e){if(!Cg(s))throw new ie(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const f=s[i];if(a&&typeof f!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new ie(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=-62135596800,pp=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*pp);return new Ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mp)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pp}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ea(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:dt("string",Ye._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Ye(0,0))}static max(){return new Ie(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=-1;function fw(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Ie.fromTimestamp(i===1e9?new Ye(n+1,0):new Ye(n,i));return new ns(a,ye.empty(),e)}function mw(s){return new ns(s.readTime,s.key,fa)}class ns{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ns(Ie.min(),ye.empty(),fa)}static max(){return new ns(Ie.max(),ye.empty(),fa)}}function pw(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(s.documentKey,e.documentKey),n!==0?n:Ae(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==gw)throw s;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):G.reject(n)}static resolve(e){return new G(((n,i)=>{n(e)}))}static reject(e){return new G(((n,i)=>{i(e)}))}static waitFor(e){return new G(((n,i)=>{let a=0,c=0,f=!1;e.forEach((g=>{++a,g.next((()=>{++c,f&&c===a&&n()}),(v=>i(v)))})),f=!0,c===a&&n()}))}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next((a=>a?G.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,c)=>{i.push(n.call(this,a,c))})),this.waitFor(i)}static mapArray(e,n){return new G(((i,a)=>{const c=e.length,f=new Array(c);let g=0;for(let v=0;v<c;v++){const w=v;n(e[w]).next((N=>{f[w]=N,++g,g===c&&i(f)}),(N=>a(N)))}}))}static doWhile(e,n){return new G(((i,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):i()};c()}))}}function vw(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function to(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}gu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=-1;function yu(s){return s==null}function iu(s){return s===0&&1/s==-1/0}function _w(s){return typeof s=="number"&&Number.isInteger(s)&&!iu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="";function ww(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=gp(e)),e=Ew(s.get(n),e);return gp(e)}function Ew(s,e){let n=e;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":n+="";break;case Pg:n+="";break;default:n+=c}}return n}function gp(s){return s+Pg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function us(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Rg(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ql(this.root,e,this.comparator,!0)}}class ql{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,a,c){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=a??Rt.EMPTY,this.right=c??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,c){return new Rt(e??this.key,n??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,i),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Rt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,i,a,c){return this}insert(e,n,i){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vp(this.data.getIterator())}getIteratorFrom(e){return new vp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class vp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new ln([])}unionWith(e){let n=new _t(kt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new kg("Invalid base64 string: "+c):c}})(e);return new jt(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const Tw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(s){if(Ue(!!s,39018),typeof s=="string"){let e=0;const n=Tw.exec(s);if(Ue(!!n,46558,{timestamp:s}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ot(s.seconds),nanos:ot(s.nanos)}}function ot(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ss(s){return typeof s=="string"?jt.fromBase64String(s):jt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="server_timestamp",Vg="__type__",Dg="__previous_value__",Mg="__local_write_time__";function Yh(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vg])===null||n===void 0?void 0:n.stringValue)===jg}function vu(s){const e=s.mapValue.fields[Dg];return Yh(e)?vu(e):e}function ma(s){const e=rs(s.mapValue.fields[Mg].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n,i,a,c,f,g,v,w,N){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=w,this.isUsingEmulator=N}}const ou="(default)";class pa{constructor(e,n){this.projectId=e,this.database=n||ou}static empty(){return new pa("","")}get isDefaultDatabase(){return this.database===ou}isEqual(e){return e instanceof pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="__type__",Sw="__max__",Wl={mapValue:{}},Lg="__vector__",au="value";function is(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Yh(s)?4:Aw(s)?9007199254740991:Nw(s)?10:11:Ee(28295,{value:s})}function tr(s,e){if(s===e)return!0;const n=is(s);if(n!==is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ma(s).isEqual(ma(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=rs(a.timestampValue),g=rs(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,c){return ss(a.bytesValue).isEqual(ss(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,c){return ot(a.geoPointValue.latitude)===ot(c.geoPointValue.latitude)&&ot(a.geoPointValue.longitude)===ot(c.geoPointValue.longitude)})(s,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return ot(a.integerValue)===ot(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=ot(a.doubleValue),g=ot(c.doubleValue);return f===g?iu(f)===iu(g):isNaN(f)&&isNaN(g)}return!1})(s,e);case 9:return Gi(s.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},g=c.mapValue.fields||{};if(yp(f)!==yp(g))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(g[v]===void 0||!tr(f[v],g[v])))return!1;return!0})(s,e);default:return Ee(52216,{left:s})}}function ga(s,e){return(s.values||[]).find((n=>tr(n,e)))!==void 0}function Qi(s,e){if(s===e)return 0;const n=is(s),i=is(e);if(n!==i)return Ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(s.booleanValue,e.booleanValue);case 2:return(function(c,f){const g=ot(c.integerValue||c.doubleValue),v=ot(f.integerValue||f.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(s,e);case 3:return _p(s.timestampValue,e.timestampValue);case 4:return _p(ma(s),ma(e));case 5:return Nh(s.stringValue,e.stringValue);case 6:return(function(c,f){const g=ss(c),v=ss(f);return g.compareTo(v)})(s.bytesValue,e.bytesValue);case 7:return(function(c,f){const g=c.split("/"),v=f.split("/");for(let w=0;w<g.length&&w<v.length;w++){const N=Ae(g[w],v[w]);if(N!==0)return N}return Ae(g.length,v.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,f){const g=Ae(ot(c.latitude),ot(f.latitude));return g!==0?g:Ae(ot(c.longitude),ot(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return wp(s.arrayValue,e.arrayValue);case 10:return(function(c,f){var g,v,w,N;const x=c.fields||{},I=f.fields||{},k=(g=x[au])===null||g===void 0?void 0:g.arrayValue,U=(v=I[au])===null||v===void 0?void 0:v.arrayValue,q=Ae(((w=k==null?void 0:k.values)===null||w===void 0?void 0:w.length)||0,((N=U==null?void 0:U.values)===null||N===void 0?void 0:N.length)||0);return q!==0?q:wp(k,U)})(s.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Wl.mapValue&&f===Wl.mapValue)return 0;if(c===Wl.mapValue)return 1;if(f===Wl.mapValue)return-1;const g=c.fields||{},v=Object.keys(g),w=f.fields||{},N=Object.keys(w);v.sort(),N.sort();for(let x=0;x<v.length&&x<N.length;++x){const I=Nh(v[x],N[x]);if(I!==0)return I;const k=Qi(g[v[x]],w[N[x]]);if(k!==0)return k}return Ae(v.length,N.length)})(s.mapValue,e.mapValue);default:throw Ee(23264,{le:n})}}function _p(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ae(s,e);const n=rs(s),i=rs(e),a=Ae(n.seconds,i.seconds);return a!==0?a:Ae(n.nanos,i.nanos)}function wp(s,e){const n=s.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const c=Qi(n[a],i[a]);if(c)return c}return Ae(n.length,i.length)}function Ki(s){return Ah(s)}function Ah(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=rs(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ss(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return ye.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",a=!0;for(const c of n.values||[])a?a=!1:i+=",",i+=Ah(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${Ah(n.fields[f])}`;return a+"}"})(s.mapValue):Ee(61005,{value:s})}function Yl(s){switch(is(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vu(s);return e?16+Yl(e):16;case 5:return 2*s.stringValue.length;case 6:return ss(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+Yl(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return us(i.fields,((c,f)=>{a+=c.length+Yl(f)})),a})(s.mapValue);default:throw Ee(13486,{value:s})}}function Ep(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function xh(s){return!!s&&"integerValue"in s}function Xh(s){return!!s&&"arrayValue"in s}function Tp(s){return!!s&&"nullValue"in s}function Ip(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Xl(s){return!!s&&"mapValue"in s}function Nw(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Og])===null||n===void 0?void 0:n.stringValue)===Lg}function aa(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return us(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=aa(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=aa(s.arrayValue.values[n]);return e}return Object.assign({},s)}function Aw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Sw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Xl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(n)}setAll(e){let n=kt.emptyPath(),i={},a=[];e.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const v=this.getFieldsMap(n);this.applyChanges(v,i,a),i={},a=[],n=g.popLast()}f?i[g.lastSegment()]=aa(f):a.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,a)}delete(e){const n=this.field(e.popLast());Xl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Xl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){us(n,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new Zt(aa(this.value))}}function bg(s){const e=[];return us(s.fields,((n,i)=>{const a=new kt([n]);if(Xl(i)){const c=bg(i.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)})),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,i,a,c,f,g){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(e){return new Ft(e,0,Ie.min(),Ie.min(),Ie.min(),Zt.empty(),0)}static newFoundDocument(e,n,i,a){return new Ft(e,1,n,Ie.min(),i,a,0)}static newNoDocument(e,n){return new Ft(e,2,n,Ie.min(),Ie.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,Ie.min(),Ie.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.position=e,this.inclusive=n}}function Sp(s,e,n){let i=0;for(let a=0;a<s.position.length;a++){const c=e[a],f=s.position[a];if(c.field.isKeyField()?i=ye.comparator(ye.fromName(f.referenceValue),n.key):i=Qi(f,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Np(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!tr(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n="asc"){this.field=e,this.dir=n}}function xw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{}class ht extends Fg{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Pw(e,n,i):n==="array-contains"?new jw(e,i):n==="in"?new Vw(e,i):n==="not-in"?new Dw(e,i):n==="array-contains-any"?new Mw(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Rw(e,i):new kw(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qi(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(Qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends Fg{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ln(e,n)}matches(e){return Ug(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Ug(s){return s.op==="and"}function zg(s){return Cw(s)&&Ug(s)}function Cw(s){for(const e of s.filters)if(e instanceof Ln)return!1;return!0}function Ch(s){if(s instanceof ht)return s.field.canonicalString()+s.op.toString()+Ki(s.value);if(zg(s))return s.filters.map((e=>Ch(e))).join(",");{const e=s.filters.map((n=>Ch(n))).join(",");return`${s.op}(${e})`}}function Bg(s,e){return s instanceof ht?(function(i,a){return a instanceof ht&&i.op===a.op&&i.field.isEqual(a.field)&&tr(i.value,a.value)})(s,e):s instanceof Ln?(function(i,a){return a instanceof Ln&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,f,g)=>c&&Bg(f,a.filters[g])),!0):!1})(s,e):void Ee(19439)}function $g(s){return s instanceof ht?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ki(n.value)}`})(s):s instanceof Ln?(function(n){return n.op.toString()+" {"+n.getFilters().map($g).join(" ,")+"}"})(s):"Filter"}class Pw extends ht{constructor(e,n,i){super(e,n,i),this.key=ye.fromName(i.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class Rw extends ht{constructor(e,n){super(e,"in",n),this.keys=Hg("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class kw extends ht{constructor(e,n){super(e,"not-in",n),this.keys=Hg("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Hg(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>ye.fromName(i.referenceValue)))}class jw extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xh(n)&&ga(n.arrayValue,this.value)}}class Vw extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ga(this.value.arrayValue,n)}}class Dw extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ga(this.value.arrayValue,n)}}class Mw extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>ga(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n=null,i=[],a=[],c=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=f,this.endAt=g,this.Pe=null}}function Ap(s,e=null,n=[],i=[],a=null,c=null,f=null){return new Ow(s,e,n,i,a,c,f)}function Jh(s){const e=Se(s);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Ch(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),yu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ki(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ki(i))).join(",")),e.Pe=n}return e.Pe}function Zh(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!xw(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Bg(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Np(s.startAt,e.startAt)&&Np(s.endAt,e.endAt)}function Ph(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n=null,i=[],a=[],c=null,f="F",g=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Lw(s,e,n,i,a,c,f,g){return new no(s,e,n,i,a,c,f,g)}function ed(s){return new no(s)}function xp(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function qg(s){return s.collectionGroup!==null}function la(s){const e=Se(s);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new _t(kt.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((w=>{w.isInequality()&&(g=g.add(w.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new ya(c,i))})),n.has(kt.keyField().canonicalString())||e.Te.push(new ya(kt.keyField(),i))}return e.Te}function Yn(s){const e=Se(s);return e.Ie||(e.Ie=bw(e,la(s))),e.Ie}function bw(s,e){if(s.limitType==="F")return Ap(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new ya(a.field,c)}));const n=s.endAt?new lu(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new lu(s.startAt.position,s.startAt.inclusive):null;return Ap(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Rh(s,e){const n=s.filters.concat([e]);return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function kh(s,e,n){return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function _u(s,e){return Zh(Yn(s),Yn(e))&&s.limitType===e.limitType}function Wg(s){return`${Jh(Yn(s))}|lt:${s.limitType}`}function Bi(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>$g(a))).join(", ")}]`),yu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Ki(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Ki(a))).join(",")),`Target(${i})`})(Yn(s))}; limitType=${s.limitType})`}function wu(s,e){return e.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ye.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,a){for(const c of la(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(f,g,v){const w=Sp(f,g,v);return f.inclusive?w<=0:w<0})(i.startAt,la(i),a)||i.endAt&&!(function(f,g,v){const w=Sp(f,g,v);return f.inclusive?w>=0:w>0})(i.endAt,la(i),a))})(s,e)}function Fw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Gg(s){return(e,n)=>{let i=!1;for(const a of la(s)){const c=Uw(a,e,n);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function Uw(s,e,n){const i=s.field.isKeyField()?ye.comparator(e.key,n.key):(function(c,f,g){const v=f.data.field(c),w=g.data.field(c);return v!==null&&w!==null?Qi(v,w):Ee(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,((n,i)=>{for(const[a,c]of i)e(a,c)}))}isEmpty(){return Rg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=new nt(ye.comparator);function Tr(){return zw}const Qg=new nt(ye.comparator);function ra(...s){let e=Qg;for(const n of s)e=e.insert(n.key,n);return e}function Kg(s){let e=Qg;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Bs(){return ua()}function Yg(){return ua()}function ua(){return new Gs((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Bw=new nt(ye.comparator),$w=new _t(ye.comparator);function Pe(...s){let e=$w;for(const n of s)e=e.add(n);return e}const Hw=new _t(Ae);function qw(){return Hw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function Xg(s){return{integerValue:""+s}}function Ww(s,e){return _w(e)?Xg(e):td(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this._=void 0}}function Gw(s,e,n){return s instanceof va?(function(a,c){const f={fields:{[Vg]:{stringValue:jg},[Mg]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Yh(c)&&(c=vu(c)),c&&(f.fields[Dg]=c),{mapValue:f}})(n,e):s instanceof _a?Zg(s,e):s instanceof wa?ey(s,e):(function(a,c){const f=Jg(a,c),g=Cp(f)+Cp(a.Ee);return xh(f)&&xh(a.Ee)?Xg(g):td(a.serializer,g)})(s,e)}function Qw(s,e,n){return s instanceof _a?Zg(s,e):s instanceof wa?ey(s,e):n}function Jg(s,e){return s instanceof uu?(function(i){return xh(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class va extends Eu{}class _a extends Eu{constructor(e){super(),this.elements=e}}function Zg(s,e){const n=ty(e);for(const i of s.elements)n.some((a=>tr(a,i)))||n.push(i);return{arrayValue:{values:n}}}class wa extends Eu{constructor(e){super(),this.elements=e}}function ey(s,e){let n=ty(e);for(const i of s.elements)n=n.filter((a=>!tr(a,i)));return{arrayValue:{values:n}}}class uu extends Eu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Cp(s){return ot(s.integerValue||s.doubleValue)}function ty(s){return Xh(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n){this.field=e,this.transform=n}}function Yw(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof _a&&a instanceof _a||i instanceof wa&&a instanceof wa?Gi(i.elements,a.elements,tr):i instanceof uu&&a instanceof uu?tr(i.Ee,a.Ee):i instanceof va&&a instanceof va})(s.transform,e.transform)}class Xw{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jl(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Tu{}function ny(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new nd(s.key,En.none()):new Ta(s.key,s.data,En.none());{const n=s.data,i=Zt.empty();let a=new _t(kt.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?i.delete(c):i.set(c,f),a=a.add(c)}return new cs(s.key,i,new ln(a.toArray()),En.none())}}function Jw(s,e,n){s instanceof Ta?(function(a,c,f){const g=a.value.clone(),v=Rp(a.fieldTransforms,c,f.transformResults);g.setAll(v),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,e,n):s instanceof cs?(function(a,c,f){if(!Jl(a.precondition,c))return void c.convertToUnknownDocument(f.version);const g=Rp(a.fieldTransforms,c,f.transformResults),v=c.data;v.setAll(ry(a)),v.setAll(g),c.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(s,e,n):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function ca(s,e,n,i){return s instanceof Ta?(function(c,f,g,v){if(!Jl(c.precondition,f))return g;const w=c.value.clone(),N=kp(c.fieldTransforms,v,f);return w.setAll(N),f.convertToFoundDocument(f.version,w).setHasLocalMutations(),null})(s,e,n,i):s instanceof cs?(function(c,f,g,v){if(!Jl(c.precondition,f))return g;const w=kp(c.fieldTransforms,v,f),N=f.data;return N.setAll(ry(c)),N.setAll(w),f.convertToFoundDocument(f.version,N).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((x=>x.field)))})(s,e,n,i):(function(c,f,g){return Jl(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(s,e,n)}function Zw(s,e){let n=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),c=Jg(i.transform,a||null);c!=null&&(n===null&&(n=Zt.empty()),n.set(i.field,c))}return n||null}function Pp(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Gi(i,a,((c,f)=>Yw(c,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ta extends Tu{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class cs extends Tu{constructor(e,n,i,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ry(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Rp(s,e,n){const i=new Map;Ue(s.length===n.length,32656,{Ae:n.length,Re:s.length});for(let a=0;a<n.length;a++){const c=s[a],f=c.transform,g=e.data.field(c.field);i.set(c.field,Qw(f,g,n[a]))}return i}function kp(s,e,n){const i=new Map;for(const a of s){const c=a.transform,f=n.data.field(a.field);i.set(a.field,Gw(c,f,e))}return i}class nd extends Tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eE extends Tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Jw(c,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ca(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ca(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Yg();return this.mutations.forEach((a=>{const c=e.get(a.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(a.key)?null:g;const v=ny(f,g);v!==null&&i.set(a.key,v),f.isValidDocument()||f.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,((n,i)=>Pp(n,i)))&&Gi(this.baseMutations,e.baseMutations,((n,i)=>Pp(n,i)))}}class rd{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){Ue(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let a=(function(){return Bw})();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,i[f].version);return new rd(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ve;function sE(s){switch(s){case W.OK:return Ee(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Ee(15467,{code:s})}}function sy(s){if(s===void 0)return Er("GRPC error has no .code"),W.UNKNOWN;switch(s){case ct.OK:return W.OK;case ct.CANCELLED:return W.CANCELLED;case ct.UNKNOWN:return W.UNKNOWN;case ct.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case ct.INTERNAL:return W.INTERNAL;case ct.UNAVAILABLE:return W.UNAVAILABLE;case ct.UNAUTHENTICATED:return W.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case ct.NOT_FOUND:return W.NOT_FOUND;case ct.ALREADY_EXISTS:return W.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return W.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case ct.ABORTED:return W.ABORTED;case ct.OUT_OF_RANGE:return W.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return W.UNIMPLEMENTED;case ct.DATA_LOSS:return W.DATA_LOSS;default:return Ee(39323,{code:s})}}(Ve=ct||(ct={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Jr([4294967295,4294967295],0);function jp(s){const e=Ag().encode(s),n=new vg;return n.update(e),new Uint8Array(n.digest())}function Vp(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Jr([n,i],0),new Jr([a,c],0)]}class sd{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new sa(`Invalid padding: ${n}`);if(i<0)throw new sa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new sa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new sa(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Jr.fromNumber(this.fe)}pe(e,n,i){let a=e.add(n.multiply(Jr.fromNumber(i)));return a.compare(iE)===1&&(a=new Jr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=jp(e),[i,a]=Vp(n);for(let c=0;c<this.hashCount;c++){const f=this.pe(i,a,c);if(!this.ye(f))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new sd(c,a,n);return i.forEach((g=>f.insert(g))),f}insert(e){if(this.fe===0)return;const n=jp(e),[i,a]=Vp(n);for(let c=0;c<this.hashCount;c++){const f=this.pe(i,a,c);this.we(f)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class sa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,i,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Ia.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Iu(Ie.min(),a,new nt(Ae),Tr(),Pe())}}class Ia{constructor(e,n,i,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ia(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,i,a){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=a}}class iy{constructor(e,n){this.targetId=e,this.De=n}}class oy{constructor(e,n,i=jt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class Dp{constructor(){this.ve=0,this.Ce=Mp(),this.Fe=jt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pe(),n=Pe(),i=Pe();return this.Ce.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Ee(38017,{changeType:c})}})),new Ia(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=Mp()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class oE{constructor(e){this.We=e,this.Ge=new Map,this.ze=Tr(),this.je=Gl(),this.Je=Gl(),this.He=new nt(Ae)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,i=e.De.count,a=this.st(n);if(a){const c=a.target;if(Ph(c))if(i===0){const f=new ye(c.path);this.Xe(n,f,Ft.newNoDocument(f,Ie.min()))}else Ue(i===1,20013,{expectedCount:i});else{const f=this.ot(n);if(f!==i){const g=this._t(e),v=g?this.ut(g,e,f):1;if(v!==0){this.rt(n);const w=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,w)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=n;let f,g;try{f=ss(i).toUint8Array()}catch(v){if(v instanceof kg)return ts("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new sd(f,a,c)}catch(v){return ts(v instanceof sa?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.fe===0?null:g}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let a=0;return i.forEach((c=>{const f=this.We.lt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.Xe(n,c,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((c,f)=>{const g=this.st(f);if(g){if(c.current&&Ph(g.target)){const v=new ye(g.target.path);this.Tt(v).has(f)||this.It(f,v)||this.Xe(f,v,Ft.newNoDocument(v,e))}c.Ne&&(n.set(f,c.Le()),c.ke())}}));let i=Pe();this.Je.forEach(((c,f)=>{let g=!0;f.forEachWhile((v=>{const w=this.st(v);return!w||w.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(c))})),this.ze.forEach(((c,f)=>f.setReadTime(e)));const a=new Iu(e,n,this.He,this.ze,i);return this.ze=Tr(),this.je=Gl(),this.Je=Gl(),this.He=new nt(Ae),a}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Dp,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new _t(Ae),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new _t(Ae),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Dp),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Gl(){return new nt(ye.comparator)}function Mp(){return new nt(ye.comparator)}const aE={asc:"ASCENDING",desc:"DESCENDING"},lE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uE={and:"AND",or:"OR"};class cE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jh(s,e){return s.useProto3Json||yu(e)?e:{value:e}}function cu(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ay(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function hE(s,e){return cu(s,e.toTimestamp())}function Xn(s){return Ue(!!s,49232),Ie.fromTimestamp((function(n){const i=rs(n);return new Ye(i.seconds,i.nanos)})(s))}function id(s,e){return Vh(s,e).canonicalString()}function Vh(s,e){const n=(function(a){return new We(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?n:n.child(e)}function ly(s){const e=We.fromString(s);return Ue(fy(e),10190,{key:e.toString()}),e}function Dh(s,e){return id(s.databaseId,e.path)}function ph(s,e){const n=ly(e);if(n.get(1)!==s.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ye(cy(n))}function uy(s,e){return id(s.databaseId,e)}function dE(s){const e=ly(s);return e.length===4?We.emptyPath():cy(e)}function Mh(s){return new We(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function cy(s){return Ue(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Op(s,e,n){return{name:Dh(s,e),fields:n.value.mapValue.fields}}function fE(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:Ee(39313,{state:w})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(w,N){return w.useProto3Json?(Ue(N===void 0||typeof N=="string",58123),jt.fromBase64String(N||"")):(Ue(N===void 0||N instanceof Buffer||N instanceof Uint8Array,16193),jt.fromUint8Array(N||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(w){const N=w.code===void 0?W.UNKNOWN:sy(w.code);return new ie(N,w.message||"")})(f);n=new oy(i,a,c,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=ph(s,i.document.name),c=Xn(i.document.updateTime),f=i.document.createTime?Xn(i.document.createTime):Ie.min(),g=new Zt({mapValue:{fields:i.document.fields}}),v=Ft.newFoundDocument(a,c,f,g),w=i.targetIds||[],N=i.removedTargetIds||[];n=new Zl(w,N,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=ph(s,i.document),c=i.readTime?Xn(i.readTime):Ie.min(),f=Ft.newNoDocument(a,c),g=i.removedTargetIds||[];n=new Zl([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=ph(s,i.document),c=i.removedTargetIds||[];n=new Zl([],c,a,null)}else{if(!("filter"in e))return Ee(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,f=new rE(a,c),g=i.targetId;n=new iy(g,f)}}return n}function mE(s,e){let n;if(e instanceof Ta)n={update:Op(s,e.key,e.value)};else if(e instanceof nd)n={delete:Dh(s,e.key)};else if(e instanceof cs)n={update:Op(s,e.key,e.data),updateMask:IE(e.fieldMask)};else{if(!(e instanceof eE))return Ee(16599,{Rt:e.type});n={verify:Dh(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,f){const g=f.transform;if(g instanceof va)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof _a)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof wa)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof uu)return{fieldPath:f.field.canonicalString(),increment:g.Ee};throw Ee(20930,{transform:f.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:hE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ee(27497)})(s,e.precondition)),n}function pE(s,e){return s&&s.length>0?(Ue(e!==void 0,14353),s.map((n=>(function(a,c){let f=a.updateTime?Xn(a.updateTime):Xn(c);return f.isEqual(Ie.min())&&(f=Xn(c)),new Xw(f,a.transformResults||[])})(n,e)))):[]}function gE(s,e){return{documents:[uy(s,e.path)]}}function yE(s,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=uy(s,a);const c=(function(w){if(w.length!==0)return dy(Ln.create(w,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(w){if(w.length!==0)return w.map((N=>(function(I){return{field:$i(I.field),direction:wE(I.dir)}})(N)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=jh(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{Vt:n,parent:a}}function vE(s){let e=dE(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){Ue(i===1,65062);const N=n.from[0];N.allDescendants?a=N.collectionId:e=e.child(N.collectionId)}let c=[];n.where&&(c=(function(x){const I=hy(x);return I instanceof Ln&&zg(I)?I.getFilters():[I]})(n.where));let f=[];n.orderBy&&(f=(function(x){return x.map((I=>(function(U){return new ya(Hi(U.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(I)))})(n.orderBy));let g=null;n.limit&&(g=(function(x){let I;return I=typeof x=="object"?x.value:x,yu(I)?null:I})(n.limit));let v=null;n.startAt&&(v=(function(x){const I=!!x.before,k=x.values||[];return new lu(k,I)})(n.startAt));let w=null;return n.endAt&&(w=(function(x){const I=!x.before,k=x.values||[];return new lu(k,I)})(n.endAt)),Lw(e,a,f,c,g,"F",v,w)}function _E(s,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hy(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Hi(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Hi(n.unaryFilter.field);return ht.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Hi(n.unaryFilter.field);return ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Hi(n.unaryFilter.field);return ht.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ht.create(Hi(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ln.create(n.compositeFilter.filters.map((i=>hy(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(n.compositeFilter.op))})(s):Ee(30097,{filter:s})}function wE(s){return aE[s]}function EE(s){return lE[s]}function TE(s){return uE[s]}function $i(s){return{fieldPath:s.canonicalString()}}function Hi(s){return kt.fromServerFormat(s.fieldPath)}function dy(s){return s instanceof ht?(function(n){if(n.op==="=="){if(Ip(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NAN"}};if(Tp(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ip(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NAN"}};if(Tp(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(n.field),op:EE(n.op),value:n.value}}})(s):s instanceof Ln?(function(n){const i=n.getFilters().map((a=>dy(a)));return i.length===1?i[0]:{compositeFilter:{op:TE(n.op),filters:i}}})(s):Ee(54877,{filter:s})}function IE(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fy(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,i,a,c=Ie.min(),f=Ie.min(),g=jt.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.gt=e}}function NE(s){const e=vE({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?kh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.Dn=new xE}addToCollectionParentIndex(e,n){return this.Dn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ns.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class xE{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new _t(We.comparator),c=!a.has(i);return this.index[n]=a.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new _t(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},my=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(my,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Yi(0)}static ur(){return new Yi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="LruGarbageCollector",CE=1048576;function Fp([s,e],[n,i]){const a=Ae(s,n);return a===0?Ae(e,i):a}class PE{constructor(e){this.Tr=e,this.buffer=new _t(Fp),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Fp(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RE{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ae(bp,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){to(n)?ae(bp,"Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Rr(3e5)}))}}class kE{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return G.resolve(gu.ue);const i=new PE(n);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Lp)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lp):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,a,c,f,g,v,w;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,f=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(i=x,g=Date.now(),this.removeTargets(e,i,n)))).next((x=>(c=x,v=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(w=Date.now(),zi()<=De.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-N}ms
	Determined least recently used ${a} in `+(g-f)+`ms
	Removed ${c} targets in `+(v-g)+`ms
	Removed ${x} documents in `+(w-v)+`ms
Total Duration: ${w-N}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:x}))))}}function jE(s,e){return new kE(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.changes=new Gs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&ca(i.mutation,a,ln.empty(),Ye.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Pe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Pe()){const a=Bs();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((c=>{let f=ra();return c.forEach(((g,v)=>{f=f.insert(g,v.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const i=Bs();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Pe())))}populateOverlays(e,n,i){const a=[];return i.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(e,n,i,a){let c=Tr();const f=ua(),g=(function(){return ua()})();return n.forEach(((v,w)=>{const N=i.get(w.key);a.has(w.key)&&(N===void 0||N.mutation instanceof cs)?c=c.insert(w.key,w):N!==void 0?(f.set(w.key,N.mutation.getFieldMask()),ca(N.mutation,w,N.mutation.getFieldMask(),Ye.now())):f.set(w.key,ln.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((w,N)=>f.set(w,N))),n.forEach(((w,N)=>{var x;return g.set(w,new DE(N,(x=f.get(w))!==null&&x!==void 0?x:null))})),g)))}recalculateAndSaveOverlays(e,n){const i=ua();let a=new nt(((f,g)=>f-g)),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const g of f)g.keys().forEach((v=>{const w=n.get(v);if(w===null)return;let N=i.get(v)||ln.empty();N=g.applyToLocalView(w,N),i.set(v,N);const x=(a.get(g.batchId)||Pe()).add(v);a=a.insert(g.batchId,x)}))})).next((()=>{const f=[],g=a.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),w=v.key,N=v.value,x=Yg();N.forEach((I=>{if(!c.has(I)){const k=ny(n.get(I),i.get(I));k!==null&&x.set(I,k),c=c.add(I)}})),f.push(this.documentOverlayCache.saveOverlays(e,w,x))}return G.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return(function(f){return ye.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-c.size):G.resolve(Bs());let g=fa,v=c;return f.next((w=>G.forEach(w,((N,x)=>(g<x.largestBatchId&&(g=x.largestBatchId),c.get(N)?G.resolve():this.remoteDocumentCache.getEntry(e,N).next((I=>{v=v.insert(N,I)}))))).next((()=>this.populateOverlays(e,w,c))).next((()=>this.computeViews(e,v,w,Pe()))).next((N=>({batchId:g,changes:Kg(N)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((i=>{let a=ra();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const c=n.collectionGroup;let f=ra();return this.indexManager.getCollectionParents(e,c).next((g=>G.forEach(g,(v=>{const w=(function(x,I){return new no(I,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,w,i,a).next((N=>{N.forEach(((x,I)=>{f=f.insert(x,I)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,a)))).next((f=>{c.forEach(((v,w)=>{const N=w.getKey();f.get(N)===null&&(f=f.insert(N,Ft.newInvalidDocument(N)))}));let g=ra();return f.forEach(((v,w)=>{const N=c.get(v);N!==void 0&&ca(N.mutation,w,ln.empty(),Ye.now()),wu(n,w)&&(g=g.insert(v,w))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return G.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Xn(a.createTime)}})(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:NE(a.bundledQuery),readTime:Xn(a.readTime)}})(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this.overlays=new nt(ye.comparator),this.kr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Bs();return G.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,c)=>{this.wt(e,n,c)})),G.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.kr.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const a=Bs(),c=n.length+1,f=new ye(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const v=g.getNext().value,w=v.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===c&&v.largestBatchId>i&&a.set(v.getKey(),v)}return G.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let c=new nt(((w,N)=>w-N));const f=this.overlays.getIterator();for(;f.hasNext();){const w=f.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>i){let N=c.get(w.largestBatchId);N===null&&(N=Bs(),c=c.insert(w.largestBatchId,N)),N.set(w.getKey(),w)}}const g=Bs(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((w,N)=>g.set(w,N))),!(g.size()>=a)););return G.resolve(g)}wt(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const f=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new nE(n,i));let c=this.kr.get(n);c===void 0&&(c=Pe(),this.kr.set(n,c)),this.kr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this.qr=new _t(Nt.Qr),this.$r=new _t(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Nt(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Nt(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new ye(new We([])),i=new Nt(n,e),a=new Nt(n,e+1),c=[];return this.$r.forEachInRange([i,a],(f=>{this.Wr(f),c.push(f.key)})),c}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ye(new We([])),i=new Nt(n,e),a=new Nt(n,e+1);let c=Pe();return this.$r.forEachInRange([i,a],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Nt(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Nt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ye.comparator(e.key,n.key)||Ae(e.Hr,n.Hr)}static Ur(e,n){return Ae(e.Hr,n.Hr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new _t(Nt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new tE(c,n,i,a);this.mutationQueue.push(f);for(const g of a)this.Yr=this.Yr.add(new Nt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return G.resolve(f)}lookupMutationBatch(e,n){return G.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.Xr(i),c=a<0?0:a;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Kh:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Nt(n,0),a=new Nt(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([i,a],(f=>{const g=this.Zr(f.Hr);c.push(g)})),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new _t(Ae);return n.forEach((a=>{const c=new Nt(a,0),f=new Nt(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,f],(g=>{i=i.add(g.Hr)}))})),G.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let c=i;ye.isDocumentKey(c)||(c=c.child(""));const f=new Nt(new ye(c),0);let g=new _t(Ae);return this.Yr.forEachWhile((v=>{const w=v.key.path;return!!i.isPrefixOf(w)&&(w.length===a&&(g=g.add(v.Hr)),!0)}),f),G.resolve(this.ei(g))}ei(e){const n=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){Ue(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return G.forEach(n.mutations,(a=>{const c=new Nt(a.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Nt(n,0),a=this.Yr.firstAfterOrEqual(i);return G.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.ni=e,this.docs=(function(){return new nt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),c=a?a.size:0,f=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let i=Tr();return n.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():Ft.newInvalidDocument(a))})),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let c=Tr();const f=n.path,g=new ye(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:w,value:{document:N}}=v.getNext();if(!f.isPrefixOf(w.path))break;w.path.length>f.length+1||pw(mw(N),i)<=0||(a.has(N.key)||wu(n,N))&&(c=c.insert(N.key,N.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(e,n,i,a){Ee(9500)}ri(e,n){return G.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new zE(this)}getSize(e){return G.resolve(this.size)}}class zE extends VE{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(i)})),G.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.persistence=e,this.ii=new Gs((n=>Jh(n)),Zh),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.si=0,this.oi=new od,this.targetCount=0,this._i=Yi.ar()}forEachTarget(e,n){return this.ii.forEach(((i,a)=>n(a))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),G.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Yi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.hr(n),G.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let a=0;const c=[];return this.ii.forEach(((f,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.ii.delete(f),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)})),G.waitFor(c).next((()=>a))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((f=>{c.push(a.markPotentiallyOrphaned(e,f))})),G.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n){this.ai={},this.overlays={},this.ui=new gu(0),this.ci=!1,this.ci=!0,this.li=new bE,this.referenceDelegate=e(this),this.hi=new BE(this),this.indexManager=new AE,this.remoteDocumentCache=(function(a){return new UE(a)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new SE(n),this.Ti=new OE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new FE(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){ae("MemoryPersistence","Starting transaction:",e);const a=new $E(this.ui.next());return this.referenceDelegate.Ii(),i(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,n){return G.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class $E extends yw{constructor(e){super(),this.currentSequenceNumber=e}}class ad{constructor(e){this.persistence=e,this.Ai=new od,this.Ri=null}static Vi(e){return new ad(e)}get mi(){if(this.Ri)return this.Ri;throw Ee(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.mi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,(i=>{const a=ye.fromPath(i);return this.fi(e,a).next((c=>{c||n.removeEntry(a,Ie.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return G.or([()=>G.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class hu{constructor(e,n){this.persistence=e,this.gi=new Gs((i=>ww(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=jE(this,n)}static Vi(e,n){return new hu(e,n)}Ii(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return G.forEach(this.gi,((i,a)=>this.Sr(e,i,a).next((c=>c?G.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ri(e,(f=>this.Sr(e,f,n).next((g=>{g||(i++,c.removeEntry(f,Ie.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yl(e.data.value)),n}Sr(e,n,i){return G.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return G.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=a}static Es(e,n){let i=Pe(),a=Pe();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new ld(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return L_()?8:vw(M_())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,a){const c={result:null};return this.ps(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ys(e,n,a,i).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new HE;return this.ws(e,n,f).next((g=>{if(c.result=g,this.Rs)return this.Ss(e,n,f,g.size)}))})).next((()=>c.result))}Ss(e,n,i,a){return i.documentReadCount<this.Vs?(zi()<=De.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(zi()<=De.DEBUG&&ae("QueryEngine","Query:",Bi(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(zi()<=De.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):G.resolve())}ps(e,n){if(xp(n))return G.resolve(null);let i=Yn(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=kh(n,null,"F"),i=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const f=Pe(...c);return this.gs.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,i).next((v=>{const w=this.bs(n,g);return this.Ds(n,w,f,v.readTime)?this.ps(e,kh(n,null,"F")):this.vs(e,w,n,v)}))))})))))}ys(e,n,i,a){return xp(n)||a.isEqual(Ie.min())?G.resolve(null):this.gs.getDocuments(e,i).next((c=>{const f=this.bs(n,c);return this.Ds(n,f,i,a)?G.resolve(null):(zi()<=De.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bi(n)),this.vs(e,f,n,fw(a,fa)).next((g=>g)))}))}bs(e,n){let i=new _t(Gg(e));return n.forEach(((a,c)=>{wu(e,c)&&(i=i.add(c))})),i}Ds(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ws(e,n,i){return zi()<=De.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Bi(n)),this.gs.getDocumentsMatchingQuery(e,n,ns.min(),i)}vs(e,n,i,a){return this.gs.getDocumentsMatchingQuery(e,i,a).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="LocalStore",WE=3e8;class GE{constructor(e,n,i,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new nt(Ae),this.Ms=new Gs((c=>Jh(c)),Zh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ME(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function QE(s,e,n,i){return new GE(s,e,n,i)}async function gy(s,e){const n=Se(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const f=[],g=[];let v=Pe();for(const w of a){f.push(w.batchId);for(const N of w.mutations)v=v.add(N.key)}for(const w of c){g.push(w.batchId);for(const N of w.mutations)v=v.add(N.key)}return n.localDocuments.getDocuments(i,v).next((w=>({Bs:w,removedBatchIds:f,addedBatchIds:g})))}))}))}function KE(s,e){const n=Se(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return(function(g,v,w,N){const x=w.batch,I=x.keys();let k=G.resolve();return I.forEach((U=>{k=k.next((()=>N.getEntry(v,U))).next((q=>{const H=w.docVersions.get(U);Ue(H!==null,48541),q.version.compareTo(H)<0&&(x.applyToRemoteDocument(q,w),q.isValidDocument()&&(q.setReadTime(w.commitVersion),N.addEntry(q)))}))})),k.next((()=>g.mutationQueue.removeMutationBatch(v,x)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let v=Pe();for(let w=0;w<g.mutationResults.length;++w)g.mutationResults[w].transformResults.length>0&&(v=v.add(g.batch.mutations[w].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function yy(s){const e=Se(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function YE(s,e){const n=Se(s),i=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const g=[];e.targetChanges.forEach(((N,x)=>{const I=a.get(x);if(!I)return;g.push(n.hi.removeMatchingKeys(c,N.removedDocuments,x).next((()=>n.hi.addMatchingKeys(c,N.addedDocuments,x))));let k=I.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?k=k.withResumeToken(jt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):N.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(N.resumeToken,i)),a=a.insert(x,k),(function(q,H,ce){return q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=WE?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(I,k,N)&&g.push(n.hi.updateTargetData(c,k))}));let v=Tr(),w=Pe();if(e.documentUpdates.forEach((N=>{e.resolvedLimboDocuments.has(N)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,N))})),g.push(XE(c,f,e.documentUpdates).next((N=>{v=N.Ls,w=N.ks}))),!i.isEqual(Ie.min())){const N=n.hi.getLastRemoteSnapshotVersion(c).next((x=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,i)));g.push(N)}return G.waitFor(g).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,v,w))).next((()=>v))})).then((c=>(n.Fs=a,c)))}function XE(s,e,n){let i=Pe(),a=Pe();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let f=Tr();return n.forEach(((g,v)=>{const w=c.get(g);v.isFoundDocument()!==w.isFoundDocument()&&(a=a.add(g)),v.isNoDocument()&&v.version.isEqual(Ie.min())?(e.removeEntry(g,v.readTime),f=f.insert(g,v)):!w.isValidDocument()||v.version.compareTo(w.version)>0||v.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(v),f=f.insert(g,v)):ae(ud,"Ignoring outdated watch update for ",g,". Current version:",w.version," Watch version:",v.version)})),{Ls:f,ks:a}}))}function JE(s,e){const n=Se(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Kh),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function ZE(s,e){const n=Se(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.hi.getTargetData(i,e).next((c=>c?(a=c,G.resolve(a)):n.hi.allocateTargetId(i).next((f=>(a=new Kr(e,f,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function Oh(s,e,n){const i=Se(s),a=i.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(f=>i.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!to(f))throw f;ae(ud,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(a.target)}function Up(s,e,n){const i=Se(s);let a=Ie.min(),c=Pe();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,w,N){const x=Se(v),I=x.Ms.get(N);return I!==void 0?G.resolve(x.Fs.get(I)):x.hi.getTargetData(w,N)})(i,f,Yn(e)).next((g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(f,g.targetId).next((v=>{c=v}))})).next((()=>i.Cs.getDocumentsMatchingQuery(f,e,n?a:Ie.min(),n?c:Pe()))).next((g=>(e1(i,Fw(e),g),{documents:g,qs:c})))))}function e1(s,e,n){let i=s.xs.get(e)||Ie.min();n.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.xs.set(e,i)}class zp{constructor(){this.activeTargetIds=qw()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t1{constructor(){this.Fo=new zp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new zp,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="ConnectivityMonitor";class $p{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ae(Bp,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ae(Bp,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql=null;function Lh(){return Ql===null?Ql=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ql++,"0x"+Ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="RestConnection",r1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class s1{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===ou?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,n,i,a,c){const f=Lh(),g=this.Go(e,n.toUriEncodedString());ae(gh,`Sending RPC '${e}' ${f}:`,g,i);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(v,a,c);const{host:w}=new URL(g),N=qh(w);return this.jo(e,g,v,i,N).then((x=>(ae(gh,`Received RPC '${e}' ${f}: `,x),x)),(x=>{throw ts(gh,`RPC '${e}' ${f} failed with error: `,x,"url: ",g,"request:",i),x}))}Jo(e,n,i,a,c,f){return this.Wo(e,n,i,a,c)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),i&&i.headers.forEach(((a,c)=>e[c]=a))}Go(e,n){const i=r1[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class o1 extends s1{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,a,c){const f=Lh();return new Promise(((g,v)=>{const w=new _g;w.setWithCredentials(!0),w.listenOnce(wg.COMPLETE,(()=>{try{switch(w.getLastErrorCode()){case Kl.NO_ERROR:const x=w.getResponseJson();ae(Lt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(x)),g(x);break;case Kl.TIMEOUT:ae(Lt,`RPC '${e}' ${f} timed out`),v(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case Kl.HTTP_ERROR:const I=w.getStatus();if(ae(Lt,`RPC '${e}' ${f} failed with status:`,I,"response text:",w.getResponseText()),I>0){let k=w.getResponseJson();Array.isArray(k)&&(k=k[0]);const U=k==null?void 0:k.error;if(U&&U.status&&U.message){const q=(function(ce){const se=ce.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(se)>=0?se:W.UNKNOWN})(U.status);v(new ie(q,U.message))}else v(new ie(W.UNKNOWN,"Server responded with status "+w.getStatus()))}else v(new ie(W.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{c_:e,streamId:f,l_:w.getLastErrorCode(),h_:w.getLastError()})}}finally{ae(Lt,`RPC '${e}' ${f} completed.`)}}));const N=JSON.stringify(a);ae(Lt,`RPC '${e}' ${f} sending request:`,a),w.send(n,"POST",N,i,15)}))}P_(e,n,i){const a=Lh(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Ig(),g=Tg(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(v.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(v.useFetchStreams=!0),this.zo(v.initMessageHeaders,n,i),v.encodeInitMessageHeaders=!0;const N=c.join("");ae(Lt,`Creating RPC '${e}' stream ${a}: ${N}`,v);const x=f.createWebChannel(N,v);this.T_(x);let I=!1,k=!1;const U=new i1({Ho:H=>{k?ae(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,H):(I||(ae(Lt,`Opening RPC '${e}' stream ${a} transport.`),x.open(),I=!0),ae(Lt,`RPC '${e}' stream ${a} sending:`,H),x.send(H))},Yo:()=>x.close()}),q=(H,ce,se)=>{H.listen(ce,(Y=>{try{se(Y)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return q(x,na.EventType.OPEN,(()=>{k||(ae(Lt,`RPC '${e}' stream ${a} transport opened.`),U.s_())})),q(x,na.EventType.CLOSE,(()=>{k||(k=!0,ae(Lt,`RPC '${e}' stream ${a} transport closed`),U.__(),this.I_(x))})),q(x,na.EventType.ERROR,(H=>{k||(k=!0,ts(Lt,`RPC '${e}' stream ${a} transport errored. Name:`,H.name,"Message:",H.message),U.__(new ie(W.UNAVAILABLE,"The operation could not be completed")))})),q(x,na.EventType.MESSAGE,(H=>{var ce;if(!k){const se=H.data[0];Ue(!!se,16349);const Y=se,ee=(Y==null?void 0:Y.error)||((ce=Y[0])===null||ce===void 0?void 0:ce.error);if(ee){ae(Lt,`RPC '${e}' stream ${a} received error:`,ee);const he=ee.status;let M=(function(j){const E=ct[j];if(E!==void 0)return sy(E)})(he),C=ee.message;M===void 0&&(M=W.INTERNAL,C="Unknown error status: "+he+" with message "+ee.message),k=!0,U.__(new ie(M,C)),x.close()}else ae(Lt,`RPC '${e}' stream ${a} received:`,se),U.a_(se)}})),q(g,Eg.STAT_EVENT,(H=>{H.stat===Sh.PROXY?ae(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):H.stat===Sh.NOPROXY&&ae(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{U.o_()}),0),U}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function yh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(s){return new cE(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,i=1e3,a=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=a,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-i);a>0&&ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="PersistentStream";class _y{constructor(e,n,i,a,c,f,g,v){this.Fi=e,this.w_=i,this.S_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new vy(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.b_===n&&this.W_(i,a)}),(i=>{e((()=>{const a=new ie(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{i((()=>this.G_(a)))})),this.stream.onMessage((a=>{i((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ae(Hp,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(ae(Hp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class a1 extends _y{constructor(e,n,i,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,f),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=fE(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Ie.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ie.min():f.readTime?Xn(f.readTime):Ie.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Mh(this.serializer),n.addTarget=(function(c,f){let g;const v=f.target;if(g=Ph(v)?{documents:gE(c,v)}:{query:yE(c,v).Vt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=ay(c,f.resumeToken);const w=jh(c,f.expectedCount);w!==null&&(g.expectedCount=w)}else if(f.snapshotVersion.compareTo(Ie.min())>0){g.readTime=cu(c,f.snapshotVersion.toTimestamp());const w=jh(c,f.expectedCount);w!==null&&(g.expectedCount=w)}return g})(this.serializer,e);const i=_E(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Mh(this.serializer),n.removeTarget=e,this.k_(n)}}class l1 extends _y{constructor(e,n,i,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,f),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=pE(e.writeResults,e.commitTime),i=Xn(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Mh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>mE(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{}class c1 extends u1{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Wo(e,Vh(n,i),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie(W.UNKNOWN,c.toString())}))}Jo(e,n,i,a,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Jo(e,Vh(n,i),a,f,g,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ie(W.UNKNOWN,f.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class h1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Er(n),this._a=!1):ae("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class d1{constructor(e,n,i,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo((f=>{i.enqueueAndForget((async()=>{Qs(this)&&(ae(Ws,"Restarting streams for network reachability change."),await(async function(v){const w=Se(v);w.Ia.add(4),await Sa(w),w.Aa.set("Unknown"),w.Ia.delete(4),await Nu(w)})(this))}))})),this.Aa=new h1(i,a)}}async function Nu(s){if(Qs(s))for(const e of s.da)await e(!0)}async function Sa(s){for(const e of s.da)await e(!1)}function wy(s,e){const n=Se(s);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),fd(n)?dd(n):ro(n).x_()&&hd(n,e))}function cd(s,e){const n=Se(s),i=ro(n);n.Ta.delete(e),i.x_()&&Ey(n,e),n.Ta.size===0&&(i.x_()?i.B_():Qs(n)&&n.Aa.set("Unknown"))}function hd(s,e){if(s.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ro(s).H_(e)}function Ey(s,e){s.Ra.$e(e),ro(s).Y_(e)}function dd(s){s.Ra=new oE({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>s.Ta.get(e)||null,lt:()=>s.datastore.serializer.databaseId}),ro(s).start(),s.Aa.aa()}function fd(s){return Qs(s)&&!ro(s).M_()&&s.Ta.size>0}function Qs(s){return Se(s).Ia.size===0}function Ty(s){s.Ra=void 0}async function f1(s){s.Aa.set("Online")}async function m1(s){s.Ta.forEach(((e,n)=>{hd(s,e)}))}async function p1(s,e){Ty(s),fd(s)?(s.Aa.la(e),dd(s)):s.Aa.set("Unknown")}async function g1(s,e,n){if(s.Aa.set("Online"),e instanceof oy&&e.state===2&&e.cause)try{await(async function(a,c){const f=c.cause;for(const g of c.targetIds)a.Ta.has(g)&&(await a.remoteSyncer.rejectListen(g,f),a.Ta.delete(g),a.Ra.removeTarget(g))})(s,e)}catch(i){ae(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await du(s,i)}else if(e instanceof Zl?s.Ra.Ye(e):e instanceof iy?s.Ra.it(e):s.Ra.et(e),!n.isEqual(Ie.min()))try{const i=await yy(s.localStore);n.compareTo(i)>=0&&await(function(c,f){const g=c.Ra.Pt(f);return g.targetChanges.forEach(((v,w)=>{if(v.resumeToken.approximateByteSize()>0){const N=c.Ta.get(w);N&&c.Ta.set(w,N.withResumeToken(v.resumeToken,f))}})),g.targetMismatches.forEach(((v,w)=>{const N=c.Ta.get(v);if(!N)return;c.Ta.set(v,N.withResumeToken(jt.EMPTY_BYTE_STRING,N.snapshotVersion)),Ey(c,v);const x=new Kr(N.target,v,w,N.sequenceNumber);hd(c,x)})),c.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(i){ae(Ws,"Failed to raise snapshot:",i),await du(s,i)}}async function du(s,e,n){if(!to(e))throw e;s.Ia.add(1),await Sa(s),s.Aa.set("Offline"),n||(n=()=>yy(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ae(Ws,"Retrying IndexedDB access"),await n(),s.Ia.delete(1),await Nu(s)}))}function Iy(s,e){return e().catch((n=>du(s,n,e)))}async function Au(s){const e=Se(s),n=os(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Kh;for(;y1(e);)try{const a=await JE(e.localStore,i);if(a===null){e.Pa.length===0&&n.B_();break}i=a.batchId,v1(e,a)}catch(a){await du(e,a)}Sy(e)&&Ny(e)}function y1(s){return Qs(s)&&s.Pa.length<10}function v1(s,e){s.Pa.push(e);const n=os(s);n.x_()&&n.Z_&&n.X_(e.mutations)}function Sy(s){return Qs(s)&&!os(s).M_()&&s.Pa.length>0}function Ny(s){os(s).start()}async function _1(s){os(s).na()}async function w1(s){const e=os(s);for(const n of s.Pa)e.X_(n.mutations)}async function E1(s,e,n){const i=s.Pa.shift(),a=rd.from(i,e,n);await Iy(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Au(s)}async function T1(s,e){e&&os(s).Z_&&await(async function(i,a){if((function(f){return sE(f)&&f!==W.ABORTED})(a.code)){const c=i.Pa.shift();os(i).N_(),await Iy(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Au(i)}})(s,e),Sy(s)&&Ny(s)}async function qp(s,e){const n=Se(s);n.asyncQueue.verifyOperationInProgress(),ae(Ws,"RemoteStore received new credentials");const i=Qs(n);n.Ia.add(3),await Sa(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Nu(n)}async function I1(s,e){const n=Se(s);e?(n.Ia.delete(2),await Nu(n)):e||(n.Ia.add(2),await Sa(n),n.Aa.set("Unknown"))}function ro(s){return s.Va||(s.Va=(function(n,i,a){const c=Se(n);return c.ia(),new a1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:f1.bind(null,s),e_:m1.bind(null,s),n_:p1.bind(null,s),J_:g1.bind(null,s)}),s.da.push((async e=>{e?(s.Va.N_(),fd(s)?dd(s):s.Aa.set("Unknown")):(await s.Va.stop(),Ty(s))}))),s.Va}function os(s){return s.ma||(s.ma=(function(n,i,a){const c=Se(n);return c.ia(),new l1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),e_:_1.bind(null,s),n_:T1.bind(null,s),ea:w1.bind(null,s),ta:E1.bind(null,s)}),s.da.push((async e=>{e?(s.ma.N_(),await Au(s)):(await s.ma.stop(),s.Pa.length>0&&(ae(Ws,`Stopping write stream with ${s.Pa.length} pending writes`),s.Pa=[]))}))),s.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,i,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,c){const f=Date.now()+i,g=new md(e,n,f,a,c);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pd(s,e){if(Er("AsyncQueue",`${e}: ${s}`),to(s))return new ie(W.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{static emptySet(e){return new Wi(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ye.comparator(n.key,i.key):(n,i)=>ye.comparator(n.key,i.key),this.keyedMap=ra(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Wi;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.fa=new nt(ye.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ee(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Xi{constructor(e,n,i,a,c,f,g,v,w){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=w}static fromInitialDocuments(e,n,i,a,c){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new Xi(e,n,Wi.emptySet(n),f,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class N1{constructor(){this.queries=Gp(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const a=Se(n),c=a.queries;a.queries=Gp(),c.forEach(((f,g)=>{for(const v of g.wa)v.onError(i)}))})(this,new ie(W.ABORTED,"Firestore shutting down"))}}function Gp(){return new Gs((s=>Wg(s)),_u)}async function Ay(s,e){const n=Se(s);let i=3;const a=e.query;let c=n.queries.get(a);c?!c.Sa()&&e.ba()&&(i=2):(c=new S1,i=e.ba()?0:1);try{switch(i){case 0:c.ya=await n.onListen(a,!0);break;case 1:c.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const g=pd(f,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(g)}n.queries.set(a,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&gd(n)}async function xy(s,e){const n=Se(s),i=e.query;let a=3;const c=n.queries.get(i);if(c){const f=c.wa.indexOf(e);f>=0&&(c.wa.splice(f,1),c.wa.length===0?a=e.ba()?0:1:!c.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function A1(s,e){const n=Se(s);let i=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const g of f.wa)g.Ca(a)&&(i=!0);f.ya=a}}i&&gd(n)}function x1(s,e,n){const i=Se(s),a=i.queries.get(e);if(a)for(const c of a.wa)c.onError(n);i.queries.delete(e)}function gd(s){s.Da.forEach((e=>{e.next()}))}var bh,Qp;(Qp=bh||(bh={})).Fa="default",Qp.Cache="cache";class Cy{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Xi(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==bh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this.key=e}}class Ry{constructor(e){this.key=e}}class C1{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pe(),this.mutatedKeys=Pe(),this.Xa=Gg(e),this.eu=new Wi(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new Wp,a=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,g=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,w=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((N,x)=>{const I=a.get(N),k=wu(this.query,x)?x:null,U=!!I&&this.mutatedKeys.has(I.key),q=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let H=!1;I&&k?I.data.isEqual(k.data)?U!==q&&(i.track({type:3,doc:k}),H=!0):this.iu(I,k)||(i.track({type:2,doc:k}),H=!0,(v&&this.Xa(k,v)>0||w&&this.Xa(k,w)<0)&&(g=!0)):!I&&k?(i.track({type:0,doc:k}),H=!0):I&&!k&&(i.track({type:1,doc:I}),H=!0,(v||w)&&(g=!0)),H&&(k?(f=f.add(k),c=q?c.add(N):c.delete(N)):(f=f.delete(N),c=c.delete(N)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const N=this.query.limitType==="F"?f.last():f.first();f=f.delete(N.key),c=c.delete(N.key),i.track({type:1,doc:N})}return{eu:f,ru:i,Ds:g,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const f=e.ru.pa();f.sort(((N,x)=>(function(k,U){const q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{At:H})}};return q(k)-q(U)})(N.type,x.type)||this.Xa(N.doc,x.doc))),this.su(i),a=a!=null&&a;const g=n&&!a?this.ou():[],v=this.Za.size===0&&this.current&&!a?1:0,w=v!==this.Ya;return this.Ya=v,f.length!==0||w?{snapshot:new Xi(this.query,e.eu,c,f,e.mutatedKeys,v===0,w,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:g}:{_u:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Wp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pe(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new Ry(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new Py(i))})),n}uu(e){this.Ha=e.qs,this.Za=Pe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Xi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const yd="SyncEngine";class P1{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class R1{constructor(e){this.key=e,this.lu=!1}}class k1{constructor(e,n,i,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.hu={},this.Pu=new Gs((g=>Wg(g)),_u),this.Tu=new Map,this.Iu=new Set,this.du=new nt(ye.comparator),this.Eu=new Map,this.Au=new od,this.Ru={},this.Vu=new Map,this.mu=Yi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function j1(s,e,n=!0){const i=Oy(s);let a;const c=i.Pu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.cu()):a=await ky(i,e,n,!0),a}async function V1(s,e){const n=Oy(s);await ky(n,e,!0,!1)}async function ky(s,e,n,i){const a=await ZE(s.localStore,Yn(e)),c=a.targetId,f=s.sharedClientState.addLocalQueryTarget(c,n);let g;return i&&(g=await D1(s,e,c,f==="current",a.resumeToken)),s.isPrimaryClient&&n&&wy(s.remoteStore,a),g}async function D1(s,e,n,i,a){s.gu=(x,I,k)=>(async function(q,H,ce,se){let Y=H.view.nu(ce);Y.Ds&&(Y=await Up(q.localStore,H.query,!1).then((({documents:C})=>H.view.nu(C,Y))));const ee=se&&se.targetChanges.get(H.targetId),he=se&&se.targetMismatches.get(H.targetId)!=null,M=H.view.applyChanges(Y,q.isPrimaryClient,ee,he);return Yp(q,H.targetId,M._u),M.snapshot})(s,x,I,k);const c=await Up(s.localStore,e,!0),f=new C1(e,c.qs),g=f.nu(c.documents),v=Ia.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",a),w=f.applyChanges(g,s.isPrimaryClient,v);Yp(s,n,w._u);const N=new P1(e,n,f);return s.Pu.set(e,N),s.Tu.has(n)?s.Tu.get(n).push(e):s.Tu.set(n,[e]),w.snapshot}async function M1(s,e,n){const i=Se(s),a=i.Pu.get(e),c=i.Tu.get(a.targetId);if(c.length>1)return i.Tu.set(a.targetId,c.filter((f=>!_u(f,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Oh(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&cd(i.remoteStore,a.targetId),Fh(i,a.targetId)})).catch(eo)):(Fh(i,a.targetId),await Oh(i.localStore,a.targetId,!0))}async function O1(s,e){const n=Se(s),i=n.Pu.get(e),a=n.Tu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),cd(n.remoteStore,i.targetId))}async function L1(s,e,n){const i=H1(s);try{const a=await(function(f,g){const v=Se(f),w=Ye.now(),N=g.reduce(((k,U)=>k.add(U.key)),Pe());let x,I;return v.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let U=Tr(),q=Pe();return v.Os.getEntries(k,N).next((H=>{U=H,U.forEach(((ce,se)=>{se.isValidDocument()||(q=q.add(ce))}))})).next((()=>v.localDocuments.getOverlayedDocuments(k,U))).next((H=>{x=H;const ce=[];for(const se of g){const Y=Zw(se,x.get(se.key).overlayedDocument);Y!=null&&ce.push(new cs(se.key,Y,bg(Y.value.mapValue),En.exists(!0)))}return v.mutationQueue.addMutationBatch(k,w,ce,g)})).next((H=>{I=H;const ce=H.applyToLocalDocumentSet(x,q);return v.documentOverlayCache.saveOverlays(k,H.batchId,ce)}))})).then((()=>({batchId:I.batchId,changes:Kg(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(f,g,v){let w=f.Ru[f.currentUser.toKey()];w||(w=new nt(Ae)),w=w.insert(g,v),f.Ru[f.currentUser.toKey()]=w})(i,a.batchId,n),await Na(i,a.changes),await Au(i.remoteStore)}catch(a){const c=pd(a,"Failed to persist write");n.reject(c)}}async function jy(s,e){const n=Se(s);try{const i=await YE(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const f=n.Eu.get(c);f&&(Ue(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.lu=!0:a.modifiedDocuments.size>0?Ue(f.lu,14607):a.removedDocuments.size>0&&(Ue(f.lu,42227),f.lu=!1))})),await Na(n,i,e)}catch(i){await eo(i)}}function Kp(s,e,n){const i=Se(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Pu.forEach(((c,f)=>{const g=f.view.va(e);g.snapshot&&a.push(g.snapshot)})),(function(f,g){const v=Se(f);v.onlineState=g;let w=!1;v.queries.forEach(((N,x)=>{for(const I of x.wa)I.va(g)&&(w=!0)})),w&&gd(v)})(i.eventManager,e),a.length&&i.hu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function b1(s,e,n){const i=Se(s);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),c=a&&a.key;if(c){let f=new nt(ye.comparator);f=f.insert(c,Ft.newNoDocument(c,Ie.min()));const g=Pe().add(c),v=new Iu(Ie.min(),new Map,new nt(Ae),f,g);await jy(i,v),i.du=i.du.remove(c),i.Eu.delete(e),vd(i)}else await Oh(i.localStore,e,!1).then((()=>Fh(i,e,n))).catch(eo)}async function F1(s,e){const n=Se(s),i=e.batch.batchId;try{const a=await KE(n.localStore,e);Dy(n,i,null),Vy(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Na(n,a)}catch(a){await eo(a)}}async function U1(s,e,n){const i=Se(s);try{const a=await(function(f,g){const v=Se(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let N;return v.mutationQueue.lookupMutationBatch(w,g).next((x=>(Ue(x!==null,37113),N=x.keys(),v.mutationQueue.removeMutationBatch(w,x)))).next((()=>v.mutationQueue.performConsistencyCheck(w))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(w,N,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,N))).next((()=>v.localDocuments.getDocuments(w,N)))}))})(i.localStore,e);Dy(i,e,n),Vy(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Na(i,a)}catch(a){await eo(a)}}function Vy(s,e){(s.Vu.get(e)||[]).forEach((n=>{n.resolve()})),s.Vu.delete(e)}function Dy(s,e,n){const i=Se(s);let a=i.Ru[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),i.Ru[i.currentUser.toKey()]=a}}function Fh(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Tu.get(e))s.Pu.delete(i),n&&s.hu.pu(i,n);s.Tu.delete(e),s.isPrimaryClient&&s.Au.zr(e).forEach((i=>{s.Au.containsKey(i)||My(s,i)}))}function My(s,e){s.Iu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(cd(s.remoteStore,n),s.du=s.du.remove(e),s.Eu.delete(n),vd(s))}function Yp(s,e,n){for(const i of n)i instanceof Py?(s.Au.addReference(i.key,e),z1(s,i)):i instanceof Ry?(ae(yd,"Document no longer in limbo: "+i.key),s.Au.removeReference(i.key,e),s.Au.containsKey(i.key)||My(s,i.key)):Ee(19791,{yu:i})}function z1(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Iu.has(i)||(ae(yd,"New document in limbo: "+n),s.Iu.add(i),vd(s))}function vd(s){for(;s.Iu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Iu.values().next().value;s.Iu.delete(e);const n=new ye(We.fromString(e)),i=s.mu.next();s.Eu.set(i,new R1(n)),s.du=s.du.insert(n,i),wy(s.remoteStore,new Kr(Yn(ed(n.path)),i,"TargetPurposeLimboResolution",gu.ue))}}async function Na(s,e,n){const i=Se(s),a=[],c=[],f=[];i.Pu.isEmpty()||(i.Pu.forEach(((g,v)=>{f.push(i.gu(v,e,n).then((w=>{var N;if((w||n)&&i.isPrimaryClient){const x=w?!w.fromCache:(N=n==null?void 0:n.targetChanges.get(v.targetId))===null||N===void 0?void 0:N.current;i.sharedClientState.updateQueryState(v.targetId,x?"current":"not-current")}if(w){a.push(w);const x=ld.Es(v.targetId,w);c.push(x)}})))})),await Promise.all(f),i.hu.J_(a),await(async function(v,w){const N=Se(v);try{await N.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>G.forEach(w,(I=>G.forEach(I.Is,(k=>N.persistence.referenceDelegate.addReference(x,I.targetId,k))).next((()=>G.forEach(I.ds,(k=>N.persistence.referenceDelegate.removeReference(x,I.targetId,k)))))))))}catch(x){if(!to(x))throw x;ae(ud,"Failed to update sequence numbers: "+x)}for(const x of w){const I=x.targetId;if(!x.fromCache){const k=N.Fs.get(I),U=k.snapshotVersion,q=k.withLastLimboFreeSnapshotVersion(U);N.Fs=N.Fs.insert(I,q)}}})(i.localStore,c))}async function B1(s,e){const n=Se(s);if(!n.currentUser.isEqual(e)){ae(yd,"User change. New user:",e.toKey());const i=await gy(n.localStore,e);n.currentUser=e,(function(c,f){c.Vu.forEach((g=>{g.forEach((v=>{v.reject(new ie(W.CANCELLED,f))}))})),c.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Na(n,i.Bs)}}function $1(s,e){const n=Se(s),i=n.Eu.get(e);if(i&&i.lu)return Pe().add(i.key);{let a=Pe();const c=n.Tu.get(e);if(!c)return a;for(const f of c){const g=n.Pu.get(f);a=a.unionWith(g.view.tu)}return a}}function Oy(s){const e=Se(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=jy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b1.bind(null,e),e.hu.J_=A1.bind(null,e.eventManager),e.hu.pu=x1.bind(null,e.eventManager),e}function H1(s){const e=Se(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U1.bind(null,e),e}class fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return QE(this.persistence,new qE,e.initialUser,this.serializer)}Du(e){return new py(ad.Vi,this.serializer)}bu(e){return new t1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fu.provider={build:()=>new fu};class q1 extends fu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ue(this.persistence.referenceDelegate instanceof hu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new RE(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new py((i=>hu.Vi(i,n)),this.serializer)}}class Uh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Kp(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=B1.bind(null,this.syncEngine),await I1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new N1})()}createDatastore(e){const n=Su(e.databaseInfo.databaseId),i=(function(c){return new o1(c)})(e.databaseInfo);return(function(c,f,g,v){return new c1(c,f,g,v)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,c,f,g){return new d1(i,a,c,f,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Kp(this.syncEngine,n,0)),(function(){return $p.C()?new $p:new n1})())}createSyncEngine(e,n){return(function(a,c,f,g,v,w,N){const x=new k1(a,c,f,g,v,w);return N&&(x.fu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const c=Se(a);ae(Ws,"RemoteStore shutting down."),c.Ia.add(5),await Sa(c),c.Ea.shutdown(),c.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Uh.provider={build:()=>new Uh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="FirestoreClient";class W1{constructor(e,n,i,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=bt.UNAUTHENTICATED,this.clientId=Qh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async f=>{ae(as,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(ae(as,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=pd(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function vh(s,e){s.asyncQueue.verifyOperationInProgress(),ae(as,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await gy(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>{ts("Terminating Firestore due to IndexedDb database deletion"),s.terminate().then((()=>{ae("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{ts("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),s._offlineComponents=e}async function Xp(s,e){s.asyncQueue.verifyOperationInProgress();const n=await G1(s);ae(as,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>qp(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>qp(e.remoteStore,a))),s._onlineComponents=e}async function G1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ae(as,"Using user provided OfflineComponentProvider");try{await vh(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;ts("Error using user provided cache. Falling back to memory cache: "+n),await vh(s,new fu)}}else ae(as,"Using default OfflineComponentProvider"),await vh(s,new q1(void 0));return s._offlineComponents}async function by(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ae(as,"Using user provided OnlineComponentProvider"),await Xp(s,s._uninitializedComponentsProvider._online)):(ae(as,"Using default OnlineComponentProvider"),await Xp(s,new Uh))),s._onlineComponents}function Q1(s){return by(s).then((e=>e.syncEngine))}async function zh(s){const e=await by(s),n=e.eventManager;return n.onListen=j1.bind(null,e.syncEngine),n.onUnlisten=M1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=V1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=O1.bind(null,e.syncEngine),n}function K1(s,e,n={}){const i=new Zr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,g,v,w){const N=new Ly({next:I=>{N.Ou(),f.enqueueAndForget((()=>xy(c,x))),I.fromCache&&v.source==="server"?w.reject(new ie(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(I)},error:I=>w.reject(I)}),x=new Cy(g,N,{includeMetadataChanges:!0,ka:!0});return Ay(c,x)})(await zh(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="firestore.googleapis.com",Zp=!0;class eg{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uy,this.ssl=Zp}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Zp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=my;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CE)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fy((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xu{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new rw;switch(i.type){case"firstParty":return new aw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Jp.get(n);i&&(ae("ComponentProvider","Removing Datastore"),Jp.delete(n),i.terminate())})(this),Promise.resolve()}}function Y1(s,e,n,i={}){var a;s=wn(s,xu);const c=qh(e),f=s._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:s._getEmulatorOptions()}),v=`${e}:${n}`;c&&(R_(`https://${v}`),D_("Firestore",!0)),f.host!==Uy&&f.host!==v&&ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w=Object.assign(Object.assign({},f),{host:v,ssl:c,emulatorOptions:i});if(!nu(w,g)&&(s._setSettings(w),i.mockUserToken)){let N,x;if(typeof i.mockUserToken=="string")N=i.mockUserToken,x=bt.MOCK_USER;else{N=k_(i.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new ie(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new bt(I)}s._authCredentials=new sw(new Ng(N,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class at{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ea(n,at._jsonSchema))return new at(e,i||null,new ye(We.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:dt("string",at._jsonSchemaVersion),referencePath:dt("string")};class es extends hs{constructor(e,n,i){super(e,n,ed(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new ye(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function zy(s,e,...n){if(s=er(s),xg("collection","path",e),s instanceof xu){const i=We.fromString(e,...n);return fp(i),new es(s,null,i)}{if(!(s instanceof at||s instanceof es))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(We.fromString(e,...n));return fp(i),new es(s.firestore,null,i)}}function Aa(s,e,...n){if(s=er(s),arguments.length===1&&(e=Qh.newId()),xg("doc","path",e),s instanceof xu){const i=We.fromString(e,...n);return dp(i),new at(s,null,new ye(i))}{if(!(s instanceof at||s instanceof es))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(We.fromString(e,...n));return dp(i),new at(s.firestore,s instanceof es?s.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="AsyncQueue";class ng{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new vy(this,"async_queue_retry"),this.oc=()=>{const i=yh();i&&ae(tg,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=yh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=yh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Zr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!to(e))throw e;ae(tg,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Er("INTERNAL UNHANDLED ERROR: ",rg(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=md.createAndSchedule(this,e,n,i,(c=>this.lc(c)));return this.ec.push(a),a}ac(){this.tc&&Ee(47125,{hc:rg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function rg(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of i)if(c in a&&typeof a[c]=="function")return!0;return!1})(s,["next","error","complete"])}class ls extends xu{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new ng,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ng(e),this._firestoreClient=void 0,await e}}}function X1(s,e){const n=typeof s=="object"?s:H0(),i=typeof s=="string"?s:ou,a=F0(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=C_("firestore");c&&Y1(a,...c)}return a}function _d(s){if(s._terminated)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||J1(s),s._firestoreClient}function J1(s){var e,n,i;const a=s._freezeSettings(),c=(function(g,v,w,N){return new Iw(g,v,w,N.host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,Fy(N.experimentalLongPollingOptions),N.useFetchStreams,N.isUsingEmulator)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new W1(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&(function(g){const v=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(v),_online:v}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(jt.fromBase64String(e))}catch(n){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ea(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:dt("string",_n._jsonSchemaVersion),bytes:dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jn._jsonSchemaVersion}}static fromJSON(e){if(Ea(e,Jn._jsonSchema))return new Jn(e.latitude,e.longitude)}}Jn._jsonSchemaVersion="firestore/geoPoint/1.0",Jn._jsonSchema={type:dt("string",Jn._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ea(e,Zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zn(e.vectorValues);throw new ie(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:dt("string",Zn._jsonSchemaVersion),vectorValues:dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=/^__.*__$/;class eT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ta(e,this.data,n,this.fieldTransforms)}}class By{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $y(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ec:s})}}class wd{constructor(e,n,i,a,c,f){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new wd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.fc(e),a}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return mu(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if($y(this.Ec)&&Z1.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class tT{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Su(e)}Dc(e,n,i,a=!1){return new wd({Ec:e,methodName:n,bc:i,path:kt.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(s){const e=s._freezeSettings(),n=Su(s._databaseId);return new tT(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Hy(s,e,n,i,a,c={}){const f=s.Dc(c.merge||c.mergeFields?2:0,e,n,a);Td("Data must be an object, but it was:",f,i);const g=qy(i,f);let v,w;if(c.merge)v=new ln(f.fieldMask),w=f.fieldTransforms;else if(c.mergeFields){const N=[];for(const x of c.mergeFields){const I=Bh(e,x,n);if(!f.contains(I))throw new ie(W.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Gy(N,I)||N.push(I)}v=new ln(N),w=f.fieldTransforms.filter((x=>v.covers(x.field)))}else v=null,w=f.fieldTransforms;return new eT(new Zt(g),v,w)}class ku extends Pu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ku}}class Ed extends Pu{_toFieldTransform(e){return new Kw(e.path,new va)}isEqual(e){return e instanceof Ed}}function nT(s,e,n,i){const a=s.Dc(1,e,n);Td("Data must be an object, but it was:",a,i);const c=[],f=Zt.empty();us(i,((v,w)=>{const N=Id(e,v,n);w=er(w);const x=a.gc(N);if(w instanceof ku)c.push(N);else{const I=xa(w,x);I!=null&&(c.push(N),f.set(N,I))}}));const g=new ln(c);return new By(f,g,a.fieldTransforms)}function rT(s,e,n,i,a,c){const f=s.Dc(1,e,n),g=[Bh(e,i,n)],v=[a];if(c.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)g.push(Bh(e,c[I])),v.push(c[I+1]);const w=[],N=Zt.empty();for(let I=g.length-1;I>=0;--I)if(!Gy(w,g[I])){const k=g[I];let U=v[I];U=er(U);const q=f.gc(k);if(U instanceof ku)w.push(k);else{const H=xa(U,q);H!=null&&(w.push(k),N.set(k,H))}}const x=new ln(w);return new By(N,x,f.fieldTransforms)}function sT(s,e,n,i=!1){return xa(n,s.Dc(i?4:3,e))}function xa(s,e){if(Wy(s=er(s)))return Td("Unsupported field value:",e,s),qy(s,e);if(s instanceof Pu)return(function(i,a){if(!$y(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,a){const c=[];let f=0;for(const g of i){let v=xa(g,a.yc(f));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),f++}return{arrayValue:{values:c}}})(s,e)}return(function(i,a){if((i=er(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Ww(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ye.fromDate(i);return{timestampValue:cu(a.serializer,c)}}if(i instanceof Ye){const c=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cu(a.serializer,c)}}if(i instanceof Jn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _n)return{bytesValue:ay(a.serializer,i._byteString)};if(i instanceof at){const c=a.databaseId,f=i.firestore._databaseId;if(!f.isEqual(c))throw a.wc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:id(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Zn)return(function(f,g){return{mapValue:{fields:{[Og]:{stringValue:Lg},[au]:{arrayValue:{values:f.toArray().map((w=>{if(typeof w!="number")throw g.wc("VectorValues must only contain numeric values.");return td(g.serializer,w)}))}}}}}})(i,a);throw a.wc(`Unsupported field value: ${pu(i)}`)})(s,e)}function qy(s,e){const n={};return Rg(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(s,((i,a)=>{const c=xa(a,e.Vc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function Wy(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ye||s instanceof Jn||s instanceof _n||s instanceof at||s instanceof Pu||s instanceof Zn)}function Td(s,e,n){if(!Wy(n)||!Cg(n)){const i=pu(n);throw i==="an object"?e.wc(s+" a custom object"):e.wc(s+" "+i)}}function Bh(s,e,n){if((e=er(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return Id(s,e);throw mu("Field path arguments must be of type string or ",s,!1,void 0,n)}const iT=new RegExp("[~\\*/\\[\\]]");function Id(s,e,n){if(e.search(iT)>=0)throw mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Cu(...e.split("."))._internalPath}catch{throw mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function mu(s,e,n,i,a){const c=i&&!i.isEmpty(),f=a!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(c||f)&&(v+=" (found",c&&(v+=` in field ${i}`),f&&(v+=` in document ${a}`),v+=")"),new ie(W.INVALID_ARGUMENT,g+s+v)}function Gy(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n,i,a,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oT extends Qy{data(){return super.data()}}function Sd(s,e){return typeof e=="string"?Id(s,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nd{}class Yy extends Nd{}function Xy(s,e,...n){let i=[];e instanceof Nd&&i.push(e),i=i.concat(n),(function(c){const f=c.filter((v=>v instanceof xd)).length,g=c.filter((v=>v instanceof Ad)).length;if(f>1||f>0&&g>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class Ad extends Yy{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ad(e,n,i)}_apply(e){const n=this._parse(e);return Zy(e._query,n),new hs(e.firestore,e.converter,Rh(e._query,n))}_parse(e){const n=Ru(e.firestore);return(function(c,f,g,v,w,N,x){let I;if(w.isKeyField()){if(N==="array-contains"||N==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${N}' queries on documentId().`);if(N==="in"||N==="not-in"){og(x,N);const U=[];for(const q of x)U.push(ig(v,c,q));I={arrayValue:{values:U}}}else I=ig(v,c,x)}else N!=="in"&&N!=="not-in"&&N!=="array-contains-any"||og(x,N),I=sT(g,f,x,N==="in"||N==="not-in");return ht.create(w,N,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class xd extends Nd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xd(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let f=a;const g=c.getFlattenedFilters();for(const v of g)Zy(f,v),f=Rh(f,v)})(e._query,n),new hs(e.firestore,e.converter,Rh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cd extends Yy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cd(e,n)}_apply(e){const n=(function(a,c,f){if(a.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ya(c,f)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(a,c){const f=a.explicitOrderBy.concat([c]);return new no(a.path,a.collectionGroup,f,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Jy(s,e="asc"){const n=e,i=Sd("orderBy",s);return Cd._create(i,n)}function ig(s,e,n){if(typeof(n=er(n))=="string"){if(n==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qg(e)&&n.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(We.fromString(n));if(!ye.isDocumentKey(i))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ep(s,new ye(i))}if(n instanceof at)return Ep(s,n._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pu(n)}.`)}function og(s,e){if(!Array.isArray(s)||s.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zy(s,e){const n=(function(a,c){for(const f of a)for(const g of f.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aT{convertValue(e,n="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return us(e,((a,c)=>{i[a]=this.convertValue(c,n)})),i}convertVectorValue(e){var n,i,a;const c=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[au].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map((f=>ot(f.doubleValue)));return new Zn(c)}convertGeoPoint(e){return new Jn(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=vu(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ma(e));default:return null}}convertTimestamp(e){const n=rs(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=We.fromString(e);Ue(fy(i),9688,{name:e});const a=new pa(i.get(1),i.get(3)),c=new ye(i.popFirst(5));return a.isEqual(n)||Er(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $s extends Qy{constructor(e,n,i,a,c,f){super(e,n,i,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Sd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$s._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$s._jsonSchemaVersion="firestore/documentSnapshot/1.0",$s._jsonSchema={type:dt("string",$s._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class eu extends $s{data(e={}){return super.data(e)}}class Hs{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new ia(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new eu(this._firestore,this._userDataWriter,i.key,i,new ia(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((g=>{const v=new eu(a._firestore,a._userDataWriter,g.doc.key,g.doc,new ia(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const v=new eu(a._firestore,a._userDataWriter,g.doc.key,g.doc,new ia(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let w=-1,N=-1;return g.type!==0&&(w=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),N=f.indexOf(g.doc.key)),{type:lT(g.type),doc:v,oldIndex:w,newIndex:N}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lT(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:s})}}Hs._jsonSchemaVersion="firestore/querySnapshot/1.0",Hs._jsonSchema={type:dt("string",Hs._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class Pd extends aT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function Rd(s){s=wn(s,hs);const e=wn(s.firestore,ls),n=_d(e),i=new Pd(e);return Ky(s._query),K1(n,s._query).then((a=>new Hs(e,i,s,a)))}function uT(s,e,n){s=wn(s,at);const i=wn(s.firestore,ls),a=ev(s.converter,e);return ju(i,[Hy(Ru(i),"setDoc",s._key,a,s.converter!==null,n).toMutation(s._key,En.none())])}function tv(s,e,n,...i){s=wn(s,at);const a=wn(s.firestore,ls),c=Ru(a);let f;return f=typeof(e=er(e))=="string"||e instanceof Cu?rT(c,"updateDoc",s._key,e,n,i):nT(c,"updateDoc",s._key,e),ju(a,[f.toMutation(s._key,En.exists(!0))])}function nv(s){return ju(wn(s.firestore,ls),[new nd(s._key,En.none())])}function cT(s,e){const n=wn(s.firestore,ls),i=Aa(s),a=ev(s.converter,e);return ju(n,[Hy(Ru(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,En.exists(!1))]).then((()=>i))}function rv(s,...e){var n,i,a;s=er(s);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||sg(e[f])||(c=e[f++]);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(sg(e[f])){const x=e[f];e[f]=(n=x.next)===null||n===void 0?void 0:n.bind(x),e[f+1]=(i=x.error)===null||i===void 0?void 0:i.bind(x),e[f+2]=(a=x.complete)===null||a===void 0?void 0:a.bind(x)}let v,w,N;if(s instanceof at)w=wn(s.firestore,ls),N=ed(s._key.path),v={next:x=>{e[f]&&e[f](hT(w,s,x))},error:e[f+1],complete:e[f+2]};else{const x=wn(s,hs);w=wn(x.firestore,ls),N=x._query;const I=new Pd(w);v={next:k=>{e[f]&&e[f](new Hs(w,I,x,k))},error:e[f+1],complete:e[f+2]},Ky(s._query)}return(function(I,k,U,q){const H=new Ly(q),ce=new Cy(k,H,U);return I.asyncQueue.enqueueAndForget((async()=>Ay(await zh(I),ce))),()=>{H.Ou(),I.asyncQueue.enqueueAndForget((async()=>xy(await zh(I),ce)))}})(_d(w),N,g,v)}function ju(s,e){return(function(i,a){const c=new Zr;return i.asyncQueue.enqueueAndForget((async()=>L1(await Q1(i),a,c))),c.promise})(_d(s),e)}function hT(s,e,n){const i=n.docs.get(e._key),a=new Pd(s);return new $s(s,a,e._key,i,new ia(n.hasPendingWrites,n.fromCache),e.converter)}function Vu(){return new Ed("serverTimestamp")}(function(e,n=!0){(function(a){Zi=a})($0),su(new ha("firestore",((i,{instanceIdentifier:a,options:c})=>{const f=i.getProvider("app").getImmediate(),g=new ls(new iw(i.getProvider("auth-internal")),new lw(f,i.getProvider("app-check-internal")),(function(w,N){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(w.options.projectId,N)})(f,a),f);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),qi(ap,lp,e),qi(ap,lp,"esm2017")})();const dT={"2026-01-29":{day:1,name:"Matchday 1",ground:"Kicks on Grass",icon:""},"2026-01-30":{day:2,name:"Matchday 2",ground:"Kicks on Grass (Closed)",icon:""},"2026-02-02":{day:3,name:"Matchday 3",ground:"Vplay",icon:""}},fT=s=>dT[s]||{day:0,name:"Match",ground:"TBD",icon:""},mT=[{id:"match-1",matchNumber:1,home:"feel-united",away:"dhurandhars",date:"2026-01-29",time:"17:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-2",matchNumber:2,home:"userflow",away:"goaldiggers",date:"2026-01-29",time:"17:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-3",matchNumber:3,home:"userflow",away:"dhurandhars",date:"2026-01-29",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-4",matchNumber:4,home:"goaldiggers",away:"dhurandhars",date:"2026-01-29",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-5",matchNumber:5,home:"feel-united",away:"userflow",date:"2026-01-30",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-6",matchNumber:6,home:"goaldiggers",away:"feel-united",date:"2026-01-30",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-7",matchNumber:7,home:"dhurandhars",away:"userflow",date:"2026-01-30",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-8",matchNumber:8,home:"goaldiggers",away:"userflow",date:"2026-01-30",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-9",matchNumber:9,home:"dhurandhars",away:"feel-united",date:"2026-01-30",time:"20:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-10",matchNumber:10,home:"feel-united",away:"goaldiggers",date:"2026-02-02",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-11",matchNumber:11,home:"dhurandhars",away:"goaldiggers",date:"2026-02-02",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-12",matchNumber:12,home:"userflow",away:"feel-united",date:"2026-02-02",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-13",matchNumber:13,home:"tbd",away:"tbd",date:"2026-02-02",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!0}],pT=s=>new Date(s).toLocaleDateString("en-IN",{weekday:"short",month:"short",day:"numeric"}),sv=s=>{const[e,n]=s.split(":"),i=parseInt(e),a=i>=12?"PM":"AM";return`${i%12||12}:${n} ${a}`},gT={apiKey:"AIzaSyAYRukNJGOvVmL2jRAMgLtKkDzU7c6wo88",authDomain:"republic-cup-live.firebaseapp.com",projectId:"republic-cup-live",storageBucket:"republic-cup-live.firebasestorage.app",messagingSenderId:"642499294047",appId:"1:642499294047:web:f5a8b111b79bb8673abcea"},yT=pg(gT),so=X1(yT),kd=zy(so,"matches"),jd=zy(so,"predictions"),vT=async()=>{try{if((await Rd(kd)).empty){console.log("Seeding matches collection...");for(const e of mT)await uT(Aa(so,"matches",e.id),{...e,createdAt:Vu()});return console.log("Matches seeded successfully!"),!0}return!1}catch(s){return console.error("Error seeding matches:",s),!1}},_T=s=>{const e=Xy(kd,Jy("matchNumber"));return rv(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)},n=>{console.error("Error subscribing to matches:",n)})},Us=async(s,e)=>{try{const n=Aa(so,"matches",s);return await tv(n,{...e,updatedAt:Vu()}),!0}catch(n){return console.error("Error updating match:",n),!1}},wT=async s=>{try{return await cT(jd,{...s,submittedAt:Vu()}),!0}catch(e){return console.error("Error submitting prediction:",e),!1}},ET=s=>{const e=Xy(jd,Jy("submittedAt","desc"));return rv(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)})},TT=async()=>{try{const e=(await Rd(jd)).docs.map(n=>nv(n.ref));return await Promise.all(e),console.log("All predictions deleted"),!0}catch(s){return console.error("Error deleting predictions:",s),!1}},IT=async s=>{try{return await nv(Aa(so,"predictions",s)),console.log("Prediction deleted:",s),!0}catch(e){return console.error("Error deleting prediction:",e),!1}},ST=async()=>{try{const s=await Rd(kd);for(const e of s.docs){const n=e.data();if(n.date&&n.date.startsWith("2025-")){const i=n.date.replace("2025-","2026-");await tv(Aa(so,"matches",e.id),{date:i,updatedAt:Vu()})}}return console.log("All match dates updated to 2026!"),!0}catch(s){return console.error("Error updating match dates:",s),!1}},Ke={"feel-united":{id:"feel-united",name:"Feel United",shortName:"FEE",color:"#FFFFFF",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249520/spitha_prod_uploads/2026_01/feel_united_1769249519167.webp",manager:"Aniruddh Agrawal",players:["Ninad","Aditya Thakur","Umair","Sagar Awasthi","Sandipan Bala","Gahan","Rishab Khanna"]},dhurandhars:{id:"dhurandhars",name:"Dhurandhars",shortName:"DHU",color:"#000000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249469/spitha_prod_uploads/2026_01/durandhars_1769249467581.webp",manager:"Trivedi",players:["Sagar Singh","Raghu","Sukhpal","Mayank","Manish Pandey","Bharath Kumar","Shashank"]},goaldiggers:{id:"goaldiggers",name:"The Goaldiggers",shortName:"GDG",color:"#87CEEB",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249929/spitha_prod_uploads/2026_01/the_goaldiggers2_1769249927876.webp",manager:"AKG",players:["Parth Jhawar","Abdul Rehman","Pratham P","Durgesh Suthar","Navdeep","Rajendra Ranka","Dhrouv Pujari"]},userflow:{id:"userflow",name:"Userflow United",shortName:"UFU",color:"#FF0000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249558/spitha_prod_uploads/2026_01/userflow_united_1769249557427.webp",manager:"Mani",players:["Sumedh Zope","Avaneesh Kulkarni","Kushal","Jalaj Varshney","Anurag Kumar Singh","Sandeep Xavier","Hriday Bhatia"]}},iv=ge.createContext(null),Ir=()=>{const s=ge.useContext(iv);if(!s)throw new Error("useApp must be used within AppProvider");return s},NT=({children:s})=>{const[e,n]=ge.useState([]),[i,a]=ge.useState([]),[c,f]=ge.useState(!1),[g,v]=ge.useState(!0),[w,N]=ge.useState("matches");ge.useEffect(()=>{localStorage.getItem("republic-cup-admin")==="true"&&f(!0)},[]),ge.useEffect(()=>{let Y,ee;return(async()=>{await vT(),await ST(),Y=_T(M=>{n(M),v(!1)}),ee=ET(M=>{a(M)})})(),()=>{Y&&Y(),ee&&ee()}},[]);const x=ge.useCallback(Y=>Y==="5555"?(f(!0),localStorage.setItem("republic-cup-admin","true"),!0):!1,[]),I=ge.useCallback(()=>{f(!1),localStorage.removeItem("republic-cup-admin")},[]),k=ge.useCallback(()=>{const Y={};return Object.keys(Ke).forEach(ee=>{Y[ee]={teamId:ee,played:0,won:0,drawn:0,lost:0,goalsFor:0,goalsAgainst:0,goalDifference:0,points:0}}),e.filter(ee=>ee.status==="ft"&&!ee.isFinal).forEach(ee=>{const he=ee.home,M=ee.away,C=ee.scoreHome||0,S=ee.scoreAway||0;!Y[he]||!Y[M]||(Y[he].played++,Y[M].played++,Y[he].goalsFor+=C,Y[he].goalsAgainst+=S,Y[M].goalsFor+=S,Y[M].goalsAgainst+=C,C>S?(Y[he].won++,Y[he].points+=3,Y[M].lost++):C<S?(Y[M].won++,Y[M].points+=3,Y[he].lost++):(Y[he].drawn++,Y[M].drawn++,Y[he].points++,Y[M].points++))}),Object.values(Y).map(ee=>({...ee,goalDifference:ee.goalsFor-ee.goalsAgainst})).sort((ee,he)=>he.points!==ee.points?he.points-ee.points:he.goalDifference!==ee.goalDifference?he.goalDifference-ee.goalDifference:he.goalsFor-ee.goalsFor)},[e]),U=ge.useCallback(()=>{const Y={};return e.filter(ee=>ee.status==="ft").forEach(ee=>{(ee.goals||[]).forEach(he=>{const M=`${he.player}-${he.team}`;Y[M]||(Y[M]={player:he.player,team:he.team,goals:0}),Y[M].goals++})}),Object.values(Y).sort((ee,he)=>he.goals-ee.goals).slice(0,10)},[e]),q=ge.useCallback(()=>e.filter(Y=>Y.status==="upcoming"&&Y.home!=="tbd"),[e]),H=ge.useCallback(Y=>{const ee=i.filter(M=>M.matchId===Y),he={};return ee.forEach(M=>{M.predictedPlayer&&(he[M.predictedPlayer]=(he[M.predictedPlayer]||0)+1)}),Object.entries(he).sort((M,C)=>C[1]-M[1]).slice(0,3).map(([M,C])=>({player:M,count:C}))},[i]),ce=ge.useCallback(Y=>i.filter(ee=>ee.matchId===Y).length,[i]),se={matches:e,predictions:i,isAdmin:c,loading:g,activeTab:w,setActiveTab:N,loginAdmin:x,logoutAdmin:I,calculateTable:k,calculateTopScorers:U,getUpcomingMatches:q,getTopPredictedPlayers:H,getPredictionCount:ce};return d.jsx(iv.Provider,{value:se,children:s})},AT=({onClose:s})=>{const{loginAdmin:e}=Ir(),[n,i]=ge.useState(["","","",""]),[a,c]=ge.useState(!1),[f,g]=ge.useState(!1),v=[ge.useRef(),ge.useRef(),ge.useRef(),ge.useRef()];ge.useEffect(()=>{var I;(I=v[0].current)==null||I.focus()},[]);const w=(I,k)=>{var q;if(k&&!/^\d$/.test(k))return;const U=[...n];if(U[I]=k,i(U),c(!1),k&&I<3&&((q=v[I+1].current)==null||q.focus()),k&&I===3){const H=U.join("");setTimeout(()=>{e(H)?s():(c(!0),g(!0),setTimeout(()=>{var ce;g(!1),i(["","","",""]),(ce=v[0].current)==null||ce.focus()},500))},100)}},N=(I,k)=>{var U;k.key==="Backspace"&&!n[I]&&I>0&&((U=v[I-1].current)==null||U.focus())},x=I=>{I.preventDefault();const k=I.clipboardData.getData("text").slice(0,4);if(/^\d+$/.test(k)){const U=k.split("").concat(["","","",""]).slice(0,4);i(U),U[3]&&setTimeout(()=>{e(U.join(""))?s():(c(!0),g(!0),setTimeout(()=>{var q;g(!1),i(["","","",""]),(q=v[0].current)==null||q.focus()},500))},100)}};return d.jsx("div",{className:"modal-overlay",onClick:s,children:d.jsxs("div",{className:`modal-content pin-modal ${f?"shake":""}`,onClick:I=>I.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Admin Access"}),d.jsx("button",{className:"modal-close",onClick:s,children:""})]}),d.jsxs("div",{className:"pin-content",children:[d.jsx("p",{className:"pin-label",children:"Enter 4-digit PIN"}),d.jsx("div",{className:"pin-inputs",onPaste:x,children:n.map((I,k)=>d.jsx("input",{ref:v[k],type:"password",inputMode:"numeric",maxLength:1,value:I,onChange:U=>w(k,U.target.value),onKeyDown:U=>N(k,U),className:`pin-input ${a?"error":""}`,autoComplete:"off"},k))}),a&&d.jsx("p",{className:"pin-error",children:"Incorrect PIN. Try again."})]})]})})},xT=()=>{const{isAdmin:s,logoutAdmin:e}=Ir(),[n,i]=ge.useState(!1),[a,c]=ge.useState(0),f=()=>{const g=a+1;c(g),g>=3&&(i(!0),c(0)),setTimeout(()=>c(0),2e3)};return d.jsxs(d.Fragment,{children:[d.jsxs("header",{className:"header",children:[d.jsxs("div",{className:"header-content",children:[d.jsxs("div",{className:"header-brand",children:[d.jsx("img",{src:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249500/spitha_prod_uploads/2026_01/logo_1769249499164.webp",alt:"Scapia Offside",className:"header-logo"}),d.jsxs("div",{className:"header-title-group",children:[d.jsx("h1",{className:"header-title",children:"SCAPIA OFFSIDE"}),d.jsx("span",{className:"header-year",children:"2026"})]})]}),d.jsxs("div",{className:"header-actions",children:[s&&d.jsx("button",{className:"admin-badge",onClick:e,children:"ADMIN"}),d.jsx("span",{className:"version-tag",onClick:f,children:"v1.0"})]})]}),s&&d.jsx("div",{className:"admin-banner",children:"Admin Mode Active - You can edit matches"})]}),n&&d.jsx(AT,{onClose:()=>i(!1)})]})},CT=()=>{const{activeTab:s,setActiveTab:e,matches:n}=Ir(),i=n.filter(c=>c.status==="live").length,a=[{id:"matches",label:"Matches",icon:d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}),d.jsx("path",{d:"M2 12h20"})]}),badge:i>0?i:null},{id:"table",label:"Table",icon:d.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{d:"M3 3h18v18H3zM3 9h18M3 15h18M9 3v18"})})},{id:"polls",label:"Polls",icon:d.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{d:"M18 20V10M12 20V4M6 20v-6"})}),tag:"WIN"},{id:"rules",label:"Rules",icon:d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),d.jsx("polyline",{points:"14 2 14 8 20 8"}),d.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),d.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),d.jsx("polyline",{points:"10 9 9 9 8 9"})]})}];return d.jsx("nav",{className:"bottom-nav",children:d.jsx("div",{className:"nav-content",children:a.map(c=>d.jsxs("button",{className:`nav-item ${s===c.id?"active":""}`,onClick:()=>e(c.id),children:[d.jsxs("div",{className:"nav-icon-wrapper",children:[d.jsx("span",{className:"nav-icon",children:c.icon}),c.badge&&d.jsx("span",{className:"nav-badge",children:c.badge}),c.tag&&d.jsx("span",{className:"nav-tag",children:c.tag})]}),d.jsx("span",{className:"nav-label",children:c.label})]},c.id))})})},PT=({teamId:s,otherTeamId:e,isHome:n,onSelect:i,onClose:a})=>{const c=Ke[s],[f,g]=ge.useState(null),[v,w]=ge.useState("scorer");if(!c)return null;const N=k=>{k==="Own Goal"?i(k,s,null):(g(k),w("assist"))},x=k=>{i(f,s,k)},I=((c==null?void 0:c.players)||[]).filter(k=>k!==f).map(k=>({name:k,team:s,teamName:c.shortName}));return d.jsx("div",{className:"modal-overlay",onClick:a,children:d.jsxs("div",{className:"modal-content goal-modal",onClick:k=>k.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:v==="scorer"?"Who Scored?":"Who Assisted?"}),d.jsx("button",{className:"modal-close",onClick:a,children:""})]}),d.jsx("div",{className:"goal-modal-content",children:v==="scorer"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"goal-team-header",children:[d.jsx("img",{src:c.logo,alt:c.name,className:"goal-team-logo"}),d.jsx("span",{className:"goal-team-name",children:c.name})]}),d.jsxs("div",{className:"player-grid",children:[c.players.map(k=>d.jsxs("button",{className:"player-btn",onClick:()=>N(k),children:[d.jsx("span",{className:"player-initial",children:k.charAt(0)}),d.jsx("span",{className:"player-name",children:k})]},k)),d.jsxs("button",{className:"player-btn own-goal",onClick:()=>N("Own Goal"),children:[d.jsx("span",{className:"player-initial",children:"OG"}),d.jsx("span",{className:"player-name",children:"Own Goal"})]})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"assist-header",children:d.jsxs("span",{className:"scorer-info",children:["Goal: ",d.jsx("strong",{children:f})]})}),d.jsxs("div",{className:"player-grid assist-grid",children:[d.jsxs("button",{className:"player-btn no-assist",onClick:()=>x(null),children:[d.jsx("span",{className:"player-initial",children:"-"}),d.jsx("span",{className:"player-name",children:"No Assist"})]}),I.map(k=>d.jsxs("button",{className:"player-btn",onClick:()=>x(k.name),children:[d.jsx("span",{className:"player-initial",children:k.name.charAt(0)}),d.jsx("span",{className:"player-name",children:k.name}),d.jsx("span",{className:"player-team-tag",children:k.teamName})]},`${k.name}-${k.team}`))]}),d.jsx("button",{className:"back-btn",onClick:()=>w("scorer"),children:" Back to scorer"})]})})]})})},RT=({match:s,onClose:e})=>{var he;const{predictions:n}=Ir(),[i,a]=ge.useState(s.status),[c,f]=ge.useState(null),[g,v]=ge.useState(!1),[w,N]=ge.useState(s.manOfTheMatch||""),x=Ke[s.home]||{name:"TBD",shortName:"TBD"},I=Ke[s.away]||{name:"TBD",shortName:"TBD"},k=async M=>{v(!0),await Us(s.id,{status:M}),a(M),v(!1)},U=async()=>{window.confirm("Are you sure you want to reset the score to 0-0?")&&(v(!0),await Us(s.id,{scoreHome:0,scoreAway:0,goals:[]}),v(!1))},q=async(M,C,S,j)=>{v(!0);const E={player:M,team:C,assist:S||null,timestamp:new Date().toISOString()},P=[...s.goals||[],E],V=P.filter(we=>we.team===s.home).length,A=P.filter(we=>we.team===s.away).length;await Us(s.id,{goals:P,scoreHome:V,scoreAway:A}),f(null),v(!1)},H=async M=>{const C=M?s.home:s.away;if((s.goals||[]).filter(A=>A.team===C).length===0)return;const j=s.goals.map(A=>A.team).lastIndexOf(C),E=s.goals.filter((A,we)=>we!==j),P=E.filter(A=>A.team===s.home).length,V=E.filter(A=>A.team===s.away).length;v(!0),await Us(s.id,{goals:E,scoreHome:P,scoreAway:V}),v(!1)},ce=ge.useMemo(()=>n.filter(M=>M.matchId===s.id).sort((M,C)=>{var E,P,V,A;const S=((P=(E=M.submittedAt)==null?void 0:E.toDate)==null?void 0:P.call(E))||new Date(M.submittedAt),j=((A=(V=C.submittedAt)==null?void 0:V.toDate)==null?void 0:A.call(V))||new Date(C.submittedAt);return S-j}),[n,s.id]),se=ge.useMemo(()=>{const M=new Set;return ce.map(C=>{var E;const S=(E=C.userName)==null?void 0:E.toLowerCase().trim(),j=!M.has(S);return M.add(S),{...C,isFirstEntry:j}})},[ce]),Y=ge.useMemo(()=>{const M={};return(s.goals||[]).forEach(C=>{const S=`${C.player}-${C.team}`;M[S]||(M[S]={player:C.player,team:C.team,goals:0}),M[S].goals++}),Object.values(M).sort((C,S)=>S.goals-C.goals)},[s.goals]),ee=async()=>{if(!w){alert("Please select a Man of the Match");return}v(!0);const C=se.filter(S=>S.isFirstEntry&&S.predictedPlayer===w).map(S=>S.userName);await Us(s.id,{manOfTheMatch:w,momWinners:C,momPublishedAt:new Date().toISOString()}),v(!1),alert(`Man of the Match: ${w}
Winners: ${C.length>0?C.join(", "):"No correct predictions"}`)};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal-content admin-modal",onClick:M=>M.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h2",{children:["Edit Match ",s.matchNumber]}),d.jsx("button",{className:"modal-close",onClick:e,children:""})]}),d.jsxs("div",{className:"admin-content",children:[d.jsxs("div",{className:"admin-match-info",children:[d.jsxs("div",{className:"admin-team",children:[x.logo&&d.jsx("img",{src:x.logo,alt:x.name}),d.jsx("span",{children:x.shortName})]}),d.jsxs("div",{className:"admin-score",children:[d.jsx("span",{children:s.scoreHome}),d.jsx("span",{className:"admin-score-sep",children:"-"}),d.jsx("span",{children:s.scoreAway})]}),d.jsxs("div",{className:"admin-team",children:[I.logo&&d.jsx("img",{src:I.logo,alt:I.name}),d.jsx("span",{children:I.shortName})]})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("label",{children:"Match Status"}),d.jsx("div",{className:"status-buttons",children:["upcoming","live","ft"].map(M=>d.jsx("button",{className:`status-btn ${i===M?"active":""} status-${M}`,onClick:()=>k(M),disabled:g,children:M==="upcoming"?"Upcoming":M==="live"?"Live":"Full Time"},M))})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("label",{children:"Predictions Lock (2 PM Rule)"}),d.jsx("button",{className:`lock-btn ${s.predictionsLocked?"locked":""}`,onClick:async()=>{v(!0),await Us(s.id,{predictionsLocked:!s.predictionsLocked}),v(!1)},disabled:g,children:s.predictionsLocked?" Predictions Locked":" Predictions Open"})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("label",{children:"Add Goal"}),d.jsxs("div",{className:"goal-buttons",children:[d.jsxs("button",{className:"goal-btn home",onClick:()=>f("home"),disabled:g||s.home==="tbd",children:["+ Goal ",x.shortName]}),d.jsxs("button",{className:"goal-btn away",onClick:()=>f("away"),disabled:g||s.away==="tbd",children:["+ Goal ",I.shortName]})]})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("label",{children:"Remove Last Goal"}),d.jsxs("div",{className:"goal-buttons",children:[d.jsxs("button",{className:"remove-btn",onClick:()=>H(!0),disabled:g||!(s.goals||[]).some(M=>M.team===s.home),children:["- ",x.shortName]}),d.jsxs("button",{className:"remove-btn",onClick:()=>H(!1),disabled:g||!(s.goals||[]).some(M=>M.team===s.away),children:["- ",I.shortName]})]})]}),s.goals&&s.goals.length>0&&d.jsxs("div",{className:"admin-section",children:[d.jsx("label",{children:"Goal Log"}),d.jsx("div",{className:"goal-log",children:s.goals.map((M,C)=>{const S=Ke[M.team];return d.jsxs("div",{className:"goal-log-item",children:[d.jsxs("span",{className:"goal-time",children:[C+1,"."]}),d.jsx("span",{className:"goal-player",children:M.player}),d.jsxs("span",{className:"goal-team",children:["(",S==null?void 0:S.shortName,")"]}),M.assist&&d.jsxs("span",{className:"goal-assist",children:["A: ",M.assist]})]},C)})})]}),i==="ft"&&d.jsxs("div",{className:"admin-section mom-section",children:[d.jsx("label",{children:"Man of the Match"}),Y.length>0?d.jsxs(d.Fragment,{children:[d.jsxs("select",{className:"mom-select",value:w,onChange:M=>N(M.target.value),disabled:g||s.momPublishedAt,children:[d.jsx("option",{value:"",children:"-- Select Man of the Match --"}),Y.map(M=>{const C=Ke[M.team];return d.jsxs("option",{value:M.player,children:[M.player," (",C==null?void 0:C.shortName,") - ",M.goals," goal",M.goals>1?"s":""]},`${M.player}-${M.team}`)}),d.jsx("option",{value:"referee_decision",children:"Referee Decision (0-0 Draw)"})]}),s.momPublishedAt?d.jsxs("div",{className:"mom-published",children:["Published: ",s.manOfTheMatch,((he=s.momWinners)==null?void 0:he.length)>0&&d.jsxs("span",{className:"mom-winners",children:["Winners: ",s.momWinners.join(", ")]})]}):d.jsx("button",{className:"publish-btn",onClick:ee,disabled:g||!w,children:"Publish Winner"})]}):d.jsx("p",{className:"no-goals-msg",children:'No goals scored yet. Add goals or select "Referee Decision".'})]}),se.length>0&&d.jsxs("div",{className:"admin-section",children:[d.jsxs("label",{children:["Predictions (",se.length,") - Sorted by submission time (earliest first)"]}),d.jsx("div",{className:"predictions-log",children:se.map((M,C)=>{var E,P;const j=(((P=(E=M.submittedAt)==null?void 0:E.toDate)==null?void 0:P.call(E))||new Date(M.submittedAt)).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"});return d.jsxs("div",{className:`prediction-log-item ${M.isFirstEntry?"":"duplicate"} ${M.predictedPlayer===w?"winner":""}`,children:[d.jsxs("span",{className:"pred-index",children:[C+1,"."]}),d.jsx("span",{className:"pred-time",children:j}),d.jsx("span",{className:"pred-user",children:M.userName}),d.jsx("span",{className:"pred-arrow",children:""}),d.jsx("span",{className:"pred-player",children:M.predictedPlayer}),!M.isFirstEntry&&d.jsx("span",{className:"pred-dup-badge",children:"DUP"}),M.isFirstEntry&&M.predictedPlayer===w&&d.jsx("span",{className:"pred-win-badge",children:"WIN"}),d.jsx("button",{className:"pred-delete-btn",onClick:()=>{window.confirm(`Delete prediction by ${M.userName}?`)&&IT(M.id)},disabled:g,children:""})]},M.id)})})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("label",{children:"Reset Options"}),d.jsxs("div",{className:"reset-buttons",children:[d.jsx("button",{className:"reset-btn",onClick:U,disabled:g,children:"Reset Score (0-0)"}),d.jsx("button",{className:"reset-btn danger",onClick:async()=>{window.confirm("Reset ALL match data? This will clear score, goals, and MoM. Predictions will remain.")&&(v(!0),await Us(s.id,{scoreHome:0,scoreAway:0,goals:[],manOfTheMatch:null,momWinners:null,momPublishedAt:null,status:"upcoming",predictionsLocked:!1}),a("upcoming"),N(""),v(!1))},disabled:g,children:"Reset All Match Data"})]})]})]})]})}),c&&d.jsx(PT,{teamId:c==="home"?s.home:s.away,otherTeamId:c==="home"?s.away:s.home,isHome:c==="home",onSelect:(M,C,S)=>q(M,C,S),onClose:()=>f(null)})]})},ag=({match:s})=>{var ee,he;const{isAdmin:e,getTopPredictedPlayers:n,getPredictionCount:i}=Ir(),[a,c]=ge.useState(!1),[f,g]=ge.useState(!1),v=Ke[s.home]||{name:"TBD",logo:null},w=Ke[s.away]||{name:"TBD",logo:null},N=()=>{switch(s.status){case"live":return"status-live";case"ft":return"status-ft";default:return"status-upcoming"}},x=()=>{switch(s.status){case"live":return"LIVE";case"ft":return"FT";default:return sv(s.time)}},I=M=>(s.goals||[]).filter(C=>C.team===M),k=I(s.home),U=I(s.away),q=k.length>0||U.length>0,H=s.status==="upcoming"&&s.home!=="tbd",ce=s.status==="ft"&&q,se=ce||H,Y=()=>{se&&g(!f)};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`match-card ${s.status} ${s.isFinal?"final":""} ${f?"expanded":""} ${se?"clickable":""}`,onClick:Y,children:[s.isFinal&&d.jsx("div",{className:"final-badge",children:"FINAL"}),d.jsxs("div",{className:"match-header",children:[d.jsxs("span",{className:"match-number",children:["Match ",s.matchNumber]}),d.jsxs("span",{className:`match-status ${N()}`,children:[s.status==="live"&&d.jsx("span",{className:"live-dot"}),x()]})]}),d.jsxs("div",{className:"match-body",children:[d.jsxs("div",{className:"team home-team",children:[d.jsx("div",{className:"team-logo-wrapper",children:v.logo?d.jsx("img",{src:v.logo,alt:v.name,className:"team-logo"}):d.jsx("div",{className:"team-logo-placeholder",children:"?"})}),d.jsx("span",{className:"team-name",children:v.name})]}),d.jsx("div",{className:"score-container",children:s.status==="upcoming"?d.jsx("span",{className:"vs-text",children:"VS"}):d.jsxs("div",{className:"score",children:[d.jsx("span",{className:"score-home",children:s.scoreHome}),d.jsx("span",{className:"score-separator",children:"-"}),d.jsx("span",{className:"score-away",children:s.scoreAway})]})}),d.jsxs("div",{className:"team away-team",children:[d.jsx("div",{className:"team-logo-wrapper",children:w.logo?d.jsx("img",{src:w.logo,alt:w.name,className:"team-logo"}):d.jsx("div",{className:"team-logo-placeholder",children:"?"})}),d.jsx("span",{className:"team-name",children:w.name})]})]}),ce&&!f&&d.jsxs("div",{className:"expand-hint",children:[d.jsx("span",{children:"Tap to see scorers"}),d.jsx("span",{className:"expand-icon",children:""})]}),H&&!f&&d.jsxs("div",{className:"expand-hint",children:[d.jsx("span",{children:"Tap to see squads & fan picks"}),d.jsx("span",{className:"expand-icon",children:""})]}),f&&ce&&d.jsxs("div",{className:"goals-detail",children:[d.jsx("div",{className:"goals-column home-goals",children:k.length>0?k.map((M,C)=>d.jsxs("div",{className:"goal-item",children:[d.jsx("span",{className:"goal-icon",children:""}),d.jsx("span",{className:"goal-scorer",children:M.player}),M.assist&&d.jsxs("span",{className:"goal-assist",children:["(A: ",M.assist,")"]})]},C)):d.jsx("span",{className:"no-goals",children:"-"})}),d.jsx("div",{className:"goals-divider"}),d.jsx("div",{className:"goals-column away-goals",children:U.length>0?U.map((M,C)=>d.jsxs("div",{className:"goal-item",children:[d.jsx("span",{className:"goal-icon",children:""}),d.jsx("span",{className:"goal-scorer",children:M.player}),M.assist&&d.jsxs("span",{className:"goal-assist",children:["(A: ",M.assist,")"]})]},C)):d.jsx("span",{className:"no-goals",children:"-"})})]}),f&&H&&d.jsxs("div",{className:"roster-detail",children:[(()=>{const M=n(s.id),C=i(s.id);return M.length>0?d.jsxs("div",{className:"fan-picks-section",children:[d.jsxs("div",{className:"fan-picks-header",children:[d.jsx("span",{className:"fan-picks-title",children:" Fan Picks"}),d.jsxs("span",{className:"fan-picks-count",children:[C," votes"]})]}),d.jsx("div",{className:"fan-picks-list",children:M.map((S,j)=>d.jsxs("div",{className:`fan-pick-item rank-${j+1}`,children:[d.jsx("span",{className:"fan-pick-rank",children:j===0?"":j===1?"":""}),d.jsx("span",{className:"fan-pick-name",children:S.player}),d.jsx("span",{className:"fan-pick-votes",children:S.count})]},j))})]}):null})(),d.jsxs("div",{className:"roster-columns",children:[d.jsxs("div",{className:"roster-column home-roster",children:[d.jsxs("div",{className:"roster-header",children:[d.jsx("span",{className:"manager-label",children:"Manager"}),d.jsx("span",{className:"manager-name",children:v.manager||"TBD"})]}),d.jsx("div",{className:"roster-players",children:(ee=v.players)==null?void 0:ee.map((M,C)=>d.jsxs("div",{className:"roster-player",children:[d.jsx("span",{className:"player-number",children:C+1}),d.jsx("span",{className:"player-name",children:M})]},C))})]}),d.jsx("div",{className:"roster-divider"}),d.jsxs("div",{className:"roster-column away-roster",children:[d.jsxs("div",{className:"roster-header",children:[d.jsx("span",{className:"manager-label",children:"Manager"}),d.jsx("span",{className:"manager-name",children:w.manager||"TBD"})]}),d.jsx("div",{className:"roster-players",children:(he=w.players)==null?void 0:he.map((M,C)=>d.jsxs("div",{className:"roster-player",children:[d.jsx("span",{className:"player-number",children:C+1}),d.jsx("span",{className:"player-name",children:M})]},C))})]})]})]}),e&&d.jsx("button",{className:"edit-button",onClick:M=>{M.stopPropagation(),c(!0)},children:"Edit"})]}),a&&d.jsx(RT,{match:s,onClose:()=>c(!1)})]})},kT=()=>{const{matches:s,loading:e}=Ir(),n=ge.useMemo(()=>{const g={};return s.forEach(v=>{const w=v.date;g[w]||(g[w]=[]),g[w].push(v)}),Object.entries(g).sort(([v],[w])=>new Date(v)-new Date(w)).map(([v,w])=>{const N=fT(v),x=w.sort((se,Y)=>se.time.localeCompare(Y.time)),I=x.filter(se=>se.status==="ft"),k=x.filter(se=>se.status==="live"),U=I.reduce((se,Y)=>se+(Y.scoreHome||0)+(Y.scoreAway||0),0),q=I.length===x.length,H=k.length>0,ce=I.length>0||H;return{date:v,dateLabel:pT(v),matchday:N,matches:x,stats:{total:x.length,completed:I.length,live:k.length,totalGoals:U,isComplete:q,isLive:H,hasStarted:ce}}})},[s]),i=s.filter(g=>g.status==="live"),a=s.length,c=s.filter(g=>g.status==="ft").length,f=a>0?Math.round(c/a*100):0;return e?d.jsx("div",{className:"tab-content",children:d.jsx("div",{className:"loading-container",style:{minHeight:"200px"},children:d.jsx("div",{className:"loading-spinner"})})}):d.jsxs("div",{className:"tab-content",children:[d.jsxs("section",{className:"tournament-progress animate-slide-up",children:[d.jsxs("div",{className:"progress-header",children:[d.jsx("span",{className:"progress-title",children:"SCAPIA OFFSIDE CUP 2026"}),d.jsxs("span",{className:"progress-count",children:[c,"/",a," matches"]})]}),d.jsxs("div",{className:"progress-bar-container",children:[d.jsx("div",{className:"progress-bar-bg",children:d.jsx("div",{className:"progress-bar-fill",style:{width:`${f}%`}})}),d.jsxs("span",{className:"progress-percent",children:[f,"%"]})]})]}),i.length>0&&d.jsxs("section",{className:"live-section animate-fade-in",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"PLAYING NOW"}),d.jsxs("span",{className:"section-badge live-badge",children:[i.length," LIVE"]})]}),i.map(g=>d.jsx(ag,{match:g},g.id))]}),n.map((g,v)=>d.jsxs("section",{className:`matchday-section ${g.stats.isComplete?"completed":""} ${g.stats.isLive?"has-live":""}`,style:{animationDelay:`${.05+v*.05}s`},children:[d.jsxs("div",{className:"matchday-header",children:[d.jsxs("div",{className:"matchday-info",children:[d.jsx("span",{className:"matchday-icon",children:g.matchday.icon}),d.jsxs("div",{className:"matchday-text",children:[d.jsx("span",{className:"matchday-name",children:g.matchday.name}),d.jsx("span",{className:"matchday-date",children:g.dateLabel})]})]}),d.jsxs("div",{className:"matchday-meta",children:[d.jsx("span",{className:"ground-name",children:g.matchday.ground}),g.stats.hasStarted&&d.jsx("div",{className:"matchday-stats",children:g.stats.isComplete?d.jsxs("span",{className:"stat-badge complete",children:[d.jsx("span",{className:"stat-icon",children:""}),g.stats.totalGoals," goals"]}):g.stats.isLive?d.jsxs("span",{className:"stat-badge live",children:[d.jsx("span",{className:"live-dot"}),g.stats.live," LIVE"]}):d.jsxs("span",{className:"stat-badge partial",children:[g.stats.completed,"/",g.stats.total]})})]})]}),d.jsx("div",{className:"matchday-matches",children:g.matches.map((w,N)=>d.jsxs("div",{className:"match-timeline-item",children:[d.jsxs("div",{className:"timeline-connector",children:[d.jsx("div",{className:`timeline-dot ${w.status}`}),N<g.matches.length-1&&d.jsx("div",{className:"timeline-line"})]}),d.jsx("div",{className:"match-content",children:d.jsx(ag,{match:w})})]},w.id))})]},g.date)),s.length===0&&d.jsxs("div",{className:"empty-state",children:[d.jsx("div",{className:"empty-state-icon",children:""}),d.jsx("h3",{children:"No Matches Yet"}),d.jsx("p",{children:"Check back when the tournament begins!"})]})]})},jT=()=>{const{calculateTable:s,calculateTopScorers:e,matches:n,predictions:i}=Ir(),a=ge.useMemo(()=>s(),[s]),c=ge.useMemo(()=>e(),[e]),f=n.filter(I=>I.status==="ft"&&!I.isFinal).length,g=ge.useMemo(()=>{const I={};return n.filter(k=>k.status==="ft").forEach(k=>{(k.goals||[]).forEach(U=>{if(U.assist){const q=U.assist;I[q]||(I[q]={player:U.assist,assists:0}),I[q].assists++}})}),Object.values(I).sort((k,U)=>U.assists-k.assists).slice(0,5)},[n]),v=ge.useMemo(()=>{const I={};return Object.keys(Ke).forEach(k=>{I[k]=0}),n.filter(k=>k.status==="ft").forEach(k=>{k.scoreAway===0&&I[k.home]!==void 0&&I[k.home]++,k.scoreHome===0&&I[k.away]!==void 0&&I[k.away]++}),Object.entries(I).map(([k,U])=>({teamId:k,count:U})).sort((k,U)=>U.count-k.count)},[n]),w=1e3,N=ge.useMemo(()=>{const I={};return n.filter(k=>{var U;return k.momPublishedAt&&((U=k.momWinners)==null?void 0:U.length)>0}).forEach(k=>{const U=Math.floor(w/k.momWinners.length);k.momWinners.forEach(q=>{I[q]||(I[q]={name:q,coins:0,wins:0}),I[q].coins+=U,I[q].wins++})}),Object.values(I).sort((k,U)=>U.coins-k.coins).slice(0,10)},[n]),x=ge.useMemo(()=>{var he;const I=n.filter(M=>M.status==="ft");if(I.length===0)return null;let k=null,U=0;I.forEach(M=>{var S,j;const C=Math.abs(M.scoreHome-M.scoreAway);if(C>U){U=C;const E=M.scoreHome>M.scoreAway?M.home:M.away,P=M.scoreHome>M.scoreAway?M.away:M.home;k={winner:((S=Ke[E])==null?void 0:S.shortName)||E,loser:((j=Ke[P])==null?void 0:j.shortName)||P,score:M.scoreHome>M.scoreAway?`${M.scoreHome}-${M.scoreAway}`:`${M.scoreAway}-${M.scoreHome}`,matchNum:M.matchNumber}}});let q=null,H=0;I.forEach(M=>{var S,j;const C=(M.scoreHome||0)+(M.scoreAway||0);C>H&&(H=C,q={home:((S=Ke[M.home])==null?void 0:S.shortName)||M.home,away:((j=Ke[M.away])==null?void 0:j.shortName)||M.away,score:`${M.scoreHome}-${M.scoreAway}`,total:C,matchNum:M.matchNumber})});const ce=I.filter(M=>M.scoreHome===M.scoreAway).length,se={};I.forEach(M=>{M.scoreHome>M.scoreAway?se[M.home]=(se[M.home]||0)+1:M.scoreAway>M.scoreHome&&(se[M.away]=(se[M.away]||0)+1)});const Y=Object.entries(se).sort((M,C)=>C[1]-M[1])[0],ee=[];return I.forEach(M=>{const C={};(M.goals||[]).forEach(S=>{C[S.player]=(C[S.player]||0)+1}),Object.entries(C).forEach(([S,j])=>{j>=3&&ee.push({player:S,goals:j,matchNum:M.matchNumber})})}),{biggestWin:k,highestScoring:q,draws:ce,topWinner:Y?{team:((he=Ke[Y[0]])==null?void 0:he.shortName)||Y[0],wins:Y[1]}:null,hatTricks:ee}},[n]);return d.jsxs("div",{className:"tab-content",children:[d.jsxs("section",{className:"table-section animate-slide-up",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"STANDINGS"}),d.jsxs("span",{className:"section-badge",children:[f," PLAYED"]})]}),d.jsxs("div",{className:"league-table",children:[d.jsxs("div",{className:"table-header",children:[d.jsx("span",{className:"col-pos",children:"#"}),d.jsx("span",{className:"col-team",children:"Team"}),d.jsx("span",{className:"col-stat",children:"P"}),d.jsx("span",{className:"col-stat col-wdl",children:"W"}),d.jsx("span",{className:"col-stat col-wdl",children:"D"}),d.jsx("span",{className:"col-stat col-wdl",children:"L"}),d.jsx("span",{className:"col-stat",children:"GD"}),d.jsx("span",{className:"col-pts",children:"PTS"})]}),a.map((I,k)=>{const U=Ke[I.teamId];return U?d.jsxs("div",{className:`table-row ${k<2?"qualified":""}`,style:{animationDelay:`${k*.05}s`},children:[d.jsx("span",{className:"col-pos",children:d.jsx("span",{className:`position ${k<2?"top":""}`,children:k+1})}),d.jsxs("span",{className:"col-team",children:[d.jsx("img",{src:U.logo,alt:U.name,className:"table-team-logo"}),d.jsx("span",{className:"table-team-name",children:U.name})]}),d.jsx("span",{className:"col-stat",children:I.played}),d.jsx("span",{className:"col-stat col-wdl",children:I.won}),d.jsx("span",{className:"col-stat col-wdl",children:I.drawn}),d.jsx("span",{className:"col-stat col-wdl",children:I.lost}),d.jsxs("span",{className:"col-stat",children:[I.goalDifference>0?"+":"",I.goalDifference]}),d.jsx("span",{className:"col-pts",children:I.points})]},I.teamId):null})]}),d.jsx("div",{className:"table-legend",children:d.jsxs("span",{className:"legend-item qualified-legend",children:[d.jsx("span",{className:"legend-dot"}),"Qualifies for Final"]})})]}),d.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.2s"},children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{className:"section-title",children:"GOLDEN BOOT"})}),c.length>0?d.jsx("div",{className:"scorers-list",children:c.map((I,k)=>{const U=Ke[I.team];return d.jsxs("div",{className:`scorer-row ${k===0?"leader":""}`,style:{animationDelay:`${(k+4)*.05}s`},children:[d.jsx("span",{className:"scorer-rank",children:k===0?"":k===1?"":k===2?"":k+1}),d.jsxs("div",{className:"scorer-info",children:[d.jsx("span",{className:"scorer-name",children:I.player}),d.jsx("span",{className:"scorer-team",children:(U==null?void 0:U.name)||I.team})]}),d.jsx("span",{className:"scorer-goals",children:I.goals})]},`${I.player}-${I.team}`)})}):d.jsx("div",{className:"empty-state",children:d.jsx("p",{children:"No goals scored yet"})})]}),g.length>0&&d.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.25s"},children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{className:"section-title",children:"TOP ASSISTS"})}),d.jsx("div",{className:"scorers-list",children:g.map((I,k)=>d.jsxs("div",{className:`scorer-row ${k===0?"leader assist-leader":""}`,style:{animationDelay:`${(k+4)*.05}s`},children:[d.jsx("span",{className:"scorer-rank",children:k===0?"":k+1}),d.jsx("div",{className:"scorer-info",children:d.jsx("span",{className:"scorer-name",children:I.player})}),d.jsx("span",{className:"scorer-goals assist-count",children:I.assists})]},I.player))})]}),d.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.3s"},children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{className:"section-title",children:"CLEAN SHEETS"})}),d.jsx("div",{className:"scorers-list",children:v.map((I,k)=>{const U=Ke[I.teamId];return U?d.jsxs("div",{className:`scorer-row ${k===0&&I.count>0?"leader clean-leader":""}`,style:{animationDelay:`${(k+4)*.05}s`},children:[d.jsx("span",{className:"scorer-rank",children:k===0&&I.count>0?"":k+1}),d.jsxs("div",{className:"scorer-info",children:[d.jsx("img",{src:U.logo,alt:U.name,className:"table-team-logo"}),d.jsx("span",{className:"scorer-name",children:U.name})]}),d.jsx("span",{className:"scorer-goals",children:I.count})]},I.teamId):null})})]}),d.jsxs("section",{className:"stats-section animate-slide-up",style:{animationDelay:"0.35s"},children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{className:"section-title",children:"TOURNAMENT STATS"})}),d.jsxs("div",{className:"stats-grid",children:[d.jsxs("div",{className:"stat-card",children:[d.jsx("span",{className:"stat-value",children:n.filter(I=>I.status==="ft").reduce((I,k)=>I+(k.scoreHome||0)+(k.scoreAway||0),0)}),d.jsx("span",{className:"stat-label",children:"Total Goals"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("span",{className:"stat-value",children:f}),d.jsx("span",{className:"stat-label",children:"Matches Played"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("span",{className:"stat-value",children:f>0?(n.filter(I=>I.status==="ft").reduce((I,k)=>I+(k.scoreHome||0)+(k.scoreAway||0),0)/f).toFixed(1):"0.0"}),d.jsx("span",{className:"stat-label",children:"Goals/Match"})]})]})]}),x&&d.jsxs("section",{className:"interesting-stats-section animate-slide-up",style:{animationDelay:"0.4s"},children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"FUN FACTS"}),d.jsx("span",{className:"section-badge",children:""})]}),d.jsxs("div",{className:"fun-facts-grid",children:[x.biggestWin&&x.biggestWin.score!=="0-0"&&d.jsxs("div",{className:"fun-fact-card",children:[d.jsx("span",{className:"fun-fact-icon",children:""}),d.jsxs("div",{className:"fun-fact-content",children:[d.jsx("span",{className:"fun-fact-label",children:"Biggest Win"}),d.jsxs("span",{className:"fun-fact-value",children:[x.biggestWin.winner," ",x.biggestWin.score]}),d.jsxs("span",{className:"fun-fact-detail",children:["vs ",x.biggestWin.loser," (M",x.biggestWin.matchNum,")"]})]})]}),x.highestScoring&&x.highestScoring.total>0&&d.jsxs("div",{className:"fun-fact-card",children:[d.jsx("span",{className:"fun-fact-icon",children:""}),d.jsxs("div",{className:"fun-fact-content",children:[d.jsx("span",{className:"fun-fact-label",children:"Most Goals in a Match"}),d.jsxs("span",{className:"fun-fact-value",children:[x.highestScoring.total," goals"]}),d.jsxs("span",{className:"fun-fact-detail",children:[x.highestScoring.home," vs ",x.highestScoring.away," (M",x.highestScoring.matchNum,")"]})]})]}),x.topWinner&&d.jsxs("div",{className:"fun-fact-card",children:[d.jsx("span",{className:"fun-fact-icon",children:""}),d.jsxs("div",{className:"fun-fact-content",children:[d.jsx("span",{className:"fun-fact-label",children:"Most Wins"}),d.jsx("span",{className:"fun-fact-value",children:x.topWinner.team}),d.jsxs("span",{className:"fun-fact-detail",children:[x.topWinner.wins," win",x.topWinner.wins!==1?"s":""]})]})]}),x.draws>0&&d.jsxs("div",{className:"fun-fact-card",children:[d.jsx("span",{className:"fun-fact-icon",children:""}),d.jsxs("div",{className:"fun-fact-content",children:[d.jsx("span",{className:"fun-fact-label",children:"Draws"}),d.jsx("span",{className:"fun-fact-value",children:x.draws}),d.jsxs("span",{className:"fun-fact-detail",children:["match",x.draws!==1?"es":""," ended level"]})]})]}),x.hatTricks.length>0&&x.hatTricks.map((I,k)=>d.jsxs("div",{className:"fun-fact-card hat-trick",children:[d.jsx("span",{className:"fun-fact-icon",children:""}),d.jsxs("div",{className:"fun-fact-content",children:[d.jsx("span",{className:"fun-fact-label",children:"Hat-trick!"}),d.jsx("span",{className:"fun-fact-value",children:I.player}),d.jsxs("span",{className:"fun-fact-detail",children:[I.goals," goals in M",I.matchNum]})]})]},k))]})]}),N.length>0&&d.jsxs("section",{className:"scorers-section poll-leaderboard animate-slide-up",style:{animationDelay:"0.4s"},children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"POLL LEADERBOARD"}),d.jsx("span",{className:"section-badge coins-badge",children:"COINS"})]}),d.jsx("div",{className:"scorers-list",children:N.map((I,k)=>d.jsxs("div",{className:`scorer-row ${k===0?"leader coins-leader":""}`,style:{animationDelay:`${(k+4)*.05}s`},children:[d.jsx("span",{className:"scorer-rank",children:k===0?"":k===1?"":k===2?"":k+1}),d.jsxs("div",{className:"scorer-info",children:[d.jsx("span",{className:"scorer-name",children:I.name}),d.jsxs("span",{className:"scorer-team",children:[I.wins," win",I.wins!==1?"s":""]})]}),d.jsx("span",{className:"scorer-goals coins-value",children:I.coins})]},I.name))})]})]})},ta=s=>s?s.replace("@scapia.cards",""):"",VT=()=>{const{getUpcomingMatches:s,predictions:e,matches:n,isAdmin:i}=Ir(),[a,c]=ge.useState(()=>{const E=localStorage.getItem("scapia-poll-username")||"";return ta(E)}),[f,g]=ge.useState({}),[v,w]=ge.useState(null),[N,x]=ge.useState({}),[I,k]=ge.useState(""),U=ge.useMemo(()=>s(),[s]),q=E=>{const P=Ke[E.home],V=Ke[E.away],A=[];return P&&P.players.forEach(we=>{A.push({name:we,team:E.home,teamName:P.name,teamShort:P.shortName})}),V&&V.players.forEach(we=>{A.push({name:we,team:E.away,teamName:V.name,teamShort:V.shortName})}),A},H=E=>{const P=E.toLowerCase().replace("@scapia.cards","").replace(/[^a-z0-9.]/g,"");c(P),localStorage.setItem("scapia-poll-username",P)},ce=E=>a?e.find(P=>P.matchId===E&&ta(P.userName)===a):null,se=async E=>{k("");const P=f[E.id];if(!a.trim()){k("Please enter your name first");return}if(!P){k(`Please select a player for Match ${E.matchNumber}`);return}if(E.predictionsLocked){k("Predictions are locked for this match (2 PM cutoff)");return}if(ce(E.id)){k(`You already voted for Match ${E.matchNumber}`);return}w(E.id);try{const A=q(E).find(we=>we.name===P);await wT({userName:a,matchId:E.id,matchNumber:E.matchNumber,predictedPlayer:P,predictedTeam:A==null?void 0:A.team,predictedTeamName:A==null?void 0:A.teamName}),x(we=>({...we,[E.id]:!0})),g(we=>{const Xe={...we};return delete Xe[E.id],Xe}),setTimeout(()=>{x(we=>({...we,[E.id]:!1}))},3e3)}catch{k("Failed to submit. Please try again.")}finally{w(null)}},Y=1e3,ee=ge.useMemo(()=>n.filter(E=>E.momPublishedAt).sort((E,P)=>E.matchNumber-P.matchNumber).map(E=>{var A,we;const P=E.momWinners||[],V=P.length>0?Math.floor(Y/P.length):0;return{matchNumber:E.matchNumber,matchId:E.id,homeTeam:((A=Ke[E.home])==null?void 0:A.shortName)||E.home,awayTeam:((we=Ke[E.away])==null?void 0:we.shortName)||E.away,score:`${E.scoreHome}-${E.scoreAway}`,manOfTheMatch:E.manOfTheMatch,winners:P.map(Xe=>ta(Xe)),coinsPerWinner:V}}),[n]),he=ge.useMemo(()=>{if(!a)return{total:0,wins:[]};let E=0;const P=[];return ee.forEach(V=>{V.winners.includes(a)&&(E+=V.coinsPerWinner,P.push({matchNumber:V.matchNumber,coins:V.coinsPerWinner}))}),{total:E,wins:P}},[a,ee]),M=E=>e.filter(P=>P.matchId===E).length,C=E=>{const P=e.filter(A=>A.matchId===E),V={};return P.forEach(A=>{A.predictedPlayer&&(V[A.predictedPlayer]=(V[A.predictedPlayer]||0)+1)}),Object.entries(V).sort((A,we)=>we[1]-A[1]).slice(0,3).map(([A,we])=>({player:A,count:we}))},S=ge.useMemo(()=>n.filter(E=>E.status==="upcoming"||E.status==="live").filter(E=>M(E.id)>=3).map(E=>{var P,V;return{matchNumber:E.matchNumber,matchId:E.id,homeTeam:((P=Ke[E.home])==null?void 0:P.shortName)||E.home,awayTeam:((V=Ke[E.away])==null?void 0:V.shortName)||E.away,topPlayers:C(E.id)}}).filter(E=>E.topPlayers.length>0),[n,e]),j=e.length;return d.jsxs("div",{className:"tab-content",children:[d.jsxs("section",{className:"poll-hero animate-slide-up",children:[d.jsxs("div",{className:"hero-coins-highlight",children:[d.jsxs("div",{className:"coins-amount",children:[d.jsx("span",{className:"coins-number",children:"1000"}),d.jsx("span",{className:"coins-label",children:"COINS"})]}),d.jsx("div",{className:"coins-subtext",children:"Every Match!"})]}),d.jsxs("div",{className:"hero-content",children:[d.jsx("h1",{className:"hero-title",children:"MAN OF THE MATCH"}),d.jsx("p",{className:"hero-subtitle",children:"Predict who scores the most goals & win!"})]}),d.jsxs("div",{className:"hero-stats",children:[d.jsxs("div",{className:"hero-stat",children:[d.jsx("span",{className:"stat-value",children:U.length}),d.jsx("span",{className:"stat-label",children:"Matches Open"})]}),d.jsx("div",{className:"hero-stat-divider"}),d.jsxs("div",{className:"hero-stat",children:[d.jsx("span",{className:"stat-value",children:j}),d.jsx("span",{className:"stat-label",children:"Votes Cast"})]})]}),d.jsxs("div",{className:"hero-rules",children:[d.jsx("span",{children:" Pick top scorer"}),d.jsx("span",{children:" Vote by 2 PM"}),d.jsx("span",{children:" Split if tied"})]})]}),a&&he.total>0&&d.jsx("section",{className:"my-earnings-section animate-slide-up",style:{animationDelay:"0.025s"},children:d.jsxs("div",{className:"earnings-card",children:[d.jsxs("div",{className:"earnings-header",children:[d.jsx("span",{className:"earnings-icon",children:""}),d.jsx("span",{className:"earnings-title",children:"MY EARNINGS"})]}),d.jsxs("div",{className:"earnings-amount",children:[d.jsx("span",{className:"earnings-coins",children:he.total}),d.jsx("span",{className:"earnings-label",children:"COINS"})]}),d.jsx("div",{className:"earnings-breakdown",children:he.wins.map((E,P)=>d.jsxs("span",{className:"earnings-win",children:["M",E.matchNumber,": +",E.coins]},P))})]})}),ee.length>0&&d.jsxs("section",{className:"winners-section animate-slide-up",style:{animationDelay:"0.05s"},children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"WINNERS HALL OF FAME"}),d.jsx("span",{className:"section-badge trophy-badge",children:""})]}),d.jsx("div",{className:"winners-list",children:ee.map(E=>d.jsxs("div",{className:"winner-card compact",children:[d.jsxs("div",{className:"winner-match-info",children:[d.jsxs("span",{className:"winner-match-num",children:["M",E.matchNumber]}),d.jsxs("span",{className:"winner-teams",children:[E.homeTeam," vs ",E.awayTeam]}),d.jsx("span",{className:"winner-score",children:E.score})]}),d.jsxs("div",{className:"winner-details",children:[d.jsxs("div",{className:"mom-player",children:[d.jsx("span",{className:"mom-label",children:"MoM:"}),d.jsx("span",{className:"mom-name",children:E.manOfTheMatch})]}),E.winners.length>0?d.jsxs("div",{className:"winner-info",children:[E.winners.length<=3?d.jsx("div",{className:"winner-names",children:E.winners.map((P,V)=>d.jsx("span",{className:"winner-badge",children:P},V))}):d.jsxs("div",{className:"winner-names compact-winners",children:[E.winners.slice(0,2).map((P,V)=>d.jsx("span",{className:"winner-badge",children:P},V)),d.jsxs("span",{className:"winner-badge more-badge",children:["+",E.winners.length-2," more"]})]}),d.jsxs("span",{className:"coins-earned",children:[E.coinsPerWinner," coins each"]})]}):d.jsx("span",{className:"no-winners",children:"No correct predictions"})]})]},E.matchNumber))})]}),d.jsxs("section",{className:"poll-section animate-slide-up",style:{animationDelay:"0.1s"},children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{className:"section-title",children:"MAKE YOUR PREDICTION"})}),I&&d.jsx("div",{className:"error-message animate-scale-in",children:I}),d.jsxs("div",{className:"user-input-card",children:[d.jsx("label",{htmlFor:"userName",children:"Your Name"}),d.jsx("input",{type:"text",id:"userName",className:"name-input",value:a,onChange:E=>H(E.target.value),placeholder:"Enter your name",maxLength:30}),a&&d.jsxs("p",{className:"email-preview",children:["Voting as: ",d.jsx("strong",{children:a})]})]})]}),U.length>0&&d.jsxs("section",{className:"vote-cards-section animate-slide-up",style:{animationDelay:"0.15s"},children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"VOTE FOR EACH MATCH"}),d.jsxs("span",{className:"section-badge",children:[U.length," matches"]})]}),d.jsx("div",{className:"vote-cards-list",children:U.map(E=>{const P=Ke[E.home],V=Ke[E.away],A=q(E),we=E.predictionsLocked,Xe=v===E.id,ft=N[E.id],Le=M(E.id),ne=ce(E.id),me=!!ne;return d.jsxs("div",{className:`vote-card ${we?"locked":""} ${ft||me?"submitted":""}`,children:[d.jsxs("div",{className:"vote-card-header",children:[d.jsxs("span",{className:"vote-match-num",children:["Match ",E.matchNumber]}),d.jsxs("div",{className:"vote-card-meta",children:[Le>0&&d.jsxs("span",{className:"vote-count",children:[Le," votes"]}),d.jsx("span",{className:"vote-match-time",children:sv(E.time)})]})]}),d.jsxs("div",{className:"vote-card-teams",children:[d.jsxs("div",{className:"vote-team",children:[(P==null?void 0:P.logo)&&d.jsx("img",{src:P.logo,alt:P.name,className:"vote-team-logo"}),d.jsx("span",{children:P==null?void 0:P.shortName})]}),d.jsx("span",{className:"vote-vs",children:"vs"}),d.jsxs("div",{className:"vote-team",children:[(V==null?void 0:V.logo)&&d.jsx("img",{src:V.logo,alt:V.name,className:"vote-team-logo"}),d.jsx("span",{children:V==null?void 0:V.shortName})]})]}),ft?d.jsxs("div",{className:"vote-success",children:[d.jsx("span",{className:"success-icon",children:""})," Vote Submitted!"]}):me?d.jsxs("div",{className:"vote-success already-voted",children:[d.jsx("span",{className:"success-icon",children:""})," You picked: ",d.jsx("strong",{children:ne.predictedPlayer})]}):we?d.jsxs("div",{className:"vote-locked",children:[d.jsx("span",{children:""})," Voting Closed"]}):d.jsxs(d.Fragment,{children:[d.jsxs("select",{className:"vote-player-select",value:f[E.id]||"",onChange:re=>g(L=>({...L,[E.id]:re.target.value})),children:[d.jsx("option",{value:"",children:"Who will score the most goals?"}),A.map(re=>d.jsxs("option",{value:re.name,children:[re.name," (",re.teamShort,")"]},`${E.id}-${re.name}`))]}),d.jsx("button",{className:"vote-submit-btn",onClick:()=>se(E),disabled:!f[E.id]||!a||Xe,children:Xe?"Submitting...":"Submit Vote"})]})]},E.id)})})]}),S.length>0&&d.jsxs("section",{className:"fan-favourites-section animate-slide-up",style:{animationDelay:"0.175s"},children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"FAN FAVOURITES"}),d.jsx("span",{className:"section-badge fire-badge",children:""})]}),d.jsx("div",{className:"favourites-list",children:S.map(E=>d.jsxs("div",{className:"favourite-card",children:[d.jsxs("div",{className:"favourite-match",children:[d.jsxs("span",{className:"favourite-match-num",children:["M",E.matchNumber]}),d.jsxs("span",{className:"favourite-teams",children:[E.homeTeam," vs ",E.awayTeam]})]}),d.jsx("div",{className:"favourite-players",children:E.topPlayers.map((P,V)=>d.jsxs("div",{className:`favourite-player rank-${V+1}`,children:[d.jsx("span",{className:"favourite-rank",children:V===0?"":V===1?"":""}),d.jsx("span",{className:"favourite-name",children:P.player}),d.jsxs("span",{className:"favourite-votes",children:[P.count," votes"]})]},V))})]},E.matchId))})]}),e.length>0&&d.jsxs("section",{className:"recent-section animate-slide-up",style:{animationDelay:"0.2s"},children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"RECENT PREDICTIONS"}),d.jsx("span",{className:"section-badge",children:e.length})]}),d.jsx("div",{className:"predictions-list",children:e.slice(0,10).map(E=>{var P;return d.jsxs("div",{className:"prediction-item",children:[d.jsxs("div",{className:"prediction-user",children:[d.jsx("span",{className:"user-avatar",children:(P=ta(E.userName))==null?void 0:P.charAt(0).toUpperCase()}),d.jsx("span",{className:"user-name",children:ta(E.userName)})]}),d.jsxs("div",{className:"prediction-detail",children:[d.jsx("span",{className:"predicted-player",children:E.predictedPlayer}),d.jsxs("span",{className:"predicted-match",children:["Match ",E.matchNumber]})]})]},E.id)})})]}),U.length===0&&d.jsxs("div",{className:"empty-state",children:[d.jsx("div",{className:"empty-state-icon",children:""}),d.jsx("h3",{children:"No Upcoming Matches"}),d.jsx("p",{children:"Predictions open before each match!"})]}),i&&e.length>0&&d.jsxs("section",{className:"admin-poll-section animate-slide-up",style:{animationDelay:"0.3s"},children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{className:"section-title",children:"ADMIN CONTROLS"})}),d.jsxs("button",{className:"delete-all-btn",onClick:async()=>{window.confirm(`Delete all ${e.length} predictions? This cannot be undone.`)&&await TT()},children:["Delete All Predictions (",e.length,")"]})]})]})},DT=()=>{const[s,e]=ge.useState("format"),n=i=>{e(s===i?null:i)};return d.jsxs("div",{className:"tab-content",children:[d.jsx("section",{className:"quick-ref-section animate-slide-up",children:d.jsxs("div",{className:"quick-ref-grid",children:[d.jsxs("div",{className:"quick-ref-card",children:[d.jsx("span",{className:"quick-ref-icon",children:""}),d.jsx("span",{className:"quick-ref-value",children:"24 min"}),d.jsx("span",{className:"quick-ref-label",children:"Match Duration"})]}),d.jsxs("div",{className:"quick-ref-card",children:[d.jsx("span",{className:"quick-ref-icon",children:""}),d.jsx("span",{className:"quick-ref-value",children:"5v5"}),d.jsx("span",{className:"quick-ref-label",children:"Players"})]}),d.jsxs("div",{className:"quick-ref-card",children:[d.jsx("span",{className:"quick-ref-icon",children:""}),d.jsx("span",{className:"quick-ref-value",children:"2"}),d.jsx("span",{className:"quick-ref-label",children:"Substitutes"})]}),d.jsxs("div",{className:"quick-ref-card highlight",children:[d.jsx("span",{className:"quick-ref-icon",children:""}),d.jsx("span",{className:"quick-ref-value",children:"NO"}),d.jsx("span",{className:"quick-ref-label",children:"Offside"})]})]})}),d.jsxs("section",{className:"rules-accordion animate-slide-up",style:{animationDelay:"0.05s"},children:[d.jsxs("div",{className:`accordion-item ${s==="format"?"expanded":""}`,children:[d.jsxs("button",{className:"accordion-header",onClick:()=>n("format"),children:[d.jsxs("div",{className:"accordion-title",children:[d.jsx("span",{className:"accordion-icon",children:""}),d.jsx("span",{children:"Tournament Format"})]}),d.jsx("span",{className:"accordion-arrow",children:""})]}),d.jsx("div",{className:"accordion-content",children:d.jsxs("ul",{className:"rules-list-new",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"League Matches:"})," 12 games"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Final:"})," 1 game (Top 2 teams)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Match Duration:"})," 2 halves of 12 minutes each"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Timekeeping:"})," Clock stops for all stoppages"]})]})})]}),d.jsxs("div",{className:`accordion-item ${s==="points"?"expanded":""}`,children:[d.jsxs("button",{className:"accordion-header",onClick:()=>n("points"),children:[d.jsxs("div",{className:"accordion-title",children:[d.jsx("span",{className:"accordion-icon",children:""}),d.jsx("span",{children:"Points & Tie-Breakers"})]}),d.jsx("span",{className:"accordion-arrow",children:""})]}),d.jsxs("div",{className:"accordion-content",children:[d.jsxs("div",{className:"points-display",children:[d.jsxs("div",{className:"point-item win",children:[d.jsx("span",{className:"point-val",children:"3"}),d.jsx("span",{className:"point-lbl",children:"Win"})]}),d.jsxs("div",{className:"point-item draw",children:[d.jsx("span",{className:"point-val",children:"1"}),d.jsx("span",{className:"point-lbl",children:"Draw"})]}),d.jsxs("div",{className:"point-item loss",children:[d.jsx("span",{className:"point-val",children:"0"}),d.jsx("span",{className:"point-lbl",children:"Loss"})]})]}),d.jsxs("div",{className:"tiebreaker-list",children:[d.jsx("span",{className:"tb-title",children:"Tie-Breakers (in order):"}),d.jsxs("ol",{children:[d.jsx("li",{children:"Goal Difference"}),d.jsx("li",{children:"Head-to-Head Result"}),d.jsx("li",{children:"Goals Scored"}),d.jsx("li",{children:"Penalty Kick-Outs"})]})]})]})]}),d.jsxs("div",{className:`accordion-item ${s==="fouls"?"expanded":""}`,children:[d.jsxs("button",{className:"accordion-header",onClick:()=>n("fouls"),children:[d.jsxs("div",{className:"accordion-title",children:[d.jsx("span",{className:"accordion-icon",children:""}),d.jsx("span",{children:"Fouls & Cards"})]}),d.jsx("span",{className:"accordion-arrow",children:""})]}),d.jsxs("div",{className:"accordion-content",children:[d.jsxs("div",{className:"card-section yellow",children:[d.jsx("span",{className:"card-badge yellow",children:"YELLOW"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Any physical foul"}),d.jsx("li",{children:"Deliberate handball"}),d.jsxs("li",{children:[d.jsx("strong",{children:"Any sliding challenge"})," (automatic)"]}),d.jsx("li",{children:"Cynical fouls (shirt pulling, obstruction)"})]})]}),d.jsxs("div",{className:"card-section red",children:[d.jsx("span",{className:"card-badge red",children:"RED"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Second yellow card"}),d.jsxs("li",{children:["Team plays ",d.jsx("strong",{children:"4v5"})," for rest of match"]}),d.jsx("li",{children:"Suspension doesn't carry forward"}),d.jsx("li",{children:"Straight red only for dangerous play"})]})]})]})]}),d.jsxs("div",{className:`accordion-item ${s==="penalty"?"expanded":""}`,children:[d.jsxs("button",{className:"accordion-header",onClick:()=>n("penalty"),children:[d.jsxs("div",{className:"accordion-title",children:[d.jsx("span",{className:"accordion-icon",children:""}),d.jsx("span",{children:"Penalty Kicks"})]}),d.jsx("span",{className:"accordion-arrow",children:""})]}),d.jsx("div",{className:"accordion-content",children:d.jsxs("ul",{className:"rules-list-new",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"One step only"})," - no run-up allowed"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"One shot only"})," - no rebounds, no retakes"]}),d.jsx("li",{children:"All players must remain behind the kicker"}),d.jsxs("li",{children:[d.jsx("strong",{children:"Shootouts:"})," 5 players take one kick each"]})]})})]}),d.jsxs("div",{className:`accordion-item ${s==="subs"?"expanded":""}`,children:[d.jsxs("button",{className:"accordion-header",onClick:()=>n("subs"),children:[d.jsxs("div",{className:"accordion-title",children:[d.jsx("span",{className:"accordion-icon",children:""}),d.jsx("span",{children:"Substitutions"})]}),d.jsx("span",{className:"accordion-arrow",children:""})]}),d.jsx("div",{className:"accordion-content",children:d.jsxs("ul",{className:"rules-list-new",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Rolling substitutions"})," allowed"]}),d.jsx("li",{children:"Wait for referee's signal to re-enter"}),d.jsxs("li",{children:["Enter from ",d.jsx("strong",{children:"your own half"})]}),d.jsx("li",{children:"If advantage gained: goal kick to opposition"})]})})]}),d.jsxs("div",{className:`accordion-item ${s==="general"?"expanded":""}`,children:[d.jsxs("button",{className:"accordion-header",onClick:()=>n("general"),children:[d.jsxs("div",{className:"accordion-title",children:[d.jsx("span",{className:"accordion-icon",children:""}),d.jsx("span",{children:"General Play Rules"})]}),d.jsx("span",{className:"accordion-arrow",children:""})]}),d.jsx("div",{className:"accordion-content",children:d.jsxs("ul",{className:"rules-list-new",children:[d.jsxs("li",{children:["Match starts with a ",d.jsx("strong",{children:"goal kick"})]}),d.jsx("li",{children:"After every goal: goal kick restart"}),d.jsxs("li",{children:[d.jsx("strong",{children:"No offside"})," rule"]}),d.jsx("li",{children:"Cannot score directly from kick-ins, goal kicks, or free kicks"}),d.jsxs("li",{children:[d.jsx("strong",{children:"No throw-ins"})," - kick-ins only"]}),d.jsx("li",{children:"Ball placed on ground for all restarts"})]})})]})]}),d.jsx("section",{className:"rules-page-section animate-slide-up",style:{animationDelay:"0.1s"},children:d.jsxs("div",{className:"rules-page-card highlight-card",children:[d.jsxs("div",{className:"rules-page-header",children:[d.jsx("span",{className:"rules-page-icon",children:""}),d.jsx("h3",{children:"Man of the Match Prediction"}),d.jsx("span",{className:"prize-tag",children:"WIN 1000 COINS"})]}),d.jsxs("div",{className:"rules-page-content",children:[d.jsxs("div",{className:"rule-item",children:[d.jsx("span",{className:"rule-number",children:"1"}),d.jsxs("div",{className:"rule-text",children:["Predict who will score the ",d.jsx("strong",{children:"most goals"})," in each match"]})]}),d.jsxs("div",{className:"rule-item",children:[d.jsx("span",{className:"rule-number",children:"2"}),d.jsxs("div",{className:"rule-text",children:["Predictions lock at ",d.jsx("strong",{children:"2:00 PM"})," on matchday"]})]}),d.jsxs("div",{className:"rule-item",children:[d.jsx("span",{className:"rule-number",children:"3"}),d.jsxs("div",{className:"rule-text",children:["Multiple winners ",d.jsx("strong",{children:"share the prize"})," equally"]})]}),d.jsxs("div",{className:"rule-item",children:[d.jsx("span",{className:"rule-number",children:"4"}),d.jsxs("div",{className:"rule-text",children:["Tie-breaker: Player from ",d.jsx("strong",{children:"winning team"})," wins"]})]}),d.jsxs("div",{className:"rule-item",children:[d.jsx("span",{className:"rule-number",children:"5"}),d.jsxs("div",{className:"rule-text",children:["Draw match: ",d.jsx("strong",{children:"Referee decides"})," Man of the Match"]})]})]})]})}),d.jsx("section",{className:"fair-play-section animate-slide-up",style:{animationDelay:"0.15s"},children:d.jsxs("div",{className:"fair-play-card",children:[d.jsx("span",{className:"fair-play-icon",children:""}),d.jsxs("p",{children:["Play fair. Referee's decision is ",d.jsx("strong",{children:"final"}),"."]})]})})]})},MT=()=>{const{activeTab:s,loading:e}=Ir();return e?d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("span",{className:"loading-text",children:"LOADING SCAPIA OFFSIDE..."})]}):d.jsxs("div",{className:"app",children:[d.jsx(xT,{}),d.jsxs("main",{className:"main-content",children:[s==="matches"&&d.jsx(kT,{}),s==="table"&&d.jsx(jT,{}),s==="polls"&&d.jsx(VT,{}),s==="rules"&&d.jsx(DT,{})]}),d.jsx(CT,{})]})},OT=()=>d.jsx(NT,{children:d.jsx(MT,{})});y_.createRoot(document.getElementById("root")).render(d.jsx(ge.StrictMode,{children:d.jsx(OT,{})}));
