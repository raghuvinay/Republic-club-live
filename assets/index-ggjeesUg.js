(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var ih={exports:{}},ea={},oh={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function l_(){if(Fm)return Ce;Fm=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,q={};function H(O,Q,fe){this.props=O,this.context=Q,this.refs=q,this.updater=fe||R}H.prototype.isReactComponent={},H.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},H.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Z(){}Z.prototype=H.prototype;function K(O,Q,fe){this.props=O,this.context=Q,this.refs=q,this.updater=fe||R}var te=K.prototype=new Z;te.constructor=K,F(te,H.prototype),te.isPureReactComponent=!0;var se=Array.isArray,Ee=Object.prototype.hasOwnProperty,z={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function I(O,Q,fe){var Ne,xe={},ke=null,be=null;if(Q!=null)for(Ne in Q.ref!==void 0&&(be=Q.ref),Q.key!==void 0&&(ke=""+Q.key),Q)Ee.call(Q,Ne)&&!j.hasOwnProperty(Ne)&&(xe[Ne]=Q[Ne]);var Fe=arguments.length-2;if(Fe===1)xe.children=fe;else if(1<Fe){for(var $e=Array(Fe),wt=0;wt<Fe;wt++)$e[wt]=arguments[wt+2];xe.children=$e}if(O&&O.defaultProps)for(Ne in Fe=O.defaultProps,Fe)xe[Ne]===void 0&&(xe[Ne]=Fe[Ne]);return{$$typeof:s,type:O,key:ke,ref:be,props:xe,_owner:z.current}}function k(O,Q){return{$$typeof:s,type:O.type,key:Q,ref:O.ref,props:O.props,_owner:O._owner}}function S(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function P(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return Q[fe]})}var V=/\/+/g;function A(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):Q.toString(36)}function _e(O,Q,fe,Ne,xe){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var be=!1;if(O===null)be=!0;else switch(ke){case"string":case"number":be=!0;break;case"object":switch(O.$$typeof){case s:case e:be=!0}}if(be)return be=O,xe=xe(be),O=Ne===""?"."+A(be,0):Ne,se(xe)?(fe="",O!=null&&(fe=O.replace(V,"$&/")+"/"),_e(xe,Q,fe,"",function(wt){return wt})):xe!=null&&(S(xe)&&(xe=k(xe,fe+(!xe.key||be&&be.key===xe.key?"":(""+xe.key).replace(V,"$&/")+"/")+O)),Q.push(xe)),1;if(be=0,Ne=Ne===""?".":Ne+":",se(O))for(var Fe=0;Fe<O.length;Fe++){ke=O[Fe];var $e=Ne+A(ke,Fe);be+=_e(ke,Q,fe,$e,xe)}else if($e=T(O),typeof $e=="function")for(O=$e.call(O),Fe=0;!(ke=O.next()).done;)ke=ke.value,$e=Ne+A(ke,Fe++),be+=_e(ke,Q,fe,$e,xe);else if(ke==="object")throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return be}function nt(O,Q,fe){if(O==null)return O;var Ne=[],xe=0;return _e(O,Ne,"","",function(ke){return Q.call(fe,ke,xe++)}),Ne}function ft(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var Le={current:null},ne={transition:null},me={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:ne,ReactCurrentOwner:z};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:nt,forEach:function(O,Q,fe){nt(O,function(){Q.apply(this,arguments)},fe)},count:function(O){var Q=0;return nt(O,function(){Q++}),Q},toArray:function(O){return nt(O,function(Q){return Q})||[]},only:function(O){if(!S(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ce.Component=H,Ce.Fragment=n,Ce.Profiler=a,Ce.PureComponent=K,Ce.StrictMode=i,Ce.Suspense=v,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ce.act=le,Ce.cloneElement=function(O,Q,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Ne=F({},O.props),xe=O.key,ke=O.ref,be=O._owner;if(Q!=null){if(Q.ref!==void 0&&(ke=Q.ref,be=z.current),Q.key!==void 0&&(xe=""+Q.key),O.type&&O.type.defaultProps)var Fe=O.type.defaultProps;for($e in Q)Ee.call(Q,$e)&&!j.hasOwnProperty($e)&&(Ne[$e]=Q[$e]===void 0&&Fe!==void 0?Fe[$e]:Q[$e])}var $e=arguments.length-2;if($e===1)Ne.children=fe;else if(1<$e){Fe=Array($e);for(var wt=0;wt<$e;wt++)Fe[wt]=arguments[wt+2];Ne.children=Fe}return{$$typeof:s,type:O.type,key:xe,ref:ke,props:Ne,_owner:be}},Ce.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:c,_context:O},O.Consumer=O},Ce.createElement=I,Ce.createFactory=function(O){var Q=I.bind(null,O);return Q.type=O,Q},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(O){return{$$typeof:g,render:O}},Ce.isValidElement=S,Ce.lazy=function(O){return{$$typeof:N,_payload:{_status:-1,_result:O},_init:ft}},Ce.memo=function(O,Q){return{$$typeof:w,type:O,compare:Q===void 0?null:Q}},Ce.startTransition=function(O){var Q=ne.transition;ne.transition={};try{O()}finally{ne.transition=Q}},Ce.unstable_act=le,Ce.useCallback=function(O,Q){return Le.current.useCallback(O,Q)},Ce.useContext=function(O){return Le.current.useContext(O)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(O){return Le.current.useDeferredValue(O)},Ce.useEffect=function(O,Q){return Le.current.useEffect(O,Q)},Ce.useId=function(){return Le.current.useId()},Ce.useImperativeHandle=function(O,Q,fe){return Le.current.useImperativeHandle(O,Q,fe)},Ce.useInsertionEffect=function(O,Q){return Le.current.useInsertionEffect(O,Q)},Ce.useLayoutEffect=function(O,Q){return Le.current.useLayoutEffect(O,Q)},Ce.useMemo=function(O,Q){return Le.current.useMemo(O,Q)},Ce.useReducer=function(O,Q,fe){return Le.current.useReducer(O,Q,fe)},Ce.useRef=function(O){return Le.current.useRef(O)},Ce.useState=function(O){return Le.current.useState(O)},Ce.useSyncExternalStore=function(O,Q,fe){return Le.current.useSyncExternalStore(O,Q,fe)},Ce.useTransition=function(){return Le.current.useTransition()},Ce.version="18.3.1",Ce}var Um;function Bh(){return Um||(Um=1,oh.exports=l_()),oh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function u_(){if(zm)return ea;zm=1;var s=Bh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(g,v,w){var N,x={},T=null,R=null;w!==void 0&&(T=""+w),v.key!==void 0&&(T=""+v.key),v.ref!==void 0&&(R=v.ref);for(N in v)i.call(v,N)&&!c.hasOwnProperty(N)&&(x[N]=v[N]);if(g&&g.defaultProps)for(N in v=g.defaultProps,v)x[N]===void 0&&(x[N]=v[N]);return{$$typeof:e,type:g,key:T,ref:R,props:x,_owner:a.current}}return ea.Fragment=n,ea.jsx=d,ea.jsxs=d,ea}var Bm;function c_(){return Bm||(Bm=1,ih.exports=u_()),ih.exports}var f=c_(),ge=Bh(),Bl={},ah={exports:{}},Xt={},lh={exports:{}},uh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m;function h_(){return $m||($m=1,(function(s){function e(ne,me){var le=ne.length;ne.push(me);e:for(;0<le;){var O=le-1>>>1,Q=ne[O];if(0<a(Q,me))ne[O]=me,ne[le]=Q,le=O;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var me=ne[0],le=ne.pop();if(le!==me){ne[0]=le;e:for(var O=0,Q=ne.length,fe=Q>>>1;O<fe;){var Ne=2*(O+1)-1,xe=ne[Ne],ke=Ne+1,be=ne[ke];if(0>a(xe,le))ke<Q&&0>a(be,xe)?(ne[O]=be,ne[ke]=le,O=ke):(ne[O]=xe,ne[Ne]=le,O=Ne);else if(ke<Q&&0>a(be,le))ne[O]=be,ne[ke]=le,O=ke;else break e}}return me}function a(ne,me){var le=ne.sortIndex-me.sortIndex;return le!==0?le:ne.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var v=[],w=[],N=1,x=null,T=3,R=!1,F=!1,q=!1,H=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(ne){for(var me=n(w);me!==null;){if(me.callback===null)i(w);else if(me.startTime<=ne)i(w),me.sortIndex=me.expirationTime,e(v,me);else break;me=n(w)}}function se(ne){if(q=!1,te(ne),!F)if(n(v)!==null)F=!0,ft(Ee);else{var me=n(w);me!==null&&Le(se,me.startTime-ne)}}function Ee(ne,me){F=!1,q&&(q=!1,Z(I),I=-1),R=!0;var le=T;try{for(te(me),x=n(v);x!==null&&(!(x.expirationTime>me)||ne&&!P());){var O=x.callback;if(typeof O=="function"){x.callback=null,T=x.priorityLevel;var Q=O(x.expirationTime<=me);me=s.unstable_now(),typeof Q=="function"?x.callback=Q:x===n(v)&&i(v),te(me)}else i(v);x=n(v)}if(x!==null)var fe=!0;else{var Ne=n(w);Ne!==null&&Le(se,Ne.startTime-me),fe=!1}return fe}finally{x=null,T=le,R=!1}}var z=!1,j=null,I=-1,k=5,S=-1;function P(){return!(s.unstable_now()-S<k)}function V(){if(j!==null){var ne=s.unstable_now();S=ne;var me=!0;try{me=j(!0,ne)}finally{me?A():(z=!1,j=null)}}else z=!1}var A;if(typeof K=="function")A=function(){K(V)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,nt=_e.port2;_e.port1.onmessage=V,A=function(){nt.postMessage(null)}}else A=function(){H(V,0)};function ft(ne){j=ne,z||(z=!0,A())}function Le(ne,me){I=H(function(){ne(s.unstable_now())},me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ne){ne.callback=null},s.unstable_continueExecution=function(){F||R||(F=!0,ft(Ee))},s.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ne?Math.floor(1e3/ne):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_getFirstCallbackNode=function(){return n(v)},s.unstable_next=function(ne){switch(T){case 1:case 2:case 3:var me=3;break;default:me=T}var le=T;T=me;try{return ne()}finally{T=le}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ne,me){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var le=T;T=ne;try{return me()}finally{T=le}},s.unstable_scheduleCallback=function(ne,me,le){var O=s.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?O+le:O):le=O,ne){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=le+Q,ne={id:N++,callback:me,priorityLevel:ne,startTime:le,expirationTime:Q,sortIndex:-1},le>O?(ne.sortIndex=le,e(w,ne),n(v)===null&&ne===n(w)&&(q?(Z(I),I=-1):q=!0,Le(se,le-O))):(ne.sortIndex=Q,e(v,ne),F||R||(F=!0,ft(Ee))),ne},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(ne){var me=T;return function(){var le=T;T=me;try{return ne.apply(this,arguments)}finally{T=le}}}})(uh)),uh}var Hm;function d_(){return Hm||(Hm=1,lh.exports=h_()),lh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function f_(){if(qm)return Xt;qm=1;var s=Bh(),e=d_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function c(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(a[t]=r,t=0;t<r.length;t++)i.add(r[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N={},x={};function T(t){return v.call(x,t)?!0:v.call(N,t)?!1:w.test(t)?x[t]=!0:(N[t]=!0,!1)}function R(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F(t,r,o,u){if(r===null||typeof r>"u"||R(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function q(t,r,o,u,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){H[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];H[r]=new q(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){H[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){H[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){H[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){H[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){H[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){H[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){H[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function K(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Z,K);H[r]=new q(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Z,K);H[r]=new q(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Z,K);H[r]=new q(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){H[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),H.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){H[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function te(t,r,o,u){var h=H.hasOwnProperty(r)?H[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(F(r,o,h,u)&&(o=null),u||h===null?T(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var se=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),z=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),P=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),ne=Symbol.iterator;function me(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,O;function Q(t){if(O===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||""}return`
`+O+t}var fe=!1;function Ne(t,r){if(!t||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(B){var u=B}Reflect.construct(t,[],r)}else{try{r.call()}catch(B){u=B}t.call(r.prototype)}else{try{throw Error()}catch(B){u=B}t()}}catch(B){if(B&&u&&typeof B.stack=="string"){for(var h=B.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,C=p.length-1;1<=_&&0<=C&&h[_]!==p[C];)C--;for(;1<=_&&0<=C;_--,C--)if(h[_]!==p[C]){if(_!==1||C!==1)do if(_--,C--,0>C||h[_]!==p[C]){var D=`
`+h[_].replace(" at new "," at ");return t.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",t.displayName)),D}while(1<=_&&0<=C);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?Q(t):""}function xe(t){switch(t.tag){case 5:return Q(t.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return t=Ne(t.type,!1),t;case 11:return t=Ne(t.type.render,!1),t;case 1:return t=Ne(t.type,!0),t;default:return""}}function ke(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case z:return"Portal";case k:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case _e:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P:return(t.displayName||"Context")+".Consumer";case S:return(t._context.displayName||"Context")+".Provider";case V:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nt:return r=t.displayName||null,r!==null?r:ke(t.type)||"Memo";case ft:r=t._payload,t=t._init;try{return ke(t(r))}catch{}}return null}function be(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $e(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wt(t){var r=$e(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function nr(t){t._valueTracker||(t._valueTracker=wt(t))}function Ks(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=$e(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Ir(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ds(t,r){var o=r.checked;return le({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Ys(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Fe(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function io(t,r){r=r.checked,r!=null&&te(t,"checked",r,!1)}function oo(t,r){io(t,r);var o=Fe(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Xs(t,r.type,o):r.hasOwnProperty("defaultValue")&&Xs(t,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function xa(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Xs(t,r,o){(r!=="number"||Ir(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var rr=Array.isArray;function sr(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Fe(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function ao(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return le({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Js(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(rr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Fe(o)}}function Zs(t,r){var o=Fe(r.value),u=Fe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function lo(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function mt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?mt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ir,uo=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ir.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Nr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ms=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){ms.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),fs[r]=fs[t]})});function co(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||fs.hasOwnProperty(t)&&fs[t]?(""+r).trim():r+"px"}function ho(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=co(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var fo=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mo(t,r){if(r){if(fo[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function po(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function ei(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ti=null,un=null,bn=null;function ni(t){if(t=Fo(t)){if(typeof ti!="function")throw Error(n(280));var r=t.stateNode;r&&(r=rl(r),ti(t.stateNode,t.type,r))}}function Fn(t){un?bn?bn.push(t):bn=[t]:un=t}function go(){if(un){var t=un,r=bn;if(bn=un=null,ni(t),r)for(t=0;t<r.length;t++)ni(r[t])}}function gs(t,r){return t(r)}function yo(){}var or=!1;function vo(t,r,o){if(or)return t(r,o);or=!0;try{return gs(t,r,o)}finally{or=!1,(un!==null||bn!==null)&&(yo(),go())}}function st(t,r){var o=t.stateNode;if(o===null)return null;var u=rl(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var ri=!1;if(g)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){ri=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{ri=!1}function ys(t,r,o,u,h,p,_,C,D){var B=Array.prototype.slice.call(arguments,3);try{r.apply(o,B)}catch(X){this.onError(X)}}var vs=!1,si=null,Sn=!1,_o=null,Vu={onError:function(t){vs=!0,si=t}};function ii(t,r,o,u,h,p,_,C,D){vs=!1,si=null,ys.apply(Vu,arguments)}function Ca(t,r,o,u,h,p,_,C,D){if(ii.apply(this,arguments),vs){if(vs){var B=si;vs=!1,si=null}else throw Error(n(198));Sn||(Sn=!0,_o=B)}}function In(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function _s(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Nn(t){if(In(t)!==t)throw Error(n(188))}function Pa(t){var r=t.alternate;if(!r){if(r=In(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Nn(h),t;if(p===u)return Nn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,C=h.child;C;){if(C===o){_=!0,o=h,u=p;break}if(C===u){_=!0,u=h,o=p;break}C=C.sibling}if(!_){for(C=p.child;C;){if(C===o){_=!0,o=p,u=h;break}if(C===u){_=!0,u=p,o=h;break}C=C.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function wo(t){return t=Pa(t),t!==null?oi(t):null}function oi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=oi(t);if(r!==null)return r;t=t.sibling}return null}var ai=e.unstable_scheduleCallback,Eo=e.unstable_cancelCallback,Ra=e.unstable_shouldYield,Du=e.unstable_requestPaint,He=e.unstable_now,ka=e.unstable_getCurrentPriorityLevel,ws=e.unstable_ImmediatePriority,Ar=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,To=e.unstable_LowPriority,ja=e.unstable_IdlePriority,Es=null,en=null;function Va(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Es,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Ma,So=Math.log,Da=Math.LN2;function Ma(t){return t>>>=0,t===0?32:31-(So(t)/Da|0)|0}var li=64,ui=4194304;function xr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ts(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var C=_&~h;C!==0?u=xr(C):(p&=_,p!==0&&(u=xr(p)))}else _=o&~h,_!==0?u=xr(_):p!==0&&(u=xr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Ut(r),h=1<<o,u|=t[o],r&=~h;return u}function Mu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Ut(p),C=1<<_,D=h[_];D===-1?((C&o)===0||(C&u)!==0)&&(h[_]=Mu(C,r)):D<=r&&(t.expiredLanes|=C),p&=~C}}function tn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ss(){var t=li;return li<<=1,(li&4194240)===0&&(li=64),t}function Cr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Pr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ut(r),t[r]=o}function Be(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Ut(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Rr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Ut(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Re=0;function kr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Oa,ci,La,ba,Fa,Io=!1,Un=[],At=null,An=null,xn=null,jr=new Map,hn=new Map,zn=[],Ou="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ua(t,r){switch(t){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":jr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(r.pointerId)}}function Ht(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Fo(r),r!==null&&ci(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Lu(t,r,o,u,h){switch(r){case"focusin":return At=Ht(At,t,r,o,u,h),!0;case"dragenter":return An=Ht(An,t,r,o,u,h),!0;case"mouseover":return xn=Ht(xn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return jr.set(p,Ht(jr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,hn.set(p,Ht(hn.get(p)||null,t,r,o,u,h)),!0}return!1}function za(t){var r=Cs(t.target);if(r!==null){var o=In(r);if(o!==null){if(r=o.tag,r===13){if(r=_s(o),r!==null){t.blockedOn=r,Fa(t.priority,function(){La(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=hi(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);ps=u,o.target.dispatchEvent(u),ps=null}else return r=Fo(o),r!==null&&ci(r),t.blockedOn=o,!1;r.shift()}return!0}function Is(t,r,o){lr(t)&&o.delete(r)}function Ba(){Io=!1,At!==null&&lr(At)&&(At=null),An!==null&&lr(An)&&(An=null),xn!==null&&lr(xn)&&(xn=null),jr.forEach(Is),hn.forEach(Is)}function Cn(t,r){t.blockedOn===r&&(t.blockedOn=null,Io||(Io=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ba)))}function Pn(t){function r(h){return Cn(h,t)}if(0<Un.length){Cn(Un[0],t);for(var o=1;o<Un.length;o++){var u=Un[o];u.blockedOn===t&&(u.blockedOn=null)}}for(At!==null&&Cn(At,t),An!==null&&Cn(An,t),xn!==null&&Cn(xn,t),jr.forEach(r),hn.forEach(r),o=0;o<zn.length;o++)u=zn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<zn.length&&(o=zn[0],o.blockedOn===null);)za(o),o.blockedOn===null&&zn.shift()}var ur=se.ReactCurrentBatchConfig,Vr=!0;function Xe(t,r,o,u){var h=Re,p=ur.transition;ur.transition=null;try{Re=1,No(t,r,o,u)}finally{Re=h,ur.transition=p}}function bu(t,r,o,u){var h=Re,p=ur.transition;ur.transition=null;try{Re=4,No(t,r,o,u)}finally{Re=h,ur.transition=p}}function No(t,r,o,u){if(Vr){var h=hi(t,r,o,u);if(h===null)Ku(t,r,u,Ns,o),Ua(t,u);else if(Lu(h,t,r,o,u))u.stopPropagation();else if(Ua(t,u),r&4&&-1<Ou.indexOf(t)){for(;h!==null;){var p=Fo(h);if(p!==null&&Oa(p),p=hi(t,r,o,u),p===null&&Ku(t,r,u,Ns,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Ku(t,r,u,null,o)}}var Ns=null;function hi(t,r,o,u){if(Ns=null,t=ei(u),t=Cs(t),t!==null)if(r=In(t),r===null)t=null;else if(o=r.tag,o===13){if(t=_s(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Ns=t,null}function Ao(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ka()){case ws:return 1;case Ar:return 4;case cn:case To:return 16;case ja:return 536870912;default:return 16}default:return 16}}var nn=null,di=null,qt=null;function xo(){if(qt)return qt;var t,r=di,o=r.length,u,h="value"in nn?nn.value:nn.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[p-u];u++);return qt=h.slice(t,1<u?1-u:void 0)}function fi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Bn(){return!0}function Co(){return!1}function xt(t){function r(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(o=t[C],this[C]=o?o(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Bn:Co,this.isPropagationStopped=Co,this}return le(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){},isPersistent:Bn}),r}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=xt(Rn),$n=le({},Rn,{view:0,detail:0}),Fu=xt($n),pi,cr,Dr,As=le({},$n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(pi=t.screenX-Dr.screenX,cr=t.screenY-Dr.screenY):cr=pi=0,Dr=t),pi)},movementY:function(t){return"movementY"in t?t.movementY:cr}}),gi=xt(As),Po=le({},As,{dataTransfer:0}),$a=xt(Po),yi=le({},$n,{relatedTarget:0}),vi=xt(yi),Ha=le({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),hr=xt(Ha),qa=le({},Rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wa=xt(qa),Ga=le({},Rn,{data:0}),Ro=xt(Ga),_i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ka(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Qa[t])?!!r[t]:!1}function Hn(){return Ka}var l=le({},$n,{key:function(t){if(t.key){var r=_i[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=fi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(t){return t.type==="keypress"?fi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),m=xt(l),y=le({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=xt(y),L=le({},$n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn}),$=xt(L),re=le({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=xt(re),gt=le({},As,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),je=xt(gt),Et=[9,13,27,32],lt=g&&"CompositionEvent"in window,dn=null;g&&"documentMode"in document&&(dn=document.documentMode);var rn=g&&"TextEvent"in window&&!dn,xs=g&&(!lt||dn&&8<dn&&11>=dn),wi=" ",jd=!1;function Vd(t,r){switch(t){case"keyup":return Et.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function iv(t,r){switch(t){case"compositionend":return Dd(r);case"keypress":return r.which!==32?null:(jd=!0,wi);case"textInput":return t=r.data,t===wi&&jd?null:t;default:return null}}function ov(t,r){if(Ei)return t==="compositionend"||!lt&&Vd(t,r)?(t=xo(),qt=di=nn=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return xs&&r.locale!=="ko"?null:r.data;default:return null}}var av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!av[t.type]:r==="textarea"}function Od(t,r,o,u){Fn(u),r=el(r,"onChange"),0<r.length&&(o=new mi("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var ko=null,jo=null;function lv(t){ef(t,0)}function Ya(t){var r=Ai(t);if(Ks(r))return t}function uv(t,r){if(t==="change")return r}var Ld=!1;if(g){var Uu;if(g){var zu="oninput"in document;if(!zu){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),zu=typeof bd.oninput=="function"}Uu=zu}else Uu=!1;Ld=Uu&&(!document.documentMode||9<document.documentMode)}function Fd(){ko&&(ko.detachEvent("onpropertychange",Ud),jo=ko=null)}function Ud(t){if(t.propertyName==="value"&&Ya(jo)){var r=[];Od(r,jo,t,ei(t)),vo(lv,r)}}function cv(t,r,o){t==="focusin"?(Fd(),ko=r,jo=o,ko.attachEvent("onpropertychange",Ud)):t==="focusout"&&Fd()}function hv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ya(jo)}function dv(t,r){if(t==="click")return Ya(r)}function fv(t,r){if(t==="input"||t==="change")return Ya(r)}function mv(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var kn=typeof Object.is=="function"?Object.is:mv;function Vo(t,r){if(kn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!v.call(r,h)||!kn(t[h],r[h]))return!1}return!0}function zd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bd(t,r){var o=zd(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zd(o)}}function $d(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?$d(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Hd(){for(var t=window,r=Ir();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Ir(t.document)}return r}function Bu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function pv(t){var r=Hd(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&$d(o.ownerDocument.documentElement,o)){if(u!==null&&Bu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=Bd(o,p);var _=Bd(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gv=g&&"documentMode"in document&&11>=document.documentMode,Ti=null,$u=null,Do=null,Hu=!1;function qd(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Hu||Ti==null||Ti!==Ir(u)||(u=Ti,"selectionStart"in u&&Bu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Do&&Vo(Do,u)||(Do=u,u=el($u,"onSelect"),0<u.length&&(r=new mi("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=Ti)))}function Xa(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Si={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionend:Xa("Transition","TransitionEnd")},qu={},Wd={};g&&(Wd=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function Ja(t){if(qu[t])return qu[t];if(!Si[t])return t;var r=Si[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Wd)return qu[t]=r[o];return t}var Gd=Ja("animationend"),Qd=Ja("animationiteration"),Kd=Ja("animationstart"),Yd=Ja("transitionend"),Xd=new Map,Jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,r){Xd.set(t,r),c(r,[t])}for(var Wu=0;Wu<Jd.length;Wu++){var Gu=Jd[Wu],yv=Gu.toLowerCase(),vv=Gu[0].toUpperCase()+Gu.slice(1);Mr(yv,"on"+vv)}Mr(Gd,"onAnimationEnd"),Mr(Qd,"onAnimationIteration"),Mr(Kd,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Yd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_v=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mo));function Zd(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,Ca(u,r,void 0,t),t.currentTarget=null}function ef(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var C=u[_],D=C.instance,B=C.currentTarget;if(C=C.listener,D!==p&&h.isPropagationStopped())break e;Zd(h,C,B),p=D}else for(_=0;_<u.length;_++){if(C=u[_],D=C.instance,B=C.currentTarget,C=C.listener,D!==p&&h.isPropagationStopped())break e;Zd(h,C,B),p=D}}}if(Sn)throw t=_o,Sn=!1,_o=null,t}function Ge(t,r){var o=r[tc];o===void 0&&(o=r[tc]=new Set);var u=t+"__bubble";o.has(u)||(tf(r,t,2,!1),o.add(u))}function Qu(t,r,o){var u=0;r&&(u|=4),tf(o,t,u,r)}var Za="_reactListening"+Math.random().toString(36).slice(2);function Oo(t){if(!t[Za]){t[Za]=!0,i.forEach(function(o){o!=="selectionchange"&&(_v.has(o)||Qu(o,!1,t),Qu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Za]||(r[Za]=!0,Qu("selectionchange",!1,r))}}function tf(t,r,o,u){switch(Ao(r)){case 1:var h=Xe;break;case 4:h=bu;break;default:h=No}o=h.bind(null,r,o,t),h=void 0,!ri||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Ku(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var C=u.stateNode.containerInfo;if(C===h||C.nodeType===8&&C.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var D=_.tag;if((D===3||D===4)&&(D=_.stateNode.containerInfo,D===h||D.nodeType===8&&D.parentNode===h))return;_=_.return}for(;C!==null;){if(_=Cs(C),_===null)return;if(D=_.tag,D===5||D===6){u=p=_;continue e}C=C.parentNode}}u=u.return}vo(function(){var B=p,X=ei(o),J=[];e:{var Y=Xd.get(t);if(Y!==void 0){var oe=mi,ce=t;switch(t){case"keypress":if(fi(o)===0)break e;case"keydown":case"keyup":oe=m;break;case"focusin":ce="focus",oe=vi;break;case"focusout":ce="blur",oe=vi;break;case"beforeblur":case"afterblur":oe=vi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=$a;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=$;break;case Gd:case Qd:case Kd:oe=hr;break;case Yd:oe=ze;break;case"scroll":oe=Fu;break;case"wheel":oe=je;break;case"copy":case"cut":case"paste":oe=Wa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=E}var he=(r&4)!==0,it=!he&&t==="scroll",b=he?Y!==null?Y+"Capture":null:Y;he=[];for(var M=B,U;M!==null;){U=M;var ee=U.stateNode;if(U.tag===5&&ee!==null&&(U=ee,b!==null&&(ee=st(M,b),ee!=null&&he.push(Lo(M,ee,U)))),it)break;M=M.return}0<he.length&&(Y=new oe(Y,ce,null,o,X),J.push({event:Y,listeners:he}))}}if((r&7)===0){e:{if(Y=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",Y&&o!==ps&&(ce=o.relatedTarget||o.fromElement)&&(Cs(ce)||ce[dr]))break e;if((oe||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,oe?(ce=o.relatedTarget||o.toElement,oe=B,ce=ce?Cs(ce):null,ce!==null&&(it=In(ce),ce!==it||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(oe=null,ce=B),oe!==ce)){if(he=gi,ee="onMouseLeave",b="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(he=E,ee="onPointerLeave",b="onPointerEnter",M="pointer"),it=oe==null?Y:Ai(oe),U=ce==null?Y:Ai(ce),Y=new he(ee,M+"leave",oe,o,X),Y.target=it,Y.relatedTarget=U,ee=null,Cs(X)===B&&(he=new he(b,M+"enter",ce,o,X),he.target=U,he.relatedTarget=it,ee=he),it=ee,oe&&ce)t:{for(he=oe,b=ce,M=0,U=he;U;U=Ii(U))M++;for(U=0,ee=b;ee;ee=Ii(ee))U++;for(;0<M-U;)he=Ii(he),M--;for(;0<U-M;)b=Ii(b),U--;for(;M--;){if(he===b||b!==null&&he===b.alternate)break t;he=Ii(he),b=Ii(b)}he=null}else he=null;oe!==null&&nf(J,Y,oe,he,!1),ce!==null&&it!==null&&nf(J,it,ce,he,!0)}}e:{if(Y=B?Ai(B):window,oe=Y.nodeName&&Y.nodeName.toLowerCase(),oe==="select"||oe==="input"&&Y.type==="file")var de=uv;else if(Md(Y))if(Ld)de=fv;else{de=hv;var ye=cv}else(oe=Y.nodeName)&&oe.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(de=dv);if(de&&(de=de(t,B))){Od(J,de,o,X);break e}ye&&ye(t,Y,B),t==="focusout"&&(ye=Y._wrapperState)&&ye.controlled&&Y.type==="number"&&Xs(Y,"number",Y.value)}switch(ye=B?Ai(B):window,t){case"focusin":(Md(ye)||ye.contentEditable==="true")&&(Ti=ye,$u=B,Do=null);break;case"focusout":Do=$u=Ti=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,qd(J,o,X);break;case"selectionchange":if(gv)break;case"keydown":case"keyup":qd(J,o,X)}var ve;if(lt)e:{switch(t){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Ei?Vd(t,o)&&(Te="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(xs&&o.locale!=="ko"&&(Ei||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Ei&&(ve=xo()):(nn=X,di="value"in nn?nn.value:nn.textContent,Ei=!0)),ye=el(B,Te),0<ye.length&&(Te=new Ro(Te,t,null,o,X),J.push({event:Te,listeners:ye}),ve?Te.data=ve:(ve=Dd(o),ve!==null&&(Te.data=ve)))),(ve=rn?iv(t,o):ov(t,o))&&(B=el(B,"onBeforeInput"),0<B.length&&(X=new Ro("onBeforeInput","beforeinput",null,o,X),J.push({event:X,listeners:B}),X.data=ve))}ef(J,r)})}function Lo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function el(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=st(t,o),p!=null&&u.unshift(Lo(t,p,h)),p=st(t,r),p!=null&&u.push(Lo(t,p,h))),t=t.return}return u}function Ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nf(t,r,o,u,h){for(var p=r._reactName,_=[];o!==null&&o!==u;){var C=o,D=C.alternate,B=C.stateNode;if(D!==null&&D===u)break;C.tag===5&&B!==null&&(C=B,h?(D=st(o,p),D!=null&&_.unshift(Lo(o,D,C))):h||(D=st(o,p),D!=null&&_.push(Lo(o,D,C)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var wv=/\r\n?/g,Ev=/\u0000|\uFFFD/g;function rf(t){return(typeof t=="string"?t:""+t).replace(wv,`
`).replace(Ev,"")}function tl(t,r,o){if(r=rf(r),rf(t)!==r&&o)throw Error(n(425))}function nl(){}var Yu=null,Xu=null;function Ju(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,Tv=typeof clearTimeout=="function"?clearTimeout:void 0,sf=typeof Promise=="function"?Promise:void 0,Sv=typeof queueMicrotask=="function"?queueMicrotask:typeof sf<"u"?function(t){return sf.resolve(null).then(t).catch(Iv)}:Zu;function Iv(t){setTimeout(function(){throw t})}function ec(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Pn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Pn(r)}function Or(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function of(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),qn="__reactFiber$"+Ni,bo="__reactProps$"+Ni,dr="__reactContainer$"+Ni,tc="__reactEvents$"+Ni,Nv="__reactListeners$"+Ni,Av="__reactHandles$"+Ni;function Cs(t){var r=t[qn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[dr]||o[qn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=of(t);t!==null;){if(o=t[qn])return o;t=of(t)}return r}t=o,o=t.parentNode}return null}function Fo(t){return t=t[qn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function rl(t){return t[bo]||null}var nc=[],xi=-1;function Lr(t){return{current:t}}function Qe(t){0>xi||(t.current=nc[xi],nc[xi]=null,xi--)}function qe(t,r){xi++,nc[xi]=t.current,t.current=r}var br={},Vt=Lr(br),Wt=Lr(!1),Ps=br;function Ci(t,r){var o=t.type.contextTypes;if(!o)return br;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Gt(t){return t=t.childContextTypes,t!=null}function sl(){Qe(Wt),Qe(Vt)}function af(t,r,o){if(Vt.current!==br)throw Error(n(168));qe(Vt,r),qe(Wt,o)}function lf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,be(t)||"Unknown",h));return le({},o,u)}function il(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,Ps=Vt.current,qe(Vt,t),qe(Wt,Wt.current),!0}function uf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=lf(t,r,Ps),u.__reactInternalMemoizedMergedChildContext=t,Qe(Wt),Qe(Vt),qe(Vt,t)):Qe(Wt),qe(Wt,o)}var fr=null,ol=!1,rc=!1;function cf(t){fr===null?fr=[t]:fr.push(t)}function xv(t){ol=!0,cf(t)}function Fr(){if(!rc&&fr!==null){rc=!0;var t=0,r=Re;try{var o=fr;for(Re=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}fr=null,ol=!1}catch(h){throw fr!==null&&(fr=fr.slice(t+1)),ai(ws,Fr),h}finally{Re=r,rc=!1}}return null}var Pi=[],Ri=0,al=null,ll=0,fn=[],mn=0,Rs=null,mr=1,pr="";function ks(t,r){Pi[Ri++]=ll,Pi[Ri++]=al,al=t,ll=r}function hf(t,r,o){fn[mn++]=mr,fn[mn++]=pr,fn[mn++]=Rs,Rs=t;var u=mr;t=pr;var h=32-Ut(u)-1;u&=~(1<<h),o+=1;var p=32-Ut(r)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,mr=1<<32-Ut(r)+h|o<<h|u,pr=p+t}else mr=1<<p|o<<h|u,pr=t}function sc(t){t.return!==null&&(ks(t,1),hf(t,1,0))}function ic(t){for(;t===al;)al=Pi[--Ri],Pi[Ri]=null,ll=Pi[--Ri],Pi[Ri]=null;for(;t===Rs;)Rs=fn[--mn],fn[mn]=null,pr=fn[--mn],fn[mn]=null,mr=fn[--mn],fn[mn]=null}var sn=null,on=null,Je=!1,jn=null;function df(t,r){var o=vn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function ff(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,sn=t,on=Or(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,sn=t,on=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Rs!==null?{id:mr,overflow:pr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=vn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,sn=t,on=null,!0):!1;default:return!1}}function oc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ac(t){if(Je){var r=on;if(r){var o=r;if(!ff(t,r)){if(oc(t))throw Error(n(418));r=Or(o.nextSibling);var u=sn;r&&ff(t,r)?df(u,o):(t.flags=t.flags&-4097|2,Je=!1,sn=t)}}else{if(oc(t))throw Error(n(418));t.flags=t.flags&-4097|2,Je=!1,sn=t}}}function mf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function ul(t){if(t!==sn)return!1;if(!Je)return mf(t),Je=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Ju(t.type,t.memoizedProps)),r&&(r=on)){if(oc(t))throw pf(),Error(n(418));for(;r;)df(t,r),r=Or(r.nextSibling)}if(mf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){on=Or(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}on=null}}else on=sn?Or(t.stateNode.nextSibling):null;return!0}function pf(){for(var t=on;t;)t=Or(t.nextSibling)}function ki(){on=sn=null,Je=!1}function lc(t){jn===null?jn=[t]:jn.push(t)}var Cv=se.ReactCurrentBatchConfig;function Uo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var C=h.refs;_===null?delete C[p]:C[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function cl(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function gf(t){var r=t._init;return r(t._payload)}function yf(t){function r(b,M){if(t){var U=b.deletions;U===null?(b.deletions=[M],b.flags|=16):U.push(M)}}function o(b,M){if(!t)return null;for(;M!==null;)r(b,M),M=M.sibling;return null}function u(b,M){for(b=new Map;M!==null;)M.key!==null?b.set(M.key,M):b.set(M.index,M),M=M.sibling;return b}function h(b,M){return b=Gr(b,M),b.index=0,b.sibling=null,b}function p(b,M,U){return b.index=U,t?(U=b.alternate,U!==null?(U=U.index,U<M?(b.flags|=2,M):U):(b.flags|=2,M)):(b.flags|=1048576,M)}function _(b){return t&&b.alternate===null&&(b.flags|=2),b}function C(b,M,U,ee){return M===null||M.tag!==6?(M=Zc(U,b.mode,ee),M.return=b,M):(M=h(M,U),M.return=b,M)}function D(b,M,U,ee){var de=U.type;return de===j?X(b,M,U.props.children,ee,U.key):M!==null&&(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ft&&gf(de)===M.type)?(ee=h(M,U.props),ee.ref=Uo(b,M,U),ee.return=b,ee):(ee=Dl(U.type,U.key,U.props,null,b.mode,ee),ee.ref=Uo(b,M,U),ee.return=b,ee)}function B(b,M,U,ee){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=eh(U,b.mode,ee),M.return=b,M):(M=h(M,U.children||[]),M.return=b,M)}function X(b,M,U,ee,de){return M===null||M.tag!==7?(M=Fs(U,b.mode,ee,de),M.return=b,M):(M=h(M,U),M.return=b,M)}function J(b,M,U){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Zc(""+M,b.mode,U),M.return=b,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ee:return U=Dl(M.type,M.key,M.props,null,b.mode,U),U.ref=Uo(b,null,M),U.return=b,U;case z:return M=eh(M,b.mode,U),M.return=b,M;case ft:var ee=M._init;return J(b,ee(M._payload),U)}if(rr(M)||me(M))return M=Fs(M,b.mode,U,null),M.return=b,M;cl(b,M)}return null}function Y(b,M,U,ee){var de=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return de!==null?null:C(b,M,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Ee:return U.key===de?D(b,M,U,ee):null;case z:return U.key===de?B(b,M,U,ee):null;case ft:return de=U._init,Y(b,M,de(U._payload),ee)}if(rr(U)||me(U))return de!==null?null:X(b,M,U,ee,null);cl(b,U)}return null}function oe(b,M,U,ee,de){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return b=b.get(U)||null,C(M,b,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Ee:return b=b.get(ee.key===null?U:ee.key)||null,D(M,b,ee,de);case z:return b=b.get(ee.key===null?U:ee.key)||null,B(M,b,ee,de);case ft:var ye=ee._init;return oe(b,M,U,ye(ee._payload),de)}if(rr(ee)||me(ee))return b=b.get(U)||null,X(M,b,ee,de,null);cl(M,ee)}return null}function ce(b,M,U,ee){for(var de=null,ye=null,ve=M,Te=M=0,It=null;ve!==null&&Te<U.length;Te++){ve.index>Te?(It=ve,ve=null):It=ve.sibling;var Oe=Y(b,ve,U[Te],ee);if(Oe===null){ve===null&&(ve=It);break}t&&ve&&Oe.alternate===null&&r(b,ve),M=p(Oe,M,Te),ye===null?de=Oe:ye.sibling=Oe,ye=Oe,ve=It}if(Te===U.length)return o(b,ve),Je&&ks(b,Te),de;if(ve===null){for(;Te<U.length;Te++)ve=J(b,U[Te],ee),ve!==null&&(M=p(ve,M,Te),ye===null?de=ve:ye.sibling=ve,ye=ve);return Je&&ks(b,Te),de}for(ve=u(b,ve);Te<U.length;Te++)It=oe(ve,b,Te,U[Te],ee),It!==null&&(t&&It.alternate!==null&&ve.delete(It.key===null?Te:It.key),M=p(It,M,Te),ye===null?de=It:ye.sibling=It,ye=It);return t&&ve.forEach(function(Qr){return r(b,Qr)}),Je&&ks(b,Te),de}function he(b,M,U,ee){var de=me(U);if(typeof de!="function")throw Error(n(150));if(U=de.call(U),U==null)throw Error(n(151));for(var ye=de=null,ve=M,Te=M=0,It=null,Oe=U.next();ve!==null&&!Oe.done;Te++,Oe=U.next()){ve.index>Te?(It=ve,ve=null):It=ve.sibling;var Qr=Y(b,ve,Oe.value,ee);if(Qr===null){ve===null&&(ve=It);break}t&&ve&&Qr.alternate===null&&r(b,ve),M=p(Qr,M,Te),ye===null?de=Qr:ye.sibling=Qr,ye=Qr,ve=It}if(Oe.done)return o(b,ve),Je&&ks(b,Te),de;if(ve===null){for(;!Oe.done;Te++,Oe=U.next())Oe=J(b,Oe.value,ee),Oe!==null&&(M=p(Oe,M,Te),ye===null?de=Oe:ye.sibling=Oe,ye=Oe);return Je&&ks(b,Te),de}for(ve=u(b,ve);!Oe.done;Te++,Oe=U.next())Oe=oe(ve,b,Te,Oe.value,ee),Oe!==null&&(t&&Oe.alternate!==null&&ve.delete(Oe.key===null?Te:Oe.key),M=p(Oe,M,Te),ye===null?de=Oe:ye.sibling=Oe,ye=Oe);return t&&ve.forEach(function(a_){return r(b,a_)}),Je&&ks(b,Te),de}function it(b,M,U,ee){if(typeof U=="object"&&U!==null&&U.type===j&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Ee:e:{for(var de=U.key,ye=M;ye!==null;){if(ye.key===de){if(de=U.type,de===j){if(ye.tag===7){o(b,ye.sibling),M=h(ye,U.props.children),M.return=b,b=M;break e}}else if(ye.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ft&&gf(de)===ye.type){o(b,ye.sibling),M=h(ye,U.props),M.ref=Uo(b,ye,U),M.return=b,b=M;break e}o(b,ye);break}else r(b,ye);ye=ye.sibling}U.type===j?(M=Fs(U.props.children,b.mode,ee,U.key),M.return=b,b=M):(ee=Dl(U.type,U.key,U.props,null,b.mode,ee),ee.ref=Uo(b,M,U),ee.return=b,b=ee)}return _(b);case z:e:{for(ye=U.key;M!==null;){if(M.key===ye)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){o(b,M.sibling),M=h(M,U.children||[]),M.return=b,b=M;break e}else{o(b,M);break}else r(b,M);M=M.sibling}M=eh(U,b.mode,ee),M.return=b,b=M}return _(b);case ft:return ye=U._init,it(b,M,ye(U._payload),ee)}if(rr(U))return ce(b,M,U,ee);if(me(U))return he(b,M,U,ee);cl(b,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,M!==null&&M.tag===6?(o(b,M.sibling),M=h(M,U),M.return=b,b=M):(o(b,M),M=Zc(U,b.mode,ee),M.return=b,b=M),_(b)):o(b,M)}return it}var ji=yf(!0),vf=yf(!1),hl=Lr(null),dl=null,Vi=null,uc=null;function cc(){uc=Vi=dl=null}function hc(t){var r=hl.current;Qe(hl),t._currentValue=r}function dc(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Di(t,r){dl=t,uc=Vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Qt=!0),t.firstContext=null)}function pn(t){var r=t._currentValue;if(uc!==t)if(t={context:t,memoizedValue:r,next:null},Vi===null){if(dl===null)throw Error(n(308));Vi=t,dl.dependencies={lanes:0,firstContext:t}}else Vi=Vi.next=t;return r}var js=null;function fc(t){js===null?js=[t]:js.push(t)}function _f(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,fc(r)):(o.next=h.next,h.next=o),r.interleaved=o,gr(t,u)}function gr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ur=!1;function mc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function zr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Me&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,gr(t,o)}return h=u.interleaved,h===null?(r.next=r,fc(u)):(r.next=h.next,h.next=r),u.interleaved=r,gr(t,o)}function fl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Rr(t,o)}}function Ef(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function ml(t,r,o,u){var h=t.updateQueue;Ur=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var D=C,B=D.next;D.next=null,_===null?p=B:_.next=B,_=D;var X=t.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==_&&(C===null?X.firstBaseUpdate=B:C.next=B,X.lastBaseUpdate=D))}if(p!==null){var J=h.baseState;_=0,X=B=D=null,C=p;do{var Y=C.lane,oe=C.eventTime;if((u&Y)===Y){X!==null&&(X=X.next={eventTime:oe,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ce=t,he=C;switch(Y=r,oe=o,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){J=ce.call(oe,J,Y);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,Y=typeof ce=="function"?ce.call(oe,J,Y):ce,Y==null)break e;J=le({},J,Y);break e;case 2:Ur=!0}}C.callback!==null&&C.lane!==0&&(t.flags|=64,Y=h.effects,Y===null?h.effects=[C]:Y.push(C))}else oe={eventTime:oe,lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(B=X=oe,D=J):X=X.next=oe,_|=Y;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;Y=C,C=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);if(X===null&&(D=J),h.baseState=D,h.firstBaseUpdate=B,h.lastBaseUpdate=X,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Ms|=_,t.lanes=_,t.memoizedState=J}}function Tf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var zo={},Wn=Lr(zo),Bo=Lr(zo),$o=Lr(zo);function Vs(t){if(t===zo)throw Error(n(174));return t}function pc(t,r){switch(qe($o,r),qe(Bo,t),qe(Wn,zo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:pt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=pt(r,t)}Qe(Wn),qe(Wn,r)}function Mi(){Qe(Wn),Qe(Bo),Qe($o)}function Sf(t){Vs($o.current);var r=Vs(Wn.current),o=pt(r,t.type);r!==o&&(qe(Bo,t),qe(Wn,o))}function gc(t){Bo.current===t&&(Qe(Wn),Qe(Bo))}var Ze=Lr(0);function pl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var yc=[];function vc(){for(var t=0;t<yc.length;t++)yc[t]._workInProgressVersionPrimary=null;yc.length=0}var gl=se.ReactCurrentDispatcher,_c=se.ReactCurrentBatchConfig,Ds=0,et=null,yt=null,Tt=null,yl=!1,Ho=!1,qo=0,Pv=0;function Dt(){throw Error(n(321))}function wc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!kn(t[o],r[o]))return!1;return!0}function Ec(t,r,o,u,h,p){if(Ds=p,et=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,gl.current=t===null||t.memoizedState===null?Vv:Dv,t=o(u,h),Ho){p=0;do{if(Ho=!1,qo=0,25<=p)throw Error(n(301));p+=1,Tt=yt=null,r.updateQueue=null,gl.current=Mv,t=o(u,h)}while(Ho)}if(gl.current=wl,r=yt!==null&&yt.next!==null,Ds=0,Tt=yt=et=null,yl=!1,r)throw Error(n(300));return t}function Tc(){var t=qo!==0;return qo=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?et.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function gn(){if(yt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var r=Tt===null?et.memoizedState:Tt.next;if(r!==null)Tt=r,yt=t;else{if(t===null)throw Error(n(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Tt===null?et.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Wo(t,r){return typeof r=="function"?r(t):r}function Sc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=yt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var C=_=null,D=null,B=p;do{var X=B.lane;if((Ds&X)===X)D!==null&&(D=D.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),u=B.hasEagerState?B.eagerState:t(u,B.action);else{var J={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};D===null?(C=D=J,_=u):D=D.next=J,et.lanes|=X,Ms|=X}B=B.next}while(B!==null&&B!==p);D===null?_=u:D.next=C,kn(u,r.memoizedState)||(Qt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=D,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,et.lanes|=p,Ms|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Ic(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);kn(p,r.memoizedState)||(Qt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function If(){}function Nf(t,r){var o=et,u=gn(),h=r(),p=!kn(u.memoizedState,h);if(p&&(u.memoizedState=h,Qt=!0),u=u.queue,Nc(Cf.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||Tt!==null&&Tt.memoizedState.tag&1){if(o.flags|=2048,Go(9,xf.bind(null,o,u,h,r),void 0,null),St===null)throw Error(n(349));(Ds&30)!==0||Af(o,r,h)}return h}function Af(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=et.updateQueue,r===null?(r={lastEffect:null,stores:null},et.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function xf(t,r,o,u){r.value=o,r.getSnapshot=u,Pf(r)&&Rf(t)}function Cf(t,r,o){return o(function(){Pf(r)&&Rf(t)})}function Pf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!kn(t,o)}catch{return!0}}function Rf(t){var r=gr(t,1);r!==null&&On(r,t,1,-1)}function kf(t){var r=Gn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:t},r.queue=t,t=t.dispatch=jv.bind(null,et,t),[r.memoizedState,t]}function Go(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=et.updateQueue,r===null?(r={lastEffect:null,stores:null},et.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function jf(){return gn().memoizedState}function vl(t,r,o,u){var h=Gn();et.flags|=t,h.memoizedState=Go(1|r,o,void 0,u===void 0?null:u)}function _l(t,r,o,u){var h=gn();u=u===void 0?null:u;var p=void 0;if(yt!==null){var _=yt.memoizedState;if(p=_.destroy,u!==null&&wc(u,_.deps)){h.memoizedState=Go(r,o,p,u);return}}et.flags|=t,h.memoizedState=Go(1|r,o,p,u)}function Vf(t,r){return vl(8390656,8,t,r)}function Nc(t,r){return _l(2048,8,t,r)}function Df(t,r){return _l(4,2,t,r)}function Mf(t,r){return _l(4,4,t,r)}function Of(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Lf(t,r,o){return o=o!=null?o.concat([t]):null,_l(4,4,Of.bind(null,r,t),o)}function Ac(){}function bf(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&wc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Ff(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&wc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Uf(t,r,o){return(Ds&21)===0?(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=o):(kn(o,r)||(o=Ss(),et.lanes|=o,Ms|=o,t.baseState=!0),r)}function Rv(t,r){var o=Re;Re=o!==0&&4>o?o:4,t(!0);var u=_c.transition;_c.transition={};try{t(!1),r()}finally{Re=o,_c.transition=u}}function zf(){return gn().memoizedState}function kv(t,r,o){var u=qr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},Bf(t))$f(r,o);else if(o=_f(t,r,o,u),o!==null){var h=$t();On(o,t,u,h),Hf(o,r,u)}}function jv(t,r,o){var u=qr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(Bf(t))$f(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,C=p(_,o);if(h.hasEagerState=!0,h.eagerState=C,kn(C,_)){var D=r.interleaved;D===null?(h.next=h,fc(r)):(h.next=D.next,D.next=h),r.interleaved=h;return}}catch{}finally{}o=_f(t,r,h,u),o!==null&&(h=$t(),On(o,t,u,h),Hf(o,r,u))}}function Bf(t){var r=t.alternate;return t===et||r!==null&&r===et}function $f(t,r){Ho=yl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Hf(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Rr(t,o)}}var wl={readContext:pn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},Vv={readContext:pn,useCallback:function(t,r){return Gn().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:Vf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,vl(4194308,4,Of.bind(null,r,t),o)},useLayoutEffect:function(t,r){return vl(4194308,4,t,r)},useInsertionEffect:function(t,r){return vl(4,2,t,r)},useMemo:function(t,r){var o=Gn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Gn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=kv.bind(null,et,t),[u.memoizedState,t]},useRef:function(t){var r=Gn();return t={current:t},r.memoizedState=t},useState:kf,useDebugValue:Ac,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=kf(!1),r=t[0];return t=Rv.bind(null,t[1]),Gn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=et,h=Gn();if(Je){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),St===null)throw Error(n(349));(Ds&30)!==0||Af(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,Vf(Cf.bind(null,u,p,t),[t]),u.flags|=2048,Go(9,xf.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Gn(),r=St.identifierPrefix;if(Je){var o=pr,u=mr;o=(u&~(1<<32-Ut(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=qo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Pv++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Dv={readContext:pn,useCallback:bf,useContext:pn,useEffect:Nc,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Mf,useMemo:Ff,useReducer:Sc,useRef:jf,useState:function(){return Sc(Wo)},useDebugValue:Ac,useDeferredValue:function(t){var r=gn();return Uf(r,yt.memoizedState,t)},useTransition:function(){var t=Sc(Wo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:If,useSyncExternalStore:Nf,useId:zf,unstable_isNewReconciler:!1},Mv={readContext:pn,useCallback:bf,useContext:pn,useEffect:Nc,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Mf,useMemo:Ff,useReducer:Ic,useRef:jf,useState:function(){return Ic(Wo)},useDebugValue:Ac,useDeferredValue:function(t){var r=gn();return yt===null?r.memoizedState=t:Uf(r,yt.memoizedState,t)},useTransition:function(){var t=Ic(Wo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:If,useSyncExternalStore:Nf,useId:zf,unstable_isNewReconciler:!1};function Vn(t,r){if(t&&t.defaultProps){r=le({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function xc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:le({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var El={isMounted:function(t){return(t=t._reactInternals)?In(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=$t(),h=qr(t),p=yr(u,h);p.payload=r,o!=null&&(p.callback=o),r=zr(t,p,h),r!==null&&(On(r,t,h,u),fl(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=$t(),h=qr(t),p=yr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=zr(t,p,h),r!==null&&(On(r,t,h,u),fl(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=$t(),u=qr(t),h=yr(o,u);h.tag=2,r!=null&&(h.callback=r),r=zr(t,h,u),r!==null&&(On(r,t,u,o),fl(r,t,u))}};function qf(t,r,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!Vo(o,u)||!Vo(h,p):!0}function Wf(t,r,o){var u=!1,h=br,p=r.contextType;return typeof p=="object"&&p!==null?p=pn(p):(h=Gt(r)?Ps:Vt.current,u=r.contextTypes,p=(u=u!=null)?Ci(t,h):br),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=El,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function Gf(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&El.enqueueReplaceState(r,r.state,null)}function Cc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},mc(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=pn(p):(p=Gt(r)?Ps:Vt.current,h.context=Ci(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(xc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&El.enqueueReplaceState(h,h.state,null),ml(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Oi(t,r){try{var o="",u=r;do o+=xe(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function Pc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Rc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Ov=typeof WeakMap=="function"?WeakMap:Map;function Qf(t,r,o){o=yr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){Cl||(Cl=!0,qc=u),Rc(t,r)},o}function Kf(t,r,o){o=yr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){Rc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){Rc(t,r),typeof u!="function"&&($r===null?$r=new Set([this]):$r.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Yf(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Ov;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=Yv.bind(null,t,r,o),r.then(t,t))}function Xf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Jf(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=yr(-1,1),r.tag=2,zr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Lv=se.ReactCurrentOwner,Qt=!1;function Bt(t,r,o,u){r.child=t===null?vf(r,null,o,u):ji(r,t.child,o,u)}function Zf(t,r,o,u,h){o=o.render;var p=r.ref;return Di(r,h),u=Ec(t,r,o,u,p,h),o=Tc(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Je&&o&&sc(r),r.flags|=1,Bt(t,r,u,h),r.child)}function em(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Jc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,tm(t,r,p,u,h)):(t=Dl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:Vo,o(_,u)&&t.ref===r.ref)return vr(t,r,h)}return r.flags|=1,t=Gr(p,u),t.ref=r.ref,t.return=r,r.child=t}function tm(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(Vo(p,u)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Qt=!0);else return r.lanes=t.lanes,vr(t,r,h)}return kc(t,r,o,u,h)}function nm(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(bi,an),an|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,qe(bi,an),an|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,qe(bi,an),an|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,qe(bi,an),an|=u;return Bt(t,r,h,o),r.child}function rm(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function kc(t,r,o,u,h){var p=Gt(o)?Ps:Vt.current;return p=Ci(r,p),Di(r,h),o=Ec(t,r,o,u,p,h),u=Tc(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Je&&u&&sc(r),r.flags|=1,Bt(t,r,o,h),r.child)}function sm(t,r,o,u,h){if(Gt(o)){var p=!0;il(r)}else p=!1;if(Di(r,h),r.stateNode===null)Sl(t,r),Wf(r,o,u),Cc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,C=r.memoizedProps;_.props=C;var D=_.context,B=o.contextType;typeof B=="object"&&B!==null?B=pn(B):(B=Gt(o)?Ps:Vt.current,B=Ci(r,B));var X=o.getDerivedStateFromProps,J=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function";J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==u||D!==B)&&Gf(r,_,u,B),Ur=!1;var Y=r.memoizedState;_.state=Y,ml(r,u,_,h),D=r.memoizedState,C!==u||Y!==D||Wt.current||Ur?(typeof X=="function"&&(xc(r,o,X,u),D=r.memoizedState),(C=Ur||qf(r,o,C,u,Y,D,B))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=D),_.props=u,_.state=D,_.context=B,u=C):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,wf(t,r),C=r.memoizedProps,B=r.type===r.elementType?C:Vn(r.type,C),_.props=B,J=r.pendingProps,Y=_.context,D=o.contextType,typeof D=="object"&&D!==null?D=pn(D):(D=Gt(o)?Ps:Vt.current,D=Ci(r,D));var oe=o.getDerivedStateFromProps;(X=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==J||Y!==D)&&Gf(r,_,u,D),Ur=!1,Y=r.memoizedState,_.state=Y,ml(r,u,_,h);var ce=r.memoizedState;C!==J||Y!==ce||Wt.current||Ur?(typeof oe=="function"&&(xc(r,o,oe,u),ce=r.memoizedState),(B=Ur||qf(r,o,B,u,Y,ce,D)||!1)?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ce,D),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ce,D)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===t.memoizedProps&&Y===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&Y===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ce),_.props=u,_.state=ce,_.context=D,u=B):(typeof _.componentDidUpdate!="function"||C===t.memoizedProps&&Y===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&Y===t.memoizedState||(r.flags|=1024),u=!1)}return jc(t,r,o,u,p,h)}function jc(t,r,o,u,h,p){rm(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&uf(r,o,!1),vr(t,r,p);u=r.stateNode,Lv.current=r;var C=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=ji(r,t.child,null,p),r.child=ji(r,null,C,p)):Bt(t,r,C,p),r.memoizedState=u.state,h&&uf(r,o,!0),r.child}function im(t){var r=t.stateNode;r.pendingContext?af(t,r.pendingContext,r.pendingContext!==r.context):r.context&&af(t,r.context,!1),pc(t,r.containerInfo)}function om(t,r,o,u,h){return ki(),lc(h),r.flags|=256,Bt(t,r,o,u),r.child}var Vc={dehydrated:null,treeContext:null,retryLane:0};function Dc(t){return{baseLanes:t,cachePool:null,transitions:null}}function am(t,r,o){var u=r.pendingProps,h=Ze.current,p=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=t!==null&&t.memoizedState===null?!1:(h&2)!==0),C?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),qe(Ze,h&1),t===null)return ac(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Ml(_,u,0,null),t=Fs(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=Dc(o),r.memoizedState=Vc,t):Mc(r,_));if(h=t.memoizedState,h!==null&&(C=h.dehydrated,C!==null))return bv(t,r,_,u,C,h,o);if(p){p=u.fallback,_=r.mode,h=t.child,C=h.sibling;var D={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=D,r.deletions=null):(u=Gr(h,D),u.subtreeFlags=h.subtreeFlags&14680064),C!==null?p=Gr(C,p):(p=Fs(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?Dc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=Vc,u}return p=t.child,t=p.sibling,u=Gr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function Mc(t,r){return r=Ml({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Tl(t,r,o,u){return u!==null&&lc(u),ji(r,t.child,null,o),t=Mc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function bv(t,r,o,u,h,p,_){if(o)return r.flags&256?(r.flags&=-257,u=Pc(Error(n(422))),Tl(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=Ml({mode:"visible",children:u.children},h,0,null),p=Fs(p,h,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&ji(r,t.child,null,_),r.child.memoizedState=Dc(_),r.memoizedState=Vc,p);if((r.mode&1)===0)return Tl(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var C=u.dgst;return u=C,p=Error(n(419)),u=Pc(p,u,void 0),Tl(t,r,_,u)}if(C=(_&t.childLanes)!==0,Qt||C){if(u=St,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,gr(t,h),On(u,t,h,-1))}return Xc(),u=Pc(Error(n(421))),Tl(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Xv.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,on=Or(h.nextSibling),sn=r,Je=!0,jn=null,t!==null&&(fn[mn++]=mr,fn[mn++]=pr,fn[mn++]=Rs,mr=t.id,pr=t.overflow,Rs=r),r=Mc(r,u.children),r.flags|=4096,r)}function lm(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),dc(t.return,r,o)}function Oc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function um(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Bt(t,r,u.children,o),u=Ze.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lm(t,o,r);else if(t.tag===19)lm(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(qe(Ze,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&pl(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Oc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&pl(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Oc(r,!0,o,null,p);break;case"together":Oc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Sl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function vr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ms|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Gr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Gr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Fv(t,r,o){switch(r.tag){case 3:im(r),ki();break;case 5:Sf(r);break;case 1:Gt(r.type)&&il(r);break;case 4:pc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;qe(hl,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(qe(Ze,Ze.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?am(t,r,o):(qe(Ze,Ze.current&1),t=vr(t,r,o),t!==null?t.sibling:null);qe(Ze,Ze.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return um(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),qe(Ze,Ze.current),u)break;return null;case 22:case 23:return r.lanes=0,nm(t,r,o)}return vr(t,r,o)}var cm,Lc,hm,dm;cm=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Lc=function(){},hm=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Vs(Wn.current);var p=null;switch(o){case"input":h=ds(t,h),u=ds(t,u),p=[];break;case"select":h=le({},h,{value:void 0}),u=le({},u,{value:void 0}),p=[];break;case"textarea":h=ao(t,h),u=ao(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=nl)}mo(o,u);var _;o=null;for(B in h)if(!u.hasOwnProperty(B)&&h.hasOwnProperty(B)&&h[B]!=null)if(B==="style"){var C=h[B];for(_ in C)C.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(a.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in u){var D=u[B];if(C=h!=null?h[B]:void 0,u.hasOwnProperty(B)&&D!==C&&(D!=null||C!=null))if(B==="style")if(C){for(_ in C)!C.hasOwnProperty(_)||D&&D.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in D)D.hasOwnProperty(_)&&C[_]!==D[_]&&(o||(o={}),o[_]=D[_])}else o||(p||(p=[]),p.push(B,o)),o=D;else B==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,C=C?C.__html:void 0,D!=null&&C!==D&&(p=p||[]).push(B,D)):B==="children"?typeof D!="string"&&typeof D!="number"||(p=p||[]).push(B,""+D):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(a.hasOwnProperty(B)?(D!=null&&B==="onScroll"&&Ge("scroll",t),p||C===D||(p=[])):(p=p||[]).push(B,D))}o&&(p=p||[]).push("style",o);var B=p;(r.updateQueue=B)&&(r.flags|=4)}},dm=function(t,r,o,u){o!==u&&(r.flags|=4)};function Qo(t,r){if(!Je)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Mt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Uv(t,r,o){var u=r.pendingProps;switch(ic(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Gt(r.type)&&sl(),Mt(r),null;case 3:return u=r.stateNode,Mi(),Qe(Wt),Qe(Vt),vc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(ul(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,jn!==null&&(Qc(jn),jn=null))),Lc(t,r),Mt(r),null;case 5:gc(r);var h=Vs($o.current);if(o=r.type,t!==null&&r.stateNode!=null)hm(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Mt(r),null}if(t=Vs(Wn.current),ul(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[qn]=r,u[bo]=p,t=(r.mode&1)!==0,o){case"dialog":Ge("cancel",u),Ge("close",u);break;case"iframe":case"object":case"embed":Ge("load",u);break;case"video":case"audio":for(h=0;h<Mo.length;h++)Ge(Mo[h],u);break;case"source":Ge("error",u);break;case"img":case"image":case"link":Ge("error",u),Ge("load",u);break;case"details":Ge("toggle",u);break;case"input":Ys(u,p),Ge("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ge("invalid",u);break;case"textarea":Js(u,p),Ge("invalid",u)}mo(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var C=p[_];_==="children"?typeof C=="string"?u.textContent!==C&&(p.suppressHydrationWarning!==!0&&tl(u.textContent,C,t),h=["children",C]):typeof C=="number"&&u.textContent!==""+C&&(p.suppressHydrationWarning!==!0&&tl(u.textContent,C,t),h=["children",""+C]):a.hasOwnProperty(_)&&C!=null&&_==="onScroll"&&Ge("scroll",u)}switch(o){case"input":nr(u),xa(u,p,!0);break;case"textarea":nr(u),lo(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=nl)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[qn]=r,t[bo]=u,cm(t,r,!1,!1),r.stateNode=t;e:{switch(_=po(o,u),o){case"dialog":Ge("cancel",t),Ge("close",t),h=u;break;case"iframe":case"object":case"embed":Ge("load",t),h=u;break;case"video":case"audio":for(h=0;h<Mo.length;h++)Ge(Mo[h],t);h=u;break;case"source":Ge("error",t),h=u;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),h=u;break;case"details":Ge("toggle",t),h=u;break;case"input":Ys(t,u),h=ds(t,u),Ge("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=le({},u,{value:void 0}),Ge("invalid",t);break;case"textarea":Js(t,u),h=ao(t,u),Ge("invalid",t);break;default:h=u}mo(o,h),C=h;for(p in C)if(C.hasOwnProperty(p)){var D=C[p];p==="style"?ho(t,D):p==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&uo(t,D)):p==="children"?typeof D=="string"?(o!=="textarea"||D!=="")&&Nr(t,D):typeof D=="number"&&Nr(t,""+D):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?D!=null&&p==="onScroll"&&Ge("scroll",t):D!=null&&te(t,p,D,_))}switch(o){case"input":nr(t),xa(t,u,!1);break;case"textarea":nr(t),lo(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Fe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?sr(t,!!u.multiple,p,!1):u.defaultValue!=null&&sr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=nl)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(t&&r.stateNode!=null)dm(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Vs($o.current),Vs(Wn.current),ul(r)){if(u=r.stateNode,o=r.memoizedProps,u[qn]=r,(p=u.nodeValue!==o)&&(t=sn,t!==null))switch(t.tag){case 3:tl(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tl(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[qn]=r,r.stateNode=u}return Mt(r),null;case 13:if(Qe(Ze),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&on!==null&&(r.mode&1)!==0&&(r.flags&128)===0)pf(),ki(),r.flags|=98560,p=!1;else if(p=ul(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[qn]=r}else ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),p=!1}else jn!==null&&(Qc(jn),jn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Ze.current&1)!==0?vt===0&&(vt=3):Xc())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return Mi(),Lc(t,r),t===null&&Oo(r.stateNode.containerInfo),Mt(r),null;case 10:return hc(r.type._context),Mt(r),null;case 17:return Gt(r.type)&&sl(),Mt(r),null;case 19:if(Qe(Ze),p=r.memoizedState,p===null)return Mt(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)Qo(p,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=pl(t),_!==null){for(r.flags|=128,Qo(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return qe(Ze,Ze.current&1|2),r.child}t=t.sibling}p.tail!==null&&He()>Fi&&(r.flags|=128,u=!0,Qo(p,!1),r.lanes=4194304)}else{if(!u)if(t=pl(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Qo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Je)return Mt(r),null}else 2*He()-p.renderingStartTime>Fi&&o!==1073741824&&(r.flags|=128,u=!0,Qo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=He(),r.sibling=null,o=Ze.current,qe(Ze,u?o&1|2:o&1),r):(Mt(r),null);case 22:case 23:return Yc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(an&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function zv(t,r){switch(ic(r),r.tag){case 1:return Gt(r.type)&&sl(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Mi(),Qe(Wt),Qe(Vt),vc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return gc(r),null;case 13:if(Qe(Ze),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ki()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Qe(Ze),null;case 4:return Mi(),null;case 10:return hc(r.type._context),null;case 22:case 23:return Yc(),null;case 24:return null;default:return null}}var Il=!1,Ot=!1,Bv=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Li(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){rt(t,r,u)}else o.current=null}function bc(t,r,o){try{o()}catch(u){rt(t,r,u)}}var fm=!1;function $v(t,r){if(Yu=Vr,t=Hd(),Bu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,C=-1,D=-1,B=0,X=0,J=t,Y=null;t:for(;;){for(var oe;J!==o||h!==0&&J.nodeType!==3||(C=_+h),J!==p||u!==0&&J.nodeType!==3||(D=_+u),J.nodeType===3&&(_+=J.nodeValue.length),(oe=J.firstChild)!==null;)Y=J,J=oe;for(;;){if(J===t)break t;if(Y===o&&++B===h&&(C=_),Y===p&&++X===u&&(D=_),(oe=J.nextSibling)!==null)break;J=Y,Y=J.parentNode}J=oe}o=C===-1||D===-1?null:{start:C,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(Xu={focusedElem:t,selectionRange:o},Vr=!1,ue=r;ue!==null;)if(r=ue,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ue=t;else for(;ue!==null;){r=ue;try{var ce=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,it=ce.memoizedState,b=r.stateNode,M=b.getSnapshotBeforeUpdate(r.elementType===r.type?he:Vn(r.type,he),it);b.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var U=r.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ee){rt(r,r.return,ee)}if(t=r.sibling,t!==null){t.return=r.return,ue=t;break}ue=r.return}return ce=fm,fm=!1,ce}function Ko(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&bc(r,o,p)}h=h.next}while(h!==u)}}function Nl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Fc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function mm(t){var r=t.alternate;r!==null&&(t.alternate=null,mm(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[qn],delete r[bo],delete r[tc],delete r[Nv],delete r[Av])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pm(t){return t.tag===5||t.tag===3||t.tag===4}function gm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=nl));else if(u!==4&&(t=t.child,t!==null))for(Uc(t,r,o),t=t.sibling;t!==null;)Uc(t,r,o),t=t.sibling}function zc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(zc(t,r,o),t=t.sibling;t!==null;)zc(t,r,o),t=t.sibling}var Ct=null,Dn=!1;function Br(t,r,o){for(o=o.child;o!==null;)ym(t,r,o),o=o.sibling}function ym(t,r,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Es,o)}catch{}switch(o.tag){case 5:Ot||Li(o,r);case 6:var u=Ct,h=Dn;Ct=null,Br(t,r,o),Ct=u,Dn=h,Ct!==null&&(Dn?(t=Ct,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Ct.removeChild(o.stateNode));break;case 18:Ct!==null&&(Dn?(t=Ct,o=o.stateNode,t.nodeType===8?ec(t.parentNode,o):t.nodeType===1&&ec(t,o),Pn(t)):ec(Ct,o.stateNode));break;case 4:u=Ct,h=Dn,Ct=o.stateNode.containerInfo,Dn=!0,Br(t,r,o),Ct=u,Dn=h;break;case 0:case 11:case 14:case 15:if(!Ot&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&bc(o,r,_),h=h.next}while(h!==u)}Br(t,r,o);break;case 1:if(!Ot&&(Li(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(C){rt(o,r,C)}Br(t,r,o);break;case 21:Br(t,r,o);break;case 22:o.mode&1?(Ot=(u=Ot)||o.memoizedState!==null,Br(t,r,o),Ot=u):Br(t,r,o);break;default:Br(t,r,o)}}function vm(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Bv),r.forEach(function(u){var h=Jv.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Mn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=r,C=_;e:for(;C!==null;){switch(C.tag){case 5:Ct=C.stateNode,Dn=!1;break e;case 3:Ct=C.stateNode.containerInfo,Dn=!0;break e;case 4:Ct=C.stateNode.containerInfo,Dn=!0;break e}C=C.return}if(Ct===null)throw Error(n(160));ym(p,_,h),Ct=null,Dn=!1;var D=h.alternate;D!==null&&(D.return=null),h.return=null}catch(B){rt(h,r,B)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)_m(r,t),r=r.sibling}function _m(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(r,t),Qn(t),u&4){try{Ko(3,t,t.return),Nl(3,t)}catch(he){rt(t,t.return,he)}try{Ko(5,t,t.return)}catch(he){rt(t,t.return,he)}}break;case 1:Mn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return);break;case 5:if(Mn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return),t.flags&32){var h=t.stateNode;try{Nr(h,"")}catch(he){rt(t,t.return,he)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,C=t.type,D=t.updateQueue;if(t.updateQueue=null,D!==null)try{C==="input"&&p.type==="radio"&&p.name!=null&&io(h,p),po(C,_);var B=po(C,p);for(_=0;_<D.length;_+=2){var X=D[_],J=D[_+1];X==="style"?ho(h,J):X==="dangerouslySetInnerHTML"?uo(h,J):X==="children"?Nr(h,J):te(h,X,J,B)}switch(C){case"input":oo(h,p);break;case"textarea":Zs(h,p);break;case"select":var Y=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var oe=p.value;oe!=null?sr(h,!!p.multiple,oe,!1):Y!==!!p.multiple&&(p.defaultValue!=null?sr(h,!!p.multiple,p.defaultValue,!0):sr(h,!!p.multiple,p.multiple?[]:"",!1))}h[bo]=p}catch(he){rt(t,t.return,he)}}break;case 6:if(Mn(r,t),Qn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(he){rt(t,t.return,he)}}break;case 3:if(Mn(r,t),Qn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Pn(r.containerInfo)}catch(he){rt(t,t.return,he)}break;case 4:Mn(r,t),Qn(t);break;case 13:Mn(r,t),Qn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Hc=He())),u&4&&vm(t);break;case 22:if(X=o!==null&&o.memoizedState!==null,t.mode&1?(Ot=(B=Ot)||X,Mn(r,t),Ot=B):Mn(r,t),Qn(t),u&8192){if(B=t.memoizedState!==null,(t.stateNode.isHidden=B)&&!X&&(t.mode&1)!==0)for(ue=t,X=t.child;X!==null;){for(J=ue=X;ue!==null;){switch(Y=ue,oe=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ko(4,Y,Y.return);break;case 1:Li(Y,Y.return);var ce=Y.stateNode;if(typeof ce.componentWillUnmount=="function"){u=Y,o=Y.return;try{r=u,ce.props=r.memoizedProps,ce.state=r.memoizedState,ce.componentWillUnmount()}catch(he){rt(u,o,he)}}break;case 5:Li(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Tm(J);continue}}oe!==null?(oe.return=Y,ue=oe):Tm(J)}X=X.sibling}e:for(X=null,J=t;;){if(J.tag===5){if(X===null){X=J;try{h=J.stateNode,B?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(C=J.stateNode,D=J.memoizedProps.style,_=D!=null&&D.hasOwnProperty("display")?D.display:null,C.style.display=co("display",_))}catch(he){rt(t,t.return,he)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(he){rt(t,t.return,he)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===t)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===t)break e;for(;J.sibling===null;){if(J.return===null||J.return===t)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Mn(r,t),Qn(t),u&4&&vm(t);break;case 21:break;default:Mn(r,t),Qn(t)}}function Qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(pm(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Nr(h,""),u.flags&=-33);var p=gm(t);zc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,C=gm(t);Uc(t,C,_);break;default:throw Error(n(161))}}catch(D){rt(t,t.return,D)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Hv(t,r,o){ue=t,wm(t)}function wm(t,r,o){for(var u=(t.mode&1)!==0;ue!==null;){var h=ue,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||Il;if(!_){var C=h.alternate,D=C!==null&&C.memoizedState!==null||Ot;C=Il;var B=Ot;if(Il=_,(Ot=D)&&!B)for(ue=h;ue!==null;)_=ue,D=_.child,_.tag===22&&_.memoizedState!==null?Sm(h):D!==null?(D.return=_,ue=D):Sm(h);for(;p!==null;)ue=p,wm(p),p=p.sibling;ue=h,Il=C,Ot=B}Em(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,ue=p):Em(t)}}function Em(t){for(;ue!==null;){var r=ue;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ot||Nl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ot)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Vn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Tf(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Tf(r,_,o)}break;case 5:var C=r.stateNode;if(o===null&&r.flags&4){o=C;var D=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&o.focus();break;case"img":D.src&&(o.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var B=r.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&Pn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ot||r.flags&512&&Fc(r)}catch(Y){rt(r,r.return,Y)}}if(r===t){ue=null;break}if(o=r.sibling,o!==null){o.return=r.return,ue=o;break}ue=r.return}}function Tm(t){for(;ue!==null;){var r=ue;if(r===t){ue=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ue=o;break}ue=r.return}}function Sm(t){for(;ue!==null;){var r=ue;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Nl(4,r)}catch(D){rt(r,o,D)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(D){rt(r,h,D)}}var p=r.return;try{Fc(r)}catch(D){rt(r,p,D)}break;case 5:var _=r.return;try{Fc(r)}catch(D){rt(r,_,D)}}}catch(D){rt(r,r.return,D)}if(r===t){ue=null;break}var C=r.sibling;if(C!==null){C.return=r.return,ue=C;break}ue=r.return}}var qv=Math.ceil,Al=se.ReactCurrentDispatcher,Bc=se.ReactCurrentOwner,yn=se.ReactCurrentBatchConfig,Me=0,St=null,ut=null,Pt=0,an=0,bi=Lr(0),vt=0,Yo=null,Ms=0,xl=0,$c=0,Xo=null,Kt=null,Hc=0,Fi=1/0,_r=null,Cl=!1,qc=null,$r=null,Pl=!1,Hr=null,Rl=0,Jo=0,Wc=null,kl=-1,jl=0;function $t(){return(Me&6)!==0?He():kl!==-1?kl:kl=He()}function qr(t){return(t.mode&1)===0?1:(Me&2)!==0&&Pt!==0?Pt&-Pt:Cv.transition!==null?(jl===0&&(jl=Ss()),jl):(t=Re,t!==0||(t=window.event,t=t===void 0?16:Ao(t.type)),t)}function On(t,r,o,u){if(50<Jo)throw Jo=0,Wc=null,Error(n(185));Pr(t,o,u),((Me&2)===0||t!==St)&&(t===St&&((Me&2)===0&&(xl|=o),vt===4&&Wr(t,Pt)),Yt(t,u),o===1&&Me===0&&(r.mode&1)===0&&(Fi=He()+500,ol&&Fr()))}function Yt(t,r){var o=t.callbackNode;ar(t,r);var u=Ts(t,t===St?Pt:0);if(u===0)o!==null&&Eo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&Eo(o),r===1)t.tag===0?xv(Nm.bind(null,t)):cf(Nm.bind(null,t)),Sv(function(){(Me&6)===0&&Fr()}),o=null;else{switch(kr(u)){case 1:o=ws;break;case 4:o=Ar;break;case 16:o=cn;break;case 536870912:o=ja;break;default:o=cn}o=Vm(o,Im.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Im(t,r){if(kl=-1,jl=0,(Me&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Ui()&&t.callbackNode!==o)return null;var u=Ts(t,t===St?Pt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=Vl(t,u);else{r=u;var h=Me;Me|=2;var p=xm();(St!==t||Pt!==r)&&(_r=null,Fi=He()+500,Ls(t,r));do try{Qv();break}catch(C){Am(t,C)}while(!0);cc(),Al.current=p,Me=h,ut!==null?r=0:(St=null,Pt=0,r=vt)}if(r!==0){if(r===2&&(h=tn(t),h!==0&&(u=h,r=Gc(t,h))),r===1)throw o=Yo,Ls(t,0),Wr(t,u),Yt(t,He()),o;if(r===6)Wr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Wv(h)&&(r=Vl(t,u),r===2&&(p=tn(t),p!==0&&(u=p,r=Gc(t,p))),r===1))throw o=Yo,Ls(t,0),Wr(t,u),Yt(t,He()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:bs(t,Kt,_r);break;case 3:if(Wr(t,u),(u&130023424)===u&&(r=Hc+500-He(),10<r)){if(Ts(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){$t(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Zu(bs.bind(null,t,Kt,_r),r);break}bs(t,Kt,_r);break;case 4:if(Wr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-Ut(u);p=1<<_,_=r[_],_>h&&(h=_),u&=~p}if(u=h,u=He()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*qv(u/1960))-u,10<u){t.timeoutHandle=Zu(bs.bind(null,t,Kt,_r),u);break}bs(t,Kt,_r);break;case 5:bs(t,Kt,_r);break;default:throw Error(n(329))}}}return Yt(t,He()),t.callbackNode===o?Im.bind(null,t):null}function Gc(t,r){var o=Xo;return t.current.memoizedState.isDehydrated&&(Ls(t,r).flags|=256),t=Vl(t,r),t!==2&&(r=Kt,Kt=o,r!==null&&Qc(r)),t}function Qc(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function Wv(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!kn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Wr(t,r){for(r&=~$c,r&=~xl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ut(r),u=1<<o;t[o]=-1,r&=~u}}function Nm(t){if((Me&6)!==0)throw Error(n(327));Ui();var r=Ts(t,0);if((r&1)===0)return Yt(t,He()),null;var o=Vl(t,r);if(t.tag!==0&&o===2){var u=tn(t);u!==0&&(r=u,o=Gc(t,u))}if(o===1)throw o=Yo,Ls(t,0),Wr(t,r),Yt(t,He()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,bs(t,Kt,_r),Yt(t,He()),null}function Kc(t,r){var o=Me;Me|=1;try{return t(r)}finally{Me=o,Me===0&&(Fi=He()+500,ol&&Fr())}}function Os(t){Hr!==null&&Hr.tag===0&&(Me&6)===0&&Ui();var r=Me;Me|=1;var o=yn.transition,u=Re;try{if(yn.transition=null,Re=1,t)return t()}finally{Re=u,yn.transition=o,Me=r,(Me&6)===0&&Fr()}}function Yc(){an=bi.current,Qe(bi)}function Ls(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Tv(o)),ut!==null)for(o=ut.return;o!==null;){var u=o;switch(ic(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&sl();break;case 3:Mi(),Qe(Wt),Qe(Vt),vc();break;case 5:gc(u);break;case 4:Mi();break;case 13:Qe(Ze);break;case 19:Qe(Ze);break;case 10:hc(u.type._context);break;case 22:case 23:Yc()}o=o.return}if(St=t,ut=t=Gr(t.current,null),Pt=an=r,vt=0,Yo=null,$c=xl=Ms=0,Kt=Xo=null,js!==null){for(r=0;r<js.length;r++)if(o=js[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}js=null}return t}function Am(t,r){do{var o=ut;try{if(cc(),gl.current=wl,yl){for(var u=et.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}yl=!1}if(Ds=0,Tt=yt=et=null,Ho=!1,qo=0,Bc.current=null,o===null||o.return===null){vt=1,Yo=r,ut=null;break}e:{var p=t,_=o.return,C=o,D=r;if(r=Pt,C.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var B=D,X=C,J=X.tag;if((X.mode&1)===0&&(J===0||J===11||J===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var oe=Xf(_);if(oe!==null){oe.flags&=-257,Jf(oe,_,C,p,r),oe.mode&1&&Yf(p,B,r),r=oe,D=B;var ce=r.updateQueue;if(ce===null){var he=new Set;he.add(D),r.updateQueue=he}else ce.add(D);break e}else{if((r&1)===0){Yf(p,B,r),Xc();break e}D=Error(n(426))}}else if(Je&&C.mode&1){var it=Xf(_);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),Jf(it,_,C,p,r),lc(Oi(D,C));break e}}p=D=Oi(D,C),vt!==4&&(vt=2),Xo===null?Xo=[p]:Xo.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var b=Qf(p,D,r);Ef(p,b);break e;case 1:C=D;var M=p.type,U=p.stateNode;if((p.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&($r===null||!$r.has(U)))){p.flags|=65536,r&=-r,p.lanes|=r;var ee=Kf(p,C,r);Ef(p,ee);break e}}p=p.return}while(p!==null)}Pm(o)}catch(de){r=de,ut===o&&o!==null&&(ut=o=o.return);continue}break}while(!0)}function xm(){var t=Al.current;return Al.current=wl,t===null?wl:t}function Xc(){(vt===0||vt===3||vt===2)&&(vt=4),St===null||(Ms&268435455)===0&&(xl&268435455)===0||Wr(St,Pt)}function Vl(t,r){var o=Me;Me|=2;var u=xm();(St!==t||Pt!==r)&&(_r=null,Ls(t,r));do try{Gv();break}catch(h){Am(t,h)}while(!0);if(cc(),Me=o,Al.current=u,ut!==null)throw Error(n(261));return St=null,Pt=0,vt}function Gv(){for(;ut!==null;)Cm(ut)}function Qv(){for(;ut!==null&&!Ra();)Cm(ut)}function Cm(t){var r=jm(t.alternate,t,an);t.memoizedProps=t.pendingProps,r===null?Pm(t):ut=r,Bc.current=null}function Pm(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=Uv(o,r,an),o!==null){ut=o;return}}else{if(o=zv(o,r),o!==null){o.flags&=32767,ut=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ut=null;return}}if(r=r.sibling,r!==null){ut=r;return}ut=r=t}while(r!==null);vt===0&&(vt=5)}function bs(t,r,o){var u=Re,h=yn.transition;try{yn.transition=null,Re=1,Kv(t,r,o,u)}finally{yn.transition=h,Re=u}return null}function Kv(t,r,o,u){do Ui();while(Hr!==null);if((Me&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Be(t,p),t===St&&(ut=St=null,Pt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Pl||(Pl=!0,Vm(cn,function(){return Ui(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=yn.transition,yn.transition=null;var _=Re;Re=1;var C=Me;Me|=4,Bc.current=null,$v(t,o),_m(o,t),pv(Xu),Vr=!!Yu,Xu=Yu=null,t.current=o,Hv(o),Du(),Me=C,Re=_,yn.transition=p}else t.current=o;if(Pl&&(Pl=!1,Hr=t,Rl=h),p=t.pendingLanes,p===0&&($r=null),Va(o.stateNode),Yt(t,He()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(Cl)throw Cl=!1,t=qc,qc=null,t;return(Rl&1)!==0&&t.tag!==0&&Ui(),p=t.pendingLanes,(p&1)!==0?t===Wc?Jo++:(Jo=0,Wc=t):Jo=0,Fr(),null}function Ui(){if(Hr!==null){var t=kr(Rl),r=yn.transition,o=Re;try{if(yn.transition=null,Re=16>t?16:t,Hr===null)var u=!1;else{if(t=Hr,Hr=null,Rl=0,(Me&6)!==0)throw Error(n(331));var h=Me;for(Me|=4,ue=t.current;ue!==null;){var p=ue,_=p.child;if((ue.flags&16)!==0){var C=p.deletions;if(C!==null){for(var D=0;D<C.length;D++){var B=C[D];for(ue=B;ue!==null;){var X=ue;switch(X.tag){case 0:case 11:case 15:Ko(8,X,p)}var J=X.child;if(J!==null)J.return=X,ue=J;else for(;ue!==null;){X=ue;var Y=X.sibling,oe=X.return;if(mm(X),X===B){ue=null;break}if(Y!==null){Y.return=oe,ue=Y;break}ue=oe}}}var ce=p.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var it=he.sibling;he.sibling=null,he=it}while(he!==null)}}ue=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,ue=_;else e:for(;ue!==null;){if(p=ue,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Ko(9,p,p.return)}var b=p.sibling;if(b!==null){b.return=p.return,ue=b;break e}ue=p.return}}var M=t.current;for(ue=M;ue!==null;){_=ue;var U=_.child;if((_.subtreeFlags&2064)!==0&&U!==null)U.return=_,ue=U;else e:for(_=M;ue!==null;){if(C=ue,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Nl(9,C)}}catch(de){rt(C,C.return,de)}if(C===_){ue=null;break e}var ee=C.sibling;if(ee!==null){ee.return=C.return,ue=ee;break e}ue=C.return}}if(Me=h,Fr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Es,t)}catch{}u=!0}return u}finally{Re=o,yn.transition=r}}return!1}function Rm(t,r,o){r=Oi(o,r),r=Qf(t,r,1),t=zr(t,r,1),r=$t(),t!==null&&(Pr(t,1,r),Yt(t,r))}function rt(t,r,o){if(t.tag===3)Rm(t,t,o);else for(;r!==null;){if(r.tag===3){Rm(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($r===null||!$r.has(u))){t=Oi(o,t),t=Kf(r,t,1),r=zr(r,t,1),t=$t(),r!==null&&(Pr(r,1,t),Yt(r,t));break}}r=r.return}}function Yv(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=$t(),t.pingedLanes|=t.suspendedLanes&o,St===t&&(Pt&o)===o&&(vt===4||vt===3&&(Pt&130023424)===Pt&&500>He()-Hc?Ls(t,0):$c|=o),Yt(t,r)}function km(t,r){r===0&&((t.mode&1)===0?r=1:(r=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var o=$t();t=gr(t,r),t!==null&&(Pr(t,r,o),Yt(t,o))}function Xv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),km(t,o)}function Jv(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),km(t,o)}var jm;jm=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Wt.current)Qt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Qt=!1,Fv(t,r,o);Qt=(t.flags&131072)!==0}else Qt=!1,Je&&(r.flags&1048576)!==0&&hf(r,ll,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;Sl(t,r),t=r.pendingProps;var h=Ci(r,Vt.current);Di(r,o),h=Ec(null,r,u,t,h,o);var p=Tc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gt(u)?(p=!0,il(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,mc(r),h.updater=El,r.stateNode=h,h._reactInternals=r,Cc(r,u,t,o),r=jc(null,r,u,!0,p,o)):(r.tag=0,Je&&p&&sc(r),Bt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(Sl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=e_(u),t=Vn(u,t),h){case 0:r=kc(null,r,u,t,o);break e;case 1:r=sm(null,r,u,t,o);break e;case 11:r=Zf(null,r,u,t,o);break e;case 14:r=em(null,r,u,Vn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Vn(u,h),kc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Vn(u,h),sm(t,r,u,h,o);case 3:e:{if(im(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,wf(t,r),ml(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Oi(Error(n(423)),r),r=om(t,r,u,o,h);break e}else if(u!==h){h=Oi(Error(n(424)),r),r=om(t,r,u,o,h);break e}else for(on=Or(r.stateNode.containerInfo.firstChild),sn=r,Je=!0,jn=null,o=vf(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ki(),u===h){r=vr(t,r,o);break e}Bt(t,r,u,o)}r=r.child}return r;case 5:return Sf(r),t===null&&ac(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,Ju(u,h)?_=null:p!==null&&Ju(u,p)&&(r.flags|=32),rm(t,r),Bt(t,r,_,o),r.child;case 6:return t===null&&ac(r),null;case 13:return am(t,r,o);case 4:return pc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=ji(r,null,u,o):Bt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Vn(u,h),Zf(t,r,u,h,o);case 7:return Bt(t,r,r.pendingProps,o),r.child;case 8:return Bt(t,r,r.pendingProps.children,o),r.child;case 12:return Bt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,qe(hl,u._currentValue),u._currentValue=_,p!==null)if(kn(p.value,_)){if(p.children===h.children&&!Wt.current){r=vr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var C=p.dependencies;if(C!==null){_=p.child;for(var D=C.firstContext;D!==null;){if(D.context===u){if(p.tag===1){D=yr(-1,o&-o),D.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?D.next=D:(D.next=X.next,X.next=D),B.pending=D}}p.lanes|=o,D=p.alternate,D!==null&&(D.lanes|=o),dc(p.return,o,r),C.lanes|=o;break}D=D.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,C=_.alternate,C!==null&&(C.lanes|=o),dc(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Bt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Di(r,o),h=pn(h),u=u(h),r.flags|=1,Bt(t,r,u,o),r.child;case 14:return u=r.type,h=Vn(u,r.pendingProps),h=Vn(u.type,h),em(t,r,u,h,o);case 15:return tm(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Vn(u,h),Sl(t,r),r.tag=1,Gt(u)?(t=!0,il(r)):t=!1,Di(r,o),Wf(r,u,h),Cc(r,u,h,o),jc(null,r,u,!0,t,o);case 19:return um(t,r,o);case 22:return nm(t,r,o)}throw Error(n(156,r.tag))};function Vm(t,r){return ai(t,r)}function Zv(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,r,o,u){return new Zv(t,r,o,u)}function Jc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function e_(t){if(typeof t=="function")return Jc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===V)return 11;if(t===nt)return 14}return 2}function Gr(t,r){var o=t.alternate;return o===null?(o=vn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Dl(t,r,o,u,h,p){var _=2;if(u=t,typeof t=="function")Jc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case j:return Fs(o.children,h,p,r);case I:_=8,h|=8;break;case k:return t=vn(12,o,r,h|2),t.elementType=k,t.lanes=p,t;case A:return t=vn(13,o,r,h),t.elementType=A,t.lanes=p,t;case _e:return t=vn(19,o,r,h),t.elementType=_e,t.lanes=p,t;case Le:return Ml(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S:_=10;break e;case P:_=9;break e;case V:_=11;break e;case nt:_=14;break e;case ft:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=vn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Fs(t,r,o,u){return t=vn(7,t,u,r),t.lanes=o,t}function Ml(t,r,o,u){return t=vn(22,t,u,r),t.elementType=Le,t.lanes=o,t.stateNode={isHidden:!1},t}function Zc(t,r,o){return t=vn(6,t,null,r),t.lanes=o,t}function eh(t,r,o){return r=vn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function t_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function th(t,r,o,u,h,p,_,C,D){return t=new t_(t,r,o,C,D),r===1?(r=1,p===!0&&(r|=8)):r=0,p=vn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(p),t}function n_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function Dm(t){if(!t)return br;t=t._reactInternals;e:{if(In(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Gt(o))return lf(t,o,r)}return r}function Mm(t,r,o,u,h,p,_,C,D){return t=th(o,u,!0,t,h,p,_,C,D),t.context=Dm(null),o=t.current,u=$t(),h=qr(o),p=yr(u,h),p.callback=r??null,zr(o,p,h),t.current.lanes=h,Pr(t,h,u),Yt(t,u),t}function Ol(t,r,o,u){var h=r.current,p=$t(),_=qr(h);return o=Dm(o),r.context===null?r.context=o:r.pendingContext=o,r=yr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=zr(h,r,_),t!==null&&(On(t,h,_,p),fl(t,h,_)),_}function Ll(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Om(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function nh(t,r){Om(t,r),(t=t.alternate)&&Om(t,r)}function r_(){return null}var Lm=typeof reportError=="function"?reportError:function(t){console.error(t)};function rh(t){this._internalRoot=t}bl.prototype.render=rh.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Ol(t,r,null,null)},bl.prototype.unmount=rh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Os(function(){Ol(null,t,null,null)}),r[dr]=null}};function bl(t){this._internalRoot=t}bl.prototype.unstable_scheduleHydration=function(t){if(t){var r=ba();t={blockedOn:null,target:t,priority:r};for(var o=0;o<zn.length&&r!==0&&r<zn[o].priority;o++);zn.splice(o,0,t),o===0&&za(t)}};function sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bm(){}function s_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var B=Ll(_);p.call(B)}}var _=Mm(r,u,t,0,null,!1,!1,"",bm);return t._reactRootContainer=_,t[dr]=_.current,Oo(t.nodeType===8?t.parentNode:t),Os(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var C=u;u=function(){var B=Ll(D);C.call(B)}}var D=th(t,0,!1,null,null,!1,!1,"",bm);return t._reactRootContainer=D,t[dr]=D.current,Oo(t.nodeType===8?t.parentNode:t),Os(function(){Ol(r,D,o,u)}),D}function Ul(t,r,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var C=h;h=function(){var D=Ll(_);C.call(D)}}Ol(r,_,t,h)}else _=s_(o,r,t,h,u);return Ll(_)}Oa=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=xr(r.pendingLanes);o!==0&&(Rr(r,o|1),Yt(r,He()),(Me&6)===0&&(Fi=He()+500,Fr()))}break;case 13:Os(function(){var u=gr(t,1);if(u!==null){var h=$t();On(u,t,1,h)}}),nh(t,1)}},ci=function(t){if(t.tag===13){var r=gr(t,134217728);if(r!==null){var o=$t();On(r,t,134217728,o)}nh(t,134217728)}},La=function(t){if(t.tag===13){var r=qr(t),o=gr(t,r);if(o!==null){var u=$t();On(o,t,r,u)}nh(t,r)}},ba=function(){return Re},Fa=function(t,r){var o=Re;try{return Re=t,r()}finally{Re=o}},ti=function(t,r,o){switch(r){case"input":if(oo(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=rl(u);if(!h)throw Error(n(90));Ks(u),oo(u,h)}}}break;case"textarea":Zs(t,o);break;case"select":r=o.value,r!=null&&sr(t,!!o.multiple,r,!1)}},gs=Kc,yo=Os;var i_={usingClientEntryPoint:!1,Events:[Fo,Ai,rl,Fn,go,Kc]},Zo={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o_={bundleType:Zo.bundleType,version:Zo.version,rendererPackageName:Zo.rendererPackageName,rendererConfig:Zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wo(t),t===null?null:t.stateNode},findFiberByHostInstance:Zo.findFiberByHostInstance||r_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{Es=zl.inject(o_),en=zl}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i_,Xt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sh(r))throw Error(n(200));return n_(t,r,null,o)},Xt.createRoot=function(t,r){if(!sh(t))throw Error(n(299));var o=!1,u="",h=Lm;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=th(t,1,!1,null,null,o,!1,u,h),t[dr]=r.current,Oo(t.nodeType===8?t.parentNode:t),new rh(r)},Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=wo(r),t=t===null?null:t.stateNode,t},Xt.flushSync=function(t){return Os(t)},Xt.hydrate=function(t,r,o){if(!Fl(r))throw Error(n(200));return Ul(null,t,r,!0,o)},Xt.hydrateRoot=function(t,r,o){if(!sh(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=Lm;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Mm(r,null,t,1,o??null,h,!1,p,_),t[dr]=r.current,Oo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new bl(r)},Xt.render=function(t,r,o){if(!Fl(r))throw Error(n(200));return Ul(null,t,r,!1,o)},Xt.unmountComponentAtNode=function(t){if(!Fl(t))throw Error(n(40));return t._reactRootContainer?(Os(function(){Ul(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1},Xt.unstable_batchedUpdates=Kc,Xt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Fl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Ul(t,r,o,!1,u)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var Wm;function m_(){if(Wm)return ah.exports;Wm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ah.exports=f_(),ah.exports}var Gm;function p_(){if(Gm)return Bl;Gm=1;var s=m_();return Bl.createRoot=s.createRoot,Bl.hydrateRoot=s.hydrateRoot,Bl}var g_=p_();const y_=()=>{};var Qm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},v_=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const a=s[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[n++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[n++],d=s[n++],g=s[n++],v=((a&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const c=s[n++],d=s[n++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},lg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],d=a+1<s.length,g=d?s[a+1]:0,v=a+2<s.length,w=v?s[a+2]:0,N=c>>2,x=(c&3)<<4|g>>4;let T=(g&15)<<2|w>>6,R=w&63;v||(R=64,d||(T=64)),i.push(n[N],n[x],n[T],n[R])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(ag(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):v_(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=n[s.charAt(a++)],g=a<s.length?n[s.charAt(a)]:0;++a;const w=a<s.length?n[s.charAt(a)]:64;++a;const x=a<s.length?n[s.charAt(a)]:64;if(++a,c==null||g==null||w==null||x==null)throw new __;const T=c<<2|g>>4;if(i.push(T),w!==64){const R=g<<4&240|w>>2;if(i.push(R),x!==64){const F=w<<6&192|x;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class __ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w_=function(s){const e=ag(s);return lg.encodeByteArray(e,!0)},eu=function(s){return w_(s).replace(/\./g,"")},E_=function(s){try{return lg.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=()=>T_().__FIREBASE_DEFAULTS__,I_=()=>{if(typeof process>"u"||typeof Qm>"u")return;const s=Qm.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},N_=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&E_(s[1]);return e&&JSON.parse(e)},$h=()=>{try{return y_()||S_()||I_()||N_()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},A_=s=>{var e,n;return(n=(e=$h())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},x_=s=>{const e=A_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ug=()=>{var s;return(s=$h())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function P_(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[eu(JSON.stringify(n)),eu(JSON.stringify(d)),""].join(".")}const ia={};function k_(){const s={prod:[],emulator:[]};for(const e of Object.keys(ia))ia[e]?s.emulator.push(e):s.prod.push(e);return s}function j_(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Km=!1;function V_(s,e){if(typeof window>"u"||typeof document>"u"||!Hh(window.location.host)||ia[s]===e||ia[s]||Km)return;ia[s]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",c=k_().prod.length>0;function d(){const T=document.getElementById(i);T&&T.remove()}function g(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function v(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function w(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Km=!0,d()},T}function N(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=j_(i),R=n("text"),F=document.getElementById(R)||document.createElement("span"),q=n("learnmore"),H=document.getElementById(q)||document.createElement("a"),Z=n("preprendIcon"),K=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const te=T.element;g(te),N(H,q);const se=w();v(K,Z),te.append(K,F,H,se),document.body.appendChild(te)}c?(F.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M_(){var s;const e=(s=$h())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O_(){return!M_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L_(){try{return typeof indexedDB=="object"}catch{return!1}}function b_(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="FirebaseError";class Ji extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=F_,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cg.prototype.create)}}class cg{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?U_(c,i):"Error",g=`${this.serviceName}: ${d} (${a}).`;return new Ji(a,g,i)}}function U_(s,e){return s.replace(z_,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const z_=/\{\$([^}]+)}/g;function tu(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const c=s[a],d=e[a];if(Ym(c)&&Ym(d)){if(!tu(c,d))return!1}else if(c!==d)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function Ym(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(s){return s&&s._delegate?s._delegate:s}class ca{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new C_;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H_(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);i===g&&d.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$_(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $_(s){return s===zs?void 0:s}function H_(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new B_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(De||(De={}));const W_={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},G_=De.INFO,Q_={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},K_=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=Q_[e];if(a)console[a](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hg{constructor(e){this.name=e,this._logLevel=G_,this._logHandler=K_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const Y_=(s,e)=>e.some(n=>s instanceof n);let Xm,Jm;function X_(){return Xm||(Xm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J_(){return Jm||(Jm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dg=new WeakMap,vh=new WeakMap,fg=new WeakMap,ch=new WeakMap,qh=new WeakMap;function Z_(s){const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(Yr(s.result)),a()},d=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&dg.set(n,s)}).catch(()=>{}),qh.set(e,s),e}function e0(s){if(vh.has(s))return;const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});vh.set(s,e)}let _h={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return vh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||fg.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function t0(s){_h=s(_h)}function n0(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(hh(this),e,...n);return fg.set(i,e.sort?e.sort():[e]),Yr(i)}:J_().includes(s)?function(...e){return s.apply(hh(this),e),Yr(dg.get(this))}:function(...e){return Yr(s.apply(hh(this),e))}}function r0(s){return typeof s=="function"?n0(s):(s instanceof IDBTransaction&&e0(s),Y_(s,X_())?new Proxy(s,_h):s)}function Yr(s){if(s instanceof IDBRequest)return Z_(s);if(ch.has(s))return ch.get(s);const e=r0(s);return e!==s&&(ch.set(s,e),qh.set(e,s)),e}const hh=s=>qh.get(s);function s0(s,e,{blocked:n,upgrade:i,blocking:a,terminated:c}={}){const d=indexedDB.open(s,e),g=Yr(d);return i&&d.addEventListener("upgradeneeded",v=>{i(Yr(d.result),v.oldVersion,v.newVersion,Yr(d.transaction),v)}),n&&d.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),g.then(v=>{c&&v.addEventListener("close",()=>c()),a&&v.addEventListener("versionchange",w=>a(w.oldVersion,w.newVersion,w))}).catch(()=>{}),g}const i0=["get","getKey","getAll","getAllKeys","count"],o0=["put","add","delete","clear"],dh=new Map;function Zm(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(dh.get(e))return dh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=o0.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||i0.includes(n)))return;const c=async function(d,...g){const v=this.transaction(d,a?"readwrite":"readonly");let w=v.store;return i&&(w=w.index(g.shift())),(await Promise.all([w[n](...g),a&&v.done]))[0]};return dh.set(e,c),c}t0(s=>({...s,get:(e,n,i)=>Zm(e,n)||s.get(e,n,i),has:(e,n)=>!!Zm(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l0(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function l0(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wh="@firebase/app",ep="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new hg("@firebase/app"),u0="@firebase/app-compat",c0="@firebase/analytics-compat",h0="@firebase/analytics",d0="@firebase/app-check-compat",f0="@firebase/app-check",m0="@firebase/auth",p0="@firebase/auth-compat",g0="@firebase/database",y0="@firebase/data-connect",v0="@firebase/database-compat",_0="@firebase/functions",w0="@firebase/functions-compat",E0="@firebase/installations",T0="@firebase/installations-compat",S0="@firebase/messaging",I0="@firebase/messaging-compat",N0="@firebase/performance",A0="@firebase/performance-compat",x0="@firebase/remote-config",C0="@firebase/remote-config-compat",P0="@firebase/storage",R0="@firebase/storage-compat",k0="@firebase/firestore",j0="@firebase/ai",V0="@firebase/firestore-compat",D0="firebase",M0="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="[DEFAULT]",O0={[wh]:"fire-core",[u0]:"fire-core-compat",[h0]:"fire-analytics",[c0]:"fire-analytics-compat",[f0]:"fire-app-check",[d0]:"fire-app-check-compat",[m0]:"fire-auth",[p0]:"fire-auth-compat",[g0]:"fire-rtdb",[y0]:"fire-data-connect",[v0]:"fire-rtdb-compat",[_0]:"fire-fn",[w0]:"fire-fn-compat",[E0]:"fire-iid",[T0]:"fire-iid-compat",[S0]:"fire-fcm",[I0]:"fire-fcm-compat",[N0]:"fire-perf",[A0]:"fire-perf-compat",[x0]:"fire-rc",[C0]:"fire-rc-compat",[P0]:"fire-gcs",[R0]:"fire-gcs-compat",[k0]:"fire-fst",[V0]:"fire-fst-compat",[j0]:"fire-vertex","fire-js":"fire-js",[D0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Map,L0=new Map,Th=new Map;function tp(s,e){try{s.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function ru(s){const e=s.name;if(Th.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Th.set(e,s);for(const n of nu.values())tp(n,s);for(const n of L0.values())tp(n,s);return!0}function b0(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function F0(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new cg("app","Firebase",U0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=M0;function mg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Eh,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Xr.create("bad-app-name",{appName:String(a)});if(n||(n=ug()),!n)throw Xr.create("no-options");const c=nu.get(a);if(c){if(tu(n,c.options)&&tu(i,c.config))return c;throw Xr.create("duplicate-app",{appName:a})}const d=new q_(a);for(const v of Th.values())d.addComponent(v);const g=new z0(n,i,d);return nu.set(a,g),g}function $0(s=Eh){const e=nu.get(s);if(!e&&s===Eh&&ug())return mg();if(!e)throw Xr.create("no-app",{appName:s});return e}function qi(s,e,n){var i;let a=(i=O0[s])!==null&&i!==void 0?i:s;n&&(a+=`-${n}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const g=[`Unable to register library "${a}" with version "${e}":`];c&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(g.join(" "));return}ru(new ca(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firebase-heartbeat-database",q0=1,ha="firebase-heartbeat-store";let fh=null;function pg(){return fh||(fh=s0(H0,q0,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ha)}catch(n){console.warn(n)}}}}).catch(s=>{throw Xr.create("idb-open",{originalErrorMessage:s.message})})),fh}async function W0(s){try{const n=(await pg()).transaction(ha),i=await n.objectStore(ha).get(gg(s));return await n.done,i}catch(e){if(e instanceof Ji)wr.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function np(s,e){try{const i=(await pg()).transaction(ha,"readwrite");await i.objectStore(ha).put(e,gg(s)),await i.done}catch(n){if(n instanceof Ji)wr.warn(n.message);else{const i=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(i.message)}}}function gg(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=1024,Q0=30;class K0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new X0(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=rp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>Q0){const d=J0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){wr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rp(),{heartbeatsToSend:i,unsentEntries:a}=Y0(this._heartbeatsCache.heartbeats),c=eu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return wr.warn(n),""}}}function rp(){return new Date().toISOString().substring(0,10)}function Y0(s,e=G0){const n=[];let i=s.slice();for(const a of s){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),sp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),sp(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class X0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L_()?b_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await W0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return np(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return np(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function sp(s){return eu(JSON.stringify({version:2,heartbeats:s})).length}function J0(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(s){ru(new ca("platform-logger",e=>new a0(e),"PRIVATE")),ru(new ca("heartbeat",e=>new K0(e),"PRIVATE")),qi(wh,ep,s),qi(wh,ep,"esm2017"),qi("fire-js","")}Z0("");var ew="firebase",tw="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(ew,tw,"app");var ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,yg;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,I){function k(){}k.prototype=I.prototype,j.D=I.prototype,j.prototype=new k,j.prototype.constructor=j,j.C=function(S,P,V){for(var A=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)A[_e-2]=arguments[_e];return I.prototype[P].apply(S,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,I,k){k||(k=0);var S=Array(16);if(typeof I=="string")for(var P=0;16>P;++P)S[P]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(P=0;16>P;++P)S[P]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=j.g[0],k=j.g[1],P=j.g[2];var V=j.g[3],A=I+(V^k&(P^V))+S[0]+3614090360&4294967295;I=k+(A<<7&4294967295|A>>>25),A=V+(P^I&(k^P))+S[1]+3905402710&4294967295,V=I+(A<<12&4294967295|A>>>20),A=P+(k^V&(I^k))+S[2]+606105819&4294967295,P=V+(A<<17&4294967295|A>>>15),A=k+(I^P&(V^I))+S[3]+3250441966&4294967295,k=P+(A<<22&4294967295|A>>>10),A=I+(V^k&(P^V))+S[4]+4118548399&4294967295,I=k+(A<<7&4294967295|A>>>25),A=V+(P^I&(k^P))+S[5]+1200080426&4294967295,V=I+(A<<12&4294967295|A>>>20),A=P+(k^V&(I^k))+S[6]+2821735955&4294967295,P=V+(A<<17&4294967295|A>>>15),A=k+(I^P&(V^I))+S[7]+4249261313&4294967295,k=P+(A<<22&4294967295|A>>>10),A=I+(V^k&(P^V))+S[8]+1770035416&4294967295,I=k+(A<<7&4294967295|A>>>25),A=V+(P^I&(k^P))+S[9]+2336552879&4294967295,V=I+(A<<12&4294967295|A>>>20),A=P+(k^V&(I^k))+S[10]+4294925233&4294967295,P=V+(A<<17&4294967295|A>>>15),A=k+(I^P&(V^I))+S[11]+2304563134&4294967295,k=P+(A<<22&4294967295|A>>>10),A=I+(V^k&(P^V))+S[12]+1804603682&4294967295,I=k+(A<<7&4294967295|A>>>25),A=V+(P^I&(k^P))+S[13]+4254626195&4294967295,V=I+(A<<12&4294967295|A>>>20),A=P+(k^V&(I^k))+S[14]+2792965006&4294967295,P=V+(A<<17&4294967295|A>>>15),A=k+(I^P&(V^I))+S[15]+1236535329&4294967295,k=P+(A<<22&4294967295|A>>>10),A=I+(P^V&(k^P))+S[1]+4129170786&4294967295,I=k+(A<<5&4294967295|A>>>27),A=V+(k^P&(I^k))+S[6]+3225465664&4294967295,V=I+(A<<9&4294967295|A>>>23),A=P+(I^k&(V^I))+S[11]+643717713&4294967295,P=V+(A<<14&4294967295|A>>>18),A=k+(V^I&(P^V))+S[0]+3921069994&4294967295,k=P+(A<<20&4294967295|A>>>12),A=I+(P^V&(k^P))+S[5]+3593408605&4294967295,I=k+(A<<5&4294967295|A>>>27),A=V+(k^P&(I^k))+S[10]+38016083&4294967295,V=I+(A<<9&4294967295|A>>>23),A=P+(I^k&(V^I))+S[15]+3634488961&4294967295,P=V+(A<<14&4294967295|A>>>18),A=k+(V^I&(P^V))+S[4]+3889429448&4294967295,k=P+(A<<20&4294967295|A>>>12),A=I+(P^V&(k^P))+S[9]+568446438&4294967295,I=k+(A<<5&4294967295|A>>>27),A=V+(k^P&(I^k))+S[14]+3275163606&4294967295,V=I+(A<<9&4294967295|A>>>23),A=P+(I^k&(V^I))+S[3]+4107603335&4294967295,P=V+(A<<14&4294967295|A>>>18),A=k+(V^I&(P^V))+S[8]+1163531501&4294967295,k=P+(A<<20&4294967295|A>>>12),A=I+(P^V&(k^P))+S[13]+2850285829&4294967295,I=k+(A<<5&4294967295|A>>>27),A=V+(k^P&(I^k))+S[2]+4243563512&4294967295,V=I+(A<<9&4294967295|A>>>23),A=P+(I^k&(V^I))+S[7]+1735328473&4294967295,P=V+(A<<14&4294967295|A>>>18),A=k+(V^I&(P^V))+S[12]+2368359562&4294967295,k=P+(A<<20&4294967295|A>>>12),A=I+(k^P^V)+S[5]+4294588738&4294967295,I=k+(A<<4&4294967295|A>>>28),A=V+(I^k^P)+S[8]+2272392833&4294967295,V=I+(A<<11&4294967295|A>>>21),A=P+(V^I^k)+S[11]+1839030562&4294967295,P=V+(A<<16&4294967295|A>>>16),A=k+(P^V^I)+S[14]+4259657740&4294967295,k=P+(A<<23&4294967295|A>>>9),A=I+(k^P^V)+S[1]+2763975236&4294967295,I=k+(A<<4&4294967295|A>>>28),A=V+(I^k^P)+S[4]+1272893353&4294967295,V=I+(A<<11&4294967295|A>>>21),A=P+(V^I^k)+S[7]+4139469664&4294967295,P=V+(A<<16&4294967295|A>>>16),A=k+(P^V^I)+S[10]+3200236656&4294967295,k=P+(A<<23&4294967295|A>>>9),A=I+(k^P^V)+S[13]+681279174&4294967295,I=k+(A<<4&4294967295|A>>>28),A=V+(I^k^P)+S[0]+3936430074&4294967295,V=I+(A<<11&4294967295|A>>>21),A=P+(V^I^k)+S[3]+3572445317&4294967295,P=V+(A<<16&4294967295|A>>>16),A=k+(P^V^I)+S[6]+76029189&4294967295,k=P+(A<<23&4294967295|A>>>9),A=I+(k^P^V)+S[9]+3654602809&4294967295,I=k+(A<<4&4294967295|A>>>28),A=V+(I^k^P)+S[12]+3873151461&4294967295,V=I+(A<<11&4294967295|A>>>21),A=P+(V^I^k)+S[15]+530742520&4294967295,P=V+(A<<16&4294967295|A>>>16),A=k+(P^V^I)+S[2]+3299628645&4294967295,k=P+(A<<23&4294967295|A>>>9),A=I+(P^(k|~V))+S[0]+4096336452&4294967295,I=k+(A<<6&4294967295|A>>>26),A=V+(k^(I|~P))+S[7]+1126891415&4294967295,V=I+(A<<10&4294967295|A>>>22),A=P+(I^(V|~k))+S[14]+2878612391&4294967295,P=V+(A<<15&4294967295|A>>>17),A=k+(V^(P|~I))+S[5]+4237533241&4294967295,k=P+(A<<21&4294967295|A>>>11),A=I+(P^(k|~V))+S[12]+1700485571&4294967295,I=k+(A<<6&4294967295|A>>>26),A=V+(k^(I|~P))+S[3]+2399980690&4294967295,V=I+(A<<10&4294967295|A>>>22),A=P+(I^(V|~k))+S[10]+4293915773&4294967295,P=V+(A<<15&4294967295|A>>>17),A=k+(V^(P|~I))+S[1]+2240044497&4294967295,k=P+(A<<21&4294967295|A>>>11),A=I+(P^(k|~V))+S[8]+1873313359&4294967295,I=k+(A<<6&4294967295|A>>>26),A=V+(k^(I|~P))+S[15]+4264355552&4294967295,V=I+(A<<10&4294967295|A>>>22),A=P+(I^(V|~k))+S[6]+2734768916&4294967295,P=V+(A<<15&4294967295|A>>>17),A=k+(V^(P|~I))+S[13]+1309151649&4294967295,k=P+(A<<21&4294967295|A>>>11),A=I+(P^(k|~V))+S[4]+4149444226&4294967295,I=k+(A<<6&4294967295|A>>>26),A=V+(k^(I|~P))+S[11]+3174756917&4294967295,V=I+(A<<10&4294967295|A>>>22),A=P+(I^(V|~k))+S[2]+718787259&4294967295,P=V+(A<<15&4294967295|A>>>17),A=k+(V^(P|~I))+S[9]+3951481745&4294967295,j.g[0]=j.g[0]+I&4294967295,j.g[1]=j.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,j.g[2]=j.g[2]+P&4294967295,j.g[3]=j.g[3]+V&4294967295}i.prototype.u=function(j,I){I===void 0&&(I=j.length);for(var k=I-this.blockSize,S=this.B,P=this.h,V=0;V<I;){if(P==0)for(;V<=k;)a(this,j,V),V+=this.blockSize;if(typeof j=="string"){for(;V<I;)if(S[P++]=j.charCodeAt(V++),P==this.blockSize){a(this,S),P=0;break}}else for(;V<I;)if(S[P++]=j[V++],P==this.blockSize){a(this,S),P=0;break}}this.h=P,this.o+=I},i.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var I=1;I<j.length-8;++I)j[I]=0;var k=8*this.o;for(I=j.length-8;I<j.length;++I)j[I]=k&255,k/=256;for(this.u(j),j=Array(16),I=k=0;4>I;++I)for(var S=0;32>S;S+=8)j[k++]=this.g[I]>>>S&255;return j};function c(j,I){var k=g;return Object.prototype.hasOwnProperty.call(k,j)?k[j]:k[j]=I(j)}function d(j,I){this.h=I;for(var k=[],S=!0,P=j.length-1;0<=P;P--){var V=j[P]|0;S&&V==I||(k[P]=V,S=!1)}this.g=k}var g={};function v(j){return-128<=j&&128>j?c(j,function(I){return new d([I|0],0>I?-1:0)}):new d([j|0],0>j?-1:0)}function w(j){if(isNaN(j)||!isFinite(j))return x;if(0>j)return H(w(-j));for(var I=[],k=1,S=0;j>=k;S++)I[S]=j/k|0,k*=4294967296;return new d(I,0)}function N(j,I){if(j.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(j.charAt(0)=="-")return H(N(j.substring(1),I));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=w(Math.pow(I,8)),S=x,P=0;P<j.length;P+=8){var V=Math.min(8,j.length-P),A=parseInt(j.substring(P,P+V),I);8>V?(V=w(Math.pow(I,V)),S=S.j(V).add(w(A))):(S=S.j(k),S=S.add(w(A)))}return S}var x=v(0),T=v(1),R=v(16777216);s=d.prototype,s.m=function(){if(q(this))return-H(this).m();for(var j=0,I=1,k=0;k<this.g.length;k++){var S=this.i(k);j+=(0<=S?S:4294967296+S)*I,I*=4294967296}return j},s.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(F(this))return"0";if(q(this))return"-"+H(this).toString(j);for(var I=w(Math.pow(j,6)),k=this,S="";;){var P=se(k,I).g;k=Z(k,P.j(I));var V=((0<k.g.length?k.g[0]:k.h)>>>0).toString(j);if(k=P,F(k))return V+S;for(;6>V.length;)V="0"+V;S=V+S}},s.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function F(j){if(j.h!=0)return!1;for(var I=0;I<j.g.length;I++)if(j.g[I]!=0)return!1;return!0}function q(j){return j.h==-1}s.l=function(j){return j=Z(this,j),q(j)?-1:F(j)?0:1};function H(j){for(var I=j.g.length,k=[],S=0;S<I;S++)k[S]=~j.g[S];return new d(k,~j.h).add(T)}s.abs=function(){return q(this)?H(this):this},s.add=function(j){for(var I=Math.max(this.g.length,j.g.length),k=[],S=0,P=0;P<=I;P++){var V=S+(this.i(P)&65535)+(j.i(P)&65535),A=(V>>>16)+(this.i(P)>>>16)+(j.i(P)>>>16);S=A>>>16,V&=65535,A&=65535,k[P]=A<<16|V}return new d(k,k[k.length-1]&-2147483648?-1:0)};function Z(j,I){return j.add(H(I))}s.j=function(j){if(F(this)||F(j))return x;if(q(this))return q(j)?H(this).j(H(j)):H(H(this).j(j));if(q(j))return H(this.j(H(j)));if(0>this.l(R)&&0>j.l(R))return w(this.m()*j.m());for(var I=this.g.length+j.g.length,k=[],S=0;S<2*I;S++)k[S]=0;for(S=0;S<this.g.length;S++)for(var P=0;P<j.g.length;P++){var V=this.i(S)>>>16,A=this.i(S)&65535,_e=j.i(P)>>>16,nt=j.i(P)&65535;k[2*S+2*P]+=A*nt,K(k,2*S+2*P),k[2*S+2*P+1]+=V*nt,K(k,2*S+2*P+1),k[2*S+2*P+1]+=A*_e,K(k,2*S+2*P+1),k[2*S+2*P+2]+=V*_e,K(k,2*S+2*P+2)}for(S=0;S<I;S++)k[S]=k[2*S+1]<<16|k[2*S];for(S=I;S<2*I;S++)k[S]=0;return new d(k,0)};function K(j,I){for(;(j[I]&65535)!=j[I];)j[I+1]+=j[I]>>>16,j[I]&=65535,I++}function te(j,I){this.g=j,this.h=I}function se(j,I){if(F(I))throw Error("division by zero");if(F(j))return new te(x,x);if(q(j))return I=se(H(j),I),new te(H(I.g),H(I.h));if(q(I))return I=se(j,H(I)),new te(H(I.g),I.h);if(30<j.g.length){if(q(j)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var k=T,S=I;0>=S.l(j);)k=Ee(k),S=Ee(S);var P=z(k,1),V=z(S,1);for(S=z(S,2),k=z(k,2);!F(S);){var A=V.add(S);0>=A.l(j)&&(P=P.add(k),V=A),S=z(S,1),k=z(k,1)}return I=Z(j,P.j(I)),new te(P,I)}for(P=x;0<=j.l(I);){for(k=Math.max(1,Math.floor(j.m()/I.m())),S=Math.ceil(Math.log(k)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),V=w(k),A=V.j(I);q(A)||0<A.l(j);)k-=S,V=w(k),A=V.j(I);F(V)&&(V=T),P=P.add(V),j=Z(j,A)}return new te(P,j)}s.A=function(j){return se(this,j).h},s.and=function(j){for(var I=Math.max(this.g.length,j.g.length),k=[],S=0;S<I;S++)k[S]=this.i(S)&j.i(S);return new d(k,this.h&j.h)},s.or=function(j){for(var I=Math.max(this.g.length,j.g.length),k=[],S=0;S<I;S++)k[S]=this.i(S)|j.i(S);return new d(k,this.h|j.h)},s.xor=function(j){for(var I=Math.max(this.g.length,j.g.length),k=[],S=0;S<I;S++)k[S]=this.i(S)^j.i(S);return new d(k,this.h^j.h)};function Ee(j){for(var I=j.g.length+1,k=[],S=0;S<I;S++)k[S]=j.i(S)<<1|j.i(S-1)>>>31;return new d(k,j.h)}function z(j,I){var k=I>>5;I%=32;for(var S=j.g.length-k,P=[],V=0;V<S;V++)P[V]=0<I?j.i(V+k)>>>I|j.i(V+k+1)<<32-I:j.i(V+k);return new d(P,j.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yg=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=w,d.fromString=N,Jr=d}).apply(typeof ip<"u"?ip:typeof self<"u"?self:typeof window<"u"?window:{});var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vg,ta,_g,Ql,Sh,wg,Eg,Tg;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,y){return l==Array.prototype||l==Object.prototype||(l[m]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof $l=="object"&&$l];for(var m=0;m<l.length;++m){var y=l[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function a(l,m){if(m)e:{var y=i;l=l.split(".");for(var E=0;E<l.length-1;E++){var L=l[E];if(!(L in y))break e;y=y[L]}l=l[l.length-1],E=y[l],m=m(E),m!=E&&m!=null&&e(y,l,{configurable:!0,writable:!0,value:m})}}function c(l,m){l instanceof String&&(l+="");var y=0,E=!1,L={next:function(){if(!E&&y<l.length){var $=y++;return{value:m($,l[$]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function v(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function w(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function N(l,m,y){return l.call.apply(l.bind,arguments)}function x(l,m,y){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),l.apply(m,L)}}return function(){return l.apply(m,arguments)}}function T(l,m,y){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?N:x,T.apply(null,arguments)}function R(l,m){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function F(l,m){function y(){}y.prototype=m.prototype,l.aa=m.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(E,L,$){for(var re=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)re[ze-2]=arguments[ze];return m.prototype[L].apply(E,re)}}function q(l){const m=l.length;if(0<m){const y=Array(m);for(let E=0;E<m;E++)y[E]=l[E];return y}return[]}function H(l,m){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(v(E)){const L=l.length||0,$=E.length||0;l.length=L+$;for(let re=0;re<$;re++)l[L+re]=E[re]}else l.push(E)}}class Z{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function K(l){return/^[\s\xa0]*$/.test(l)}function te(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function se(l){return se[" "](l),l}se[" "]=function(){};var Ee=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function z(l,m,y){for(const E in l)m.call(y,l[E],E,l)}function j(l,m){for(const y in l)m.call(void 0,l[y],y,l)}function I(l){const m={};for(const y in l)m[y]=l[y];return m}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,m){let y,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(y in E)l[y]=E[y];for(let $=0;$<k.length;$++)y=k[$],Object.prototype.hasOwnProperty.call(E,y)&&(l[y]=E[y])}}function P(l){var m=1;l=l.split(":");const y=[];for(;0<m&&l.length;)y.push(l.shift()),m--;return l.length&&y.push(l.join(":")),y}function V(l){g.setTimeout(()=>{throw l},0)}function A(){var l=me;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class _e{constructor(){this.h=this.g=null}add(m,y){const E=nt.get();E.set(m,y),this.h?this.h.next=E:this.g=E,this.h=E}}var nt=new Z(()=>new ft,l=>l.reset());class ft{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,ne=!1,me=new _e,le=()=>{const l=g.Promise.resolve(void 0);Le=()=>{l.then(O)}};var O=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(y){V(y)}var m=nt;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}ne=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ne=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};g.addEventListener("test",y,m),g.removeEventListener("test",y,m)}catch{}return l})();function xe(l,m){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(Ee){e:{try{se(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else y=="mouseover"?m=l.fromElement:y=="mouseout"&&(m=l.toElement);this.relatedTarget=m,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ke[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&xe.aa.h.call(this)}}F(xe,fe);var ke={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function $e(l,m,y,E,L){this.listener=l,this.proxy=null,this.src=m,this.type=y,this.capture=!!E,this.ha=L,this.key=++Fe,this.da=this.fa=!1}function wt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function nr(l){this.src=l,this.g={},this.h=0}nr.prototype.add=function(l,m,y,E,L){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var re=Ir(l,m,E,L);return-1<re?(m=l[re],y||(m.fa=!1)):(m=new $e(m,this.src,$,!!E,L),m.fa=y,l.push(m)),m};function Ks(l,m){var y=m.type;if(y in l.g){var E=l.g[y],L=Array.prototype.indexOf.call(E,m,void 0),$;($=0<=L)&&Array.prototype.splice.call(E,L,1),$&&(wt(m),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Ir(l,m,y,E){for(var L=0;L<l.length;++L){var $=l[L];if(!$.da&&$.listener==m&&$.capture==!!y&&$.ha==E)return L}return-1}var ds="closure_lm_"+(1e6*Math.random()|0),Ys={};function io(l,m,y,E,L){if(Array.isArray(m)){for(var $=0;$<m.length;$++)io(l,m[$],y,E,L);return null}return y=lo(y),l&&l[be]?l.K(m,y,w(E)?!!E.capture:!1,L):oo(l,m,y,!1,E,L)}function oo(l,m,y,E,L,$){if(!m)throw Error("Invalid event type");var re=w(L)?!!L.capture:!!L,ze=Js(l);if(ze||(l[ds]=ze=new nr(l)),y=ze.add(m,y,E,re,$),y.proxy)return y;if(E=xa(),y.proxy=E,E.src=l,E.listener=y,l.addEventListener)Ne||(L=re),L===void 0&&(L=!1),l.addEventListener(m.toString(),E,L);else if(l.attachEvent)l.attachEvent(sr(m.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function xa(){function l(y){return m.call(l.src,l.listener,y)}const m=ao;return l}function Xs(l,m,y,E,L){if(Array.isArray(m))for(var $=0;$<m.length;$++)Xs(l,m[$],y,E,L);else E=w(E)?!!E.capture:!!E,y=lo(y),l&&l[be]?(l=l.i,m=String(m).toString(),m in l.g&&($=l.g[m],y=Ir($,y,E,L),-1<y&&(wt($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete l.g[m],l.h--)))):l&&(l=Js(l))&&(m=l.g[m.toString()],l=-1,m&&(l=Ir(m,y,E,L)),(y=-1<l?m[l]:null)&&rr(y))}function rr(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[be])Ks(m.i,l);else{var y=l.type,E=l.proxy;m.removeEventListener?m.removeEventListener(y,E,l.capture):m.detachEvent?m.detachEvent(sr(y),E):m.addListener&&m.removeListener&&m.removeListener(E),(y=Js(m))?(Ks(y,l),y.h==0&&(y.src=null,m[ds]=null)):wt(l)}}}function sr(l){return l in Ys?Ys[l]:Ys[l]="on"+l}function ao(l,m){if(l.da)l=!0;else{m=new xe(m,this);var y=l.listener,E=l.ha||l.src;l.fa&&rr(l),l=y.call(E,m)}return l}function Js(l){return l=l[ds],l instanceof nr?l:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function lo(l){return typeof l=="function"?l:(l[Zs]||(l[Zs]=function(m){return l.handleEvent(m)}),l[Zs])}function mt(){Q.call(this),this.i=new nr(this),this.M=this,this.F=null}F(mt,Q),mt.prototype[be]=!0,mt.prototype.removeEventListener=function(l,m,y,E){Xs(this,l,m,y,E)};function pt(l,m){var y,E=l.F;if(E)for(y=[];E;E=E.F)y.push(E);if(l=l.M,E=m.type||m,typeof m=="string")m=new fe(m,l);else if(m instanceof fe)m.target=m.target||l;else{var L=m;m=new fe(E,l),S(m,L)}if(L=!0,y)for(var $=y.length-1;0<=$;$--){var re=m.g=y[$];L=ir(re,E,!0,m)&&L}if(re=m.g=l,L=ir(re,E,!0,m)&&L,L=ir(re,E,!1,m)&&L,y)for($=0;$<y.length;$++)re=m.g=y[$],L=ir(re,E,!1,m)&&L}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var y=l.g[m],E=0;E<y.length;E++)wt(y[E]);delete l.g[m],l.h--}}this.F=null},mt.prototype.K=function(l,m,y,E){return this.i.add(String(l),m,!1,y,E)},mt.prototype.L=function(l,m,y,E){return this.i.add(String(l),m,!0,y,E)};function ir(l,m,y,E){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,$=0;$<m.length;++$){var re=m[$];if(re&&!re.da&&re.capture==y){var ze=re.listener,gt=re.ha||re.src;re.fa&&Ks(l.i,re),L=ze.call(gt,E)!==!1&&L}}return L&&!E.defaultPrevented}function uo(l,m,y){if(typeof l=="function")y&&(l=T(l,y));else if(l&&typeof l.handleEvent=="function")l=T(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(l,m||0)}function Nr(l){l.g=uo(()=>{l.g=null,l.i&&(l.i=!1,Nr(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class fs extends Q{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Nr(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(l){Q.call(this),this.h=l,this.g={}}F(ms,Q);var co=[];function ho(l){z(l.g,function(m,y){this.g.hasOwnProperty(y)&&rr(m)},l),l.g={}}ms.prototype.N=function(){ms.aa.N.call(this),ho(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fo=g.JSON.stringify,mo=g.JSON.parse,po=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function ps(){}ps.prototype.h=null;function ei(l){return l.h||(l.h=l.i())}function ti(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bn(){fe.call(this,"d")}F(bn,fe);function ni(){fe.call(this,"c")}F(ni,fe);var Fn={},go=null;function gs(){return go=go||new mt}Fn.La="serverreachability";function yo(l){fe.call(this,Fn.La,l)}F(yo,fe);function or(l){const m=gs();pt(m,new yo(m))}Fn.STAT_EVENT="statevent";function vo(l,m){fe.call(this,Fn.STAT_EVENT,l),this.stat=m}F(vo,fe);function st(l){const m=gs();pt(m,new vo(m,l))}Fn.Ma="timingevent";function ri(l,m){fe.call(this,Fn.Ma,l),this.size=m}F(ri,fe);function Tn(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},m)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function vs(l,m,y,E,L,$){l.info(function(){if(l.g)if($)for(var re="",ze=$.split("&"),gt=0;gt<ze.length;gt++){var je=ze[gt].split("=");if(1<je.length){var Et=je[0];je=je[1];var lt=Et.split("_");re=2<=lt.length&&lt[1]=="type"?re+(Et+"="+je+"&"):re+(Et+"=redacted&")}}else re=null;else re=$;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+m+`
`+y+`
`+re})}function si(l,m,y,E,L,$,re){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+m+`
`+y+`
`+$+" "+re})}function Sn(l,m,y,E){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+Vu(l,y)+(E?" "+E:"")})}function _o(l,m){l.info(function(){return"TIMEOUT: "+m})}ys.prototype.info=function(){};function Vu(l,m){if(!l.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var E=y[l];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var re=1;re<L.length;re++)L[re]=""}}}}return fo(y)}catch{return m}}var ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ca={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},In;function _s(){}F(_s,ps),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},In=new _s;function Nn(l,m,y,E){this.j=l,this.i=m,this.l=y,this.R=E||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pa}function Pa(){this.i=null,this.g="",this.h=!1}var wo={},oi={};function ai(l,m,y){l.L=1,l.v=Rr(tn(m)),l.m=y,l.P=!0,Eo(l,null)}function Eo(l,m){l.F=Date.now(),He(l),l.A=tn(l.v);var y=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),jr(y.i,"t",E),l.C=0,y=l.j.J,l.h=new Pa,l.g=Ga(l.j,y?m:null,!l.m),0<l.O&&(l.M=new fs(T(l.Y,l,l.g),l.O)),m=l.U,y=l.g,E=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(co[0]=L.toString()),L=co);for(var $=0;$<L.length;$++){var re=io(y,L[$],E||m.handleEvent,!1,m.h||m);if(!re)break;m.g[re.key]=re}m=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),or(),vs(l.i,l.u,l.A,l.l,l.R,l.m)}Nn.prototype.ca=function(l){l=l.target;const m=this.M;m&&qt(l)==3?m.j():this.Y(l)},Nn.prototype.Y=function(l){try{if(l==this.g)e:{const lt=qt(this.g);var m=this.g.Ba();const dn=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||xo(this.g)))){this.J||lt!=4||m==7||(m==8||0>=dn?or(3):or(2)),ws(this);var y=this.g.Z();this.X=y;t:if(Ra(this)){var E=xo(this.g);l="";var L=E.length,$=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),Ar(this);var re="";break t}this.h.i=new g.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,l+=this.h.i.decode(E[m],{stream:!($&&m==L-1)});E.length=0,this.h.g+=l,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=y==200,si(this.i,this.u,this.A,this.l,this.R,lt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,gt=this.g;if((ze=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(ze)){var je=ze;break t}}je=null}if(y=je)Sn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,To(this,y);else{this.o=!1,this.s=3,st(12),cn(this),Ar(this);break e}}if(this.P){y=!0;let rn;for(;!this.J&&this.C<re.length;)if(rn=Du(this,re),rn==oi){lt==4&&(this.s=4,st(14),y=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==wo){this.s=4,st(15),Sn(this.i,this.l,re,"[Invalid Chunk]"),y=!1;break}else Sn(this.i,this.l,rn,null),To(this,rn);if(Ra(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||re.length!=0||this.h.h||(this.s=1,st(16),y=!1),this.o=this.o&&y,!y)Sn(this.i,this.l,re,"[Invalid Chunked Response]"),cn(this),Ar(this);else if(0<re.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Po(Et),Et.M=!0,st(11))}}else Sn(this.i,this.l,re,null),To(this,re);lt==4&&cn(this),this.o&&!this.J&&(lt==4?vi(this.j,this):(this.o=!1,He(this)))}else fi(this.g),y==400&&0<re.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),cn(this),Ar(this)}}}catch{}finally{}};function Ra(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Du(l,m){var y=l.C,E=m.indexOf(`
`,y);return E==-1?oi:(y=Number(m.substring(y,E)),isNaN(y)?wo:(E+=1,E+y>m.length?oi:(m=m.slice(E,E+y),l.C=E+y,m)))}Nn.prototype.cancel=function(){this.J=!0,cn(this)};function He(l){l.S=Date.now()+l.I,ka(l,l.I)}function ka(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Tn(T(l.ba,l),m)}function ws(l){l.B&&(g.clearTimeout(l.B),l.B=null)}Nn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(_o(this.i,this.A),this.L!=2&&(or(),st(17)),cn(this),this.s=2,Ar(this)):ka(this,this.S-l)};function Ar(l){l.j.G==0||l.J||vi(l.j,l)}function cn(l){ws(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,ho(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function To(l,m){try{var y=l.j;if(y.G!=0&&(y.g==l||Ut(y.h,l))){if(!l.K&&Ut(y.h,l)&&y.G==3){try{var E=y.Da.g.parse(m)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)yi(y),Rn(y);else break e;gi(y),st(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Tn(T(y.Za,y),6e3));if(1>=Va(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else hr(y,11)}else if((l.K||y.g==l)&&yi(y),!K(m))for(L=y.Da.g.parse(m),m=0;m<L.length;m++){let je=L[m];if(y.T=je[0],je=je[1],y.G==2)if(je[0]=="c"){y.K=je[1],y.ia=je[2];const Et=je[3];Et!=null&&(y.la=Et,y.j.info("VER="+y.la));const lt=je[4];lt!=null&&(y.Aa=lt,y.j.info("SVER="+y.Aa));const dn=je[5];dn!=null&&typeof dn=="number"&&0<dn&&(E=1.5*dn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const rn=l.g;if(rn){const xs=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xs){var $=E.h;$.g||xs.indexOf("spdy")==-1&&xs.indexOf("quic")==-1&&xs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(So($,$.h),$.h=null))}if(E.D){const wi=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;wi&&(E.ya=wi,Be(E.I,E.D,wi))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var re=l;if(E.qa=Wa(E,E.J?E.ia:null,E.W),re.K){Da(E.h,re);var ze=re,gt=E.L;gt&&(ze.I=gt),ze.B&&(ws(ze),He(ze)),E.g=re}else As(E);0<y.i.length&&$n(y)}else je[0]!="stop"&&je[0]!="close"||hr(y,7);else y.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?hr(y,7):xt(y):je[0]!="noop"&&y.l&&y.l.ta(je),y.v=0)}}or(4)}catch{}}var ja=class{constructor(l,m){this.g=l,this.map=m}};function Es(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Va(l){return l.h?1:l.g?l.g.size:0}function Ut(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function So(l,m){l.g?l.g.add(m):l.h=m}function Da(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}Es.prototype.cancel=function(){if(this.i=Ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ma(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const y of l.g.values())m=m.concat(y.D);return m}return q(l.i)}function li(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(v(l)){for(var m=[],y=l.length,E=0;E<y;E++)m.push(l[E]);return m}m=[],y=0;for(E in l)m[y++]=l[E];return m}function ui(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(v(l)||typeof l=="string"){var m=[];l=l.length;for(var y=0;y<l;y++)m.push(y);return m}m=[],y=0;for(const E in l)m[y++]=E;return m}}}function xr(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(v(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var y=ui(l),E=li(l),L=E.length,$=0;$<L;$++)m.call(void 0,E[$],y&&y[$],l)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mu(l,m){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var E=l[y].indexOf("="),L=null;if(0<=E){var $=l[y].substring(0,E);L=l[y].substring(E+1)}else $=l[y];m($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ar(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ar){this.h=l.h,Ss(this,l.j),this.o=l.o,this.g=l.g,Cr(this,l.s),this.l=l.l;var m=l.i,y=new Un;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Pr(this,y),this.m=l.m}else l&&(m=String(l).match(Ts))?(this.h=!1,Ss(this,m[1]||"",!0),this.o=Re(m[2]||""),this.g=Re(m[3]||"",!0),Cr(this,m[4]),this.l=Re(m[5]||"",!0),Pr(this,m[6]||"",!0),this.m=Re(m[7]||"")):(this.h=!1,this.i=new Un(null,this.h))}ar.prototype.toString=function(){var l=[],m=this.j;m&&l.push(kr(m,ci,!0),":");var y=this.g;return(y||m=="file")&&(l.push("//"),(m=this.o)&&l.push(kr(m,ci,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(kr(y,y.charAt(0)=="/"?ba:La,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",kr(y,Io)),l.join("")};function tn(l){return new ar(l)}function Ss(l,m,y){l.j=y?Re(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Cr(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function Pr(l,m,y){m instanceof Un?(l.i=m,zn(l.i,l.h)):(y||(m=kr(m,Fa)),l.i=new Un(m,l.h))}function Be(l,m,y){l.i.set(m,y)}function Rr(l){return Be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Re(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function kr(l,m,y){return typeof l=="string"?(l=encodeURI(l).replace(m,Oa),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Oa(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ci=/[#\/\?@]/g,La=/[#\?:]/g,ba=/[#\?]/g,Fa=/[#\?@]/g,Io=/#/g;function Un(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function At(l){l.g||(l.g=new Map,l.h=0,l.i&&Mu(l.i,function(m,y){l.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}s=Un.prototype,s.add=function(l,m){At(this),this.i=null,l=hn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(m),this.h+=1,this};function An(l,m){At(l),m=hn(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function xn(l,m){return At(l),m=hn(l,m),l.g.has(m)}s.forEach=function(l,m){At(this),this.g.forEach(function(y,E){y.forEach(function(L){l.call(m,L,E,this)},this)},this)},s.na=function(){At(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let E=0;E<m.length;E++){const L=l[E];for(let $=0;$<L.length;$++)y.push(m[E])}return y},s.V=function(l){At(this);let m=[];if(typeof l=="string")xn(this,l)&&(m=m.concat(this.g.get(hn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)m=m.concat(l[y])}return m},s.set=function(l,m){return At(this),this.i=null,l=hn(this,l),xn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},s.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function jr(l,m,y){An(l,m),0<y.length&&(l.i=null,l.g.set(hn(l,m),q(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var E=m[y];const $=encodeURIComponent(String(E)),re=this.V(E);for(E=0;E<re.length;E++){var L=$;re[E]!==""&&(L+="="+encodeURIComponent(String(re[E]))),l.push(L)}}return this.i=l.join("&")};function hn(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function zn(l,m){m&&!l.j&&(At(l),l.i=null,l.g.forEach(function(y,E){var L=E.toLowerCase();E!=L&&(An(this,E),jr(this,L,y))},l)),l.j=m}function Ou(l,m){const y=new ys;if(g.Image){const E=new Image;E.onload=R(Ht,y,"TestLoadImage: loaded",!0,m,E),E.onerror=R(Ht,y,"TestLoadImage: error",!1,m,E),E.onabort=R(Ht,y,"TestLoadImage: abort",!1,m,E),E.ontimeout=R(Ht,y,"TestLoadImage: timeout",!1,m,E),g.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else m(!1)}function Ua(l,m){const y=new ys,E=new AbortController,L=setTimeout(()=>{E.abort(),Ht(y,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:E.signal}).then($=>{clearTimeout(L),$.ok?Ht(y,"TestPingServer: ok",!0,m):Ht(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Ht(y,"TestPingServer: error",!1,m)})}function Ht(l,m,y,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(y)}catch{}}function Lu(){this.g=new po}function za(l,m,y){const E=y||"";try{xr(l,function(L,$){let re=L;w(L)&&(re=fo(L)),m.push(E+$+"="+encodeURIComponent(re))})}catch(L){throw m.push(E+"type="+encodeURIComponent("_badmap")),L}}function lr(l){this.l=l.Ub||null,this.j=l.eb||!1}F(lr,ps),lr.prototype.g=function(){return new Is(this.l,this.j)},lr.prototype.i=(function(l){return function(){return l}})({});function Is(l,m){mt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Is,mt),s=Is.prototype,s.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,Pn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ba(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ba(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?Cn(this):Pn(this),this.readyState==3&&Ba(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Cn(this))},s.Qa=function(l){this.g&&(this.response=l,Cn(this))},s.ga=function(){this.g&&Cn(this)};function Cn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Pn(l)}s.setRequestHeader=function(l,m){this.u.append(l,m)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=m.next();return l.join(`\r
`)};function Pn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ur(l){let m="";return z(l,function(y,E){m+=E,m+=":",m+=y,m+=`\r
`}),m}function Vr(l,m,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=ur(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Be(l,m,y))}function Xe(l){mt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Xe,mt);var bu=/^https?$/i,No=["POST","PUT"];s=Xe.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,m,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():In.g(),this.v=this.o?ei(this.o):ei(In),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch($){Ns(this,$);return}if(l=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)y.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const $ of E.keys())y.set($,E.get($));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),L=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(No,m,void 0))||E||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,re]of y)this.g.setRequestHeader($,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{di(this),this.u=!0,this.g.send(l),this.u=!1}catch($){Ns(this,$)}};function Ns(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,hi(l),nn(l)}function hi(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pt(this,"complete"),pt(this,"abort"),nn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nn(this,!0)),Xe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ao(this):this.bb())},s.bb=function(){Ao(this)};function Ao(l){if(l.h&&typeof d<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)uo(l.Ea,0,l);else if(pt(l,"readystatechange"),qt(l)==4){l.h=!1;try{const re=l.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var E;if(E=re===0){var L=String(l.D).match(Ts)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),E=!bu.test(L?L.toLowerCase():"")}y=E}if(y)pt(l,"complete"),pt(l,"success");else{l.m=6;try{var $=2<qt(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",hi(l)}}finally{nn(l)}}}}function nn(l,m){if(l.g){di(l);const y=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||pt(l,"ready");try{y.onreadystatechange=E}catch{}}}function di(l){l.I&&(g.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),mo(m)}};function xo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function fi(l){const m={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(K(l[E]))continue;var y=P(l[E]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const $=m[L]||[];m[L]=$,$.push(y)}j(m,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bn(l,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||m}function Co(l){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bn("baseRetryDelayMs",5e3,l),this.cb=Bn("retryDelaySeedMs",1e4,l),this.Wa=Bn("forwardChannelMaxRetries",2,l),this.wa=Bn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Es(l&&l.concurrentRequestLimit),this.Da=new Lu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Co.prototype,s.la=8,s.G=1,s.connect=function(l,m,y,E){st(0),this.W=l,this.H=m||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Wa(this,null,this.W),$n(this)};function xt(l){if(mi(l),l.G==3){var m=l.U++,y=tn(l.I);if(Be(y,"SID",l.K),Be(y,"RID",m),Be(y,"TYPE","terminate"),cr(l,y),m=new Nn(l,l.j,m),m.L=2,m.v=Rr(tn(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=m.v,y=!0),y||(m.g=Ga(m.j,null),m.g.ea(m.v)),m.F=Date.now(),He(m)}qa(l)}function Rn(l){l.g&&(Po(l),l.g.cancel(),l.g=null)}function mi(l){Rn(l),l.u&&(g.clearTimeout(l.u),l.u=null),yi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function $n(l){if(!en(l.h)&&!l.s){l.s=!0;var m=l.Ga;Le||le(),ne||(Le(),ne=!0),me.add(m,l),l.B=0}}function Fu(l,m){return Va(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Tn(T(l.Ga,l,m),Ha(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Nn(this,this.j,l);let $=this.o;if(this.S&&($?($=I($),S($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(m+=E,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Dr(this,L,m),y=tn(this.I),Be(y,"RID",l),Be(y,"CVER",22),this.D&&Be(y,"X-HTTP-Session-Id",this.D),cr(this,y),$&&(this.O?m="headers="+encodeURIComponent(String(ur($)))+"&"+m:this.m&&Vr(y,this.m,$)),So(this.h,L),this.Ua&&Be(y,"TYPE","init"),this.P?(Be(y,"$req",m),Be(y,"SID","null"),L.T=!0,ai(L,y,null)):ai(L,y,m),this.G=2}}else this.G==3&&(l?pi(this,l):this.i.length==0||en(this.h)||pi(this))};function pi(l,m){var y;m?y=m.l:y=l.U++;const E=tn(l.I);Be(E,"SID",l.K),Be(E,"RID",y),Be(E,"AID",l.T),cr(l,E),l.m&&l.o&&Vr(E,l.m,l.o),y=new Nn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),m&&(l.i=m.D.concat(l.i)),m=Dr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),So(l.h,y),ai(y,E,m)}function cr(l,m){l.H&&z(l.H,function(y,E){Be(m,E,y)}),l.l&&xr({},function(y,E){Be(m,E,y)})}function Dr(l,m,y){y=Math.min(l.i.length,y);var E=l.l?T(l.l.Na,l.l,l):null;e:{var L=l.i;let $=-1;for(;;){const re=["count="+y];$==-1?0<y?($=L[0].g,re.push("ofs="+$)):$=0:re.push("ofs="+$);let ze=!0;for(let gt=0;gt<y;gt++){let je=L[gt].g;const Et=L[gt].map;if(je-=$,0>je)$=Math.max(0,L[gt].g-100),ze=!1;else try{za(Et,re,"req"+je+"_")}catch{E&&E(Et)}}if(ze){E=re.join("&");break e}}}return l=l.i.splice(0,y),m.D=l,E}function As(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;Le||le(),ne||(Le(),ne=!0),me.add(m,l),l.v=0}}function gi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Tn(T(l.Fa,l),Ha(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,$a(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tn(T(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Rn(this),$a(this))};function Po(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function $a(l){l.g=new Nn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=tn(l.qa);Be(m,"RID","rpc"),Be(m,"SID",l.K),Be(m,"AID",l.T),Be(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&Be(m,"TO",l.ja),Be(m,"TYPE","xmlhttp"),cr(l,m),l.m&&l.o&&Vr(m,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Rr(tn(m)),y.m=null,y.P=!0,Eo(y,l)}s.Za=function(){this.C!=null&&(this.C=null,Rn(this),gi(this),st(19))};function yi(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function vi(l,m){var y=null;if(l.g==m){yi(l),Po(l),l.g=null;var E=2}else if(Ut(l.h,m))y=m.D,Da(l.h,m),E=1;else return;if(l.G!=0){if(m.o)if(E==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var L=l.B;E=gs(),pt(E,new ri(E,y)),$n(l)}else As(l);else if(L=m.s,L==3||L==0&&0<m.X||!(E==1&&Fu(l,m)||E==2&&gi(l)))switch(y&&0<y.length&&(m=l.h,m.i=m.i.concat(y)),L){case 1:hr(l,5);break;case 4:hr(l,10);break;case 3:hr(l,6);break;default:hr(l,2)}}}function Ha(l,m){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*m}function hr(l,m){if(l.j.info("Error code "+m),m==2){var y=T(l.fb,l),E=l.Xa;const L=!E;E=new ar(E||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Ss(E,"https"),Rr(E),L?Ou(E.toString(),y):Ua(E.toString(),y)}else st(2);l.G=0,l.l&&l.l.sa(m),qa(l),mi(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function qa(l){if(l.G=0,l.ka=[],l.l){const m=Ma(l.h);(m.length!=0||l.i.length!=0)&&(H(l.ka,m),H(l.ka,l.i),l.h.i.length=0,q(l.i),l.i.length=0),l.l.ra()}}function Wa(l,m,y){var E=y instanceof ar?tn(y):new ar(y);if(E.g!="")m&&(E.g=m+"."+E.g),Cr(E,E.s);else{var L=g.location;E=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var $=new ar(null);E&&Ss($,E),m&&($.g=m),L&&Cr($,L),y&&($.l=y),E=$}return y=l.D,m=l.ya,y&&m&&Be(E,y,m),Be(E,"VER",l.la),cr(l,E),E}function Ga(l,m,y){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new Xe(new lr({eb:y})):new Xe(l.pa),m.Ha(l.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ro(){}s=Ro.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function _i(){}_i.prototype.g=function(l,m){return new zt(l,m)};function zt(l,m){mt.call(this),this.g=new Co(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!K(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!K(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new Hn(this)}F(zt,mt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){xt(this.g)},zt.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=fo(l),l=y);m.i.push(new ja(m.Ya++,l)),m.G==3&&$n(m)},zt.prototype.N=function(){this.g.l=null,delete this.j,xt(this.g),delete this.g,zt.aa.N.call(this)};function Qa(l){bn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const y in m){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}F(Qa,bn);function Ka(){ni.call(this),this.status=1}F(Ka,ni);function Hn(l){this.g=l}F(Hn,Ro),Hn.prototype.ua=function(){pt(this.g,"a")},Hn.prototype.ta=function(l){pt(this.g,new Qa(l))},Hn.prototype.sa=function(l){pt(this.g,new Ka)},Hn.prototype.ra=function(){pt(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Tg=function(){return new _i},Eg=function(){return gs()},wg=Fn,Sh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ii.NO_ERROR=0,ii.TIMEOUT=8,ii.HTTP_ERROR=6,Ql=ii,Ca.COMPLETE="complete",_g=Ca,ti.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",mt.prototype.listen=mt.prototype.K,ta=ti,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,vg=Xe}).apply(typeof $l<"u"?$l:typeof self<"u"?self:typeof window<"u"?window:{});const op="@firebase/firestore",ap="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new hg("@firebase/firestore");function zi(){return qs.logLevel}function ae(s,...e){if(qs.logLevel<=De.DEBUG){const n=e.map(Wh);qs.debug(`Firestore (${Zi}): ${s}`,...n)}}function Er(s,...e){if(qs.logLevel<=De.ERROR){const n=e.map(Wh);qs.error(`Firestore (${Zi}): ${s}`,...n)}}function ts(s,...e){if(qs.logLevel<=De.WARN){const n=e.map(Wh);qs.warn(`Firestore (${Zi}): ${s}`,...n)}}function Wh(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Sg(s,i,n)}function Sg(s,e,n){let i=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Er(i),new Error(i)}function Ue(s,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,s||Sg(e,a,i)}function Ie(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(bt.UNAUTHENTICATED)))}shutdown(){}}class rw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class sw{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let i=this.i;const a=v=>this.i!==i?(i=this.i,n(v)):Promise.resolve();let c=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zr,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},g=v=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string",31837,{l:i}),new Ig(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class iw{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ow{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new iw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(bt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aw{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,F0(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const i=c=>{c.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ae("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const a=c=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lp(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=lw(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<n&&(i+=e.charAt(a[c]%62))}return i}}function Ae(s,e){return s<e?-1:s>e?1:0}function Ih(s,e){let n=0;for(;n<s.length&&n<e.length;){const i=s.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return Ae(i,a);{const c=Ng(),d=uw(c.encode(up(s,n)),c.encode(up(e,n)));return d!==0?d:Ae(i,a)}}n+=i>65535?2:1}return Ae(s.length,e.length)}function up(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function uw(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return Ae(s[n],e[n]);return Ae(s.length,e.length)}function Gi(s,e,n){return s.length===e.length&&s.every(((i,a)=>n(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="__name__";class Kn{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kn?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const c=Kn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Ae(e.length,n.length)}static compareSegments(e,n){const i=Kn.isNumericId(e),a=Kn.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?Kn.extractNumericId(e).compare(Kn.extractNumericId(n)):Ih(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class We extends Kn{construct(e,n,i){return new We(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new We(n)}static emptyPath(){return new We([])}}const cw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Kn{construct(e,n,i){return new kt(e,n,i)}static isValidIdentifier(e){return cw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cp}static keyField(){return new kt([cp])}static fromServerFormat(e){const n=[];let i="",a=0;const c=()=>{if(i.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,a+=2}else g==="`"?(d=!d,a++):g!=="."||d?(i+=g,a++):(c(),a++)}if(c(),d)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(We.fromString(e))}static fromName(e){return new pe(We.fromString(e).popFirst(5))}static empty(){return new pe(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(s,e,n){if(!n)throw new ie(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function hw(s,e,n,i){if(e===!0&&i===!0)throw new ie(W.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function hp(s){if(!pe.isDocumentKey(s))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function dp(s){if(pe.isDocumentKey(s))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function xg(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function mu(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":we(12329,{type:typeof s})}function wn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mu(s);throw new ie(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(s,e){const n={typeString:s};return e&&(n.value=e),n}function wa(s,e){if(!xg(s))throw new ie(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(a&&typeof d!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new ie(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=-62135596800,mp=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*mp);return new Ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fp)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mp}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wa(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:dt("string",Ye._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ye(0,0))}static max(){return new Se(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=-1;function dw(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Se.fromTimestamp(i===1e9?new Ye(n+1,0):new Ye(n,i));return new ns(a,pe.empty(),e)}function fw(s){return new ns(s.readTime,s.key,da)}class ns{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ns(Se.min(),pe.empty(),da)}static max(){return new ns(Se.max(),pe.empty(),da)}}function mw(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(s.documentKey,e.documentKey),n!==0?n:Ae(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==pw)throw s;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):G.reject(n)}static resolve(e){return new G(((n,i)=>{n(e)}))}static reject(e){return new G(((n,i)=>{i(e)}))}static waitFor(e){return new G(((n,i)=>{let a=0,c=0,d=!1;e.forEach((g=>{++a,g.next((()=>{++c,d&&c===a&&n()}),(v=>i(v)))})),d=!0,c===a&&n()}))}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next((a=>a?G.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,c)=>{i.push(n.call(this,a,c))})),this.waitFor(i)}static mapArray(e,n){return new G(((i,a)=>{const c=e.length,d=new Array(c);let g=0;for(let v=0;v<c;v++){const w=v;n(e[w]).next((N=>{d[w]=N,++g,g===c&&i(d)}),(N=>a(N)))}}))}static doWhile(e,n){return new G(((i,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):i()};c()}))}}function yw(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function to(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}pu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=-1;function gu(s){return s==null}function su(s){return s===0&&1/s==-1/0}function vw(s){return typeof s=="number"&&Number.isInteger(s)&&!su(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="";function _w(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=pp(e)),e=ww(s.get(n),e);return pp(e)}function ww(s,e){let n=e;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":n+="";break;case Cg:n+="";break;default:n+=c}}return n}function pp(s){return s+Cg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function us(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Pg(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hl(this.root,e,this.comparator,!0)}}class Hl{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,a,c){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=a??Rt.EMPTY,this.right=c??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,c){return new Rt(e??this.key,n??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,i),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Rt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,a,c){return this}insert(e,n,i){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yp(this.data.getIterator())}getIteratorFrom(e){return new yp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class yp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new ln([])}unionWith(e){let n=new _t(kt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Rg("Invalid base64 string: "+c):c}})(e);return new jt(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c})(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const Ew=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(s){if(Ue(!!s,39018),typeof s=="string"){let e=0;const n=Ew.exec(s);if(Ue(!!n,46558,{timestamp:s}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ot(s.seconds),nanos:ot(s.nanos)}}function ot(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ss(s){return typeof s=="string"?jt.fromBase64String(s):jt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="server_timestamp",jg="__type__",Vg="__previous_value__",Dg="__local_write_time__";function Kh(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[jg])===null||n===void 0?void 0:n.stringValue)===kg}function yu(s){const e=s.mapValue.fields[Vg];return Kh(e)?yu(e):e}function fa(s){const e=rs(s.mapValue.fields[Dg].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,i,a,c,d,g,v,w,N){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=w,this.isUsingEmulator=N}}const iu="(default)";class ma{constructor(e,n){this.projectId=e,this.database=n||iu}static empty(){return new ma("","")}get isDefaultDatabase(){return this.database===iu}isEqual(e){return e instanceof ma&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="__type__",Sw="__max__",ql={mapValue:{}},Og="__vector__",ou="value";function is(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Kh(s)?4:Nw(s)?9007199254740991:Iw(s)?10:11:we(28295,{value:s})}function tr(s,e){if(s===e)return!0;const n=is(s);if(n!==is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return fa(s).isEqual(fa(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=rs(a.timestampValue),g=rs(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,c){return ss(a.bytesValue).isEqual(ss(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,c){return ot(a.geoPointValue.latitude)===ot(c.geoPointValue.latitude)&&ot(a.geoPointValue.longitude)===ot(c.geoPointValue.longitude)})(s,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return ot(a.integerValue)===ot(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=ot(a.doubleValue),g=ot(c.doubleValue);return d===g?su(d)===su(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return Gi(s.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(a,c){const d=a.mapValue.fields||{},g=c.mapValue.fields||{};if(gp(d)!==gp(g))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(g[v]===void 0||!tr(d[v],g[v])))return!1;return!0})(s,e);default:return we(52216,{left:s})}}function pa(s,e){return(s.values||[]).find((n=>tr(n,e)))!==void 0}function Qi(s,e){if(s===e)return 0;const n=is(s),i=is(e);if(n!==i)return Ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=ot(c.integerValue||c.doubleValue),v=ot(d.integerValue||d.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(s,e);case 3:return vp(s.timestampValue,e.timestampValue);case 4:return vp(fa(s),fa(e));case 5:return Ih(s.stringValue,e.stringValue);case 6:return(function(c,d){const g=ss(c),v=ss(d);return g.compareTo(v)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),v=d.split("/");for(let w=0;w<g.length&&w<v.length;w++){const N=Ae(g[w],v[w]);if(N!==0)return N}return Ae(g.length,v.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Ae(ot(c.latitude),ot(d.latitude));return g!==0?g:Ae(ot(c.longitude),ot(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return _p(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var g,v,w,N;const x=c.fields||{},T=d.fields||{},R=(g=x[ou])===null||g===void 0?void 0:g.arrayValue,F=(v=T[ou])===null||v===void 0?void 0:v.arrayValue,q=Ae(((w=R==null?void 0:R.values)===null||w===void 0?void 0:w.length)||0,((N=F==null?void 0:F.values)===null||N===void 0?void 0:N.length)||0);return q!==0?q:_p(R,F)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===ql.mapValue&&d===ql.mapValue)return 0;if(c===ql.mapValue)return 1;if(d===ql.mapValue)return-1;const g=c.fields||{},v=Object.keys(g),w=d.fields||{},N=Object.keys(w);v.sort(),N.sort();for(let x=0;x<v.length&&x<N.length;++x){const T=Ih(v[x],N[x]);if(T!==0)return T;const R=Qi(g[v[x]],w[N[x]]);if(R!==0)return R}return Ae(v.length,N.length)})(s.mapValue,e.mapValue);default:throw we(23264,{le:n})}}function vp(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ae(s,e);const n=rs(s),i=rs(e),a=Ae(n.seconds,i.seconds);return a!==0?a:Ae(n.nanos,i.nanos)}function _p(s,e){const n=s.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const c=Qi(n[a],i[a]);if(c)return c}return Ae(n.length,i.length)}function Ki(s){return Nh(s)}function Nh(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=rs(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ss(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return pe.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",a=!0;for(const c of n.values||[])a?a=!1:i+=",",i+=Nh(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const d of i)c?c=!1:a+=",",a+=`${d}:${Nh(n.fields[d])}`;return a+"}"})(s.mapValue):we(61005,{value:s})}function Kl(s){switch(is(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yu(s);return e?16+Kl(e):16;case 5:return 2*s.stringValue.length;case 6:return ss(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+Kl(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return us(i.fields,((c,d)=>{a+=c.length+Kl(d)})),a})(s.mapValue);default:throw we(13486,{value:s})}}function wp(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ah(s){return!!s&&"integerValue"in s}function Yh(s){return!!s&&"arrayValue"in s}function Ep(s){return!!s&&"nullValue"in s}function Tp(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Yl(s){return!!s&&"mapValue"in s}function Iw(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Mg])===null||n===void 0?void 0:n.stringValue)===Og}function oa(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return us(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=oa(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oa(s.arrayValue.values[n]);return e}return Object.assign({},s)}function Nw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Sw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Yl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oa(n)}setAll(e){let n=kt.emptyPath(),i={},a=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const v=this.getFieldsMap(n);this.applyChanges(v,i,a),i={},a=[],n=g.popLast()}d?i[g.lastSegment()]=oa(d):a.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,a)}delete(e){const n=this.field(e.popLast());Yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Yl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){us(n,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new Zt(oa(this.value))}}function Lg(s){const e=[];return us(s.fields,((n,i)=>{const a=new kt([n]);if(Yl(i)){const c=Lg(i.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)})),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,i,a,c,d,g){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Ft(e,0,Se.min(),Se.min(),Se.min(),Zt.empty(),0)}static newFoundDocument(e,n,i,a){return new Ft(e,1,n,Se.min(),i,a,0)}static newNoDocument(e,n){return new Ft(e,2,n,Se.min(),Se.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,Se.min(),Se.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.position=e,this.inclusive=n}}function Sp(s,e,n){let i=0;for(let a=0;a<s.position.length;a++){const c=e[a],d=s.position[a];if(c.field.isKeyField()?i=pe.comparator(pe.fromName(d.referenceValue),n.key):i=Qi(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ip(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!tr(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function Aw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{}class ht extends bg{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Cw(e,n,i):n==="array-contains"?new kw(e,i):n==="in"?new jw(e,i):n==="not-in"?new Vw(e,i):n==="array-contains-any"?new Dw(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Pw(e,i):new Rw(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qi(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(Qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends bg{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ln(e,n)}matches(e){return Fg(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Fg(s){return s.op==="and"}function Ug(s){return xw(s)&&Fg(s)}function xw(s){for(const e of s.filters)if(e instanceof Ln)return!1;return!0}function xh(s){if(s instanceof ht)return s.field.canonicalString()+s.op.toString()+Ki(s.value);if(Ug(s))return s.filters.map((e=>xh(e))).join(",");{const e=s.filters.map((n=>xh(n))).join(",");return`${s.op}(${e})`}}function zg(s,e){return s instanceof ht?(function(i,a){return a instanceof ht&&i.op===a.op&&i.field.isEqual(a.field)&&tr(i.value,a.value)})(s,e):s instanceof Ln?(function(i,a){return a instanceof Ln&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,d,g)=>c&&zg(d,a.filters[g])),!0):!1})(s,e):void we(19439)}function Bg(s){return s instanceof ht?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ki(n.value)}`})(s):s instanceof Ln?(function(n){return n.op.toString()+" {"+n.getFilters().map(Bg).join(" ,")+"}"})(s):"Filter"}class Cw extends ht{constructor(e,n,i){super(e,n,i),this.key=pe.fromName(i.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Pw extends ht{constructor(e,n){super(e,"in",n),this.keys=$g("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Rw extends ht{constructor(e,n){super(e,"not-in",n),this.keys=$g("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function $g(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>pe.fromName(i.referenceValue)))}class kw extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yh(n)&&pa(n.arrayValue,this.value)}}class jw extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pa(this.value.arrayValue,n)}}class Vw extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pa(this.value.arrayValue,n)}}class Dw extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>pa(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n=null,i=[],a=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=d,this.endAt=g,this.Pe=null}}function Np(s,e=null,n=[],i=[],a=null,c=null,d=null){return new Mw(s,e,n,i,a,c,d)}function Xh(s){const e=Ie(s);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>xh(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),gu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ki(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ki(i))).join(",")),e.Pe=n}return e.Pe}function Jh(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Aw(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!zg(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Ip(s.startAt,e.startAt)&&Ip(s.endAt,e.endAt)}function Ch(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n=null,i=[],a=[],c=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Ow(s,e,n,i,a,c,d,g){return new no(s,e,n,i,a,c,d,g)}function Zh(s){return new no(s)}function Ap(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Hg(s){return s.collectionGroup!==null}function aa(s){const e=Ie(s);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new _t(kt.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((w=>{w.isInequality()&&(g=g.add(w.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new ga(c,i))})),n.has(kt.keyField().canonicalString())||e.Te.push(new ga(kt.keyField(),i))}return e.Te}function Yn(s){const e=Ie(s);return e.Ie||(e.Ie=Lw(e,aa(s))),e.Ie}function Lw(s,e){if(s.limitType==="F")return Np(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new ga(a.field,c)}));const n=s.endAt?new au(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new au(s.startAt.position,s.startAt.inclusive):null;return Np(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Ph(s,e){const n=s.filters.concat([e]);return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Rh(s,e,n){return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function vu(s,e){return Jh(Yn(s),Yn(e))&&s.limitType===e.limitType}function qg(s){return`${Xh(Yn(s))}|lt:${s.limitType}`}function Bi(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>Bg(a))).join(", ")}]`),gu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Ki(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Ki(a))).join(",")),`Target(${i})`})(Yn(s))}; limitType=${s.limitType})`}function _u(s,e){return e.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):pe.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,a){for(const c of aa(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(d,g,v){const w=Sp(d,g,v);return d.inclusive?w<=0:w<0})(i.startAt,aa(i),a)||i.endAt&&!(function(d,g,v){const w=Sp(d,g,v);return d.inclusive?w>=0:w>0})(i.endAt,aa(i),a))})(s,e)}function bw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Wg(s){return(e,n)=>{let i=!1;for(const a of aa(s)){const c=Fw(a,e,n);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function Fw(s,e,n){const i=s.field.isKeyField()?pe.comparator(e.key,n.key):(function(c,d,g){const v=d.data.field(c),w=g.data.field(c);return v!==null&&w!==null?Qi(v,w):we(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,((n,i)=>{for(const[a,c]of i)e(a,c)}))}isEmpty(){return Pg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=new tt(pe.comparator);function Tr(){return Uw}const Gg=new tt(pe.comparator);function na(...s){let e=Gg;for(const n of s)e=e.insert(n.key,n);return e}function Qg(s){let e=Gg;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Bs(){return la()}function Kg(){return la()}function la(){return new Gs((s=>s.toString()),((s,e)=>s.isEqual(e)))}const zw=new tt(pe.comparator),Bw=new _t(pe.comparator);function Pe(...s){let e=Bw;for(const n of s)e=e.add(n);return e}const $w=new _t(Ae);function Hw(){return $w}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function Yg(s){return{integerValue:""+s}}function qw(s,e){return vw(e)?Yg(e):ed(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this._=void 0}}function Ww(s,e,n){return s instanceof ya?(function(a,c){const d={fields:{[jg]:{stringValue:kg},[Dg]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Kh(c)&&(c=yu(c)),c&&(d.fields[Vg]=c),{mapValue:d}})(n,e):s instanceof va?Jg(s,e):s instanceof _a?Zg(s,e):(function(a,c){const d=Xg(a,c),g=xp(d)+xp(a.Ee);return Ah(d)&&Ah(a.Ee)?Yg(g):ed(a.serializer,g)})(s,e)}function Gw(s,e,n){return s instanceof va?Jg(s,e):s instanceof _a?Zg(s,e):n}function Xg(s,e){return s instanceof lu?(function(i){return Ah(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class ya extends wu{}class va extends wu{constructor(e){super(),this.elements=e}}function Jg(s,e){const n=ey(e);for(const i of s.elements)n.some((a=>tr(a,i)))||n.push(i);return{arrayValue:{values:n}}}class _a extends wu{constructor(e){super(),this.elements=e}}function Zg(s,e){let n=ey(e);for(const i of s.elements)n=n.filter((a=>!tr(a,i)));return{arrayValue:{values:n}}}class lu extends wu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function xp(s){return ot(s.integerValue||s.doubleValue)}function ey(s){return Yh(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.field=e,this.transform=n}}function Kw(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof va&&a instanceof va||i instanceof _a&&a instanceof _a?Gi(i.elements,a.elements,tr):i instanceof lu&&a instanceof lu?tr(i.Ee,a.Ee):i instanceof ya&&a instanceof ya})(s.transform,e.transform)}class Yw{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xl(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Eu{}function ty(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new td(s.key,En.none()):new Ea(s.key,s.data,En.none());{const n=s.data,i=Zt.empty();let a=new _t(kt.comparator);for(let c of e.fields)if(!a.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),a=a.add(c)}return new cs(s.key,i,new ln(a.toArray()),En.none())}}function Xw(s,e,n){s instanceof Ea?(function(a,c,d){const g=a.value.clone(),v=Pp(a.fieldTransforms,c,d.transformResults);g.setAll(v),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):s instanceof cs?(function(a,c,d){if(!Xl(a.precondition,c))return void c.convertToUnknownDocument(d.version);const g=Pp(a.fieldTransforms,c,d.transformResults),v=c.data;v.setAll(ny(a)),v.setAll(g),c.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(s,e,n):(function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function ua(s,e,n,i){return s instanceof Ea?(function(c,d,g,v){if(!Xl(c.precondition,d))return g;const w=c.value.clone(),N=Rp(c.fieldTransforms,v,d);return w.setAll(N),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),null})(s,e,n,i):s instanceof cs?(function(c,d,g,v){if(!Xl(c.precondition,d))return g;const w=Rp(c.fieldTransforms,v,d),N=d.data;return N.setAll(ny(c)),N.setAll(w),d.convertToFoundDocument(d.version,N).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((x=>x.field)))})(s,e,n,i):(function(c,d,g){return Xl(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,n)}function Jw(s,e){let n=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),c=Xg(i.transform,a||null);c!=null&&(n===null&&(n=Zt.empty()),n.set(i.field,c))}return n||null}function Cp(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Gi(i,a,((c,d)=>Kw(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ea extends Eu{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class cs extends Eu{constructor(e,n,i,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ny(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Pp(s,e,n){const i=new Map;Ue(s.length===n.length,32656,{Ae:n.length,Re:s.length});for(let a=0;a<n.length;a++){const c=s[a],d=c.transform,g=e.data.field(c.field);i.set(c.field,Gw(d,g,n[a]))}return i}function Rp(s,e,n){const i=new Map;for(const a of s){const c=a.transform,d=n.data.field(a.field);i.set(a.field,Ww(c,d,e))}return i}class td extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zw extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Xw(c,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ua(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ua(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Kg();return this.mutations.forEach((a=>{const c=e.get(a.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(a.key)?null:g;const v=ty(d,g);v!==null&&i.set(a.key,v),d.isValidDocument()||d.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,((n,i)=>Cp(n,i)))&&Gi(this.baseMutations,e.baseMutations,((n,i)=>Cp(n,i)))}}class nd{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){Ue(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let a=(function(){return zw})();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,i[d].version);return new nd(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ve;function rE(s){switch(s){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:s})}}function ry(s){if(s===void 0)return Er("GRPC error has no .code"),W.UNKNOWN;switch(s){case ct.OK:return W.OK;case ct.CANCELLED:return W.CANCELLED;case ct.UNKNOWN:return W.UNKNOWN;case ct.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case ct.INTERNAL:return W.INTERNAL;case ct.UNAVAILABLE:return W.UNAVAILABLE;case ct.UNAUTHENTICATED:return W.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case ct.NOT_FOUND:return W.NOT_FOUND;case ct.ALREADY_EXISTS:return W.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return W.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case ct.ABORTED:return W.ABORTED;case ct.OUT_OF_RANGE:return W.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return W.UNIMPLEMENTED;case ct.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:s})}}(Ve=ct||(ct={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Jr([4294967295,4294967295],0);function kp(s){const e=Ng().encode(s),n=new yg;return n.update(e),new Uint8Array(n.digest())}function jp(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Jr([n,i],0),new Jr([a,c],0)]}class rd{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(i<0)throw new ra(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Jr.fromNumber(this.fe)}pe(e,n,i){let a=e.add(n.multiply(Jr.fromNumber(i)));return a.compare(sE)===1&&(a=new Jr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=kp(e),[i,a]=jp(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(i,a,c);if(!this.ye(d))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new rd(c,a,n);return i.forEach((g=>d.insert(g))),d}insert(e){if(this.fe===0)return;const n=kp(e),[i,a]=jp(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(i,a,c);this.we(d)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,i,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Ta.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Tu(Se.min(),a,new tt(Ae),Tr(),Pe())}}class Ta{constructor(e,n,i,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ta(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,i,a){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=a}}class sy{constructor(e,n){this.targetId=e,this.De=n}}class iy{constructor(e,n,i=jt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class Vp{constructor(){this.ve=0,this.Ce=Dp(),this.Fe=jt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pe(),n=Pe(),i=Pe();return this.Ce.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:we(38017,{changeType:c})}})),new Ta(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=Dp()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class iE{constructor(e){this.We=e,this.Ge=new Map,this.ze=Tr(),this.je=Wl(),this.Je=Wl(),this.He=new tt(Ae)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,i=e.De.count,a=this.st(n);if(a){const c=a.target;if(Ch(c))if(i===0){const d=new pe(c.path);this.Xe(n,d,Ft.newNoDocument(d,Se.min()))}else Ue(i===1,20013,{expectedCount:i});else{const d=this.ot(n);if(d!==i){const g=this._t(e),v=g?this.ut(g,e,d):1;if(v!==0){this.rt(n);const w=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,w)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=n;let d,g;try{d=ss(i).toUint8Array()}catch(v){if(v instanceof Rg)return ts("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new rd(d,a,c)}catch(v){return ts(v instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.fe===0?null:g}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let a=0;return i.forEach((c=>{const d=this.We.lt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.Xe(n,c,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((c,d)=>{const g=this.st(d);if(g){if(c.current&&Ch(g.target)){const v=new pe(g.target.path);this.Tt(v).has(d)||this.It(d,v)||this.Xe(d,v,Ft.newNoDocument(v,e))}c.Ne&&(n.set(d,c.Le()),c.ke())}}));let i=Pe();this.Je.forEach(((c,d)=>{let g=!0;d.forEachWhile((v=>{const w=this.st(v);return!w||w.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(c))})),this.ze.forEach(((c,d)=>d.setReadTime(e)));const a=new Tu(e,n,this.He,this.ze,i);return this.ze=Tr(),this.je=Wl(),this.Je=Wl(),this.He=new tt(Ae),a}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Vp,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new _t(Ae),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new _t(Ae),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Vp),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Wl(){return new tt(pe.comparator)}function Dp(){return new tt(pe.comparator)}const oE={asc:"ASCENDING",desc:"DESCENDING"},aE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lE={and:"AND",or:"OR"};class uE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kh(s,e){return s.useProto3Json||gu(e)?e:{value:e}}function uu(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oy(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function cE(s,e){return uu(s,e.toTimestamp())}function Xn(s){return Ue(!!s,49232),Se.fromTimestamp((function(n){const i=rs(n);return new Ye(i.seconds,i.nanos)})(s))}function sd(s,e){return jh(s,e).canonicalString()}function jh(s,e){const n=(function(a){return new We(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?n:n.child(e)}function ay(s){const e=We.fromString(s);return Ue(dy(e),10190,{key:e.toString()}),e}function Vh(s,e){return sd(s.databaseId,e.path)}function mh(s,e){const n=ay(e);if(n.get(1)!==s.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new pe(uy(n))}function ly(s,e){return sd(s.databaseId,e)}function hE(s){const e=ay(s);return e.length===4?We.emptyPath():uy(e)}function Dh(s){return new We(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function uy(s){return Ue(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Mp(s,e,n){return{name:Vh(s,e),fields:n.value.mapValue.fields}}function dE(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:we(39313,{state:w})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(w,N){return w.useProto3Json?(Ue(N===void 0||typeof N=="string",58123),jt.fromBase64String(N||"")):(Ue(N===void 0||N instanceof Buffer||N instanceof Uint8Array,16193),jt.fromUint8Array(N||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(w){const N=w.code===void 0?W.UNKNOWN:ry(w.code);return new ie(N,w.message||"")})(d);n=new iy(i,a,c,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=mh(s,i.document.name),c=Xn(i.document.updateTime),d=i.document.createTime?Xn(i.document.createTime):Se.min(),g=new Zt({mapValue:{fields:i.document.fields}}),v=Ft.newFoundDocument(a,c,d,g),w=i.targetIds||[],N=i.removedTargetIds||[];n=new Jl(w,N,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=mh(s,i.document),c=i.readTime?Xn(i.readTime):Se.min(),d=Ft.newNoDocument(a,c),g=i.removedTargetIds||[];n=new Jl([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=mh(s,i.document),c=i.removedTargetIds||[];n=new Jl([],c,a,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,d=new nE(a,c),g=i.targetId;n=new sy(g,d)}}return n}function fE(s,e){let n;if(e instanceof Ea)n={update:Mp(s,e.key,e.value)};else if(e instanceof td)n={delete:Vh(s,e.key)};else if(e instanceof cs)n={update:Mp(s,e.key,e.data),updateMask:TE(e.fieldMask)};else{if(!(e instanceof Zw))return we(16599,{Rt:e.type});n={verify:Vh(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const g=d.transform;if(g instanceof ya)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof va)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof _a)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof lu)return{fieldPath:d.field.canonicalString(),increment:g.Ee};throw we(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:cE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(s,e.precondition)),n}function mE(s,e){return s&&s.length>0?(Ue(e!==void 0,14353),s.map((n=>(function(a,c){let d=a.updateTime?Xn(a.updateTime):Xn(c);return d.isEqual(Se.min())&&(d=Xn(c)),new Yw(d,a.transformResults||[])})(n,e)))):[]}function pE(s,e){return{documents:[ly(s,e.path)]}}function gE(s,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ly(s,a);const c=(function(w){if(w.length!==0)return hy(Ln.create(w,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(w){if(w.length!==0)return w.map((N=>(function(T){return{field:$i(T.field),direction:_E(T.dir)}})(N)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=kh(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{Vt:n,parent:a}}function yE(s){let e=hE(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){Ue(i===1,65062);const N=n.from[0];N.allDescendants?a=N.collectionId:e=e.child(N.collectionId)}let c=[];n.where&&(c=(function(x){const T=cy(x);return T instanceof Ln&&Ug(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(x){return x.map((T=>(function(F){return new ga(Hi(F.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(T)))})(n.orderBy));let g=null;n.limit&&(g=(function(x){let T;return T=typeof x=="object"?x.value:x,gu(T)?null:T})(n.limit));let v=null;n.startAt&&(v=(function(x){const T=!!x.before,R=x.values||[];return new au(R,T)})(n.startAt));let w=null;return n.endAt&&(w=(function(x){const T=!x.before,R=x.values||[];return new au(R,T)})(n.endAt)),Ow(e,a,d,c,g,"F",v,w)}function vE(s,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cy(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Hi(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Hi(n.unaryFilter.field);return ht.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Hi(n.unaryFilter.field);return ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Hi(n.unaryFilter.field);return ht.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ht.create(Hi(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ln.create(n.compositeFilter.filters.map((i=>cy(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(s):we(30097,{filter:s})}function _E(s){return oE[s]}function wE(s){return aE[s]}function EE(s){return lE[s]}function $i(s){return{fieldPath:s.canonicalString()}}function Hi(s){return kt.fromServerFormat(s.fieldPath)}function hy(s){return s instanceof ht?(function(n){if(n.op==="=="){if(Tp(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NAN"}};if(Ep(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tp(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NAN"}};if(Ep(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(n.field),op:wE(n.op),value:n.value}}})(s):s instanceof Ln?(function(n){const i=n.getFilters().map((a=>hy(a)));return i.length===1?i[0]:{compositeFilter:{op:EE(n.op),filters:i}}})(s):we(54877,{filter:s})}function TE(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function dy(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,i,a,c=Se.min(),d=Se.min(),g=jt.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.gt=e}}function IE(s){const e=yE({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Rh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.Dn=new AE}addToCollectionParentIndex(e,n){return this.Dn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ns.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class AE{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new _t(We.comparator),c=!a.has(i);return this.index[n]=a.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new _t(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fy=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(fy,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Yi(0)}static ur(){return new Yi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="LruGarbageCollector",xE=1048576;function bp([s,e],[n,i]){const a=Ae(s,n);return a===0?Ae(e,i):a}class CE{constructor(e){this.Tr=e,this.buffer=new _t(bp),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();bp(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PE{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ae(Lp,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){to(n)?ae(Lp,"Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Rr(3e5)}))}}class RE{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return G.resolve(pu.ue);const i=new CE(n);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Op)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Op):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,a,c,d,g,v,w;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,d=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(i=x,g=Date.now(),this.removeTargets(e,i,n)))).next((x=>(c=x,v=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(w=Date.now(),zi()<=De.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-N}ms
	Determined least recently used ${a} in `+(g-d)+`ms
	Removed ${c} targets in `+(v-g)+`ms
	Removed ${x} documents in `+(w-v)+`ms
Total Duration: ${w-N}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:x}))))}}function kE(s,e){return new RE(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.changes=new Gs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&ua(i.mutation,a,ln.empty(),Ye.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Pe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Pe()){const a=Bs();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((c=>{let d=na();return c.forEach(((g,v)=>{d=d.insert(g,v.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=Bs();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Pe())))}populateOverlays(e,n,i){const a=[];return i.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,i,a){let c=Tr();const d=la(),g=(function(){return la()})();return n.forEach(((v,w)=>{const N=i.get(w.key);a.has(w.key)&&(N===void 0||N.mutation instanceof cs)?c=c.insert(w.key,w):N!==void 0?(d.set(w.key,N.mutation.getFieldMask()),ua(N.mutation,w,N.mutation.getFieldMask(),Ye.now())):d.set(w.key,ln.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((w,N)=>d.set(w,N))),n.forEach(((w,N)=>{var x;return g.set(w,new VE(N,(x=d.get(w))!==null&&x!==void 0?x:null))})),g)))}recalculateAndSaveOverlays(e,n){const i=la();let a=new tt(((d,g)=>d-g)),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((v=>{const w=n.get(v);if(w===null)return;let N=i.get(v)||ln.empty();N=g.applyToLocalView(w,N),i.set(v,N);const x=(a.get(g.batchId)||Pe()).add(v);a=a.insert(g.batchId,x)}))})).next((()=>{const d=[],g=a.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),w=v.key,N=v.value,x=Kg();N.forEach((T=>{if(!c.has(T)){const R=ty(n.get(T),i.get(T));R!==null&&x.set(T,R),c=c.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,w,x))}return G.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return(function(d){return pe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Hg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-c.size):G.resolve(Bs());let g=da,v=c;return d.next((w=>G.forEach(w,((N,x)=>(g<x.largestBatchId&&(g=x.largestBatchId),c.get(N)?G.resolve():this.remoteDocumentCache.getEntry(e,N).next((T=>{v=v.insert(N,T)}))))).next((()=>this.populateOverlays(e,w,c))).next((()=>this.computeViews(e,v,w,Pe()))).next((N=>({batchId:g,changes:Qg(N)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next((i=>{let a=na();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const c=n.collectionGroup;let d=na();return this.indexManager.getCollectionParents(e,c).next((g=>G.forEach(g,(v=>{const w=(function(x,T){return new no(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,w,i,a).next((N=>{N.forEach(((x,T)=>{d=d.insert(x,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,a)))).next((d=>{c.forEach(((v,w)=>{const N=w.getKey();d.get(N)===null&&(d=d.insert(N,Ft.newInvalidDocument(N)))}));let g=na();return d.forEach(((v,w)=>{const N=c.get(v);N!==void 0&&ua(N.mutation,w,ln.empty(),Ye.now()),_u(n,w)&&(g=g.insert(v,w))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return G.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Xn(a.createTime)}})(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:IE(a.bundledQuery),readTime:Xn(a.readTime)}})(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.overlays=new tt(pe.comparator),this.kr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Bs();return G.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,c)=>{this.wt(e,n,c)})),G.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.kr.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const a=Bs(),c=n.length+1,d=new pe(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,w=v.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===c&&v.largestBatchId>i&&a.set(v.getKey(),v)}return G.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let c=new tt(((w,N)=>w-N));const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>i){let N=c.get(w.largestBatchId);N===null&&(N=Bs(),c=c.insert(w.largestBatchId,N)),N.set(w.getKey(),w)}}const g=Bs(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((w,N)=>g.set(w,N))),!(g.size()>=a)););return G.resolve(g)}wt(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const d=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new tE(n,i));let c=this.kr.get(n);c===void 0&&(c=Pe(),this.kr.set(n,c)),this.kr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(){this.qr=new _t(Nt.Qr),this.$r=new _t(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Nt(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Nt(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new pe(new We([])),i=new Nt(n,e),a=new Nt(n,e+1),c=[];return this.$r.forEachInRange([i,a],(d=>{this.Wr(d),c.push(d.key)})),c}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new pe(new We([])),i=new Nt(n,e),a=new Nt(n,e+1);let c=Pe();return this.$r.forEachInRange([i,a],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Nt(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Nt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return pe.comparator(e.key,n.key)||Ae(e.Hr,n.Hr)}static Ur(e,n){return Ae(e.Hr,n.Hr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new _t(Nt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new eE(c,n,i,a);this.mutationQueue.push(d);for(const g of a)this.Yr=this.Yr.add(new Nt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return G.resolve(d)}lookupMutationBatch(e,n){return G.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.Xr(i),c=a<0?0:a;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Qh:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Nt(n,0),a=new Nt(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([i,a],(d=>{const g=this.Zr(d.Hr);c.push(g)})),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new _t(Ae);return n.forEach((a=>{const c=new Nt(a,0),d=new Nt(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,d],(g=>{i=i.add(g.Hr)}))})),G.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let c=i;pe.isDocumentKey(c)||(c=c.child(""));const d=new Nt(new pe(c),0);let g=new _t(Ae);return this.Yr.forEachWhile((v=>{const w=v.key.path;return!!i.isPrefixOf(w)&&(w.length===a&&(g=g.add(v.Hr)),!0)}),d),G.resolve(this.ei(g))}ei(e){const n=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){Ue(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return G.forEach(n.mutations,(a=>{const c=new Nt(a.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Nt(n,0),a=this.Yr.firstAfterOrEqual(i);return G.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.ni=e,this.docs=(function(){return new tt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),c=a?a.size:0,d=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let i=Tr();return n.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():Ft.newInvalidDocument(a))})),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let c=Tr();const d=n.path,g=new pe(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:w,value:{document:N}}=v.getNext();if(!d.isPrefixOf(w.path))break;w.path.length>d.length+1||mw(fw(N),i)<=0||(a.has(N.key)||_u(n,N))&&(c=c.insert(N.key,N.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(e,n,i,a){we(9500)}ri(e,n){return G.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new UE(this)}getSize(e){return G.resolve(this.size)}}class UE extends jE{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(i)})),G.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.persistence=e,this.ii=new Gs((n=>Xh(n)),Jh),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.si=0,this.oi=new id,this.targetCount=0,this._i=Yi.ar()}forEachTarget(e,n){return this.ii.forEach(((i,a)=>n(a))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),G.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Yi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.hr(n),G.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let a=0;const c=[];return this.ii.forEach(((d,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.ii.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)})),G.waitFor(c).next((()=>a))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((d=>{c.push(a.markPotentiallyOrphaned(e,d))})),G.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n){this.ai={},this.overlays={},this.ui=new pu(0),this.ci=!1,this.ci=!0,this.li=new LE,this.referenceDelegate=e(this),this.hi=new zE(this),this.indexManager=new NE,this.remoteDocumentCache=(function(a){return new FE(a)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new SE(n),this.Ti=new ME(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new bE(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){ae("MemoryPersistence","Starting transaction:",e);const a=new BE(this.ui.next());return this.referenceDelegate.Ii(),i(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,n){return G.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class BE extends gw{constructor(e){super(),this.currentSequenceNumber=e}}class od{constructor(e){this.persistence=e,this.Ai=new id,this.Ri=null}static Vi(e){return new od(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.mi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,(i=>{const a=pe.fromPath(i);return this.fi(e,a).next((c=>{c||n.removeEntry(a,Se.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return G.or([()=>G.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class cu{constructor(e,n){this.persistence=e,this.gi=new Gs((i=>_w(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=kE(this,n)}static Vi(e,n){return new cu(e,n)}Ii(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return G.forEach(this.gi,((i,a)=>this.Sr(e,i,a).next((c=>c?G.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ri(e,(d=>this.Sr(e,d,n).next((g=>{g||(i++,c.removeEntry(d,Se.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kl(e.data.value)),n}Sr(e,n,i){return G.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return G.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=a}static Es(e,n){let i=Pe(),a=Pe();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new ad(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return O_()?8:yw(D_())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,a){const c={result:null};return this.ps(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ys(e,n,a,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new $E;return this.ws(e,n,d).next((g=>{if(c.result=g,this.Rs)return this.Ss(e,n,d,g.size)}))})).next((()=>c.result))}Ss(e,n,i,a){return i.documentReadCount<this.Vs?(zi()<=De.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(zi()<=De.DEBUG&&ae("QueryEngine","Query:",Bi(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(zi()<=De.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):G.resolve())}ps(e,n){if(Ap(n))return G.resolve(null);let i=Yn(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=Rh(n,null,"F"),i=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Pe(...c);return this.gs.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,i).next((v=>{const w=this.bs(n,g);return this.Ds(n,w,d,v.readTime)?this.ps(e,Rh(n,null,"F")):this.vs(e,w,n,v)}))))})))))}ys(e,n,i,a){return Ap(n)||a.isEqual(Se.min())?G.resolve(null):this.gs.getDocuments(e,i).next((c=>{const d=this.bs(n,c);return this.Ds(n,d,i,a)?G.resolve(null):(zi()<=De.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bi(n)),this.vs(e,d,n,dw(a,da)).next((g=>g)))}))}bs(e,n){let i=new _t(Wg(e));return n.forEach(((a,c)=>{_u(e,c)&&(i=i.add(c))})),i}Ds(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ws(e,n,i){return zi()<=De.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Bi(n)),this.gs.getDocumentsMatchingQuery(e,n,ns.min(),i)}vs(e,n,i,a){return this.gs.getDocumentsMatchingQuery(e,i,a).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="LocalStore",qE=3e8;class WE{constructor(e,n,i,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new tt(Ae),this.Ms=new Gs((c=>Xh(c)),Jh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function GE(s,e,n,i){return new WE(s,e,n,i)}async function py(s,e){const n=Ie(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],g=[];let v=Pe();for(const w of a){d.push(w.batchId);for(const N of w.mutations)v=v.add(N.key)}for(const w of c){g.push(w.batchId);for(const N of w.mutations)v=v.add(N.key)}return n.localDocuments.getDocuments(i,v).next((w=>({Bs:w,removedBatchIds:d,addedBatchIds:g})))}))}))}function QE(s,e){const n=Ie(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return(function(g,v,w,N){const x=w.batch,T=x.keys();let R=G.resolve();return T.forEach((F=>{R=R.next((()=>N.getEntry(v,F))).next((q=>{const H=w.docVersions.get(F);Ue(H!==null,48541),q.version.compareTo(H)<0&&(x.applyToRemoteDocument(q,w),q.isValidDocument()&&(q.setReadTime(w.commitVersion),N.addEntry(q)))}))})),R.next((()=>g.mutationQueue.removeMutationBatch(v,x)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let v=Pe();for(let w=0;w<g.mutationResults.length;++w)g.mutationResults[w].transformResults.length>0&&(v=v.add(g.batch.mutations[w].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function gy(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function KE(s,e){const n=Ie(s),i=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const g=[];e.targetChanges.forEach(((N,x)=>{const T=a.get(x);if(!T)return;g.push(n.hi.removeMatchingKeys(c,N.removedDocuments,x).next((()=>n.hi.addMatchingKeys(c,N.addedDocuments,x))));let R=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?R=R.withResumeToken(jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):N.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(N.resumeToken,i)),a=a.insert(x,R),(function(q,H,Z){return q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=qE?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(T,R,N)&&g.push(n.hi.updateTargetData(c,R))}));let v=Tr(),w=Pe();if(e.documentUpdates.forEach((N=>{e.resolvedLimboDocuments.has(N)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,N))})),g.push(YE(c,d,e.documentUpdates).next((N=>{v=N.Ls,w=N.ks}))),!i.isEqual(Se.min())){const N=n.hi.getLastRemoteSnapshotVersion(c).next((x=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,i)));g.push(N)}return G.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,v,w))).next((()=>v))})).then((c=>(n.Fs=a,c)))}function YE(s,e,n){let i=Pe(),a=Pe();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let d=Tr();return n.forEach(((g,v)=>{const w=c.get(g);v.isFoundDocument()!==w.isFoundDocument()&&(a=a.add(g)),v.isNoDocument()&&v.version.isEqual(Se.min())?(e.removeEntry(g,v.readTime),d=d.insert(g,v)):!w.isValidDocument()||v.version.compareTo(w.version)>0||v.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(v),d=d.insert(g,v)):ae(ld,"Ignoring outdated watch update for ",g,". Current version:",w.version," Watch version:",v.version)})),{Ls:d,ks:a}}))}function XE(s,e){const n=Ie(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Qh),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function JE(s,e){const n=Ie(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.hi.getTargetData(i,e).next((c=>c?(a=c,G.resolve(a)):n.hi.allocateTargetId(i).next((d=>(a=new Kr(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function Mh(s,e,n){const i=Ie(s),a=i.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!to(d))throw d;ae(ld,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(a.target)}function Fp(s,e,n){const i=Ie(s);let a=Se.min(),c=Pe();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,w,N){const x=Ie(v),T=x.Ms.get(N);return T!==void 0?G.resolve(x.Fs.get(T)):x.hi.getTargetData(w,N)})(i,d,Yn(e)).next((g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,g.targetId).next((v=>{c=v}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,n?a:Se.min(),n?c:Pe()))).next((g=>(ZE(i,bw(e),g),{documents:g,qs:c})))))}function ZE(s,e,n){let i=s.xs.get(e)||Se.min();n.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.xs.set(e,i)}class Up{constructor(){this.activeTargetIds=Hw()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e1{constructor(){this.Fo=new Up,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Up,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="ConnectivityMonitor";class Bp{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ae(zp,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ae(zp,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl=null;function Oh(){return Gl===null?Gl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gl++,"0x"+Gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="RestConnection",n1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r1{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===iu?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,n,i,a,c){const d=Oh(),g=this.Go(e,n.toUriEncodedString());ae(ph,`Sending RPC '${e}' ${d}:`,g,i);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(v,a,c);const{host:w}=new URL(g),N=Hh(w);return this.jo(e,g,v,i,N).then((x=>(ae(ph,`Received RPC '${e}' ${d}: `,x),x)),(x=>{throw ts(ph,`RPC '${e}' ${d} failed with error: `,x,"url: ",g,"request:",i),x}))}Jo(e,n,i,a,c,d){return this.Wo(e,n,i,a,c)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),i&&i.headers.forEach(((a,c)=>e[c]=a))}Go(e,n){const i=n1[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class i1 extends r1{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,a,c){const d=Oh();return new Promise(((g,v)=>{const w=new vg;w.setWithCredentials(!0),w.listenOnce(_g.COMPLETE,(()=>{try{switch(w.getLastErrorCode()){case Ql.NO_ERROR:const x=w.getResponseJson();ae(Lt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),g(x);break;case Ql.TIMEOUT:ae(Lt,`RPC '${e}' ${d} timed out`),v(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case Ql.HTTP_ERROR:const T=w.getStatus();if(ae(Lt,`RPC '${e}' ${d} failed with status:`,T,"response text:",w.getResponseText()),T>0){let R=w.getResponseJson();Array.isArray(R)&&(R=R[0]);const F=R==null?void 0:R.error;if(F&&F.status&&F.message){const q=(function(Z){const K=Z.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(K)>=0?K:W.UNKNOWN})(F.status);v(new ie(q,F.message))}else v(new ie(W.UNKNOWN,"Server responded with status "+w.getStatus()))}else v(new ie(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:d,l_:w.getLastErrorCode(),h_:w.getLastError()})}}finally{ae(Lt,`RPC '${e}' ${d} completed.`)}}));const N=JSON.stringify(a);ae(Lt,`RPC '${e}' ${d} sending request:`,a),w.send(n,"POST",N,i,15)}))}P_(e,n,i){const a=Oh(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Tg(),g=Eg(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(v.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(v.useFetchStreams=!0),this.zo(v.initMessageHeaders,n,i),v.encodeInitMessageHeaders=!0;const N=c.join("");ae(Lt,`Creating RPC '${e}' stream ${a}: ${N}`,v);const x=d.createWebChannel(N,v);this.T_(x);let T=!1,R=!1;const F=new s1({Ho:H=>{R?ae(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,H):(T||(ae(Lt,`Opening RPC '${e}' stream ${a} transport.`),x.open(),T=!0),ae(Lt,`RPC '${e}' stream ${a} sending:`,H),x.send(H))},Yo:()=>x.close()}),q=(H,Z,K)=>{H.listen(Z,(te=>{try{K(te)}catch(se){setTimeout((()=>{throw se}),0)}}))};return q(x,ta.EventType.OPEN,(()=>{R||(ae(Lt,`RPC '${e}' stream ${a} transport opened.`),F.s_())})),q(x,ta.EventType.CLOSE,(()=>{R||(R=!0,ae(Lt,`RPC '${e}' stream ${a} transport closed`),F.__(),this.I_(x))})),q(x,ta.EventType.ERROR,(H=>{R||(R=!0,ts(Lt,`RPC '${e}' stream ${a} transport errored. Name:`,H.name,"Message:",H.message),F.__(new ie(W.UNAVAILABLE,"The operation could not be completed")))})),q(x,ta.EventType.MESSAGE,(H=>{var Z;if(!R){const K=H.data[0];Ue(!!K,16349);const te=K,se=(te==null?void 0:te.error)||((Z=te[0])===null||Z===void 0?void 0:Z.error);if(se){ae(Lt,`RPC '${e}' stream ${a} received error:`,se);const Ee=se.status;let z=(function(k){const S=ct[k];if(S!==void 0)return ry(S)})(Ee),j=se.message;z===void 0&&(z=W.INTERNAL,j="Unknown error status: "+Ee+" with message "+se.message),R=!0,F.__(new ie(z,j)),x.close()}else ae(Lt,`RPC '${e}' stream ${a} received:`,K),F.a_(K)}})),q(g,wg.STAT_EVENT,(H=>{H.stat===Sh.PROXY?ae(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):H.stat===Sh.NOPROXY&&ae(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{F.o_()}),0),F}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(s){return new uE(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n,i=1e3,a=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=a,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-i);a>0&&ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="PersistentStream";class vy{constructor(e,n,i,a,c,d,g,v){this.Fi=e,this.w_=i,this.S_=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new yy(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.b_===n&&this.W_(i,a)}),(i=>{e((()=>{const a=new ie(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{i((()=>this.G_(a)))})),this.stream.onMessage((a=>{i((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ae($p,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(ae($p,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class o1 extends vy{constructor(e,n,i,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=dE(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Se.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Se.min():d.readTime?Xn(d.readTime):Se.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Dh(this.serializer),n.addTarget=(function(c,d){let g;const v=d.target;if(g=Ch(v)?{documents:pE(c,v)}:{query:gE(c,v).Vt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=oy(c,d.resumeToken);const w=kh(c,d.expectedCount);w!==null&&(g.expectedCount=w)}else if(d.snapshotVersion.compareTo(Se.min())>0){g.readTime=uu(c,d.snapshotVersion.toTimestamp());const w=kh(c,d.expectedCount);w!==null&&(g.expectedCount=w)}return g})(this.serializer,e);const i=vE(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Dh(this.serializer),n.removeTarget=e,this.k_(n)}}class a1 extends vy{constructor(e,n,i,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=mE(e.writeResults,e.commitTime),i=Xn(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Dh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>fE(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{}class u1 extends l1{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,jh(n,i),a,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie(W.UNKNOWN,c.toString())}))}Jo(e,n,i,a,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Jo(e,jh(n,i),a,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ie(W.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class c1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Er(n),this._a=!1):ae("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class h1{constructor(e,n,i,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{Qs(this)&&(ae(Ws,"Restarting streams for network reachability change."),await(async function(v){const w=Ie(v);w.Ia.add(4),await Sa(w),w.Aa.set("Unknown"),w.Ia.delete(4),await Iu(w)})(this))}))})),this.Aa=new c1(i,a)}}async function Iu(s){if(Qs(s))for(const e of s.da)await e(!0)}async function Sa(s){for(const e of s.da)await e(!1)}function _y(s,e){const n=Ie(s);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),dd(n)?hd(n):ro(n).x_()&&cd(n,e))}function ud(s,e){const n=Ie(s),i=ro(n);n.Ta.delete(e),i.x_()&&wy(n,e),n.Ta.size===0&&(i.x_()?i.B_():Qs(n)&&n.Aa.set("Unknown"))}function cd(s,e){if(s.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ro(s).H_(e)}function wy(s,e){s.Ra.$e(e),ro(s).Y_(e)}function hd(s){s.Ra=new iE({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>s.Ta.get(e)||null,lt:()=>s.datastore.serializer.databaseId}),ro(s).start(),s.Aa.aa()}function dd(s){return Qs(s)&&!ro(s).M_()&&s.Ta.size>0}function Qs(s){return Ie(s).Ia.size===0}function Ey(s){s.Ra=void 0}async function d1(s){s.Aa.set("Online")}async function f1(s){s.Ta.forEach(((e,n)=>{cd(s,e)}))}async function m1(s,e){Ey(s),dd(s)?(s.Aa.la(e),hd(s)):s.Aa.set("Unknown")}async function p1(s,e,n){if(s.Aa.set("Online"),e instanceof iy&&e.state===2&&e.cause)try{await(async function(a,c){const d=c.cause;for(const g of c.targetIds)a.Ta.has(g)&&(await a.remoteSyncer.rejectListen(g,d),a.Ta.delete(g),a.Ra.removeTarget(g))})(s,e)}catch(i){ae(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await hu(s,i)}else if(e instanceof Jl?s.Ra.Ye(e):e instanceof sy?s.Ra.it(e):s.Ra.et(e),!n.isEqual(Se.min()))try{const i=await gy(s.localStore);n.compareTo(i)>=0&&await(function(c,d){const g=c.Ra.Pt(d);return g.targetChanges.forEach(((v,w)=>{if(v.resumeToken.approximateByteSize()>0){const N=c.Ta.get(w);N&&c.Ta.set(w,N.withResumeToken(v.resumeToken,d))}})),g.targetMismatches.forEach(((v,w)=>{const N=c.Ta.get(v);if(!N)return;c.Ta.set(v,N.withResumeToken(jt.EMPTY_BYTE_STRING,N.snapshotVersion)),wy(c,v);const x=new Kr(N.target,v,w,N.sequenceNumber);cd(c,x)})),c.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(i){ae(Ws,"Failed to raise snapshot:",i),await hu(s,i)}}async function hu(s,e,n){if(!to(e))throw e;s.Ia.add(1),await Sa(s),s.Aa.set("Offline"),n||(n=()=>gy(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ae(Ws,"Retrying IndexedDB access"),await n(),s.Ia.delete(1),await Iu(s)}))}function Ty(s,e){return e().catch((n=>hu(s,n,e)))}async function Nu(s){const e=Ie(s),n=os(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qh;for(;g1(e);)try{const a=await XE(e.localStore,i);if(a===null){e.Pa.length===0&&n.B_();break}i=a.batchId,y1(e,a)}catch(a){await hu(e,a)}Sy(e)&&Iy(e)}function g1(s){return Qs(s)&&s.Pa.length<10}function y1(s,e){s.Pa.push(e);const n=os(s);n.x_()&&n.Z_&&n.X_(e.mutations)}function Sy(s){return Qs(s)&&!os(s).M_()&&s.Pa.length>0}function Iy(s){os(s).start()}async function v1(s){os(s).na()}async function _1(s){const e=os(s);for(const n of s.Pa)e.X_(n.mutations)}async function w1(s,e,n){const i=s.Pa.shift(),a=nd.from(i,e,n);await Ty(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Nu(s)}async function E1(s,e){e&&os(s).Z_&&await(async function(i,a){if((function(d){return rE(d)&&d!==W.ABORTED})(a.code)){const c=i.Pa.shift();os(i).N_(),await Ty(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Nu(i)}})(s,e),Sy(s)&&Iy(s)}async function Hp(s,e){const n=Ie(s);n.asyncQueue.verifyOperationInProgress(),ae(Ws,"RemoteStore received new credentials");const i=Qs(n);n.Ia.add(3),await Sa(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Iu(n)}async function T1(s,e){const n=Ie(s);e?(n.Ia.delete(2),await Iu(n)):e||(n.Ia.add(2),await Sa(n),n.Aa.set("Unknown"))}function ro(s){return s.Va||(s.Va=(function(n,i,a){const c=Ie(n);return c.ia(),new o1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:d1.bind(null,s),e_:f1.bind(null,s),n_:m1.bind(null,s),J_:p1.bind(null,s)}),s.da.push((async e=>{e?(s.Va.N_(),dd(s)?hd(s):s.Aa.set("Unknown")):(await s.Va.stop(),Ey(s))}))),s.Va}function os(s){return s.ma||(s.ma=(function(n,i,a){const c=Ie(n);return c.ia(),new a1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),e_:v1.bind(null,s),n_:E1.bind(null,s),ea:_1.bind(null,s),ta:w1.bind(null,s)}),s.da.push((async e=>{e?(s.ma.N_(),await Nu(s)):(await s.ma.stop(),s.Pa.length>0&&(ae(Ws,`Stopping write stream with ${s.Pa.length} pending writes`),s.Pa=[]))}))),s.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,i,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,c){const d=Date.now()+i,g=new fd(e,n,d,a,c);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function md(s,e){if(Er("AsyncQueue",`${e}: ${s}`),to(s))return new ie(W.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{static emptySet(e){return new Wi(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||pe.comparator(n.key,i.key):(n,i)=>pe.comparator(n.key,i.key),this.keyedMap=na(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Wi;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.fa=new tt(pe.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):we(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Xi{constructor(e,n,i,a,c,d,g,v,w){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=w}static fromInitialDocuments(e,n,i,a,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new Xi(e,n,Wi.emptySet(n),d,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class I1{constructor(){this.queries=Wp(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const a=Ie(n),c=a.queries;a.queries=Wp(),c.forEach(((d,g)=>{for(const v of g.wa)v.onError(i)}))})(this,new ie(W.ABORTED,"Firestore shutting down"))}}function Wp(){return new Gs((s=>qg(s)),vu)}async function Ny(s,e){const n=Ie(s);let i=3;const a=e.query;let c=n.queries.get(a);c?!c.Sa()&&e.ba()&&(i=2):(c=new S1,i=e.ba()?0:1);try{switch(i){case 0:c.ya=await n.onListen(a,!0);break;case 1:c.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(d){const g=md(d,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(g)}n.queries.set(a,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&pd(n)}async function Ay(s,e){const n=Ie(s),i=e.query;let a=3;const c=n.queries.get(i);if(c){const d=c.wa.indexOf(e);d>=0&&(c.wa.splice(d,1),c.wa.length===0?a=e.ba()?0:1:!c.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function N1(s,e){const n=Ie(s);let i=!1;for(const a of e){const c=a.query,d=n.queries.get(c);if(d){for(const g of d.wa)g.Ca(a)&&(i=!0);d.ya=a}}i&&pd(n)}function A1(s,e,n){const i=Ie(s),a=i.queries.get(e);if(a)for(const c of a.wa)c.onError(n);i.queries.delete(e)}function pd(s){s.Da.forEach((e=>{e.next()}))}var Lh,Gp;(Gp=Lh||(Lh={})).Fa="default",Gp.Cache="cache";class xy{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Xi(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Lh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this.key=e}}class Py{constructor(e){this.key=e}}class x1{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pe(),this.mutatedKeys=Pe(),this.Xa=Wg(e),this.eu=new Wi(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new qp,a=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,d=a,g=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,w=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((N,x)=>{const T=a.get(N),R=_u(this.query,x)?x:null,F=!!T&&this.mutatedKeys.has(T.key),q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let H=!1;T&&R?T.data.isEqual(R.data)?F!==q&&(i.track({type:3,doc:R}),H=!0):this.iu(T,R)||(i.track({type:2,doc:R}),H=!0,(v&&this.Xa(R,v)>0||w&&this.Xa(R,w)<0)&&(g=!0)):!T&&R?(i.track({type:0,doc:R}),H=!0):T&&!R&&(i.track({type:1,doc:T}),H=!0,(v||w)&&(g=!0)),H&&(R?(d=d.add(R),c=q?c.add(N):c.delete(N)):(d=d.delete(N),c=c.delete(N)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const N=this.query.limitType==="F"?d.last():d.first();d=d.delete(N.key),c=c.delete(N.key),i.track({type:1,doc:N})}return{eu:d,ru:i,Ds:g,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((N,x)=>(function(R,F){const q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:H})}};return q(R)-q(F)})(N.type,x.type)||this.Xa(N.doc,x.doc))),this.su(i),a=a!=null&&a;const g=n&&!a?this.ou():[],v=this.Za.size===0&&this.current&&!a?1:0,w=v!==this.Ya;return this.Ya=v,d.length!==0||w?{snapshot:new Xi(this.query,e.eu,c,d,e.mutatedKeys,v===0,w,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:g}:{_u:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new qp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pe(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new Py(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new Cy(i))})),n}uu(e){this.Ha=e.qs,this.Za=Pe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Xi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const gd="SyncEngine";class C1{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class P1{constructor(e){this.key=e,this.lu=!1}}class R1{constructor(e,n,i,a,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Gs((g=>qg(g)),vu),this.Tu=new Map,this.Iu=new Set,this.du=new tt(pe.comparator),this.Eu=new Map,this.Au=new id,this.Ru={},this.Vu=new Map,this.mu=Yi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function k1(s,e,n=!0){const i=My(s);let a;const c=i.Pu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.cu()):a=await Ry(i,e,n,!0),a}async function j1(s,e){const n=My(s);await Ry(n,e,!0,!1)}async function Ry(s,e,n,i){const a=await JE(s.localStore,Yn(e)),c=a.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let g;return i&&(g=await V1(s,e,c,d==="current",a.resumeToken)),s.isPrimaryClient&&n&&_y(s.remoteStore,a),g}async function V1(s,e,n,i,a){s.gu=(x,T,R)=>(async function(q,H,Z,K){let te=H.view.nu(Z);te.Ds&&(te=await Fp(q.localStore,H.query,!1).then((({documents:j})=>H.view.nu(j,te))));const se=K&&K.targetChanges.get(H.targetId),Ee=K&&K.targetMismatches.get(H.targetId)!=null,z=H.view.applyChanges(te,q.isPrimaryClient,se,Ee);return Kp(q,H.targetId,z._u),z.snapshot})(s,x,T,R);const c=await Fp(s.localStore,e,!0),d=new x1(e,c.qs),g=d.nu(c.documents),v=Ta.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",a),w=d.applyChanges(g,s.isPrimaryClient,v);Kp(s,n,w._u);const N=new C1(e,n,d);return s.Pu.set(e,N),s.Tu.has(n)?s.Tu.get(n).push(e):s.Tu.set(n,[e]),w.snapshot}async function D1(s,e,n){const i=Ie(s),a=i.Pu.get(e),c=i.Tu.get(a.targetId);if(c.length>1)return i.Tu.set(a.targetId,c.filter((d=>!vu(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Mh(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&ud(i.remoteStore,a.targetId),bh(i,a.targetId)})).catch(eo)):(bh(i,a.targetId),await Mh(i.localStore,a.targetId,!0))}async function M1(s,e){const n=Ie(s),i=n.Pu.get(e),a=n.Tu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ud(n.remoteStore,i.targetId))}async function O1(s,e,n){const i=$1(s);try{const a=await(function(d,g){const v=Ie(d),w=Ye.now(),N=g.reduce(((R,F)=>R.add(F.key)),Pe());let x,T;return v.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let F=Tr(),q=Pe();return v.Os.getEntries(R,N).next((H=>{F=H,F.forEach(((Z,K)=>{K.isValidDocument()||(q=q.add(Z))}))})).next((()=>v.localDocuments.getOverlayedDocuments(R,F))).next((H=>{x=H;const Z=[];for(const K of g){const te=Jw(K,x.get(K.key).overlayedDocument);te!=null&&Z.push(new cs(K.key,te,Lg(te.value.mapValue),En.exists(!0)))}return v.mutationQueue.addMutationBatch(R,w,Z,g)})).next((H=>{T=H;const Z=H.applyToLocalDocumentSet(x,q);return v.documentOverlayCache.saveOverlays(R,H.batchId,Z)}))})).then((()=>({batchId:T.batchId,changes:Qg(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(d,g,v){let w=d.Ru[d.currentUser.toKey()];w||(w=new tt(Ae)),w=w.insert(g,v),d.Ru[d.currentUser.toKey()]=w})(i,a.batchId,n),await Ia(i,a.changes),await Nu(i.remoteStore)}catch(a){const c=md(a,"Failed to persist write");n.reject(c)}}async function ky(s,e){const n=Ie(s);try{const i=await KE(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const d=n.Eu.get(c);d&&(Ue(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.lu=!0:a.modifiedDocuments.size>0?Ue(d.lu,14607):a.removedDocuments.size>0&&(Ue(d.lu,42227),d.lu=!1))})),await Ia(n,i,e)}catch(i){await eo(i)}}function Qp(s,e,n){const i=Ie(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Pu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&a.push(g.snapshot)})),(function(d,g){const v=Ie(d);v.onlineState=g;let w=!1;v.queries.forEach(((N,x)=>{for(const T of x.wa)T.va(g)&&(w=!0)})),w&&pd(v)})(i.eventManager,e),a.length&&i.hu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function L1(s,e,n){const i=Ie(s);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),c=a&&a.key;if(c){let d=new tt(pe.comparator);d=d.insert(c,Ft.newNoDocument(c,Se.min()));const g=Pe().add(c),v=new Tu(Se.min(),new Map,new tt(Ae),d,g);await ky(i,v),i.du=i.du.remove(c),i.Eu.delete(e),yd(i)}else await Mh(i.localStore,e,!1).then((()=>bh(i,e,n))).catch(eo)}async function b1(s,e){const n=Ie(s),i=e.batch.batchId;try{const a=await QE(n.localStore,e);Vy(n,i,null),jy(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ia(n,a)}catch(a){await eo(a)}}async function F1(s,e,n){const i=Ie(s);try{const a=await(function(d,g){const v=Ie(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let N;return v.mutationQueue.lookupMutationBatch(w,g).next((x=>(Ue(x!==null,37113),N=x.keys(),v.mutationQueue.removeMutationBatch(w,x)))).next((()=>v.mutationQueue.performConsistencyCheck(w))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(w,N,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,N))).next((()=>v.localDocuments.getDocuments(w,N)))}))})(i.localStore,e);Vy(i,e,n),jy(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ia(i,a)}catch(a){await eo(a)}}function jy(s,e){(s.Vu.get(e)||[]).forEach((n=>{n.resolve()})),s.Vu.delete(e)}function Vy(s,e,n){const i=Ie(s);let a=i.Ru[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),i.Ru[i.currentUser.toKey()]=a}}function bh(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Tu.get(e))s.Pu.delete(i),n&&s.hu.pu(i,n);s.Tu.delete(e),s.isPrimaryClient&&s.Au.zr(e).forEach((i=>{s.Au.containsKey(i)||Dy(s,i)}))}function Dy(s,e){s.Iu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(ud(s.remoteStore,n),s.du=s.du.remove(e),s.Eu.delete(n),yd(s))}function Kp(s,e,n){for(const i of n)i instanceof Cy?(s.Au.addReference(i.key,e),U1(s,i)):i instanceof Py?(ae(gd,"Document no longer in limbo: "+i.key),s.Au.removeReference(i.key,e),s.Au.containsKey(i.key)||Dy(s,i.key)):we(19791,{yu:i})}function U1(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Iu.has(i)||(ae(gd,"New document in limbo: "+n),s.Iu.add(i),yd(s))}function yd(s){for(;s.Iu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Iu.values().next().value;s.Iu.delete(e);const n=new pe(We.fromString(e)),i=s.mu.next();s.Eu.set(i,new P1(n)),s.du=s.du.insert(n,i),_y(s.remoteStore,new Kr(Yn(Zh(n.path)),i,"TargetPurposeLimboResolution",pu.ue))}}async function Ia(s,e,n){const i=Ie(s),a=[],c=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((g,v)=>{d.push(i.gu(v,e,n).then((w=>{var N;if((w||n)&&i.isPrimaryClient){const x=w?!w.fromCache:(N=n==null?void 0:n.targetChanges.get(v.targetId))===null||N===void 0?void 0:N.current;i.sharedClientState.updateQueryState(v.targetId,x?"current":"not-current")}if(w){a.push(w);const x=ad.Es(v.targetId,w);c.push(x)}})))})),await Promise.all(d),i.hu.J_(a),await(async function(v,w){const N=Ie(v);try{await N.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>G.forEach(w,(T=>G.forEach(T.Is,(R=>N.persistence.referenceDelegate.addReference(x,T.targetId,R))).next((()=>G.forEach(T.ds,(R=>N.persistence.referenceDelegate.removeReference(x,T.targetId,R)))))))))}catch(x){if(!to(x))throw x;ae(ld,"Failed to update sequence numbers: "+x)}for(const x of w){const T=x.targetId;if(!x.fromCache){const R=N.Fs.get(T),F=R.snapshotVersion,q=R.withLastLimboFreeSnapshotVersion(F);N.Fs=N.Fs.insert(T,q)}}})(i.localStore,c))}async function z1(s,e){const n=Ie(s);if(!n.currentUser.isEqual(e)){ae(gd,"User change. New user:",e.toKey());const i=await py(n.localStore,e);n.currentUser=e,(function(c,d){c.Vu.forEach((g=>{g.forEach((v=>{v.reject(new ie(W.CANCELLED,d))}))})),c.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ia(n,i.Bs)}}function B1(s,e){const n=Ie(s),i=n.Eu.get(e);if(i&&i.lu)return Pe().add(i.key);{let a=Pe();const c=n.Tu.get(e);if(!c)return a;for(const d of c){const g=n.Pu.get(d);a=a.unionWith(g.view.tu)}return a}}function My(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=ky.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L1.bind(null,e),e.hu.J_=N1.bind(null,e.eventManager),e.hu.pu=A1.bind(null,e.eventManager),e}function $1(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F1.bind(null,e),e}class du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return GE(this.persistence,new HE,e.initialUser,this.serializer)}Du(e){return new my(od.Vi,this.serializer)}bu(e){return new e1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}du.provider={build:()=>new du};class H1 extends du{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ue(this.persistence.referenceDelegate instanceof cu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new PE(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new my((i=>cu.Vi(i,n)),this.serializer)}}class Fh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Qp(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=z1.bind(null,this.syncEngine),await T1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new I1})()}createDatastore(e){const n=Su(e.databaseInfo.databaseId),i=(function(c){return new i1(c)})(e.databaseInfo);return(function(c,d,g,v){return new u1(c,d,g,v)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,c,d,g){return new h1(i,a,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Qp(this.syncEngine,n,0)),(function(){return Bp.C()?new Bp:new t1})())}createSyncEngine(e,n){return(function(a,c,d,g,v,w,N){const x=new R1(a,c,d,g,v,w);return N&&(x.fu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const c=Ie(a);ae(Ws,"RemoteStore shutting down."),c.Ia.add(5),await Sa(c),c.Ea.shutdown(),c.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Fh.provider={build:()=>new Fh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="FirestoreClient";class q1{constructor(e,n,i,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=bt.UNAUTHENTICATED,this.clientId=Gh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{ae(as,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ae(as,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=md(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function yh(s,e){s.asyncQueue.verifyOperationInProgress(),ae(as,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await py(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>{ts("Terminating Firestore due to IndexedDb database deletion"),s.terminate().then((()=>{ae("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{ts("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),s._offlineComponents=e}async function Yp(s,e){s.asyncQueue.verifyOperationInProgress();const n=await W1(s);ae(as,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>Hp(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>Hp(e.remoteStore,a))),s._onlineComponents=e}async function W1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ae(as,"Using user provided OfflineComponentProvider");try{await yh(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;ts("Error using user provided cache. Falling back to memory cache: "+n),await yh(s,new du)}}else ae(as,"Using default OfflineComponentProvider"),await yh(s,new H1(void 0));return s._offlineComponents}async function Ly(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ae(as,"Using user provided OnlineComponentProvider"),await Yp(s,s._uninitializedComponentsProvider._online)):(ae(as,"Using default OnlineComponentProvider"),await Yp(s,new Fh))),s._onlineComponents}function G1(s){return Ly(s).then((e=>e.syncEngine))}async function Uh(s){const e=await Ly(s),n=e.eventManager;return n.onListen=k1.bind(null,e.syncEngine),n.onUnlisten=D1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=j1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=M1.bind(null,e.syncEngine),n}function Q1(s,e,n={}){const i=new Zr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,v,w){const N=new Oy({next:T=>{N.Ou(),d.enqueueAndForget((()=>Ay(c,x))),T.fromCache&&v.source==="server"?w.reject(new ie(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(T)},error:T=>w.reject(T)}),x=new xy(g,N,{includeMetadataChanges:!0,ka:!0});return Ny(c,x)})(await Uh(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="firestore.googleapis.com",Jp=!0;class Zp{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fy,this.ssl=Jp}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Jp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xE)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=by((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Au{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new nw;switch(i.type){case"firstParty":return new ow(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Xp.get(n);i&&(ae("ComponentProvider","Removing Datastore"),Xp.delete(n),i.terminate())})(this),Promise.resolve()}}function K1(s,e,n,i={}){var a;s=wn(s,Au);const c=Hh(e),d=s._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:s._getEmulatorOptions()}),v=`${e}:${n}`;c&&(P_(`https://${v}`),V_("Firestore",!0)),d.host!==Fy&&d.host!==v&&ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w=Object.assign(Object.assign({},d),{host:v,ssl:c,emulatorOptions:i});if(!tu(w,g)&&(s._setSettings(w),i.mockUserToken)){let N,x;if(typeof i.mockUserToken=="string")N=i.mockUserToken,x=bt.MOCK_USER;else{N=R_(i.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ie(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new bt(T)}s._authCredentials=new rw(new Ig(N,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class at{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(wa(n,at._jsonSchema))return new at(e,i||null,new pe(We.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:dt("string",at._jsonSchemaVersion),referencePath:dt("string")};class es extends hs{constructor(e,n,i){super(e,n,Zh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new pe(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function Uy(s,e,...n){if(s=er(s),Ag("collection","path",e),s instanceof Au){const i=We.fromString(e,...n);return dp(i),new es(s,null,i)}{if(!(s instanceof at||s instanceof es))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(We.fromString(e,...n));return dp(i),new es(s.firestore,null,i)}}function Na(s,e,...n){if(s=er(s),arguments.length===1&&(e=Gh.newId()),Ag("doc","path",e),s instanceof Au){const i=We.fromString(e,...n);return hp(i),new at(s,null,new pe(i))}{if(!(s instanceof at||s instanceof es))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(We.fromString(e,...n));return hp(i),new at(s.firestore,s instanceof es?s.converter:null,new pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="AsyncQueue";class tg{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new yy(this,"async_queue_retry"),this.oc=()=>{const i=gh();i&&ae(eg,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Zr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!to(e))throw e;ae(eg,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Er("INTERNAL UNHANDLED ERROR: ",ng(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=fd.createAndSchedule(this,e,n,i,(c=>this.lc(c)));return this.ec.push(a),a}ac(){this.tc&&we(47125,{hc:ng(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function ng(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of i)if(c in a&&typeof a[c]=="function")return!0;return!1})(s,["next","error","complete"])}class ls extends Au{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new tg,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tg(e),this._firestoreClient=void 0,await e}}}function Y1(s,e){const n=typeof s=="object"?s:$0(),i=typeof s=="string"?s:iu,a=b0(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=x_("firestore");c&&K1(a,...c)}return a}function vd(s){if(s._terminated)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||X1(s),s._firestoreClient}function X1(s){var e,n,i;const a=s._freezeSettings(),c=(function(g,v,w,N){return new Tw(g,v,w,N.host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,by(N.experimentalLongPollingOptions),N.useFetchStreams,N.isUsingEmulator)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new q1(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&(function(g){const v=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(v),_online:v}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(jt.fromBase64String(e))}catch(n){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wa(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:dt("string",_n._jsonSchemaVersion),bytes:dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jn._jsonSchemaVersion}}static fromJSON(e){if(wa(e,Jn._jsonSchema))return new Jn(e.latitude,e.longitude)}}Jn._jsonSchemaVersion="firestore/geoPoint/1.0",Jn._jsonSchema={type:dt("string",Jn._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wa(e,Zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zn(e.vectorValues);throw new ie(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:dt("string",Zn._jsonSchemaVersion),vectorValues:dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=/^__.*__$/;class Z1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ea(e,this.data,n,this.fieldTransforms)}}class zy{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function By(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:s})}}class _d{constructor(e,n,i,a,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new _d(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.fc(e),a}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return fu(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(By(this.Ec)&&J1.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class eT{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Su(e)}Dc(e,n,i,a=!1){return new _d({Ec:e,methodName:n,bc:i,path:kt.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pu(s){const e=s._freezeSettings(),n=Su(s._databaseId);return new eT(s._databaseId,!!e.ignoreUndefinedProperties,n)}function $y(s,e,n,i,a,c={}){const d=s.Dc(c.merge||c.mergeFields?2:0,e,n,a);Ed("Data must be an object, but it was:",d,i);const g=Hy(i,d);let v,w;if(c.merge)v=new ln(d.fieldMask),w=d.fieldTransforms;else if(c.mergeFields){const N=[];for(const x of c.mergeFields){const T=zh(e,x,n);if(!d.contains(T))throw new ie(W.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Wy(N,T)||N.push(T)}v=new ln(N),w=d.fieldTransforms.filter((x=>v.covers(x.field)))}else v=null,w=d.fieldTransforms;return new Z1(new Zt(g),v,w)}class Ru extends Cu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ru}}class wd extends Cu{_toFieldTransform(e){return new Qw(e.path,new ya)}isEqual(e){return e instanceof wd}}function tT(s,e,n,i){const a=s.Dc(1,e,n);Ed("Data must be an object, but it was:",a,i);const c=[],d=Zt.empty();us(i,((v,w)=>{const N=Td(e,v,n);w=er(w);const x=a.gc(N);if(w instanceof Ru)c.push(N);else{const T=Aa(w,x);T!=null&&(c.push(N),d.set(N,T))}}));const g=new ln(c);return new zy(d,g,a.fieldTransforms)}function nT(s,e,n,i,a,c){const d=s.Dc(1,e,n),g=[zh(e,i,n)],v=[a];if(c.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)g.push(zh(e,c[T])),v.push(c[T+1]);const w=[],N=Zt.empty();for(let T=g.length-1;T>=0;--T)if(!Wy(w,g[T])){const R=g[T];let F=v[T];F=er(F);const q=d.gc(R);if(F instanceof Ru)w.push(R);else{const H=Aa(F,q);H!=null&&(w.push(R),N.set(R,H))}}const x=new ln(w);return new zy(N,x,d.fieldTransforms)}function rT(s,e,n,i=!1){return Aa(n,s.Dc(i?4:3,e))}function Aa(s,e){if(qy(s=er(s)))return Ed("Unsupported field value:",e,s),Hy(s,e);if(s instanceof Cu)return(function(i,a){if(!By(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,a){const c=[];let d=0;for(const g of i){let v=Aa(g,a.yc(d));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),d++}return{arrayValue:{values:c}}})(s,e)}return(function(i,a){if((i=er(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qw(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ye.fromDate(i);return{timestampValue:uu(a.serializer,c)}}if(i instanceof Ye){const c=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:uu(a.serializer,c)}}if(i instanceof Jn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _n)return{bytesValue:oy(a.serializer,i._byteString)};if(i instanceof at){const c=a.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw a.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:sd(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Zn)return(function(d,g){return{mapValue:{fields:{[Mg]:{stringValue:Og},[ou]:{arrayValue:{values:d.toArray().map((w=>{if(typeof w!="number")throw g.wc("VectorValues must only contain numeric values.");return ed(g.serializer,w)}))}}}}}})(i,a);throw a.wc(`Unsupported field value: ${mu(i)}`)})(s,e)}function Hy(s,e){const n={};return Pg(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(s,((i,a)=>{const c=Aa(a,e.Vc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function qy(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ye||s instanceof Jn||s instanceof _n||s instanceof at||s instanceof Cu||s instanceof Zn)}function Ed(s,e,n){if(!qy(n)||!xg(n)){const i=mu(n);throw i==="an object"?e.wc(s+" a custom object"):e.wc(s+" "+i)}}function zh(s,e,n){if((e=er(e))instanceof xu)return e._internalPath;if(typeof e=="string")return Td(s,e);throw fu("Field path arguments must be of type string or ",s,!1,void 0,n)}const sT=new RegExp("[~\\*/\\[\\]]");function Td(s,e,n){if(e.search(sT)>=0)throw fu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new xu(...e.split("."))._internalPath}catch{throw fu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function fu(s,e,n,i,a){const c=i&&!i.isEmpty(),d=a!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(c||d)&&(v+=" (found",c&&(v+=` in field ${i}`),d&&(v+=` in document ${a}`),v+=")"),new ie(W.INVALID_ARGUMENT,g+s+v)}function Wy(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n,i,a,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iT extends Gy{data(){return super.data()}}function Sd(s,e){return typeof e=="string"?Td(s,e):e instanceof xu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Id{}class Ky extends Id{}function Yy(s,e,...n){let i=[];e instanceof Id&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((v=>v instanceof Ad)).length,g=c.filter((v=>v instanceof Nd)).length;if(d>1||d>0&&g>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class Nd extends Ky{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Nd(e,n,i)}_apply(e){const n=this._parse(e);return Jy(e._query,n),new hs(e.firestore,e.converter,Ph(e._query,n))}_parse(e){const n=Pu(e.firestore);return(function(c,d,g,v,w,N,x){let T;if(w.isKeyField()){if(N==="array-contains"||N==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${N}' queries on documentId().`);if(N==="in"||N==="not-in"){ig(x,N);const F=[];for(const q of x)F.push(sg(v,c,q));T={arrayValue:{values:F}}}else T=sg(v,c,x)}else N!=="in"&&N!=="not-in"&&N!=="array-contains-any"||ig(x,N),T=rT(g,d,x,N==="in"||N==="not-in");return ht.create(w,N,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ad extends Id{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ad(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let d=a;const g=c.getFlattenedFilters();for(const v of g)Jy(d,v),d=Ph(d,v)})(e._query,n),new hs(e.firestore,e.converter,Ph(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xd extends Ky{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xd(e,n)}_apply(e){const n=(function(a,c,d){if(a.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ga(c,d)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(a,c){const d=a.explicitOrderBy.concat([c]);return new no(a.path,a.collectionGroup,d,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Xy(s,e="asc"){const n=e,i=Sd("orderBy",s);return xd._create(i,n)}function sg(s,e,n){if(typeof(n=er(n))=="string"){if(n==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hg(e)&&n.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(We.fromString(n));if(!pe.isDocumentKey(i))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return wp(s,new pe(i))}if(n instanceof at)return wp(s,n._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mu(n)}.`)}function ig(s,e){if(!Array.isArray(s)||s.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jy(s,e){const n=(function(a,c){for(const d of a)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oT{convertValue(e,n="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return us(e,((a,c)=>{i[a]=this.convertValue(c,n)})),i}convertVectorValue(e){var n,i,a;const c=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[ou].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map((d=>ot(d.doubleValue)));return new Zn(c)}convertGeoPoint(e){return new Jn(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=yu(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(fa(e));default:return null}}convertTimestamp(e){const n=rs(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=We.fromString(e);Ue(dy(i),9688,{name:e});const a=new ma(i.get(1),i.get(3)),c=new pe(i.popFirst(5));return a.isEqual(n)||Er(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $s extends Gy{constructor(e,n,i,a,c,d){super(e,n,i,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Sd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$s._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$s._jsonSchemaVersion="firestore/documentSnapshot/1.0",$s._jsonSchema={type:dt("string",$s._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class Zl extends $s{data(e={}){return super.data(e)}}class Hs{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new sa(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Zl(this._firestore,this._userDataWriter,i.key,i,new sa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((g=>{const v=new Zl(a._firestore,a._userDataWriter,g.doc.key,g.doc,new sa(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const v=new Zl(a._firestore,a._userDataWriter,g.doc.key,g.doc,new sa(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let w=-1,N=-1;return g.type!==0&&(w=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),N=d.indexOf(g.doc.key)),{type:aT(g.type),doc:v,oldIndex:w,newIndex:N}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aT(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:s})}}Hs._jsonSchemaVersion="firestore/querySnapshot/1.0",Hs._jsonSchema={type:dt("string",Hs._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class Cd extends oT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function Pd(s){s=wn(s,hs);const e=wn(s.firestore,ls),n=vd(e),i=new Cd(e);return Qy(s._query),Q1(n,s._query).then((a=>new Hs(e,i,s,a)))}function lT(s,e,n){s=wn(s,at);const i=wn(s.firestore,ls),a=Zy(s.converter,e);return ku(i,[$y(Pu(i),"setDoc",s._key,a,s.converter!==null,n).toMutation(s._key,En.none())])}function ev(s,e,n,...i){s=wn(s,at);const a=wn(s.firestore,ls),c=Pu(a);let d;return d=typeof(e=er(e))=="string"||e instanceof xu?nT(c,"updateDoc",s._key,e,n,i):tT(c,"updateDoc",s._key,e),ku(a,[d.toMutation(s._key,En.exists(!0))])}function tv(s){return ku(wn(s.firestore,ls),[new td(s._key,En.none())])}function uT(s,e){const n=wn(s.firestore,ls),i=Na(s),a=Zy(s.converter,e);return ku(n,[$y(Pu(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,En.exists(!1))]).then((()=>i))}function nv(s,...e){var n,i,a;s=er(s);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||rg(e[d])||(c=e[d++]);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(rg(e[d])){const x=e[d];e[d]=(n=x.next)===null||n===void 0?void 0:n.bind(x),e[d+1]=(i=x.error)===null||i===void 0?void 0:i.bind(x),e[d+2]=(a=x.complete)===null||a===void 0?void 0:a.bind(x)}let v,w,N;if(s instanceof at)w=wn(s.firestore,ls),N=Zh(s._key.path),v={next:x=>{e[d]&&e[d](cT(w,s,x))},error:e[d+1],complete:e[d+2]};else{const x=wn(s,hs);w=wn(x.firestore,ls),N=x._query;const T=new Cd(w);v={next:R=>{e[d]&&e[d](new Hs(w,T,x,R))},error:e[d+1],complete:e[d+2]},Qy(s._query)}return(function(T,R,F,q){const H=new Oy(q),Z=new xy(R,H,F);return T.asyncQueue.enqueueAndForget((async()=>Ny(await Uh(T),Z))),()=>{H.Ou(),T.asyncQueue.enqueueAndForget((async()=>Ay(await Uh(T),Z)))}})(vd(w),N,g,v)}function ku(s,e){return(function(i,a){const c=new Zr;return i.asyncQueue.enqueueAndForget((async()=>O1(await G1(i),a,c))),c.promise})(vd(s),e)}function cT(s,e,n){const i=n.docs.get(e._key),a=new Cd(s);return new $s(s,a,e._key,i,new sa(n.hasPendingWrites,n.fromCache),e.converter)}function ju(){return new wd("serverTimestamp")}(function(e,n=!0){(function(a){Zi=a})(B0),ru(new ca("firestore",((i,{instanceIdentifier:a,options:c})=>{const d=i.getProvider("app").getImmediate(),g=new ls(new sw(i.getProvider("auth-internal")),new aw(d,i.getProvider("app-check-internal")),(function(w,N){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ma(w.options.projectId,N)})(d,a),d);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),qi(op,ap,e),qi(op,ap,"esm2017")})();const hT={"2026-01-29":{day:1,name:"Matchday 1",ground:"Kicks on Grass",icon:""},"2026-01-30":{day:2,name:"Matchday 2",ground:"Kicks on Grass (Closed)",icon:""},"2026-02-02":{day:3,name:"Matchday 3",ground:"Vplay",icon:""}},dT=s=>hT[s]||{day:0,name:"Match",ground:"TBD",icon:""},fT=[{id:"match-1",matchNumber:1,home:"feel-united",away:"dhurandhars",date:"2026-01-29",time:"17:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-2",matchNumber:2,home:"userflow",away:"goaldiggers",date:"2026-01-29",time:"17:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-3",matchNumber:3,home:"userflow",away:"dhurandhars",date:"2026-01-29",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-4",matchNumber:4,home:"goaldiggers",away:"dhurandhars",date:"2026-01-29",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-5",matchNumber:5,home:"feel-united",away:"userflow",date:"2026-01-30",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-6",matchNumber:6,home:"goaldiggers",away:"feel-united",date:"2026-01-30",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-7",matchNumber:7,home:"dhurandhars",away:"userflow",date:"2026-01-30",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-8",matchNumber:8,home:"goaldiggers",away:"userflow",date:"2026-01-30",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-9",matchNumber:9,home:"dhurandhars",away:"feel-united",date:"2026-01-30",time:"20:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-10",matchNumber:10,home:"feel-united",away:"goaldiggers",date:"2026-02-02",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-11",matchNumber:11,home:"dhurandhars",away:"goaldiggers",date:"2026-02-02",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-12",matchNumber:12,home:"userflow",away:"feel-united",date:"2026-02-02",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-13",matchNumber:13,home:"tbd",away:"tbd",date:"2026-02-02",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!0}],mT=s=>new Date(s).toLocaleDateString("en-IN",{weekday:"short",month:"short",day:"numeric"}),rv=s=>{const[e,n]=s.split(":"),i=parseInt(e),a=i>=12?"PM":"AM";return`${i%12||12}:${n} ${a}`},pT={apiKey:"AIzaSyAYRukNJGOvVmL2jRAMgLtKkDzU7c6wo88",authDomain:"republic-cup-live.firebaseapp.com",projectId:"republic-cup-live",storageBucket:"republic-cup-live.firebasestorage.app",messagingSenderId:"642499294047",appId:"1:642499294047:web:f5a8b111b79bb8673abcea"},gT=mg(pT),so=Y1(gT),Rd=Uy(so,"matches"),kd=Uy(so,"predictions"),yT=async()=>{try{if((await Pd(Rd)).empty){console.log("Seeding matches collection...");for(const e of fT)await lT(Na(so,"matches",e.id),{...e,createdAt:ju()});return console.log("Matches seeded successfully!"),!0}return!1}catch(s){return console.error("Error seeding matches:",s),!1}},vT=s=>{const e=Yy(Rd,Xy("matchNumber"));return nv(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)},n=>{console.error("Error subscribing to matches:",n)})},Us=async(s,e)=>{try{const n=Na(so,"matches",s);return await ev(n,{...e,updatedAt:ju()}),!0}catch(n){return console.error("Error updating match:",n),!1}},_T=async s=>{try{return await uT(kd,{...s,submittedAt:ju()}),!0}catch(e){return console.error("Error submitting prediction:",e),!1}},wT=s=>{const e=Yy(kd,Xy("submittedAt","desc"));return nv(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)})},ET=async()=>{try{const e=(await Pd(kd)).docs.map(n=>tv(n.ref));return await Promise.all(e),console.log("All predictions deleted"),!0}catch(s){return console.error("Error deleting predictions:",s),!1}},TT=async s=>{try{return await tv(Na(so,"predictions",s)),console.log("Prediction deleted:",s),!0}catch(e){return console.error("Error deleting prediction:",e),!1}},ST=async()=>{try{const s=await Pd(Rd);for(const e of s.docs){const n=e.data();if(n.date&&n.date.startsWith("2025-")){const i=n.date.replace("2025-","2026-");await ev(Na(so,"matches",e.id),{date:i,updatedAt:ju()})}}return console.log("All match dates updated to 2026!"),!0}catch(s){return console.error("Error updating match dates:",s),!1}},Ke={"feel-united":{id:"feel-united",name:"Feel United",shortName:"FEE",color:"#FFFFFF",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249520/spitha_prod_uploads/2026_01/feel_united_1769249519167.webp",manager:"Aniruddh Agrawal",players:["Ninad","Aditya Thakur","Umair","Sagar Awasthi","Sandipan Bala","Gahan","Rishab Khanna"]},dhurandhars:{id:"dhurandhars",name:"Dhurandhars",shortName:"DHU",color:"#000000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249469/spitha_prod_uploads/2026_01/durandhars_1769249467581.webp",manager:"Trivedi",players:["Sagar Singh","Raghu","Sukhpal","Mayank","Manish Pandey","Bharath Kumar","Shashank"]},goaldiggers:{id:"goaldiggers",name:"The Goaldiggers",shortName:"GDG",color:"#87CEEB",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249929/spitha_prod_uploads/2026_01/the_goaldiggers2_1769249927876.webp",manager:"AKG",players:["Parth Jhawar","Abdul Rehman","Pratham P","Durgesh Suthar","Navdeep","Rajendra Ranka","Dhrouv Pujari"]},userflow:{id:"userflow",name:"Userflow United",shortName:"UFU",color:"#FF0000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249558/spitha_prod_uploads/2026_01/userflow_united_1769249557427.webp",manager:"Mani",players:["Sumedh Zope","Avaneesh Kulkarni","Kushal","Jalaj Varshney","Anurag Kumar Singh","Sandeep Xavier","Hriday Bhatia"]}},sv=ge.createContext(null),Sr=()=>{const s=ge.useContext(sv);if(!s)throw new Error("useApp must be used within AppProvider");return s},IT=({children:s})=>{const[e,n]=ge.useState([]),[i,a]=ge.useState([]),[c,d]=ge.useState(!1),[g,v]=ge.useState(!0),[w,N]=ge.useState("matches");ge.useEffect(()=>{localStorage.getItem("republic-cup-admin")==="true"&&d(!0)},[]),ge.useEffect(()=>{let Z,K;return(async()=>{await yT(),await ST(),Z=vT(se=>{n(se),v(!1)}),K=wT(se=>{a(se)})})(),()=>{Z&&Z(),K&&K()}},[]);const x=ge.useCallback(Z=>Z==="5555"?(d(!0),localStorage.setItem("republic-cup-admin","true"),!0):!1,[]),T=ge.useCallback(()=>{d(!1),localStorage.removeItem("republic-cup-admin")},[]),R=ge.useCallback(()=>{const Z={};return Object.keys(Ke).forEach(K=>{Z[K]={teamId:K,played:0,won:0,drawn:0,lost:0,goalsFor:0,goalsAgainst:0,goalDifference:0,points:0}}),e.filter(K=>K.status==="ft"&&!K.isFinal).forEach(K=>{const te=K.home,se=K.away,Ee=K.scoreHome||0,z=K.scoreAway||0;!Z[te]||!Z[se]||(Z[te].played++,Z[se].played++,Z[te].goalsFor+=Ee,Z[te].goalsAgainst+=z,Z[se].goalsFor+=z,Z[se].goalsAgainst+=Ee,Ee>z?(Z[te].won++,Z[te].points+=3,Z[se].lost++):Ee<z?(Z[se].won++,Z[se].points+=3,Z[te].lost++):(Z[te].drawn++,Z[se].drawn++,Z[te].points++,Z[se].points++))}),Object.values(Z).map(K=>({...K,goalDifference:K.goalsFor-K.goalsAgainst})).sort((K,te)=>te.points!==K.points?te.points-K.points:te.goalDifference!==K.goalDifference?te.goalDifference-K.goalDifference:te.goalsFor-K.goalsFor)},[e]),F=ge.useCallback(()=>{const Z={};return e.filter(K=>K.status==="ft").forEach(K=>{(K.goals||[]).forEach(te=>{const se=`${te.player}-${te.team}`;Z[se]||(Z[se]={player:te.player,team:te.team,goals:0}),Z[se].goals++})}),Object.values(Z).sort((K,te)=>te.goals-K.goals).slice(0,10)},[e]),q=ge.useCallback(()=>e.filter(Z=>Z.status==="upcoming"&&Z.home!=="tbd"),[e]),H={matches:e,predictions:i,isAdmin:c,loading:g,activeTab:w,setActiveTab:N,loginAdmin:x,logoutAdmin:T,calculateTable:R,calculateTopScorers:F,getUpcomingMatches:q};return f.jsx(sv.Provider,{value:H,children:s})},NT=({onClose:s})=>{const{loginAdmin:e}=Sr(),[n,i]=ge.useState(["","","",""]),[a,c]=ge.useState(!1),[d,g]=ge.useState(!1),v=[ge.useRef(),ge.useRef(),ge.useRef(),ge.useRef()];ge.useEffect(()=>{var T;(T=v[0].current)==null||T.focus()},[]);const w=(T,R)=>{var q;if(R&&!/^\d$/.test(R))return;const F=[...n];if(F[T]=R,i(F),c(!1),R&&T<3&&((q=v[T+1].current)==null||q.focus()),R&&T===3){const H=F.join("");setTimeout(()=>{e(H)?s():(c(!0),g(!0),setTimeout(()=>{var Z;g(!1),i(["","","",""]),(Z=v[0].current)==null||Z.focus()},500))},100)}},N=(T,R)=>{var F;R.key==="Backspace"&&!n[T]&&T>0&&((F=v[T-1].current)==null||F.focus())},x=T=>{T.preventDefault();const R=T.clipboardData.getData("text").slice(0,4);if(/^\d+$/.test(R)){const F=R.split("").concat(["","","",""]).slice(0,4);i(F),F[3]&&setTimeout(()=>{e(F.join(""))?s():(c(!0),g(!0),setTimeout(()=>{var q;g(!1),i(["","","",""]),(q=v[0].current)==null||q.focus()},500))},100)}};return f.jsx("div",{className:"modal-overlay",onClick:s,children:f.jsxs("div",{className:`modal-content pin-modal ${d?"shake":""}`,onClick:T=>T.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Admin Access"}),f.jsx("button",{className:"modal-close",onClick:s,children:""})]}),f.jsxs("div",{className:"pin-content",children:[f.jsx("p",{className:"pin-label",children:"Enter 4-digit PIN"}),f.jsx("div",{className:"pin-inputs",onPaste:x,children:n.map((T,R)=>f.jsx("input",{ref:v[R],type:"password",inputMode:"numeric",maxLength:1,value:T,onChange:F=>w(R,F.target.value),onKeyDown:F=>N(R,F),className:`pin-input ${a?"error":""}`,autoComplete:"off"},R))}),a&&f.jsx("p",{className:"pin-error",children:"Incorrect PIN. Try again."})]})]})})},AT=()=>{const{isAdmin:s,logoutAdmin:e}=Sr(),[n,i]=ge.useState(!1),[a,c]=ge.useState(0),d=()=>{const g=a+1;c(g),g>=3&&(i(!0),c(0)),setTimeout(()=>c(0),2e3)};return f.jsxs(f.Fragment,{children:[f.jsxs("header",{className:"header",children:[f.jsxs("div",{className:"header-content",children:[f.jsxs("div",{className:"header-brand",children:[f.jsx("img",{src:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249500/spitha_prod_uploads/2026_01/logo_1769249499164.webp",alt:"Scapia Offside",className:"header-logo"}),f.jsxs("div",{className:"header-title-group",children:[f.jsx("h1",{className:"header-title",children:"SCAPIA OFFSIDE"}),f.jsx("span",{className:"header-year",children:"2026"})]})]}),f.jsxs("div",{className:"header-actions",children:[s&&f.jsx("button",{className:"admin-badge",onClick:e,children:"ADMIN"}),f.jsx("span",{className:"version-tag",onClick:d,children:"v1.0"})]})]}),s&&f.jsx("div",{className:"admin-banner",children:"Admin Mode Active - You can edit matches"})]}),n&&f.jsx(NT,{onClose:()=>i(!1)})]})},xT=()=>{const{activeTab:s,setActiveTab:e,matches:n}=Sr(),i=n.filter(c=>c.status==="live").length,a=[{id:"matches",label:"Matches",icon:f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}),f.jsx("path",{d:"M2 12h20"})]}),badge:i>0?i:null},{id:"table",label:"Table",icon:f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{d:"M3 3h18v18H3zM3 9h18M3 15h18M9 3v18"})})},{id:"polls",label:"Polls",icon:f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{d:"M18 20V10M12 20V4M6 20v-6"})}),tag:"WIN"},{id:"rules",label:"Rules",icon:f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),f.jsx("polyline",{points:"14 2 14 8 20 8"}),f.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),f.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),f.jsx("polyline",{points:"10 9 9 9 8 9"})]})}];return f.jsx("nav",{className:"bottom-nav",children:f.jsx("div",{className:"nav-content",children:a.map(c=>f.jsxs("button",{className:`nav-item ${s===c.id?"active":""}`,onClick:()=>e(c.id),children:[f.jsxs("div",{className:"nav-icon-wrapper",children:[f.jsx("span",{className:"nav-icon",children:c.icon}),c.badge&&f.jsx("span",{className:"nav-badge",children:c.badge}),c.tag&&f.jsx("span",{className:"nav-tag",children:c.tag})]}),f.jsx("span",{className:"nav-label",children:c.label})]},c.id))})})},CT=({teamId:s,otherTeamId:e,isHome:n,onSelect:i,onClose:a})=>{const c=Ke[s],[d,g]=ge.useState(null),[v,w]=ge.useState("scorer");if(!c)return null;const N=R=>{R==="Own Goal"?i(R,s,null):(g(R),w("assist"))},x=R=>{i(d,s,R)},T=((c==null?void 0:c.players)||[]).filter(R=>R!==d).map(R=>({name:R,team:s,teamName:c.shortName}));return f.jsx("div",{className:"modal-overlay",onClick:a,children:f.jsxs("div",{className:"modal-content goal-modal",onClick:R=>R.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:v==="scorer"?"Who Scored?":"Who Assisted?"}),f.jsx("button",{className:"modal-close",onClick:a,children:""})]}),f.jsx("div",{className:"goal-modal-content",children:v==="scorer"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"goal-team-header",children:[f.jsx("img",{src:c.logo,alt:c.name,className:"goal-team-logo"}),f.jsx("span",{className:"goal-team-name",children:c.name})]}),f.jsxs("div",{className:"player-grid",children:[c.players.map(R=>f.jsxs("button",{className:"player-btn",onClick:()=>N(R),children:[f.jsx("span",{className:"player-initial",children:R.charAt(0)}),f.jsx("span",{className:"player-name",children:R})]},R)),f.jsxs("button",{className:"player-btn own-goal",onClick:()=>N("Own Goal"),children:[f.jsx("span",{className:"player-initial",children:"OG"}),f.jsx("span",{className:"player-name",children:"Own Goal"})]})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"assist-header",children:f.jsxs("span",{className:"scorer-info",children:["Goal: ",f.jsx("strong",{children:d})]})}),f.jsxs("div",{className:"player-grid assist-grid",children:[f.jsxs("button",{className:"player-btn no-assist",onClick:()=>x(null),children:[f.jsx("span",{className:"player-initial",children:"-"}),f.jsx("span",{className:"player-name",children:"No Assist"})]}),T.map(R=>f.jsxs("button",{className:"player-btn",onClick:()=>x(R.name),children:[f.jsx("span",{className:"player-initial",children:R.name.charAt(0)}),f.jsx("span",{className:"player-name",children:R.name}),f.jsx("span",{className:"player-team-tag",children:R.teamName})]},`${R.name}-${R.team}`))]}),f.jsx("button",{className:"back-btn",onClick:()=>w("scorer"),children:" Back to scorer"})]})})]})})},PT=({match:s,onClose:e})=>{var Ee;const{predictions:n}=Sr(),[i,a]=ge.useState(s.status),[c,d]=ge.useState(null),[g,v]=ge.useState(!1),[w,N]=ge.useState(s.manOfTheMatch||""),x=Ke[s.home]||{name:"TBD",shortName:"TBD"},T=Ke[s.away]||{name:"TBD",shortName:"TBD"},R=async z=>{v(!0),await Us(s.id,{status:z}),a(z),v(!1)},F=async()=>{window.confirm("Are you sure you want to reset the score to 0-0?")&&(v(!0),await Us(s.id,{scoreHome:0,scoreAway:0,goals:[]}),v(!1))},q=async(z,j,I,k)=>{v(!0);const S={player:z,team:j,assist:I||null,timestamp:new Date().toISOString()},P=[...s.goals||[],S],V=P.filter(_e=>_e.team===s.home).length,A=P.filter(_e=>_e.team===s.away).length;await Us(s.id,{goals:P,scoreHome:V,scoreAway:A}),d(null),v(!1)},H=async z=>{const j=z?s.home:s.away;if((s.goals||[]).filter(A=>A.team===j).length===0)return;const k=s.goals.map(A=>A.team).lastIndexOf(j),S=s.goals.filter((A,_e)=>_e!==k),P=S.filter(A=>A.team===s.home).length,V=S.filter(A=>A.team===s.away).length;v(!0),await Us(s.id,{goals:S,scoreHome:P,scoreAway:V}),v(!1)},Z=ge.useMemo(()=>n.filter(z=>z.matchId===s.id).sort((z,j)=>{var S,P,V,A;const I=((P=(S=z.submittedAt)==null?void 0:S.toDate)==null?void 0:P.call(S))||new Date(z.submittedAt),k=((A=(V=j.submittedAt)==null?void 0:V.toDate)==null?void 0:A.call(V))||new Date(j.submittedAt);return I-k}),[n,s.id]),K=ge.useMemo(()=>{const z=new Set;return Z.map(j=>{var S;const I=(S=j.userName)==null?void 0:S.toLowerCase().trim(),k=!z.has(I);return z.add(I),{...j,isFirstEntry:k}})},[Z]),te=ge.useMemo(()=>{const z={};return(s.goals||[]).forEach(j=>{const I=`${j.player}-${j.team}`;z[I]||(z[I]={player:j.player,team:j.team,goals:0}),z[I].goals++}),Object.values(z).sort((j,I)=>I.goals-j.goals)},[s.goals]),se=async()=>{if(!w){alert("Please select a Man of the Match");return}v(!0);const j=K.filter(I=>I.isFirstEntry&&I.predictedPlayer===w).map(I=>I.userName);await Us(s.id,{manOfTheMatch:w,momWinners:j,momPublishedAt:new Date().toISOString()}),v(!1),alert(`Man of the Match: ${w}
Winners: ${j.length>0?j.join(", "):"No correct predictions"}`)};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal-content admin-modal",onClick:z=>z.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h2",{children:["Edit Match ",s.matchNumber]}),f.jsx("button",{className:"modal-close",onClick:e,children:""})]}),f.jsxs("div",{className:"admin-content",children:[f.jsxs("div",{className:"admin-match-info",children:[f.jsxs("div",{className:"admin-team",children:[x.logo&&f.jsx("img",{src:x.logo,alt:x.name}),f.jsx("span",{children:x.shortName})]}),f.jsxs("div",{className:"admin-score",children:[f.jsx("span",{children:s.scoreHome}),f.jsx("span",{className:"admin-score-sep",children:"-"}),f.jsx("span",{children:s.scoreAway})]}),f.jsxs("div",{className:"admin-team",children:[T.logo&&f.jsx("img",{src:T.logo,alt:T.name}),f.jsx("span",{children:T.shortName})]})]}),f.jsxs("div",{className:"admin-section",children:[f.jsx("label",{children:"Match Status"}),f.jsx("div",{className:"status-buttons",children:["upcoming","live","ft"].map(z=>f.jsx("button",{className:`status-btn ${i===z?"active":""} status-${z}`,onClick:()=>R(z),disabled:g,children:z==="upcoming"?"Upcoming":z==="live"?"Live":"Full Time"},z))})]}),f.jsxs("div",{className:"admin-section",children:[f.jsx("label",{children:"Predictions Lock (2 PM Rule)"}),f.jsx("button",{className:`lock-btn ${s.predictionsLocked?"locked":""}`,onClick:async()=>{v(!0),await Us(s.id,{predictionsLocked:!s.predictionsLocked}),v(!1)},disabled:g,children:s.predictionsLocked?" Predictions Locked":" Predictions Open"})]}),f.jsxs("div",{className:"admin-section",children:[f.jsx("label",{children:"Add Goal"}),f.jsxs("div",{className:"goal-buttons",children:[f.jsxs("button",{className:"goal-btn home",onClick:()=>d("home"),disabled:g||s.home==="tbd",children:["+ Goal ",x.shortName]}),f.jsxs("button",{className:"goal-btn away",onClick:()=>d("away"),disabled:g||s.away==="tbd",children:["+ Goal ",T.shortName]})]})]}),f.jsxs("div",{className:"admin-section",children:[f.jsx("label",{children:"Remove Last Goal"}),f.jsxs("div",{className:"goal-buttons",children:[f.jsxs("button",{className:"remove-btn",onClick:()=>H(!0),disabled:g||!(s.goals||[]).some(z=>z.team===s.home),children:["- ",x.shortName]}),f.jsxs("button",{className:"remove-btn",onClick:()=>H(!1),disabled:g||!(s.goals||[]).some(z=>z.team===s.away),children:["- ",T.shortName]})]})]}),s.goals&&s.goals.length>0&&f.jsxs("div",{className:"admin-section",children:[f.jsx("label",{children:"Goal Log"}),f.jsx("div",{className:"goal-log",children:s.goals.map((z,j)=>{const I=Ke[z.team];return f.jsxs("div",{className:"goal-log-item",children:[f.jsxs("span",{className:"goal-time",children:[j+1,"."]}),f.jsx("span",{className:"goal-player",children:z.player}),f.jsxs("span",{className:"goal-team",children:["(",I==null?void 0:I.shortName,")"]}),z.assist&&f.jsxs("span",{className:"goal-assist",children:["A: ",z.assist]})]},j)})})]}),i==="ft"&&f.jsxs("div",{className:"admin-section mom-section",children:[f.jsx("label",{children:"Man of the Match"}),te.length>0?f.jsxs(f.Fragment,{children:[f.jsxs("select",{className:"mom-select",value:w,onChange:z=>N(z.target.value),disabled:g||s.momPublishedAt,children:[f.jsx("option",{value:"",children:"-- Select Man of the Match --"}),te.map(z=>{const j=Ke[z.team];return f.jsxs("option",{value:z.player,children:[z.player," (",j==null?void 0:j.shortName,") - ",z.goals," goal",z.goals>1?"s":""]},`${z.player}-${z.team}`)}),f.jsx("option",{value:"referee_decision",children:"Referee Decision (0-0 Draw)"})]}),s.momPublishedAt?f.jsxs("div",{className:"mom-published",children:["Published: ",s.manOfTheMatch,((Ee=s.momWinners)==null?void 0:Ee.length)>0&&f.jsxs("span",{className:"mom-winners",children:["Winners: ",s.momWinners.join(", ")]})]}):f.jsx("button",{className:"publish-btn",onClick:se,disabled:g||!w,children:"Publish Winner"})]}):f.jsx("p",{className:"no-goals-msg",children:'No goals scored yet. Add goals or select "Referee Decision".'})]}),K.length>0&&f.jsxs("div",{className:"admin-section",children:[f.jsxs("label",{children:["Predictions (",K.length,") - Sorted by submission time (earliest first)"]}),f.jsx("div",{className:"predictions-log",children:K.map((z,j)=>{var S,P;const k=(((P=(S=z.submittedAt)==null?void 0:S.toDate)==null?void 0:P.call(S))||new Date(z.submittedAt)).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"});return f.jsxs("div",{className:`prediction-log-item ${z.isFirstEntry?"":"duplicate"} ${z.predictedPlayer===w?"winner":""}`,children:[f.jsxs("span",{className:"pred-index",children:[j+1,"."]}),f.jsx("span",{className:"pred-time",children:k}),f.jsx("span",{className:"pred-user",children:z.userName}),f.jsx("span",{className:"pred-arrow",children:""}),f.jsx("span",{className:"pred-player",children:z.predictedPlayer}),!z.isFirstEntry&&f.jsx("span",{className:"pred-dup-badge",children:"DUP"}),z.isFirstEntry&&z.predictedPlayer===w&&f.jsx("span",{className:"pred-win-badge",children:"WIN"}),f.jsx("button",{className:"pred-delete-btn",onClick:()=>{window.confirm(`Delete prediction by ${z.userName}?`)&&TT(z.id)},disabled:g,children:""})]},z.id)})})]}),f.jsxs("div",{className:"admin-section",children:[f.jsx("label",{children:"Reset Options"}),f.jsxs("div",{className:"reset-buttons",children:[f.jsx("button",{className:"reset-btn",onClick:F,disabled:g,children:"Reset Score (0-0)"}),f.jsx("button",{className:"reset-btn danger",onClick:async()=>{window.confirm("Reset ALL match data? This will clear score, goals, and MoM. Predictions will remain.")&&(v(!0),await Us(s.id,{scoreHome:0,scoreAway:0,goals:[],manOfTheMatch:null,momWinners:null,momPublishedAt:null,status:"upcoming",predictionsLocked:!1}),a("upcoming"),N(""),v(!1))},disabled:g,children:"Reset All Match Data"})]})]})]})]})}),c&&f.jsx(CT,{teamId:c==="home"?s.home:s.away,otherTeamId:c==="home"?s.away:s.home,isHome:c==="home",onSelect:(z,j,I)=>q(z,j,I),onClose:()=>d(null)})]})},og=({match:s})=>{var K,te;const{isAdmin:e}=Sr(),[n,i]=ge.useState(!1),[a,c]=ge.useState(!1),d=Ke[s.home]||{name:"TBD",logo:null},g=Ke[s.away]||{name:"TBD",logo:null},v=()=>{switch(s.status){case"live":return"status-live";case"ft":return"status-ft";default:return"status-upcoming"}},w=()=>{switch(s.status){case"live":return"LIVE";case"ft":return"FT";default:return rv(s.time)}},N=se=>(s.goals||[]).filter(Ee=>Ee.team===se),x=N(s.home),T=N(s.away),R=x.length>0||T.length>0,F=s.status==="upcoming"&&s.home!=="tbd",q=s.status==="ft"&&R,H=q||F,Z=()=>{H&&c(!a)};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`match-card ${s.status} ${s.isFinal?"final":""} ${a?"expanded":""} ${H?"clickable":""}`,onClick:Z,children:[s.isFinal&&f.jsx("div",{className:"final-badge",children:"FINAL"}),f.jsxs("div",{className:"match-header",children:[f.jsxs("span",{className:"match-number",children:["Match ",s.matchNumber]}),f.jsxs("span",{className:`match-status ${v()}`,children:[s.status==="live"&&f.jsx("span",{className:"live-dot"}),w()]})]}),f.jsxs("div",{className:"match-body",children:[f.jsxs("div",{className:"team home-team",children:[f.jsx("div",{className:"team-logo-wrapper",children:d.logo?f.jsx("img",{src:d.logo,alt:d.name,className:"team-logo"}):f.jsx("div",{className:"team-logo-placeholder",children:"?"})}),f.jsx("span",{className:"team-name",children:d.name})]}),f.jsx("div",{className:"score-container",children:s.status==="upcoming"?f.jsx("span",{className:"vs-text",children:"VS"}):f.jsxs("div",{className:"score",children:[f.jsx("span",{className:"score-home",children:s.scoreHome}),f.jsx("span",{className:"score-separator",children:"-"}),f.jsx("span",{className:"score-away",children:s.scoreAway})]})}),f.jsxs("div",{className:"team away-team",children:[f.jsx("div",{className:"team-logo-wrapper",children:g.logo?f.jsx("img",{src:g.logo,alt:g.name,className:"team-logo"}):f.jsx("div",{className:"team-logo-placeholder",children:"?"})}),f.jsx("span",{className:"team-name",children:g.name})]})]}),q&&!a&&f.jsxs("div",{className:"expand-hint",children:[f.jsx("span",{children:"Tap to see scorers"}),f.jsx("span",{className:"expand-icon",children:""})]}),F&&!a&&f.jsxs("div",{className:"expand-hint",children:[f.jsx("span",{children:"Tap to see squads"}),f.jsx("span",{className:"expand-icon",children:""})]}),a&&q&&f.jsxs("div",{className:"goals-detail",children:[f.jsx("div",{className:"goals-column home-goals",children:x.length>0?x.map((se,Ee)=>f.jsxs("div",{className:"goal-item",children:[f.jsx("span",{className:"goal-icon",children:""}),f.jsx("span",{className:"goal-scorer",children:se.player}),se.assist&&f.jsxs("span",{className:"goal-assist",children:["(A: ",se.assist,")"]})]},Ee)):f.jsx("span",{className:"no-goals",children:"-"})}),f.jsx("div",{className:"goals-divider"}),f.jsx("div",{className:"goals-column away-goals",children:T.length>0?T.map((se,Ee)=>f.jsxs("div",{className:"goal-item",children:[f.jsx("span",{className:"goal-icon",children:""}),f.jsx("span",{className:"goal-scorer",children:se.player}),se.assist&&f.jsxs("span",{className:"goal-assist",children:["(A: ",se.assist,")"]})]},Ee)):f.jsx("span",{className:"no-goals",children:"-"})})]}),a&&F&&f.jsxs("div",{className:"roster-detail",children:[f.jsxs("div",{className:"roster-column home-roster",children:[f.jsxs("div",{className:"roster-header",children:[f.jsx("span",{className:"manager-label",children:"Manager"}),f.jsx("span",{className:"manager-name",children:d.manager||"TBD"})]}),f.jsx("div",{className:"roster-players",children:(K=d.players)==null?void 0:K.map((se,Ee)=>f.jsxs("div",{className:"roster-player",children:[f.jsx("span",{className:"player-number",children:Ee+1}),f.jsx("span",{className:"player-name",children:se})]},Ee))})]}),f.jsx("div",{className:"roster-divider"}),f.jsxs("div",{className:"roster-column away-roster",children:[f.jsxs("div",{className:"roster-header",children:[f.jsx("span",{className:"manager-label",children:"Manager"}),f.jsx("span",{className:"manager-name",children:g.manager||"TBD"})]}),f.jsx("div",{className:"roster-players",children:(te=g.players)==null?void 0:te.map((se,Ee)=>f.jsxs("div",{className:"roster-player",children:[f.jsx("span",{className:"player-number",children:Ee+1}),f.jsx("span",{className:"player-name",children:se})]},Ee))})]})]}),e&&f.jsx("button",{className:"edit-button",onClick:se=>{se.stopPropagation(),i(!0)},children:"Edit"})]}),n&&f.jsx(PT,{match:s,onClose:()=>i(!1)})]})},RT=()=>{const{matches:s,loading:e}=Sr(),n=ge.useMemo(()=>{const g={};return s.forEach(v=>{const w=v.date;g[w]||(g[w]=[]),g[w].push(v)}),Object.entries(g).sort(([v],[w])=>new Date(v)-new Date(w)).map(([v,w])=>{const N=dT(v),x=w.sort((K,te)=>K.time.localeCompare(te.time)),T=x.filter(K=>K.status==="ft"),R=x.filter(K=>K.status==="live"),F=T.reduce((K,te)=>K+(te.scoreHome||0)+(te.scoreAway||0),0),q=T.length===x.length,H=R.length>0,Z=T.length>0||H;return{date:v,dateLabel:mT(v),matchday:N,matches:x,stats:{total:x.length,completed:T.length,live:R.length,totalGoals:F,isComplete:q,isLive:H,hasStarted:Z}}})},[s]),i=s.filter(g=>g.status==="live"),a=s.length,c=s.filter(g=>g.status==="ft").length,d=a>0?Math.round(c/a*100):0;return e?f.jsx("div",{className:"tab-content",children:f.jsx("div",{className:"loading-container",style:{minHeight:"200px"},children:f.jsx("div",{className:"loading-spinner"})})}):f.jsxs("div",{className:"tab-content",children:[f.jsxs("section",{className:"tournament-progress animate-slide-up",children:[f.jsxs("div",{className:"progress-header",children:[f.jsx("span",{className:"progress-title",children:"SCAPIA OFFSIDE CUP 2026"}),f.jsxs("span",{className:"progress-count",children:[c,"/",a," matches"]})]}),f.jsxs("div",{className:"progress-bar-container",children:[f.jsx("div",{className:"progress-bar-bg",children:f.jsx("div",{className:"progress-bar-fill",style:{width:`${d}%`}})}),f.jsxs("span",{className:"progress-percent",children:[d,"%"]})]})]}),i.length>0&&f.jsxs("section",{className:"live-section animate-fade-in",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title",children:"PLAYING NOW"}),f.jsxs("span",{className:"section-badge live-badge",children:[i.length," LIVE"]})]}),i.map(g=>f.jsx(og,{match:g},g.id))]}),n.map((g,v)=>f.jsxs("section",{className:`matchday-section ${g.stats.isComplete?"completed":""} ${g.stats.isLive?"has-live":""}`,style:{animationDelay:`${.05+v*.05}s`},children:[f.jsxs("div",{className:"matchday-header",children:[f.jsxs("div",{className:"matchday-info",children:[f.jsx("span",{className:"matchday-icon",children:g.matchday.icon}),f.jsxs("div",{className:"matchday-text",children:[f.jsx("span",{className:"matchday-name",children:g.matchday.name}),f.jsx("span",{className:"matchday-date",children:g.dateLabel})]})]}),f.jsxs("div",{className:"matchday-meta",children:[f.jsx("span",{className:"ground-name",children:g.matchday.ground}),g.stats.hasStarted&&f.jsx("div",{className:"matchday-stats",children:g.stats.isComplete?f.jsxs("span",{className:"stat-badge complete",children:[f.jsx("span",{className:"stat-icon",children:""}),g.stats.totalGoals," goals"]}):g.stats.isLive?f.jsxs("span",{className:"stat-badge live",children:[f.jsx("span",{className:"live-dot"}),g.stats.live," LIVE"]}):f.jsxs("span",{className:"stat-badge partial",children:[g.stats.completed,"/",g.stats.total]})})]})]}),f.jsx("div",{className:"matchday-matches",children:g.matches.map((w,N)=>f.jsxs("div",{className:"match-timeline-item",children:[f.jsxs("div",{className:"timeline-connector",children:[f.jsx("div",{className:`timeline-dot ${w.status}`}),N<g.matches.length-1&&f.jsx("div",{className:"timeline-line"})]}),f.jsx("div",{className:"match-content",children:f.jsx(og,{match:w})})]},w.id))})]},g.date)),s.length===0&&f.jsxs("div",{className:"empty-state",children:[f.jsx("div",{className:"empty-state-icon",children:""}),f.jsx("h3",{children:"No Matches Yet"}),f.jsx("p",{children:"Check back when the tournament begins!"})]})]})},kT=()=>{const{calculateTable:s,calculateTopScorers:e,matches:n,predictions:i}=Sr(),a=ge.useMemo(()=>s(),[s]),c=ge.useMemo(()=>e(),[e]),d=n.filter(T=>T.status==="ft"&&!T.isFinal).length,g=ge.useMemo(()=>{const T={};return n.filter(R=>R.status==="ft").forEach(R=>{(R.goals||[]).forEach(F=>{if(F.assist){const q=F.assist;T[q]||(T[q]={player:F.assist,assists:0}),T[q].assists++}})}),Object.values(T).sort((R,F)=>F.assists-R.assists).slice(0,5)},[n]),v=ge.useMemo(()=>{const T={};return Object.keys(Ke).forEach(R=>{T[R]=0}),n.filter(R=>R.status==="ft").forEach(R=>{R.scoreAway===0&&T[R.home]!==void 0&&T[R.home]++,R.scoreHome===0&&T[R.away]!==void 0&&T[R.away]++}),Object.entries(T).map(([R,F])=>({teamId:R,count:F})).sort((R,F)=>F.count-R.count)},[n]),w=1e3,N=ge.useMemo(()=>{const T={};return n.filter(R=>{var F;return R.momPublishedAt&&((F=R.momWinners)==null?void 0:F.length)>0}).forEach(R=>{const F=Math.floor(w/R.momWinners.length);R.momWinners.forEach(q=>{T[q]||(T[q]={name:q,coins:0,wins:0}),T[q].coins+=F,T[q].wins++})}),Object.values(T).sort((R,F)=>F.coins-R.coins).slice(0,10)},[n]),x=ge.useMemo(()=>{var Ee;const T=n.filter(z=>z.status==="ft");if(T.length===0)return null;let R=null,F=0;T.forEach(z=>{var I,k;const j=Math.abs(z.scoreHome-z.scoreAway);if(j>F){F=j;const S=z.scoreHome>z.scoreAway?z.home:z.away,P=z.scoreHome>z.scoreAway?z.away:z.home;R={winner:((I=Ke[S])==null?void 0:I.shortName)||S,loser:((k=Ke[P])==null?void 0:k.shortName)||P,score:z.scoreHome>z.scoreAway?`${z.scoreHome}-${z.scoreAway}`:`${z.scoreAway}-${z.scoreHome}`,matchNum:z.matchNumber}}});let q=null,H=0;T.forEach(z=>{var I,k;const j=(z.scoreHome||0)+(z.scoreAway||0);j>H&&(H=j,q={home:((I=Ke[z.home])==null?void 0:I.shortName)||z.home,away:((k=Ke[z.away])==null?void 0:k.shortName)||z.away,score:`${z.scoreHome}-${z.scoreAway}`,total:j,matchNum:z.matchNumber})});const Z=T.filter(z=>z.scoreHome===z.scoreAway).length,K={};T.forEach(z=>{z.scoreHome>z.scoreAway?K[z.home]=(K[z.home]||0)+1:z.scoreAway>z.scoreHome&&(K[z.away]=(K[z.away]||0)+1)});const te=Object.entries(K).sort((z,j)=>j[1]-z[1])[0],se=[];return T.forEach(z=>{const j={};(z.goals||[]).forEach(I=>{j[I.player]=(j[I.player]||0)+1}),Object.entries(j).forEach(([I,k])=>{k>=3&&se.push({player:I,goals:k,matchNum:z.matchNumber})})}),{biggestWin:R,highestScoring:q,draws:Z,topWinner:te?{team:((Ee=Ke[te[0]])==null?void 0:Ee.shortName)||te[0],wins:te[1]}:null,hatTricks:se}},[n]);return f.jsxs("div",{className:"tab-content",children:[f.jsxs("section",{className:"table-section animate-slide-up",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title",children:"STANDINGS"}),f.jsxs("span",{className:"section-badge",children:[d," PLAYED"]})]}),f.jsxs("div",{className:"league-table",children:[f.jsxs("div",{className:"table-header",children:[f.jsx("span",{className:"col-pos",children:"#"}),f.jsx("span",{className:"col-team",children:"Team"}),f.jsx("span",{className:"col-stat",children:"P"}),f.jsx("span",{className:"col-stat col-wdl",children:"W"}),f.jsx("span",{className:"col-stat col-wdl",children:"D"}),f.jsx("span",{className:"col-stat col-wdl",children:"L"}),f.jsx("span",{className:"col-stat",children:"GD"}),f.jsx("span",{className:"col-pts",children:"PTS"})]}),a.map((T,R)=>{const F=Ke[T.teamId];return F?f.jsxs("div",{className:`table-row ${R<2?"qualified":""}`,style:{animationDelay:`${R*.05}s`},children:[f.jsx("span",{className:"col-pos",children:f.jsx("span",{className:`position ${R<2?"top":""}`,children:R+1})}),f.jsxs("span",{className:"col-team",children:[f.jsx("img",{src:F.logo,alt:F.name,className:"table-team-logo"}),f.jsx("span",{className:"table-team-name",children:F.name})]}),f.jsx("span",{className:"col-stat",children:T.played}),f.jsx("span",{className:"col-stat col-wdl",children:T.won}),f.jsx("span",{className:"col-stat col-wdl",children:T.drawn}),f.jsx("span",{className:"col-stat col-wdl",children:T.lost}),f.jsxs("span",{className:"col-stat",children:[T.goalDifference>0?"+":"",T.goalDifference]}),f.jsx("span",{className:"col-pts",children:T.points})]},T.teamId):null})]}),f.jsx("div",{className:"table-legend",children:f.jsxs("span",{className:"legend-item qualified-legend",children:[f.jsx("span",{className:"legend-dot"}),"Qualifies for Final"]})})]}),f.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.2s"},children:[f.jsx("div",{className:"section-header",children:f.jsx("h2",{className:"section-title",children:"GOLDEN BOOT"})}),c.length>0?f.jsx("div",{className:"scorers-list",children:c.map((T,R)=>{const F=Ke[T.team];return f.jsxs("div",{className:`scorer-row ${R===0?"leader":""}`,style:{animationDelay:`${(R+4)*.05}s`},children:[f.jsx("span",{className:"scorer-rank",children:R===0?"":R===1?"":R===2?"":R+1}),f.jsxs("div",{className:"scorer-info",children:[f.jsx("span",{className:"scorer-name",children:T.player}),f.jsx("span",{className:"scorer-team",children:(F==null?void 0:F.name)||T.team})]}),f.jsx("span",{className:"scorer-goals",children:T.goals})]},`${T.player}-${T.team}`)})}):f.jsx("div",{className:"empty-state",children:f.jsx("p",{children:"No goals scored yet"})})]}),g.length>0&&f.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.25s"},children:[f.jsx("div",{className:"section-header",children:f.jsx("h2",{className:"section-title",children:"TOP ASSISTS"})}),f.jsx("div",{className:"scorers-list",children:g.map((T,R)=>f.jsxs("div",{className:`scorer-row ${R===0?"leader assist-leader":""}`,style:{animationDelay:`${(R+4)*.05}s`},children:[f.jsx("span",{className:"scorer-rank",children:R===0?"":R+1}),f.jsx("div",{className:"scorer-info",children:f.jsx("span",{className:"scorer-name",children:T.player})}),f.jsx("span",{className:"scorer-goals assist-count",children:T.assists})]},T.player))})]}),f.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.3s"},children:[f.jsx("div",{className:"section-header",children:f.jsx("h2",{className:"section-title",children:"CLEAN SHEETS"})}),f.jsx("div",{className:"scorers-list",children:v.map((T,R)=>{const F=Ke[T.teamId];return F?f.jsxs("div",{className:`scorer-row ${R===0&&T.count>0?"leader clean-leader":""}`,style:{animationDelay:`${(R+4)*.05}s`},children:[f.jsx("span",{className:"scorer-rank",children:R===0&&T.count>0?"":R+1}),f.jsxs("div",{className:"scorer-info",children:[f.jsx("img",{src:F.logo,alt:F.name,className:"table-team-logo"}),f.jsx("span",{className:"scorer-name",children:F.name})]}),f.jsx("span",{className:"scorer-goals",children:T.count})]},T.teamId):null})})]}),f.jsxs("section",{className:"stats-section animate-slide-up",style:{animationDelay:"0.35s"},children:[f.jsx("div",{className:"section-header",children:f.jsx("h2",{className:"section-title",children:"TOURNAMENT STATS"})}),f.jsxs("div",{className:"stats-grid",children:[f.jsxs("div",{className:"stat-card",children:[f.jsx("span",{className:"stat-value",children:n.filter(T=>T.status==="ft").reduce((T,R)=>T+(R.scoreHome||0)+(R.scoreAway||0),0)}),f.jsx("span",{className:"stat-label",children:"Total Goals"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("span",{className:"stat-value",children:d}),f.jsx("span",{className:"stat-label",children:"Matches Played"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("span",{className:"stat-value",children:d>0?(n.filter(T=>T.status==="ft").reduce((T,R)=>T+(R.scoreHome||0)+(R.scoreAway||0),0)/d).toFixed(1):"0.0"}),f.jsx("span",{className:"stat-label",children:"Goals/Match"})]})]})]}),x&&f.jsxs("section",{className:"interesting-stats-section animate-slide-up",style:{animationDelay:"0.4s"},children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title",children:"FUN FACTS"}),f.jsx("span",{className:"section-badge",children:""})]}),f.jsxs("div",{className:"fun-facts-grid",children:[x.biggestWin&&x.biggestWin.score!=="0-0"&&f.jsxs("div",{className:"fun-fact-card",children:[f.jsx("span",{className:"fun-fact-icon",children:""}),f.jsxs("div",{className:"fun-fact-content",children:[f.jsx("span",{className:"fun-fact-label",children:"Biggest Win"}),f.jsxs("span",{className:"fun-fact-value",children:[x.biggestWin.winner," ",x.biggestWin.score]}),f.jsxs("span",{className:"fun-fact-detail",children:["vs ",x.biggestWin.loser," (M",x.biggestWin.matchNum,")"]})]})]}),x.highestScoring&&x.highestScoring.total>0&&f.jsxs("div",{className:"fun-fact-card",children:[f.jsx("span",{className:"fun-fact-icon",children:""}),f.jsxs("div",{className:"fun-fact-content",children:[f.jsx("span",{className:"fun-fact-label",children:"Most Goals in a Match"}),f.jsxs("span",{className:"fun-fact-value",children:[x.highestScoring.total," goals"]}),f.jsxs("span",{className:"fun-fact-detail",children:[x.highestScoring.home," vs ",x.highestScoring.away," (M",x.highestScoring.matchNum,")"]})]})]}),x.topWinner&&f.jsxs("div",{className:"fun-fact-card",children:[f.jsx("span",{className:"fun-fact-icon",children:""}),f.jsxs("div",{className:"fun-fact-content",children:[f.jsx("span",{className:"fun-fact-label",children:"Most Wins"}),f.jsx("span",{className:"fun-fact-value",children:x.topWinner.team}),f.jsxs("span",{className:"fun-fact-detail",children:[x.topWinner.wins," win",x.topWinner.wins!==1?"s":""]})]})]}),x.draws>0&&f.jsxs("div",{className:"fun-fact-card",children:[f.jsx("span",{className:"fun-fact-icon",children:""}),f.jsxs("div",{className:"fun-fact-content",children:[f.jsx("span",{className:"fun-fact-label",children:"Draws"}),f.jsx("span",{className:"fun-fact-value",children:x.draws}),f.jsxs("span",{className:"fun-fact-detail",children:["match",x.draws!==1?"es":""," ended level"]})]})]}),x.hatTricks.length>0&&x.hatTricks.map((T,R)=>f.jsxs("div",{className:"fun-fact-card hat-trick",children:[f.jsx("span",{className:"fun-fact-icon",children:""}),f.jsxs("div",{className:"fun-fact-content",children:[f.jsx("span",{className:"fun-fact-label",children:"Hat-trick!"}),f.jsx("span",{className:"fun-fact-value",children:T.player}),f.jsxs("span",{className:"fun-fact-detail",children:[T.goals," goals in M",T.matchNum]})]})]},R))]})]}),N.length>0&&f.jsxs("section",{className:"scorers-section poll-leaderboard animate-slide-up",style:{animationDelay:"0.4s"},children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title",children:"POLL LEADERBOARD"}),f.jsx("span",{className:"section-badge coins-badge",children:"COINS"})]}),f.jsx("div",{className:"scorers-list",children:N.map((T,R)=>f.jsxs("div",{className:`scorer-row ${R===0?"leader coins-leader":""}`,style:{animationDelay:`${(R+4)*.05}s`},children:[f.jsx("span",{className:"scorer-rank",children:R===0?"":R===1?"":R===2?"":R+1}),f.jsxs("div",{className:"scorer-info",children:[f.jsx("span",{className:"scorer-name",children:T.name}),f.jsxs("span",{className:"scorer-team",children:[T.wins," win",T.wins!==1?"s":""]})]}),f.jsx("span",{className:"scorer-goals coins-value",children:T.coins})]},T.name))})]})]})},jT=()=>{const{getUpcomingMatches:s,predictions:e,matches:n,isAdmin:i}=Sr(),[a,c]=ge.useState(()=>localStorage.getItem("scapia-poll-username")||""),[d,g]=ge.useState({}),[v,w]=ge.useState(null),[N,x]=ge.useState({}),[T,R]=ge.useState(""),F=ge.useMemo(()=>s(),[s]),q=S=>{const P=Ke[S.home],V=Ke[S.away],A=[];return P&&P.players.forEach(_e=>{A.push({name:_e,team:S.home,teamName:P.name,teamShort:P.shortName})}),V&&V.players.forEach(_e=>{A.push({name:_e,team:S.away,teamName:V.name,teamShort:V.shortName})}),A},H=S=>{const P=S.toLowerCase().replace("@scapia.cards","").replace(/[^a-z0-9.]/g,"");c(P),localStorage.setItem("scapia-poll-username",P)},Z=()=>a?`${a}@scapia.cards`:"",K=async S=>{R("");const P=d[S.id];if(!a.trim()){R("Please enter your name first");return}if(!P){R(`Please select a player for Match ${S.matchNumber}`);return}if(S.predictionsLocked){R("Predictions are locked for this match (2 PM cutoff)");return}w(S.id);try{const A=q(S).find(_e=>_e.name===P);await _T({userName:Z(),matchId:S.id,matchNumber:S.matchNumber,predictedPlayer:P,predictedTeam:A==null?void 0:A.team,predictedTeamName:A==null?void 0:A.teamName}),x(_e=>({..._e,[S.id]:!0})),g(_e=>{const nt={..._e};return delete nt[S.id],nt}),setTimeout(()=>{x(_e=>({..._e,[S.id]:!1}))},3e3)}catch{R("Failed to submit. Please try again.")}finally{w(null)}},te=1e3,se=ge.useMemo(()=>n.filter(S=>S.momPublishedAt).sort((S,P)=>S.matchNumber-P.matchNumber).map(S=>{var A,_e;const P=S.momWinners||[],V=P.length>0?Math.floor(te/P.length):0;return{matchNumber:S.matchNumber,matchId:S.id,homeTeam:((A=Ke[S.home])==null?void 0:A.shortName)||S.home,awayTeam:((_e=Ke[S.away])==null?void 0:_e.shortName)||S.away,score:`${S.scoreHome}-${S.scoreAway}`,manOfTheMatch:S.manOfTheMatch,winners:P,coinsPerWinner:V}}),[n]),Ee=ge.useMemo(()=>{if(!a)return{total:0,wins:[]};const S=Z();let P=0;const V=[];return se.forEach(A=>{A.winners.includes(S)&&(P+=A.coinsPerWinner,V.push({matchNumber:A.matchNumber,coins:A.coinsPerWinner}))}),{total:P,wins:V}},[a,se]),z=S=>e.filter(P=>P.matchId===S).length,j=S=>{const P=e.filter(A=>A.matchId===S),V={};return P.forEach(A=>{A.predictedPlayer&&(V[A.predictedPlayer]=(V[A.predictedPlayer]||0)+1)}),Object.entries(V).sort((A,_e)=>_e[1]-A[1]).slice(0,3).map(([A,_e])=>({player:A,count:_e}))},I=ge.useMemo(()=>n.filter(S=>S.status==="upcoming"||S.status==="live").filter(S=>z(S.id)>=3).map(S=>{var P,V;return{matchNumber:S.matchNumber,matchId:S.id,homeTeam:((P=Ke[S.home])==null?void 0:P.shortName)||S.home,awayTeam:((V=Ke[S.away])==null?void 0:V.shortName)||S.away,topPlayers:j(S.id)}}).filter(S=>S.topPlayers.length>0),[n,e]),k=e.length;return f.jsxs("div",{className:"tab-content",children:[f.jsxs("section",{className:"poll-hero animate-slide-up",children:[f.jsxs("div",{className:"hero-coins-highlight",children:[f.jsxs("div",{className:"coins-amount",children:[f.jsx("span",{className:"coins-number",children:"1000"}),f.jsx("span",{className:"coins-label",children:"COINS"})]}),f.jsx("div",{className:"coins-subtext",children:"Every Match!"})]}),f.jsxs("div",{className:"hero-content",children:[f.jsx("h1",{className:"hero-title",children:"MAN OF THE MATCH"}),f.jsx("p",{className:"hero-subtitle",children:"Predict who scores the most goals & win!"})]}),f.jsxs("div",{className:"hero-stats",children:[f.jsxs("div",{className:"hero-stat",children:[f.jsx("span",{className:"stat-value",children:F.length}),f.jsx("span",{className:"stat-label",children:"Matches Open"})]}),f.jsx("div",{className:"hero-stat-divider"}),f.jsxs("div",{className:"hero-stat",children:[f.jsx("span",{className:"stat-value",children:k}),f.jsx("span",{className:"stat-label",children:"Votes Cast"})]})]}),f.jsxs("div",{className:"hero-rules",children:[f.jsx("span",{children:" Pick top scorer"}),f.jsx("span",{children:" Vote by 2 PM"}),f.jsx("span",{children:" Split if tied"})]})]}),a&&Ee.total>0&&f.jsx("section",{className:"my-earnings-section animate-slide-up",style:{animationDelay:"0.025s"},children:f.jsxs("div",{className:"earnings-card",children:[f.jsxs("div",{className:"earnings-header",children:[f.jsx("span",{className:"earnings-icon",children:""}),f.jsx("span",{className:"earnings-title",children:"MY EARNINGS"})]}),f.jsxs("div",{className:"earnings-amount",children:[f.jsx("span",{className:"earnings-coins",children:Ee.total}),f.jsx("span",{className:"earnings-label",children:"COINS"})]}),f.jsx("div",{className:"earnings-breakdown",children:Ee.wins.map((S,P)=>f.jsxs("span",{className:"earnings-win",children:["M",S.matchNumber,": +",S.coins]},P))})]})}),se.length>0&&f.jsxs("section",{className:"winners-section animate-slide-up",style:{animationDelay:"0.05s"},children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title",children:"WINNERS HALL OF FAME"}),f.jsx("span",{className:"section-badge trophy-badge",children:""})]}),f.jsx("div",{className:"winners-list",children:se.map(S=>f.jsxs("div",{className:"winner-card compact",children:[f.jsxs("div",{className:"winner-match-info",children:[f.jsxs("span",{className:"winner-match-num",children:["M",S.matchNumber]}),f.jsxs("span",{className:"winner-teams",children:[S.homeTeam," vs ",S.awayTeam]}),f.jsx("span",{className:"winner-score",children:S.score})]}),f.jsxs("div",{className:"winner-details",children:[f.jsxs("div",{className:"mom-player",children:[f.jsx("span",{className:"mom-label",children:"MoM:"}),f.jsx("span",{className:"mom-name",children:S.manOfTheMatch})]}),S.winners.length>0?f.jsxs("div",{className:"winner-info",children:[S.winners.length<=3?f.jsx("div",{className:"winner-names",children:S.winners.map((P,V)=>f.jsx("span",{className:"winner-badge",children:P.replace("@scapia.cards","")},V))}):f.jsxs("div",{className:"winner-names compact-winners",children:[S.winners.slice(0,2).map((P,V)=>f.jsx("span",{className:"winner-badge",children:P.replace("@scapia.cards","")},V)),f.jsxs("span",{className:"winner-badge more-badge",children:["+",S.winners.length-2," more"]})]}),f.jsxs("span",{className:"coins-earned",children:[S.coinsPerWinner," coins each"]})]}):f.jsx("span",{className:"no-winners",children:"No correct predictions"})]})]},S.matchNumber))})]}),f.jsxs("section",{className:"poll-section animate-slide-up",style:{animationDelay:"0.1s"},children:[f.jsx("div",{className:"section-header",children:f.jsx("h2",{className:"section-title",children:"MAKE YOUR PREDICTION"})}),T&&f.jsx("div",{className:"error-message animate-scale-in",children:T}),f.jsxs("div",{className:"user-input-card",children:[f.jsx("label",{htmlFor:"userName",children:"Your Name"}),f.jsxs("div",{className:"email-input-wrapper",children:[f.jsx("input",{type:"text",id:"userName",value:a,onChange:S=>H(S.target.value),placeholder:"yourname",maxLength:30}),f.jsx("span",{className:"email-domain",children:"@scapia.cards"})]}),a&&f.jsxs("p",{className:"email-preview",children:["Voting as: ",f.jsx("strong",{children:Z()})]})]})]}),F.length>0&&f.jsxs("section",{className:"vote-cards-section animate-slide-up",style:{animationDelay:"0.15s"},children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title",children:"VOTE FOR EACH MATCH"}),f.jsxs("span",{className:"section-badge",children:[F.length," matches"]})]}),f.jsx("div",{className:"vote-cards-list",children:F.map(S=>{const P=Ke[S.home],V=Ke[S.away],A=q(S),_e=S.predictionsLocked,nt=v===S.id,ft=N[S.id],Le=z(S.id);return f.jsxs("div",{className:`vote-card ${_e?"locked":""} ${ft?"submitted":""}`,children:[f.jsxs("div",{className:"vote-card-header",children:[f.jsxs("span",{className:"vote-match-num",children:["Match ",S.matchNumber]}),f.jsxs("div",{className:"vote-card-meta",children:[Le>0&&f.jsxs("span",{className:"vote-count",children:[Le," votes"]}),f.jsx("span",{className:"vote-match-time",children:rv(S.time)})]})]}),f.jsxs("div",{className:"vote-card-teams",children:[f.jsxs("div",{className:"vote-team",children:[(P==null?void 0:P.logo)&&f.jsx("img",{src:P.logo,alt:P.name,className:"vote-team-logo"}),f.jsx("span",{children:P==null?void 0:P.shortName})]}),f.jsx("span",{className:"vote-vs",children:"vs"}),f.jsxs("div",{className:"vote-team",children:[(V==null?void 0:V.logo)&&f.jsx("img",{src:V.logo,alt:V.name,className:"vote-team-logo"}),f.jsx("span",{children:V==null?void 0:V.shortName})]})]}),ft?f.jsxs("div",{className:"vote-success",children:[f.jsx("span",{className:"success-icon",children:""})," Vote Submitted!"]}):_e?f.jsxs("div",{className:"vote-locked",children:[f.jsx("span",{children:""})," Voting Closed"]}):f.jsxs(f.Fragment,{children:[f.jsxs("select",{className:"vote-player-select",value:d[S.id]||"",onChange:ne=>g(me=>({...me,[S.id]:ne.target.value})),children:[f.jsx("option",{value:"",children:"Who will score the most goals?"}),A.map(ne=>f.jsxs("option",{value:ne.name,children:[ne.name," (",ne.teamShort,")"]},`${S.id}-${ne.name}`))]}),f.jsx("button",{className:"vote-submit-btn",onClick:()=>K(S),disabled:!d[S.id]||!a||nt,children:nt?"Submitting...":"Submit Vote"})]})]},S.id)})})]}),I.length>0&&f.jsxs("section",{className:"fan-favourites-section animate-slide-up",style:{animationDelay:"0.175s"},children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title",children:"FAN FAVOURITES"}),f.jsx("span",{className:"section-badge fire-badge",children:""})]}),f.jsx("div",{className:"favourites-list",children:I.map(S=>f.jsxs("div",{className:"favourite-card",children:[f.jsxs("div",{className:"favourite-match",children:[f.jsxs("span",{className:"favourite-match-num",children:["M",S.matchNumber]}),f.jsxs("span",{className:"favourite-teams",children:[S.homeTeam," vs ",S.awayTeam]})]}),f.jsx("div",{className:"favourite-players",children:S.topPlayers.map((P,V)=>f.jsxs("div",{className:`favourite-player rank-${V+1}`,children:[f.jsx("span",{className:"favourite-rank",children:V===0?"":V===1?"":""}),f.jsx("span",{className:"favourite-name",children:P.player}),f.jsxs("span",{className:"favourite-votes",children:[P.count," votes"]})]},V))})]},S.matchId))})]}),e.length>0&&f.jsxs("section",{className:"recent-section animate-slide-up",style:{animationDelay:"0.2s"},children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title",children:"RECENT PREDICTIONS"}),f.jsx("span",{className:"section-badge",children:e.length})]}),f.jsx("div",{className:"predictions-list",children:e.slice(0,10).map(S=>{var P;return f.jsxs("div",{className:"prediction-item",children:[f.jsxs("div",{className:"prediction-user",children:[f.jsx("span",{className:"user-avatar",children:(P=S.userName)==null?void 0:P.charAt(0).toUpperCase()}),f.jsx("span",{className:"user-name",children:S.userName})]}),f.jsxs("div",{className:"prediction-detail",children:[f.jsx("span",{className:"predicted-player",children:S.predictedPlayer}),f.jsxs("span",{className:"predicted-match",children:["Match ",S.matchNumber]})]})]},S.id)})})]}),F.length===0&&f.jsxs("div",{className:"empty-state",children:[f.jsx("div",{className:"empty-state-icon",children:""}),f.jsx("h3",{children:"No Upcoming Matches"}),f.jsx("p",{children:"Predictions open before each match!"})]}),i&&e.length>0&&f.jsxs("section",{className:"admin-poll-section animate-slide-up",style:{animationDelay:"0.3s"},children:[f.jsx("div",{className:"section-header",children:f.jsx("h2",{className:"section-title",children:"ADMIN CONTROLS"})}),f.jsxs("button",{className:"delete-all-btn",onClick:async()=>{window.confirm(`Delete all ${e.length} predictions? This cannot be undone.`)&&await ET()},children:["Delete All Predictions (",e.length,")"]})]})]})},VT=()=>{const[s,e]=ge.useState("format"),n=i=>{e(s===i?null:i)};return f.jsxs("div",{className:"tab-content",children:[f.jsx("section",{className:"quick-ref-section animate-slide-up",children:f.jsxs("div",{className:"quick-ref-grid",children:[f.jsxs("div",{className:"quick-ref-card",children:[f.jsx("span",{className:"quick-ref-icon",children:""}),f.jsx("span",{className:"quick-ref-value",children:"24 min"}),f.jsx("span",{className:"quick-ref-label",children:"Match Duration"})]}),f.jsxs("div",{className:"quick-ref-card",children:[f.jsx("span",{className:"quick-ref-icon",children:""}),f.jsx("span",{className:"quick-ref-value",children:"5v5"}),f.jsx("span",{className:"quick-ref-label",children:"Players"})]}),f.jsxs("div",{className:"quick-ref-card",children:[f.jsx("span",{className:"quick-ref-icon",children:""}),f.jsx("span",{className:"quick-ref-value",children:"2"}),f.jsx("span",{className:"quick-ref-label",children:"Substitutes"})]}),f.jsxs("div",{className:"quick-ref-card highlight",children:[f.jsx("span",{className:"quick-ref-icon",children:""}),f.jsx("span",{className:"quick-ref-value",children:"NO"}),f.jsx("span",{className:"quick-ref-label",children:"Offside"})]})]})}),f.jsxs("section",{className:"rules-accordion animate-slide-up",style:{animationDelay:"0.05s"},children:[f.jsxs("div",{className:`accordion-item ${s==="format"?"expanded":""}`,children:[f.jsxs("button",{className:"accordion-header",onClick:()=>n("format"),children:[f.jsxs("div",{className:"accordion-title",children:[f.jsx("span",{className:"accordion-icon",children:""}),f.jsx("span",{children:"Tournament Format"})]}),f.jsx("span",{className:"accordion-arrow",children:""})]}),f.jsx("div",{className:"accordion-content",children:f.jsxs("ul",{className:"rules-list-new",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"League Matches:"})," 12 games"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Final:"})," 1 game (Top 2 teams)"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Match Duration:"})," 2 halves of 12 minutes each"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Timekeeping:"})," Clock stops for all stoppages"]})]})})]}),f.jsxs("div",{className:`accordion-item ${s==="points"?"expanded":""}`,children:[f.jsxs("button",{className:"accordion-header",onClick:()=>n("points"),children:[f.jsxs("div",{className:"accordion-title",children:[f.jsx("span",{className:"accordion-icon",children:""}),f.jsx("span",{children:"Points & Tie-Breakers"})]}),f.jsx("span",{className:"accordion-arrow",children:""})]}),f.jsxs("div",{className:"accordion-content",children:[f.jsxs("div",{className:"points-display",children:[f.jsxs("div",{className:"point-item win",children:[f.jsx("span",{className:"point-val",children:"3"}),f.jsx("span",{className:"point-lbl",children:"Win"})]}),f.jsxs("div",{className:"point-item draw",children:[f.jsx("span",{className:"point-val",children:"1"}),f.jsx("span",{className:"point-lbl",children:"Draw"})]}),f.jsxs("div",{className:"point-item loss",children:[f.jsx("span",{className:"point-val",children:"0"}),f.jsx("span",{className:"point-lbl",children:"Loss"})]})]}),f.jsxs("div",{className:"tiebreaker-list",children:[f.jsx("span",{className:"tb-title",children:"Tie-Breakers (in order):"}),f.jsxs("ol",{children:[f.jsx("li",{children:"Goal Difference"}),f.jsx("li",{children:"Head-to-Head Result"}),f.jsx("li",{children:"Goals Scored"}),f.jsx("li",{children:"Penalty Kick-Outs"})]})]})]})]}),f.jsxs("div",{className:`accordion-item ${s==="fouls"?"expanded":""}`,children:[f.jsxs("button",{className:"accordion-header",onClick:()=>n("fouls"),children:[f.jsxs("div",{className:"accordion-title",children:[f.jsx("span",{className:"accordion-icon",children:""}),f.jsx("span",{children:"Fouls & Cards"})]}),f.jsx("span",{className:"accordion-arrow",children:""})]}),f.jsxs("div",{className:"accordion-content",children:[f.jsxs("div",{className:"card-section yellow",children:[f.jsx("span",{className:"card-badge yellow",children:"YELLOW"}),f.jsxs("ul",{children:[f.jsx("li",{children:"Any physical foul"}),f.jsx("li",{children:"Deliberate handball"}),f.jsxs("li",{children:[f.jsx("strong",{children:"Any sliding challenge"})," (automatic)"]}),f.jsx("li",{children:"Cynical fouls (shirt pulling, obstruction)"})]})]}),f.jsxs("div",{className:"card-section red",children:[f.jsx("span",{className:"card-badge red",children:"RED"}),f.jsxs("ul",{children:[f.jsx("li",{children:"Second yellow card"}),f.jsxs("li",{children:["Team plays ",f.jsx("strong",{children:"4v5"})," for rest of match"]}),f.jsx("li",{children:"Suspension doesn't carry forward"}),f.jsx("li",{children:"Straight red only for dangerous play"})]})]})]})]}),f.jsxs("div",{className:`accordion-item ${s==="penalty"?"expanded":""}`,children:[f.jsxs("button",{className:"accordion-header",onClick:()=>n("penalty"),children:[f.jsxs("div",{className:"accordion-title",children:[f.jsx("span",{className:"accordion-icon",children:""}),f.jsx("span",{children:"Penalty Kicks"})]}),f.jsx("span",{className:"accordion-arrow",children:""})]}),f.jsx("div",{className:"accordion-content",children:f.jsxs("ul",{className:"rules-list-new",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"One step only"})," - no run-up allowed"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"One shot only"})," - no rebounds, no retakes"]}),f.jsx("li",{children:"All players must remain behind the kicker"}),f.jsxs("li",{children:[f.jsx("strong",{children:"Shootouts:"})," 5 players take one kick each"]})]})})]}),f.jsxs("div",{className:`accordion-item ${s==="subs"?"expanded":""}`,children:[f.jsxs("button",{className:"accordion-header",onClick:()=>n("subs"),children:[f.jsxs("div",{className:"accordion-title",children:[f.jsx("span",{className:"accordion-icon",children:""}),f.jsx("span",{children:"Substitutions"})]}),f.jsx("span",{className:"accordion-arrow",children:""})]}),f.jsx("div",{className:"accordion-content",children:f.jsxs("ul",{className:"rules-list-new",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Rolling substitutions"})," allowed"]}),f.jsx("li",{children:"Wait for referee's signal to re-enter"}),f.jsxs("li",{children:["Enter from ",f.jsx("strong",{children:"your own half"})]}),f.jsx("li",{children:"If advantage gained: goal kick to opposition"})]})})]}),f.jsxs("div",{className:`accordion-item ${s==="general"?"expanded":""}`,children:[f.jsxs("button",{className:"accordion-header",onClick:()=>n("general"),children:[f.jsxs("div",{className:"accordion-title",children:[f.jsx("span",{className:"accordion-icon",children:""}),f.jsx("span",{children:"General Play Rules"})]}),f.jsx("span",{className:"accordion-arrow",children:""})]}),f.jsx("div",{className:"accordion-content",children:f.jsxs("ul",{className:"rules-list-new",children:[f.jsxs("li",{children:["Match starts with a ",f.jsx("strong",{children:"goal kick"})]}),f.jsx("li",{children:"After every goal: goal kick restart"}),f.jsxs("li",{children:[f.jsx("strong",{children:"No offside"})," rule"]}),f.jsx("li",{children:"Cannot score directly from kick-ins, goal kicks, or free kicks"}),f.jsxs("li",{children:[f.jsx("strong",{children:"No throw-ins"})," - kick-ins only"]}),f.jsx("li",{children:"Ball placed on ground for all restarts"})]})})]})]}),f.jsx("section",{className:"rules-page-section animate-slide-up",style:{animationDelay:"0.1s"},children:f.jsxs("div",{className:"rules-page-card highlight-card",children:[f.jsxs("div",{className:"rules-page-header",children:[f.jsx("span",{className:"rules-page-icon",children:""}),f.jsx("h3",{children:"Man of the Match Prediction"}),f.jsx("span",{className:"prize-tag",children:"WIN 1000 COINS"})]}),f.jsxs("div",{className:"rules-page-content",children:[f.jsxs("div",{className:"rule-item",children:[f.jsx("span",{className:"rule-number",children:"1"}),f.jsxs("div",{className:"rule-text",children:["Predict who will score the ",f.jsx("strong",{children:"most goals"})," in each match"]})]}),f.jsxs("div",{className:"rule-item",children:[f.jsx("span",{className:"rule-number",children:"2"}),f.jsxs("div",{className:"rule-text",children:["Predictions lock at ",f.jsx("strong",{children:"2:00 PM"})," on matchday"]})]}),f.jsxs("div",{className:"rule-item",children:[f.jsx("span",{className:"rule-number",children:"3"}),f.jsxs("div",{className:"rule-text",children:["Multiple winners ",f.jsx("strong",{children:"share the prize"})," equally"]})]}),f.jsxs("div",{className:"rule-item",children:[f.jsx("span",{className:"rule-number",children:"4"}),f.jsxs("div",{className:"rule-text",children:["Tie-breaker: Player from ",f.jsx("strong",{children:"winning team"})," wins"]})]}),f.jsxs("div",{className:"rule-item",children:[f.jsx("span",{className:"rule-number",children:"5"}),f.jsxs("div",{className:"rule-text",children:["Draw match: ",f.jsx("strong",{children:"Referee decides"})," Man of the Match"]})]})]})]})}),f.jsx("section",{className:"fair-play-section animate-slide-up",style:{animationDelay:"0.15s"},children:f.jsxs("div",{className:"fair-play-card",children:[f.jsx("span",{className:"fair-play-icon",children:""}),f.jsxs("p",{children:["Play fair. Referee's decision is ",f.jsx("strong",{children:"final"}),"."]})]})})]})},DT=()=>{const{activeTab:s,loading:e}=Sr();return e?f.jsxs("div",{className:"loading-container",children:[f.jsx("div",{className:"loading-spinner"}),f.jsx("span",{className:"loading-text",children:"LOADING SCAPIA OFFSIDE..."})]}):f.jsxs("div",{className:"app",children:[f.jsx(AT,{}),f.jsxs("main",{className:"main-content",children:[s==="matches"&&f.jsx(RT,{}),s==="table"&&f.jsx(kT,{}),s==="polls"&&f.jsx(jT,{}),s==="rules"&&f.jsx(VT,{})]}),f.jsx(xT,{})]})},MT=()=>f.jsx(IT,{children:f.jsx(DT,{})});g_.createRoot(document.getElementById("root")).render(f.jsx(ge.StrictMode,{children:f.jsx(MT,{})}));
