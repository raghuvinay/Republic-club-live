(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var nh={exports:{}},Jo={},rh={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op;function i_(){if(Op)return Re;Op=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),P=Symbol.iterator;function C(M){return M===null||typeof M!="object"?null:(M=P&&M[P]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,Q={};function q(M,W,de){this.props=M,this.context=W,this.refs=Q,this.updater=de||b}q.prototype.isReactComponent={},q.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},q.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Z(){}Z.prototype=q.prototype;function $(M,W,de){this.props=M,this.context=W,this.refs=Q,this.updater=de||b}var Y=$.prototype=new Z;Y.constructor=$,z(Y,q.prototype),Y.isPureReactComponent=!0;var re=Array.isArray,ve=Object.prototype.hasOwnProperty,Ee={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function S(M,W,de){var Se,Ce={},ke=null,Le=null;if(W!=null)for(Se in W.ref!==void 0&&(Le=W.ref),W.key!==void 0&&(ke=""+W.key),W)ve.call(W,Se)&&!V.hasOwnProperty(Se)&&(Ce[Se]=W[Se]);var Fe=arguments.length-2;if(Fe===1)Ce.children=de;else if(1<Fe){for(var Be=Array(Fe),yt=0;yt<Fe;yt++)Be[yt]=arguments[yt+2];Ce.children=Be}if(M&&M.defaultProps)for(Se in Fe=M.defaultProps,Fe)Ce[Se]===void 0&&(Ce[Se]=Fe[Se]);return{$$typeof:s,type:M,key:ke,ref:Le,props:Ce,_owner:Ee.current}}function R(M,W){return{$$typeof:s,type:M.type,key:W,ref:M.ref,props:M.props,_owner:M._owner}}function x(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function D(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(de){return W[de]})}var O=/\/+/g;function A(M,W){return typeof M=="object"&&M!==null&&M.key!=null?D(""+M.key):W.toString(36)}function tt(M,W,de,Se,Ce){var ke=typeof M;(ke==="undefined"||ke==="boolean")&&(M=null);var Le=!1;if(M===null)Le=!0;else switch(ke){case"string":case"number":Le=!0;break;case"object":switch(M.$$typeof){case s:case e:Le=!0}}if(Le)return Le=M,Ce=Ce(Le),M=Se===""?"."+A(Le,0):Se,re(Ce)?(de="",M!=null&&(de=M.replace(O,"$&/")+"/"),tt(Ce,W,de,"",function(yt){return yt})):Ce!=null&&(x(Ce)&&(Ce=R(Ce,de+(!Ce.key||Le&&Le.key===Ce.key?"":(""+Ce.key).replace(O,"$&/")+"/")+M)),W.push(Ce)),1;if(Le=0,Se=Se===""?".":Se+":",re(M))for(var Fe=0;Fe<M.length;Fe++){ke=M[Fe];var Be=Se+A(ke,Fe);Le+=tt(ke,W,de,Be,Ce)}else if(Be=C(M),typeof Be=="function")for(M=Be.call(M),Fe=0;!(ke=M.next()).done;)ke=ke.value,Be=Se+A(ke,Fe++),Le+=tt(ke,W,de,Be,Ce);else if(ke==="object")throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Le}function kt(M,W,de){if(M==null)return M;var Se=[],Ce=0;return tt(M,Se,"","",function(ke){return W.call(de,ke,Ce++)}),Se}function xt(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(de){(M._status===0||M._status===-1)&&(M._status=1,M._result=de)},function(de){(M._status===0||M._status===-1)&&(M._status=2,M._result=de)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Ue={current:null},ne={transition:null},pe={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:ne,ReactCurrentOwner:Ee};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:kt,forEach:function(M,W,de){kt(M,function(){W.apply(this,arguments)},de)},count:function(M){var W=0;return kt(M,function(){W++}),W},toArray:function(M){return kt(M,function(W){return W})||[]},only:function(M){if(!x(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Re.Component=q,Re.Fragment=n,Re.Profiler=a,Re.PureComponent=$,Re.StrictMode=i,Re.Suspense=y,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Re.act=ae,Re.cloneElement=function(M,W,de){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Se=z({},M.props),Ce=M.key,ke=M.ref,Le=M._owner;if(W!=null){if(W.ref!==void 0&&(ke=W.ref,Le=Ee.current),W.key!==void 0&&(Ce=""+W.key),M.type&&M.type.defaultProps)var Fe=M.type.defaultProps;for(Be in W)ve.call(W,Be)&&!V.hasOwnProperty(Be)&&(Se[Be]=W[Be]===void 0&&Fe!==void 0?Fe[Be]:W[Be])}var Be=arguments.length-2;if(Be===1)Se.children=de;else if(1<Be){Fe=Array(Be);for(var yt=0;yt<Be;yt++)Fe[yt]=arguments[yt+2];Se.children=Fe}return{$$typeof:s,type:M.type,key:Ce,ref:ke,props:Se,_owner:Le}},Re.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:c,_context:M},M.Consumer=M},Re.createElement=S,Re.createFactory=function(M){var W=S.bind(null,M);return W.type=M,W},Re.createRef=function(){return{current:null}},Re.forwardRef=function(M){return{$$typeof:m,render:M}},Re.isValidElement=x,Re.lazy=function(M){return{$$typeof:w,_payload:{_status:-1,_result:M},_init:xt}},Re.memo=function(M,W){return{$$typeof:_,type:M,compare:W===void 0?null:W}},Re.startTransition=function(M){var W=ne.transition;ne.transition={};try{M()}finally{ne.transition=W}},Re.unstable_act=ae,Re.useCallback=function(M,W){return Ue.current.useCallback(M,W)},Re.useContext=function(M){return Ue.current.useContext(M)},Re.useDebugValue=function(){},Re.useDeferredValue=function(M){return Ue.current.useDeferredValue(M)},Re.useEffect=function(M,W){return Ue.current.useEffect(M,W)},Re.useId=function(){return Ue.current.useId()},Re.useImperativeHandle=function(M,W,de){return Ue.current.useImperativeHandle(M,W,de)},Re.useInsertionEffect=function(M,W){return Ue.current.useInsertionEffect(M,W)},Re.useLayoutEffect=function(M,W){return Ue.current.useLayoutEffect(M,W)},Re.useMemo=function(M,W){return Ue.current.useMemo(M,W)},Re.useReducer=function(M,W,de){return Ue.current.useReducer(M,W,de)},Re.useRef=function(M){return Ue.current.useRef(M)},Re.useState=function(M){return Ue.current.useState(M)},Re.useSyncExternalStore=function(M,W,de){return Ue.current.useSyncExternalStore(M,W,de)},Re.useTransition=function(){return Ue.current.useTransition()},Re.version="18.3.1",Re}var Lp;function bh(){return Lp||(Lp=1,rh.exports=i_()),rh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp;function o_(){if(Fp)return Jo;Fp=1;var s=bh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(m,y,_){var w,P={},C=null,b=null;_!==void 0&&(C=""+_),y.key!==void 0&&(C=""+y.key),y.ref!==void 0&&(b=y.ref);for(w in y)i.call(y,w)&&!c.hasOwnProperty(w)&&(P[w]=y[w]);if(m&&m.defaultProps)for(w in y=m.defaultProps,y)P[w]===void 0&&(P[w]=y[w]);return{$$typeof:e,type:m,key:C,ref:b,props:P,_owner:a.current}}return Jo.Fragment=n,Jo.jsx=d,Jo.jsxs=d,Jo}var jp;function a_(){return jp||(jp=1,nh.exports=o_()),nh.exports}var T=a_(),Ie=bh(),bl={},sh={exports:{}},Xt={},ih={exports:{}},oh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function l_(){return bp||(bp=1,(function(s){function e(ne,pe){var ae=ne.length;ne.push(pe);e:for(;0<ae;){var M=ae-1>>>1,W=ne[M];if(0<a(W,pe))ne[M]=pe,ne[ae]=W,ae=M;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var pe=ne[0],ae=ne.pop();if(ae!==pe){ne[0]=ae;e:for(var M=0,W=ne.length,de=W>>>1;M<de;){var Se=2*(M+1)-1,Ce=ne[Se],ke=Se+1,Le=ne[ke];if(0>a(Ce,ae))ke<W&&0>a(Le,Ce)?(ne[M]=Le,ne[ke]=ae,M=ke):(ne[M]=Ce,ne[Se]=ae,M=Se);else if(ke<W&&0>a(Le,ae))ne[M]=Le,ne[ke]=ae,M=ke;else break e}}return pe}function a(ne,pe){var ae=ne.sortIndex-pe.sortIndex;return ae!==0?ae:ne.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var y=[],_=[],w=1,P=null,C=3,b=!1,z=!1,Q=!1,q=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(ne){for(var pe=n(_);pe!==null;){if(pe.callback===null)i(_);else if(pe.startTime<=ne)i(_),pe.sortIndex=pe.expirationTime,e(y,pe);else break;pe=n(_)}}function re(ne){if(Q=!1,Y(ne),!z)if(n(y)!==null)z=!0,xt(ve);else{var pe=n(_);pe!==null&&Ue(re,pe.startTime-ne)}}function ve(ne,pe){z=!1,Q&&(Q=!1,Z(S),S=-1),b=!0;var ae=C;try{for(Y(pe),P=n(y);P!==null&&(!(P.expirationTime>pe)||ne&&!D());){var M=P.callback;if(typeof M=="function"){P.callback=null,C=P.priorityLevel;var W=M(P.expirationTime<=pe);pe=s.unstable_now(),typeof W=="function"?P.callback=W:P===n(y)&&i(y),Y(pe)}else i(y);P=n(y)}if(P!==null)var de=!0;else{var Se=n(_);Se!==null&&Ue(re,Se.startTime-pe),de=!1}return de}finally{P=null,C=ae,b=!1}}var Ee=!1,V=null,S=-1,R=5,x=-1;function D(){return!(s.unstable_now()-x<R)}function O(){if(V!==null){var ne=s.unstable_now();x=ne;var pe=!0;try{pe=V(!0,ne)}finally{pe?A():(Ee=!1,V=null)}}else Ee=!1}var A;if(typeof $=="function")A=function(){$(O)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,kt=tt.port2;tt.port1.onmessage=O,A=function(){kt.postMessage(null)}}else A=function(){q(O,0)};function xt(ne){V=ne,Ee||(Ee=!0,A())}function Ue(ne,pe){S=q(function(){ne(s.unstable_now())},pe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ne){ne.callback=null},s.unstable_continueExecution=function(){z||b||(z=!0,xt(ve))},s.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ne?Math.floor(1e3/ne):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_getFirstCallbackNode=function(){return n(y)},s.unstable_next=function(ne){switch(C){case 1:case 2:case 3:var pe=3;break;default:pe=C}var ae=C;C=pe;try{return ne()}finally{C=ae}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ne,pe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ae=C;C=ne;try{return pe()}finally{C=ae}},s.unstable_scheduleCallback=function(ne,pe,ae){var M=s.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?M+ae:M):ae=M,ne){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ae+W,ne={id:w++,callback:pe,priorityLevel:ne,startTime:ae,expirationTime:W,sortIndex:-1},ae>M?(ne.sortIndex=ae,e(_,ne),n(y)===null&&ne===n(_)&&(Q?(Z(S),S=-1):Q=!0,Ue(re,ae-M))):(ne.sortIndex=W,e(y,ne),z||b||(z=!0,xt(ve))),ne},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(ne){var pe=C;return function(){var ae=C;C=pe;try{return ne.apply(this,arguments)}finally{C=ae}}}})(oh)),oh}var Up;function u_(){return Up||(Up=1,ih.exports=l_()),ih.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zp;function c_(){if(zp)return Xt;zp=1;var s=bh(),e=u_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function c(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(a[t]=r,t=0;t<r.length;t++)i.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},P={};function C(t){return y.call(P,t)?!0:y.call(w,t)?!1:_.test(t)?P[t]=!0:(w[t]=!0,!1)}function b(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function z(t,r,o,u){if(r===null||typeof r>"u"||b(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Q(t,r,o,u,h,p,v){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=v}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){q[t]=new Q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];q[r]=new Q(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){q[t]=new Q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){q[t]=new Q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){q[t]=new Q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){q[t]=new Q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){q[t]=new Q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){q[t]=new Q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){q[t]=new Q(t,5,!1,t.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function $(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Z,$);q[r]=new Q(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Z,$);q[r]=new Q(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Z,$);q[r]=new Q(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){q[t]=new Q(t,1,!1,t.toLowerCase(),null,!1,!1)}),q.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){q[t]=new Q(t,1,!1,t.toLowerCase(),null,!0,!0)});function Y(t,r,o,u){var h=q.hasOwnProperty(r)?q[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(z(r,o,h,u)&&(o=null),u||h===null?C(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var re=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),kt=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),ne=Symbol.iterator;function pe(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,M;function W(t){if(M===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);M=r&&r[1]||""}return`
`+M+t}var de=!1;function Se(t,r){if(!t||de)return"";de=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),v=h.length-1,I=p.length-1;1<=v&&0<=I&&h[v]!==p[I];)I--;for(;1<=v&&0<=I;v--,I--)if(h[v]!==p[I]){if(v!==1||I!==1)do if(v--,I--,0>I||h[v]!==p[I]){var N=`
`+h[v].replace(" at new "," at ");return t.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",t.displayName)),N}while(1<=v&&0<=I);break}}}finally{de=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?W(t):""}function Ce(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return t=Se(t.type,!1),t;case 11:return t=Se(t.type.render,!1),t;case 1:return t=Se(t.type,!0),t;default:return""}}function ke(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case Ee:return"Portal";case R:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case tt:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D:return(t.displayName||"Context")+".Consumer";case x:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kt:return r=t.displayName||null,r!==null?r:ke(t.type)||"Memo";case xt:r=t._payload,t=t._init;try{return ke(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Be(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yt(t){var r=Be(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function nr(t){t._valueTracker||(t._valueTracker=yt(t))}function Qs(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Be(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Ir(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hs(t,r){var o=r.checked;return ae({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Ks(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Fe(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ro(t,r){r=r.checked,r!=null&&Y(t,"checked",r,!1)}function so(t,r){ro(t,r);var o=Fe(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Xs(t,r.type,o):r.hasOwnProperty("defaultValue")&&Xs(t,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Sa(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Xs(t,r,o){(r!=="number"||Ir(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var rr=Array.isArray;function sr(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Fe(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function io(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ae({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ys(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(rr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Fe(o)}}function Js(t,r){var o=Fe(r.value),u=Fe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function oo(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ht(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ht(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ir,ao=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ir.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Sr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fs=["Webkit","ms","Moz","O"];Object.keys(ds).forEach(function(t){fs.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ds[r]=ds[t]})});function lo(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ds.hasOwnProperty(t)&&ds[t]?(""+r).trim():r+"px"}function uo(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=lo(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var co=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ho(t,r){if(r){if(co[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function fo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function Zs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ei=null,un=null,jn=null;function ti(t){if(t=Fo(t)){if(typeof ei!="function")throw Error(n(280));var r=t.stateNode;r&&(r=el(r),ei(t.stateNode,t.type,r))}}function bn(t){un?jn?jn.push(t):jn=[t]:un=t}function po(){if(un){var t=un,r=jn;if(jn=un=null,ti(t),r)for(t=0;t<r.length;t++)ti(r[t])}}function ms(t,r){return t(r)}function mo(){}var or=!1;function go(t,r,o){if(or)return t(r,o);or=!0;try{return ms(t,r,o)}finally{or=!1,(un!==null||jn!==null)&&(mo(),po())}}function nt(t,r){var o=t.stateNode;if(o===null)return null;var u=el(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var ni=!1;if(m)try{var En={};Object.defineProperty(En,"passive",{get:function(){ni=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{ni=!1}function gs(t,r,o,u,h,p,v,I,N){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(X){this.onError(X)}}var ys=!1,ri=null,wn=!1,yo=null,ku={onError:function(t){ys=!0,ri=t}};function si(t,r,o,u,h,p,v,I,N){ys=!1,ri=null,gs.apply(ku,arguments)}function Aa(t,r,o,u,h,p,v,I,N){if(si.apply(this,arguments),ys){if(ys){var U=ri;ys=!1,ri=null}else throw Error(n(198));wn||(wn=!0,yo=U)}}function Tn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function vs(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function In(t){if(Tn(t)!==t)throw Error(n(188))}function Ca(t){var r=t.alternate;if(!r){if(r=Tn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return In(h),t;if(p===u)return In(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var v=!1,I=h.child;I;){if(I===o){v=!0,o=h,u=p;break}if(I===u){v=!0,u=h,o=p;break}I=I.sibling}if(!v){for(I=p.child;I;){if(I===o){v=!0,o=p,u=h;break}if(I===u){v=!0,u=p,o=h;break}I=I.sibling}if(!v)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function vo(t){return t=Ca(t),t!==null?ii(t):null}function ii(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=ii(t);if(r!==null)return r;t=t.sibling}return null}var oi=e.unstable_scheduleCallback,_o=e.unstable_cancelCallback,Ra=e.unstable_shouldYield,xu=e.unstable_requestPaint,$e=e.unstable_now,Pa=e.unstable_getCurrentPriorityLevel,_s=e.unstable_ImmediatePriority,Ar=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,Eo=e.unstable_LowPriority,Na=e.unstable_IdlePriority,Es=null,Zt=null;function ka(t){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Es,t,void 0,(t.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Va,wo=Math.log,xa=Math.LN2;function Va(t){return t>>>=0,t===0?32:31-(wo(t)/xa|0)|0}var ai=64,li=4194304;function Cr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ws(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,v=o&268435455;if(v!==0){var I=v&~h;I!==0?u=Cr(I):(p&=v,p!==0&&(u=Cr(p)))}else v=o&~h,v!==0?u=Cr(v):p!==0&&(u=Cr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-bt(r),h=1<<o,u|=t[o],r&=~h;return u}function Vu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var v=31-bt(p),I=1<<v,N=h[v];N===-1?((I&o)===0||(I&u)!==0)&&(h[v]=Vu(I,r)):N<=r&&(t.expiredLanes|=I),p&=~I}}function en(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ts(){var t=ai;return ai<<=1,(ai&4194240)===0&&(ai=64),t}function Rr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Pr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-bt(r),t[r]=o}function ze(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-bt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Nr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-bt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Ne=0;function kr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Da,ui,Ma,Oa,La,To=!1,Un=[],It=null,Sn=null,An=null,xr=new Map,hn=new Map,zn=[],Du="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fa(t,r){switch(t){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":xr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(r.pointerId)}}function $t(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Fo(r),r!==null&&ui(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Mu(t,r,o,u,h){switch(r){case"focusin":return It=$t(It,t,r,o,u,h),!0;case"dragenter":return Sn=$t(Sn,t,r,o,u,h),!0;case"mouseover":return An=$t(An,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return xr.set(p,$t(xr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,hn.set(p,$t(hn.get(p)||null,t,r,o,u,h)),!0}return!1}function ja(t){var r=Rs(t.target);if(r!==null){var o=Tn(r);if(o!==null){if(r=o.tag,r===13){if(r=vs(o),r!==null){t.blockedOn=r,La(t.priority,function(){Ma(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ci(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);ps=u,o.target.dispatchEvent(u),ps=null}else return r=Fo(o),r!==null&&ui(r),t.blockedOn=o,!1;r.shift()}return!0}function Is(t,r,o){lr(t)&&o.delete(r)}function ba(){To=!1,It!==null&&lr(It)&&(It=null),Sn!==null&&lr(Sn)&&(Sn=null),An!==null&&lr(An)&&(An=null),xr.forEach(Is),hn.forEach(Is)}function Cn(t,r){t.blockedOn===r&&(t.blockedOn=null,To||(To=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ba)))}function Rn(t){function r(h){return Cn(h,t)}if(0<Un.length){Cn(Un[0],t);for(var o=1;o<Un.length;o++){var u=Un[o];u.blockedOn===t&&(u.blockedOn=null)}}for(It!==null&&Cn(It,t),Sn!==null&&Cn(Sn,t),An!==null&&Cn(An,t),xr.forEach(r),hn.forEach(r),o=0;o<zn.length;o++)u=zn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<zn.length&&(o=zn[0],o.blockedOn===null);)ja(o),o.blockedOn===null&&zn.shift()}var ur=re.ReactCurrentBatchConfig,Vr=!0;function Ke(t,r,o,u){var h=Ne,p=ur.transition;ur.transition=null;try{Ne=1,Io(t,r,o,u)}finally{Ne=h,ur.transition=p}}function Ou(t,r,o,u){var h=Ne,p=ur.transition;ur.transition=null;try{Ne=4,Io(t,r,o,u)}finally{Ne=h,ur.transition=p}}function Io(t,r,o,u){if(Vr){var h=ci(t,r,o,u);if(h===null)Gu(t,r,u,Ss,o),Fa(t,u);else if(Mu(h,t,r,o,u))u.stopPropagation();else if(Fa(t,u),r&4&&-1<Du.indexOf(t)){for(;h!==null;){var p=Fo(h);if(p!==null&&Da(p),p=ci(t,r,o,u),p===null&&Gu(t,r,u,Ss,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Gu(t,r,u,null,o)}}var Ss=null;function ci(t,r,o,u){if(Ss=null,t=Zs(u),t=Rs(t),t!==null)if(r=Tn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=vs(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Ss=t,null}function So(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pa()){case _s:return 1;case Ar:return 4;case cn:case Eo:return 16;case Na:return 536870912;default:return 16}default:return 16}}var tn=null,hi=null,qt=null;function Ao(){if(qt)return qt;var t,r=hi,o=r.length,u,h="value"in tn?tn.value:tn.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var v=o-t;for(u=1;u<=v&&r[o-u]===h[p-u];u++);return qt=h.slice(t,1<u?1-u:void 0)}function di(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Bn(){return!0}function Co(){return!1}function St(t){function r(o,u,h,p,v){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var I in t)t.hasOwnProperty(I)&&(o=t[I],this[I]=o?o(p):p[I]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Bn:Co,this.isPropagationStopped=Co,this}return ae(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){},isPersistent:Bn}),r}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fi=St(Pn),$n=ae({},Pn,{view:0,detail:0}),Lu=St($n),pi,cr,Dr,As=ae({},$n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(pi=t.screenX-Dr.screenX,cr=t.screenY-Dr.screenY):cr=pi=0,Dr=t),pi)},movementY:function(t){return"movementY"in t?t.movementY:cr}}),mi=St(As),Ro=ae({},As,{dataTransfer:0}),Ua=St(Ro),gi=ae({},$n,{relatedTarget:0}),yi=St(gi),za=ae({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),hr=St(za),Ba=ae({},Pn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$a=St(Ba),qa=ae({},Pn,{data:0}),Po=St(qa),vi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ut={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ha={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ga(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ha[t])?!!r[t]:!1}function qn(){return Ga}var l=ae({},$n,{key:function(t){if(t.key){var r=vi[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=di(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ut[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qn,charCode:function(t){return t.type==="keypress"?di(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?di(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f=St(l),g=ae({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=St(g),L=ae({},$n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qn}),B=St(L),te=ae({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),be=St(te),ft=ae({},As,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=St(ft),vt=[9,13,27,32],ot=m&&"CompositionEvent"in window,dn=null;m&&"documentMode"in document&&(dn=document.documentMode);var nn=m&&"TextEvent"in window&&!dn,Cs=m&&(!ot||dn&&8<dn&&11>=dn),_i=" ",Pd=!1;function Nd(t,r){switch(t){case"keyup":return vt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function nv(t,r){switch(t){case"compositionend":return kd(r);case"keypress":return r.which!==32?null:(Pd=!0,_i);case"textInput":return t=r.data,t===_i&&Pd?null:t;default:return null}}function rv(t,r){if(Ei)return t==="compositionend"||!ot&&Nd(t,r)?(t=Ao(),qt=hi=tn=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Cs&&r.locale!=="ko"?null:r.data;default:return null}}var sv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!sv[t.type]:r==="textarea"}function Vd(t,r,o,u){bn(u),r=Ya(r,"onChange"),0<r.length&&(o=new fi("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var No=null,ko=null;function iv(t){Xd(t,0)}function Wa(t){var r=Ai(t);if(Qs(r))return t}function ov(t,r){if(t==="change")return r}var Dd=!1;if(m){var Fu;if(m){var ju="oninput"in document;if(!ju){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),ju=typeof Md.oninput=="function"}Fu=ju}else Fu=!1;Dd=Fu&&(!document.documentMode||9<document.documentMode)}function Od(){No&&(No.detachEvent("onpropertychange",Ld),ko=No=null)}function Ld(t){if(t.propertyName==="value"&&Wa(ko)){var r=[];Vd(r,ko,t,Zs(t)),go(iv,r)}}function av(t,r,o){t==="focusin"?(Od(),No=r,ko=o,No.attachEvent("onpropertychange",Ld)):t==="focusout"&&Od()}function lv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wa(ko)}function uv(t,r){if(t==="click")return Wa(r)}function cv(t,r){if(t==="input"||t==="change")return Wa(r)}function hv(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:hv;function xo(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(r,h)||!Nn(t[h],r[h]))return!1}return!0}function Fd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jd(t,r){var o=Fd(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Fd(o)}}function bd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?bd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ud(){for(var t=window,r=Ir();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Ir(t.document)}return r}function bu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function dv(t){var r=Ud(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&bd(o.ownerDocument.documentElement,o)){if(u!==null&&bu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=jd(o,p);var v=jd(o,u);h&&v&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(v.node,v.offset)):(r.setEnd(v.node,v.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fv=m&&"documentMode"in document&&11>=document.documentMode,wi=null,Uu=null,Vo=null,zu=!1;function zd(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;zu||wi==null||wi!==Ir(u)||(u=wi,"selectionStart"in u&&bu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Vo&&xo(Vo,u)||(Vo=u,u=Ya(Uu,"onSelect"),0<u.length&&(r=new fi("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=wi)))}function Qa(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Ti={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionend:Qa("Transition","TransitionEnd")},Bu={},Bd={};m&&(Bd=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function Ka(t){if(Bu[t])return Bu[t];if(!Ti[t])return t;var r=Ti[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Bd)return Bu[t]=r[o];return t}var $d=Ka("animationend"),qd=Ka("animationiteration"),Hd=Ka("animationstart"),Gd=Ka("transitionend"),Wd=new Map,Qd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,r){Wd.set(t,r),c(r,[t])}for(var $u=0;$u<Qd.length;$u++){var qu=Qd[$u],pv=qu.toLowerCase(),mv=qu[0].toUpperCase()+qu.slice(1);Mr(pv,"on"+mv)}Mr($d,"onAnimationEnd"),Mr(qd,"onAnimationIteration"),Mr(Hd,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Gd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function Kd(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,Aa(u,r,void 0,t),t.currentTarget=null}function Xd(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var v=u.length-1;0<=v;v--){var I=u[v],N=I.instance,U=I.currentTarget;if(I=I.listener,N!==p&&h.isPropagationStopped())break e;Kd(h,I,U),p=N}else for(v=0;v<u.length;v++){if(I=u[v],N=I.instance,U=I.currentTarget,I=I.listener,N!==p&&h.isPropagationStopped())break e;Kd(h,I,U),p=N}}}if(wn)throw t=yo,wn=!1,yo=null,t}function Ge(t,r){var o=r[Ju];o===void 0&&(o=r[Ju]=new Set);var u=t+"__bubble";o.has(u)||(Yd(r,t,2,!1),o.add(u))}function Hu(t,r,o){var u=0;r&&(u|=4),Yd(o,t,u,r)}var Xa="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[Xa]){t[Xa]=!0,i.forEach(function(o){o!=="selectionchange"&&(gv.has(o)||Hu(o,!1,t),Hu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Xa]||(r[Xa]=!0,Hu("selectionchange",!1,r))}}function Yd(t,r,o,u){switch(So(r)){case 1:var h=Ke;break;case 4:h=Ou;break;default:h=Io}o=h.bind(null,r,o,t),h=void 0,!ni||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Gu(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var I=u.stateNode.containerInfo;if(I===h||I.nodeType===8&&I.parentNode===h)break;if(v===4)for(v=u.return;v!==null;){var N=v.tag;if((N===3||N===4)&&(N=v.stateNode.containerInfo,N===h||N.nodeType===8&&N.parentNode===h))return;v=v.return}for(;I!==null;){if(v=Rs(I),v===null)return;if(N=v.tag,N===5||N===6){u=p=v;continue e}I=I.parentNode}}u=u.return}go(function(){var U=p,X=Zs(o),J=[];e:{var K=Wd.get(t);if(K!==void 0){var ie=fi,ue=t;switch(t){case"keypress":if(di(o)===0)break e;case"keydown":case"keyup":ie=f;break;case"focusin":ue="focus",ie=yi;break;case"focusout":ue="blur",ie=yi;break;case"beforeblur":case"afterblur":ie=yi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Ua;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=B;break;case $d:case qd:case Hd:ie=hr;break;case Gd:ie=be;break;case"scroll":ie=Lu;break;case"wheel":ie=xe;break;case"copy":case"cut":case"paste":ie=$a;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=E}var ce=(r&4)!==0,rt=!ce&&t==="scroll",F=ce?K!==null?K+"Capture":null:K;ce=[];for(var k=U,j;k!==null;){j=k;var ee=j.stateNode;if(j.tag===5&&ee!==null&&(j=ee,F!==null&&(ee=nt(k,F),ee!=null&&ce.push(Oo(k,ee,j)))),rt)break;k=k.return}0<ce.length&&(K=new ie(K,ue,null,o,X),J.push({event:K,listeners:ce}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",ie=t==="mouseout"||t==="pointerout",K&&o!==ps&&(ue=o.relatedTarget||o.fromElement)&&(Rs(ue)||ue[dr]))break e;if((ie||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,ie?(ue=o.relatedTarget||o.toElement,ie=U,ue=ue?Rs(ue):null,ue!==null&&(rt=Tn(ue),ue!==rt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=U),ie!==ue)){if(ce=mi,ee="onMouseLeave",F="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(ce=E,ee="onPointerLeave",F="onPointerEnter",k="pointer"),rt=ie==null?K:Ai(ie),j=ue==null?K:Ai(ue),K=new ce(ee,k+"leave",ie,o,X),K.target=rt,K.relatedTarget=j,ee=null,Rs(X)===U&&(ce=new ce(F,k+"enter",ue,o,X),ce.target=j,ce.relatedTarget=rt,ee=ce),rt=ee,ie&&ue)t:{for(ce=ie,F=ue,k=0,j=ce;j;j=Ii(j))k++;for(j=0,ee=F;ee;ee=Ii(ee))j++;for(;0<k-j;)ce=Ii(ce),k--;for(;0<j-k;)F=Ii(F),j--;for(;k--;){if(ce===F||F!==null&&ce===F.alternate)break t;ce=Ii(ce),F=Ii(F)}ce=null}else ce=null;ie!==null&&Jd(J,K,ie,ce,!1),ue!==null&&rt!==null&&Jd(J,rt,ue,ce,!0)}}e:{if(K=U?Ai(U):window,ie=K.nodeName&&K.nodeName.toLowerCase(),ie==="select"||ie==="input"&&K.type==="file")var he=ov;else if(xd(K))if(Dd)he=cv;else{he=lv;var me=av}else(ie=K.nodeName)&&ie.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(he=uv);if(he&&(he=he(t,U))){Vd(J,he,o,X);break e}me&&me(t,K,U),t==="focusout"&&(me=K._wrapperState)&&me.controlled&&K.type==="number"&&Xs(K,"number",K.value)}switch(me=U?Ai(U):window,t){case"focusin":(xd(me)||me.contentEditable==="true")&&(wi=me,Uu=U,Vo=null);break;case"focusout":Vo=Uu=wi=null;break;case"mousedown":zu=!0;break;case"contextmenu":case"mouseup":case"dragend":zu=!1,zd(J,o,X);break;case"selectionchange":if(fv)break;case"keydown":case"keyup":zd(J,o,X)}var ge;if(ot)e:{switch(t){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Ei?Nd(t,o)&&(_e="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(_e="onCompositionStart");_e&&(Cs&&o.locale!=="ko"&&(Ei||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Ei&&(ge=Ao()):(tn=X,hi="value"in tn?tn.value:tn.textContent,Ei=!0)),me=Ya(U,_e),0<me.length&&(_e=new Po(_e,t,null,o,X),J.push({event:_e,listeners:me}),ge?_e.data=ge:(ge=kd(o),ge!==null&&(_e.data=ge)))),(ge=nn?nv(t,o):rv(t,o))&&(U=Ya(U,"onBeforeInput"),0<U.length&&(X=new Po("onBeforeInput","beforeinput",null,o,X),J.push({event:X,listeners:U}),X.data=ge))}Xd(J,r)})}function Oo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ya(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=nt(t,o),p!=null&&u.unshift(Oo(t,p,h)),p=nt(t,r),p!=null&&u.push(Oo(t,p,h))),t=t.return}return u}function Ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jd(t,r,o,u,h){for(var p=r._reactName,v=[];o!==null&&o!==u;){var I=o,N=I.alternate,U=I.stateNode;if(N!==null&&N===u)break;I.tag===5&&U!==null&&(I=U,h?(N=nt(o,p),N!=null&&v.unshift(Oo(o,N,I))):h||(N=nt(o,p),N!=null&&v.push(Oo(o,N,I)))),o=o.return}v.length!==0&&t.push({event:r,listeners:v})}var yv=/\r\n?/g,vv=/\u0000|\uFFFD/g;function Zd(t){return(typeof t=="string"?t:""+t).replace(yv,`
`).replace(vv,"")}function Ja(t,r,o){if(r=Zd(r),Zd(t)!==r&&o)throw Error(n(425))}function Za(){}var Wu=null,Qu=null;function Ku(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Xu=typeof setTimeout=="function"?setTimeout:void 0,_v=typeof clearTimeout=="function"?clearTimeout:void 0,ef=typeof Promise=="function"?Promise:void 0,Ev=typeof queueMicrotask=="function"?queueMicrotask:typeof ef<"u"?function(t){return ef.resolve(null).then(t).catch(wv)}:Xu;function wv(t){setTimeout(function(){throw t})}function Yu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Rn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Rn(r)}function Or(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function tf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Si=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Si,Lo="__reactProps$"+Si,dr="__reactContainer$"+Si,Ju="__reactEvents$"+Si,Tv="__reactListeners$"+Si,Iv="__reactHandles$"+Si;function Rs(t){var r=t[Hn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[dr]||o[Hn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=tf(t);t!==null;){if(o=t[Hn])return o;t=tf(t)}return r}t=o,o=t.parentNode}return null}function Fo(t){return t=t[Hn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function el(t){return t[Lo]||null}var Zu=[],Ci=-1;function Lr(t){return{current:t}}function We(t){0>Ci||(t.current=Zu[Ci],Zu[Ci]=null,Ci--)}function qe(t,r){Ci++,Zu[Ci]=t.current,t.current=r}var Fr={},Vt=Lr(Fr),Ht=Lr(!1),Ps=Fr;function Ri(t,r){var o=t.type.contextTypes;if(!o)return Fr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Gt(t){return t=t.childContextTypes,t!=null}function tl(){We(Ht),We(Vt)}function nf(t,r,o){if(Vt.current!==Fr)throw Error(n(168));qe(Vt,r),qe(Ht,o)}function rf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Le(t)||"Unknown",h));return ae({},o,u)}function nl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,Ps=Vt.current,qe(Vt,t),qe(Ht,Ht.current),!0}function sf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=rf(t,r,Ps),u.__reactInternalMemoizedMergedChildContext=t,We(Ht),We(Vt),qe(Vt,t)):We(Ht),qe(Ht,o)}var fr=null,rl=!1,ec=!1;function of(t){fr===null?fr=[t]:fr.push(t)}function Sv(t){rl=!0,of(t)}function jr(){if(!ec&&fr!==null){ec=!0;var t=0,r=Ne;try{var o=fr;for(Ne=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}fr=null,rl=!1}catch(h){throw fr!==null&&(fr=fr.slice(t+1)),oi(_s,jr),h}finally{Ne=r,ec=!1}}return null}var Pi=[],Ni=0,sl=null,il=0,fn=[],pn=0,Ns=null,pr=1,mr="";function ks(t,r){Pi[Ni++]=il,Pi[Ni++]=sl,sl=t,il=r}function af(t,r,o){fn[pn++]=pr,fn[pn++]=mr,fn[pn++]=Ns,Ns=t;var u=pr;t=mr;var h=32-bt(u)-1;u&=~(1<<h),o+=1;var p=32-bt(r)+h;if(30<p){var v=h-h%5;p=(u&(1<<v)-1).toString(32),u>>=v,h-=v,pr=1<<32-bt(r)+h|o<<h|u,mr=p+t}else pr=1<<p|o<<h|u,mr=t}function tc(t){t.return!==null&&(ks(t,1),af(t,1,0))}function nc(t){for(;t===sl;)sl=Pi[--Ni],Pi[Ni]=null,il=Pi[--Ni],Pi[Ni]=null;for(;t===Ns;)Ns=fn[--pn],fn[pn]=null,mr=fn[--pn],fn[pn]=null,pr=fn[--pn],fn[pn]=null}var rn=null,sn=null,Xe=!1,kn=null;function lf(t,r){var o=vn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function uf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,rn=t,sn=Or(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,rn=t,sn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ns!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=vn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,rn=t,sn=null,!0):!1;default:return!1}}function rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sc(t){if(Xe){var r=sn;if(r){var o=r;if(!uf(t,r)){if(rc(t))throw Error(n(418));r=Or(o.nextSibling);var u=rn;r&&uf(t,r)?lf(u,o):(t.flags=t.flags&-4097|2,Xe=!1,rn=t)}}else{if(rc(t))throw Error(n(418));t.flags=t.flags&-4097|2,Xe=!1,rn=t}}}function cf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function ol(t){if(t!==rn)return!1;if(!Xe)return cf(t),Xe=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Ku(t.type,t.memoizedProps)),r&&(r=sn)){if(rc(t))throw hf(),Error(n(418));for(;r;)lf(t,r),r=Or(r.nextSibling)}if(cf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){sn=Or(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}sn=null}}else sn=rn?Or(t.stateNode.nextSibling):null;return!0}function hf(){for(var t=sn;t;)t=Or(t.nextSibling)}function ki(){sn=rn=null,Xe=!1}function ic(t){kn===null?kn=[t]:kn.push(t)}var Av=re.ReactCurrentBatchConfig;function jo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(v){var I=h.refs;v===null?delete I[p]:I[p]=v},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function al(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function df(t){var r=t._init;return r(t._payload)}function ff(t){function r(F,k){if(t){var j=F.deletions;j===null?(F.deletions=[k],F.flags|=16):j.push(k)}}function o(F,k){if(!t)return null;for(;k!==null;)r(F,k),k=k.sibling;return null}function u(F,k){for(F=new Map;k!==null;)k.key!==null?F.set(k.key,k):F.set(k.index,k),k=k.sibling;return F}function h(F,k){return F=Gr(F,k),F.index=0,F.sibling=null,F}function p(F,k,j){return F.index=j,t?(j=F.alternate,j!==null?(j=j.index,j<k?(F.flags|=2,k):j):(F.flags|=2,k)):(F.flags|=1048576,k)}function v(F){return t&&F.alternate===null&&(F.flags|=2),F}function I(F,k,j,ee){return k===null||k.tag!==6?(k=Xc(j,F.mode,ee),k.return=F,k):(k=h(k,j),k.return=F,k)}function N(F,k,j,ee){var he=j.type;return he===V?X(F,k,j.props.children,ee,j.key):k!==null&&(k.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===xt&&df(he)===k.type)?(ee=h(k,j.props),ee.ref=jo(F,k,j),ee.return=F,ee):(ee=xl(j.type,j.key,j.props,null,F.mode,ee),ee.ref=jo(F,k,j),ee.return=F,ee)}function U(F,k,j,ee){return k===null||k.tag!==4||k.stateNode.containerInfo!==j.containerInfo||k.stateNode.implementation!==j.implementation?(k=Yc(j,F.mode,ee),k.return=F,k):(k=h(k,j.children||[]),k.return=F,k)}function X(F,k,j,ee,he){return k===null||k.tag!==7?(k=js(j,F.mode,ee,he),k.return=F,k):(k=h(k,j),k.return=F,k)}function J(F,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Xc(""+k,F.mode,j),k.return=F,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ve:return j=xl(k.type,k.key,k.props,null,F.mode,j),j.ref=jo(F,null,k),j.return=F,j;case Ee:return k=Yc(k,F.mode,j),k.return=F,k;case xt:var ee=k._init;return J(F,ee(k._payload),j)}if(rr(k)||pe(k))return k=js(k,F.mode,j,null),k.return=F,k;al(F,k)}return null}function K(F,k,j,ee){var he=k!==null?k.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return he!==null?null:I(F,k,""+j,ee);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ve:return j.key===he?N(F,k,j,ee):null;case Ee:return j.key===he?U(F,k,j,ee):null;case xt:return he=j._init,K(F,k,he(j._payload),ee)}if(rr(j)||pe(j))return he!==null?null:X(F,k,j,ee,null);al(F,j)}return null}function ie(F,k,j,ee,he){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return F=F.get(j)||null,I(k,F,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case ve:return F=F.get(ee.key===null?j:ee.key)||null,N(k,F,ee,he);case Ee:return F=F.get(ee.key===null?j:ee.key)||null,U(k,F,ee,he);case xt:var me=ee._init;return ie(F,k,j,me(ee._payload),he)}if(rr(ee)||pe(ee))return F=F.get(j)||null,X(k,F,ee,he,null);al(k,ee)}return null}function ue(F,k,j,ee){for(var he=null,me=null,ge=k,_e=k=0,wt=null;ge!==null&&_e<j.length;_e++){ge.index>_e?(wt=ge,ge=null):wt=ge.sibling;var Oe=K(F,ge,j[_e],ee);if(Oe===null){ge===null&&(ge=wt);break}t&&ge&&Oe.alternate===null&&r(F,ge),k=p(Oe,k,_e),me===null?he=Oe:me.sibling=Oe,me=Oe,ge=wt}if(_e===j.length)return o(F,ge),Xe&&ks(F,_e),he;if(ge===null){for(;_e<j.length;_e++)ge=J(F,j[_e],ee),ge!==null&&(k=p(ge,k,_e),me===null?he=ge:me.sibling=ge,me=ge);return Xe&&ks(F,_e),he}for(ge=u(F,ge);_e<j.length;_e++)wt=ie(ge,F,_e,j[_e],ee),wt!==null&&(t&&wt.alternate!==null&&ge.delete(wt.key===null?_e:wt.key),k=p(wt,k,_e),me===null?he=wt:me.sibling=wt,me=wt);return t&&ge.forEach(function(Wr){return r(F,Wr)}),Xe&&ks(F,_e),he}function ce(F,k,j,ee){var he=pe(j);if(typeof he!="function")throw Error(n(150));if(j=he.call(j),j==null)throw Error(n(151));for(var me=he=null,ge=k,_e=k=0,wt=null,Oe=j.next();ge!==null&&!Oe.done;_e++,Oe=j.next()){ge.index>_e?(wt=ge,ge=null):wt=ge.sibling;var Wr=K(F,ge,Oe.value,ee);if(Wr===null){ge===null&&(ge=wt);break}t&&ge&&Wr.alternate===null&&r(F,ge),k=p(Wr,k,_e),me===null?he=Wr:me.sibling=Wr,me=Wr,ge=wt}if(Oe.done)return o(F,ge),Xe&&ks(F,_e),he;if(ge===null){for(;!Oe.done;_e++,Oe=j.next())Oe=J(F,Oe.value,ee),Oe!==null&&(k=p(Oe,k,_e),me===null?he=Oe:me.sibling=Oe,me=Oe);return Xe&&ks(F,_e),he}for(ge=u(F,ge);!Oe.done;_e++,Oe=j.next())Oe=ie(ge,F,_e,Oe.value,ee),Oe!==null&&(t&&Oe.alternate!==null&&ge.delete(Oe.key===null?_e:Oe.key),k=p(Oe,k,_e),me===null?he=Oe:me.sibling=Oe,me=Oe);return t&&ge.forEach(function(s_){return r(F,s_)}),Xe&&ks(F,_e),he}function rt(F,k,j,ee){if(typeof j=="object"&&j!==null&&j.type===V&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ve:e:{for(var he=j.key,me=k;me!==null;){if(me.key===he){if(he=j.type,he===V){if(me.tag===7){o(F,me.sibling),k=h(me,j.props.children),k.return=F,F=k;break e}}else if(me.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===xt&&df(he)===me.type){o(F,me.sibling),k=h(me,j.props),k.ref=jo(F,me,j),k.return=F,F=k;break e}o(F,me);break}else r(F,me);me=me.sibling}j.type===V?(k=js(j.props.children,F.mode,ee,j.key),k.return=F,F=k):(ee=xl(j.type,j.key,j.props,null,F.mode,ee),ee.ref=jo(F,k,j),ee.return=F,F=ee)}return v(F);case Ee:e:{for(me=j.key;k!==null;){if(k.key===me)if(k.tag===4&&k.stateNode.containerInfo===j.containerInfo&&k.stateNode.implementation===j.implementation){o(F,k.sibling),k=h(k,j.children||[]),k.return=F,F=k;break e}else{o(F,k);break}else r(F,k);k=k.sibling}k=Yc(j,F.mode,ee),k.return=F,F=k}return v(F);case xt:return me=j._init,rt(F,k,me(j._payload),ee)}if(rr(j))return ue(F,k,j,ee);if(pe(j))return ce(F,k,j,ee);al(F,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,k!==null&&k.tag===6?(o(F,k.sibling),k=h(k,j),k.return=F,F=k):(o(F,k),k=Xc(j,F.mode,ee),k.return=F,F=k),v(F)):o(F,k)}return rt}var xi=ff(!0),pf=ff(!1),ll=Lr(null),ul=null,Vi=null,oc=null;function ac(){oc=Vi=ul=null}function lc(t){var r=ll.current;We(ll),t._currentValue=r}function uc(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Di(t,r){ul=t,oc=Vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Wt=!0),t.firstContext=null)}function mn(t){var r=t._currentValue;if(oc!==t)if(t={context:t,memoizedValue:r,next:null},Vi===null){if(ul===null)throw Error(n(308));Vi=t,ul.dependencies={lanes:0,firstContext:t}}else Vi=Vi.next=t;return r}var xs=null;function cc(t){xs===null?xs=[t]:xs.push(t)}function mf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,cc(r)):(o.next=h.next,h.next=o),r.interleaved=o,gr(t,u)}function gr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var br=!1;function hc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Ur(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Me&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,gr(t,o)}return h=u.interleaved,h===null?(r.next=r,cc(u)):(r.next=h.next,h.next=r),u.interleaved=r,gr(t,o)}function cl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Nr(t,o)}}function yf(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function hl(t,r,o,u){var h=t.updateQueue;br=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,I=h.shared.pending;if(I!==null){h.shared.pending=null;var N=I,U=N.next;N.next=null,v===null?p=U:v.next=U,v=N;var X=t.alternate;X!==null&&(X=X.updateQueue,I=X.lastBaseUpdate,I!==v&&(I===null?X.firstBaseUpdate=U:I.next=U,X.lastBaseUpdate=N))}if(p!==null){var J=h.baseState;v=0,X=U=N=null,I=p;do{var K=I.lane,ie=I.eventTime;if((u&K)===K){X!==null&&(X=X.next={eventTime:ie,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var ue=t,ce=I;switch(K=r,ie=o,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){J=ue.call(ie,J,K);break e}J=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,K=typeof ue=="function"?ue.call(ie,J,K):ue,K==null)break e;J=ae({},J,K);break e;case 2:br=!0}}I.callback!==null&&I.lane!==0&&(t.flags|=64,K=h.effects,K===null?h.effects=[I]:K.push(I))}else ie={eventTime:ie,lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},X===null?(U=X=ie,N=J):X=X.next=ie,v|=K;if(I=I.next,I===null){if(I=h.shared.pending,I===null)break;K=I,I=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);if(X===null&&(N=J),h.baseState=N,h.firstBaseUpdate=U,h.lastBaseUpdate=X,r=h.shared.interleaved,r!==null){h=r;do v|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Ms|=v,t.lanes=v,t.memoizedState=J}}function vf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var bo={},Gn=Lr(bo),Uo=Lr(bo),zo=Lr(bo);function Vs(t){if(t===bo)throw Error(n(174));return t}function dc(t,r){switch(qe(zo,r),qe(Uo,t),qe(Gn,bo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:dt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=dt(r,t)}We(Gn),qe(Gn,r)}function Mi(){We(Gn),We(Uo),We(zo)}function _f(t){Vs(zo.current);var r=Vs(Gn.current),o=dt(r,t.type);r!==o&&(qe(Uo,t),qe(Gn,o))}function fc(t){Uo.current===t&&(We(Gn),We(Uo))}var Ye=Lr(0);function dl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var pc=[];function mc(){for(var t=0;t<pc.length;t++)pc[t]._workInProgressVersionPrimary=null;pc.length=0}var fl=re.ReactCurrentDispatcher,gc=re.ReactCurrentBatchConfig,Ds=0,Je=null,pt=null,_t=null,pl=!1,Bo=!1,$o=0,Cv=0;function Dt(){throw Error(n(321))}function yc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Nn(t[o],r[o]))return!1;return!0}function vc(t,r,o,u,h,p){if(Ds=p,Je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,fl.current=t===null||t.memoizedState===null?kv:xv,t=o(u,h),Bo){p=0;do{if(Bo=!1,$o=0,25<=p)throw Error(n(301));p+=1,_t=pt=null,r.updateQueue=null,fl.current=Vv,t=o(u,h)}while(Bo)}if(fl.current=yl,r=pt!==null&&pt.next!==null,Ds=0,_t=pt=Je=null,pl=!1,r)throw Error(n(300));return t}function _c(){var t=$o!==0;return $o=0,t}function Wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Je.memoizedState=_t=t:_t=_t.next=t,_t}function gn(){if(pt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var r=_t===null?Je.memoizedState:_t.next;if(r!==null)_t=r,pt=t;else{if(t===null)throw Error(n(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},_t===null?Je.memoizedState=_t=t:_t=_t.next=t}return _t}function qo(t,r){return typeof r=="function"?r(t):r}function Ec(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=pt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var I=v=null,N=null,U=p;do{var X=U.lane;if((Ds&X)===X)N!==null&&(N=N.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var J={lane:X,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};N===null?(I=N=J,v=u):N=N.next=J,Je.lanes|=X,Ms|=X}U=U.next}while(U!==null&&U!==p);N===null?v=u:N.next=I,Nn(u,r.memoizedState)||(Wt=!0),r.memoizedState=u,r.baseState=v,r.baseQueue=N,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Je.lanes|=p,Ms|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function wc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var v=h=h.next;do p=t(p,v.action),v=v.next;while(v!==h);Nn(p,r.memoizedState)||(Wt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Ef(){}function wf(t,r){var o=Je,u=gn(),h=r(),p=!Nn(u.memoizedState,h);if(p&&(u.memoizedState=h,Wt=!0),u=u.queue,Tc(Sf.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||_t!==null&&_t.memoizedState.tag&1){if(o.flags|=2048,Ho(9,If.bind(null,o,u,h,r),void 0,null),Et===null)throw Error(n(349));(Ds&30)!==0||Tf(o,r,h)}return h}function Tf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Je.updateQueue,r===null?(r={lastEffect:null,stores:null},Je.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function If(t,r,o,u){r.value=o,r.getSnapshot=u,Af(r)&&Cf(t)}function Sf(t,r,o){return o(function(){Af(r)&&Cf(t)})}function Af(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Nn(t,o)}catch{return!0}}function Cf(t){var r=gr(t,1);r!==null&&Mn(r,t,1,-1)}function Rf(t){var r=Wn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:t},r.queue=t,t=t.dispatch=Nv.bind(null,Je,t),[r.memoizedState,t]}function Ho(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Je.updateQueue,r===null?(r={lastEffect:null,stores:null},Je.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Pf(){return gn().memoizedState}function ml(t,r,o,u){var h=Wn();Je.flags|=t,h.memoizedState=Ho(1|r,o,void 0,u===void 0?null:u)}function gl(t,r,o,u){var h=gn();u=u===void 0?null:u;var p=void 0;if(pt!==null){var v=pt.memoizedState;if(p=v.destroy,u!==null&&yc(u,v.deps)){h.memoizedState=Ho(r,o,p,u);return}}Je.flags|=t,h.memoizedState=Ho(1|r,o,p,u)}function Nf(t,r){return ml(8390656,8,t,r)}function Tc(t,r){return gl(2048,8,t,r)}function kf(t,r){return gl(4,2,t,r)}function xf(t,r){return gl(4,4,t,r)}function Vf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Df(t,r,o){return o=o!=null?o.concat([t]):null,gl(4,4,Vf.bind(null,r,t),o)}function Ic(){}function Mf(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&yc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Of(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&yc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Lf(t,r,o){return(Ds&21)===0?(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=o):(Nn(o,r)||(o=Ts(),Je.lanes|=o,Ms|=o,t.baseState=!0),r)}function Rv(t,r){var o=Ne;Ne=o!==0&&4>o?o:4,t(!0);var u=gc.transition;gc.transition={};try{t(!1),r()}finally{Ne=o,gc.transition=u}}function Ff(){return gn().memoizedState}function Pv(t,r,o){var u=qr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},jf(t))bf(r,o);else if(o=mf(t,r,o,u),o!==null){var h=Bt();Mn(o,t,u,h),Uf(o,r,u)}}function Nv(t,r,o){var u=qr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(jf(t))bf(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var v=r.lastRenderedState,I=p(v,o);if(h.hasEagerState=!0,h.eagerState=I,Nn(I,v)){var N=r.interleaved;N===null?(h.next=h,cc(r)):(h.next=N.next,N.next=h),r.interleaved=h;return}}catch{}finally{}o=mf(t,r,h,u),o!==null&&(h=Bt(),Mn(o,t,u,h),Uf(o,r,u))}}function jf(t){var r=t.alternate;return t===Je||r!==null&&r===Je}function bf(t,r){Bo=pl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Uf(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Nr(t,o)}}var yl={readContext:mn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},kv={readContext:mn,useCallback:function(t,r){return Wn().memoizedState=[t,r===void 0?null:r],t},useContext:mn,useEffect:Nf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,ml(4194308,4,Vf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return ml(4194308,4,t,r)},useInsertionEffect:function(t,r){return ml(4,2,t,r)},useMemo:function(t,r){var o=Wn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Wn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Pv.bind(null,Je,t),[u.memoizedState,t]},useRef:function(t){var r=Wn();return t={current:t},r.memoizedState=t},useState:Rf,useDebugValue:Ic,useDeferredValue:function(t){return Wn().memoizedState=t},useTransition:function(){var t=Rf(!1),r=t[0];return t=Rv.bind(null,t[1]),Wn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Je,h=Wn();if(Xe){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),Et===null)throw Error(n(349));(Ds&30)!==0||Tf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,Nf(Sf.bind(null,u,p,t),[t]),u.flags|=2048,Ho(9,If.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Wn(),r=Et.identifierPrefix;if(Xe){var o=mr,u=pr;o=(u&~(1<<32-bt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=$o++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Cv++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},xv={readContext:mn,useCallback:Mf,useContext:mn,useEffect:Tc,useImperativeHandle:Df,useInsertionEffect:kf,useLayoutEffect:xf,useMemo:Of,useReducer:Ec,useRef:Pf,useState:function(){return Ec(qo)},useDebugValue:Ic,useDeferredValue:function(t){var r=gn();return Lf(r,pt.memoizedState,t)},useTransition:function(){var t=Ec(qo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:Ef,useSyncExternalStore:wf,useId:Ff,unstable_isNewReconciler:!1},Vv={readContext:mn,useCallback:Mf,useContext:mn,useEffect:Tc,useImperativeHandle:Df,useInsertionEffect:kf,useLayoutEffect:xf,useMemo:Of,useReducer:wc,useRef:Pf,useState:function(){return wc(qo)},useDebugValue:Ic,useDeferredValue:function(t){var r=gn();return pt===null?r.memoizedState=t:Lf(r,pt.memoizedState,t)},useTransition:function(){var t=wc(qo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:Ef,useSyncExternalStore:wf,useId:Ff,unstable_isNewReconciler:!1};function xn(t,r){if(t&&t.defaultProps){r=ae({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Sc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ae({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var vl={isMounted:function(t){return(t=t._reactInternals)?Tn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Bt(),h=qr(t),p=yr(u,h);p.payload=r,o!=null&&(p.callback=o),r=Ur(t,p,h),r!==null&&(Mn(r,t,h,u),cl(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Bt(),h=qr(t),p=yr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Ur(t,p,h),r!==null&&(Mn(r,t,h,u),cl(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Bt(),u=qr(t),h=yr(o,u);h.tag=2,r!=null&&(h.callback=r),r=Ur(t,h,u),r!==null&&(Mn(r,t,u,o),cl(r,t,u))}};function zf(t,r,o,u,h,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,v):r.prototype&&r.prototype.isPureReactComponent?!xo(o,u)||!xo(h,p):!0}function Bf(t,r,o){var u=!1,h=Fr,p=r.contextType;return typeof p=="object"&&p!==null?p=mn(p):(h=Gt(r)?Ps:Vt.current,u=r.contextTypes,p=(u=u!=null)?Ri(t,h):Fr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=vl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function $f(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&vl.enqueueReplaceState(r,r.state,null)}function Ac(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},hc(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=mn(p):(p=Gt(r)?Ps:Vt.current,h.context=Ri(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Sc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&vl.enqueueReplaceState(h,h.state,null),hl(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Oi(t,r){try{var o="",u=r;do o+=Ce(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function Cc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Rc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Dv=typeof WeakMap=="function"?WeakMap:Map;function qf(t,r,o){o=yr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){Al||(Al=!0,Bc=u),Rc(t,r)},o}function Hf(t,r,o){o=yr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){Rc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){Rc(t,r),typeof u!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})}),o}function Gf(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Dv;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=Wv.bind(null,t,r,o),r.then(t,t))}function Wf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Qf(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=yr(-1,1),r.tag=2,Ur(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Mv=re.ReactCurrentOwner,Wt=!1;function zt(t,r,o,u){r.child=t===null?pf(r,null,o,u):xi(r,t.child,o,u)}function Kf(t,r,o,u,h){o=o.render;var p=r.ref;return Di(r,h),u=vc(t,r,o,u,p,h),o=_c(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Xe&&o&&tc(r),r.flags|=1,zt(t,r,u,h),r.child)}function Xf(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Kc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Yf(t,r,p,u,h)):(t=xl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:xo,o(v,u)&&t.ref===r.ref)return vr(t,r,h)}return r.flags|=1,t=Gr(p,u),t.ref=r.ref,t.return=r,r.child=t}function Yf(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(xo(p,u)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Wt=!0);else return r.lanes=t.lanes,vr(t,r,h)}return Pc(t,r,o,u,h)}function Jf(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Fi,on),on|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,qe(Fi,on),on|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,qe(Fi,on),on|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,qe(Fi,on),on|=u;return zt(t,r,h,o),r.child}function Zf(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Pc(t,r,o,u,h){var p=Gt(o)?Ps:Vt.current;return p=Ri(r,p),Di(r,h),o=vc(t,r,o,u,p,h),u=_c(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Xe&&u&&tc(r),r.flags|=1,zt(t,r,o,h),r.child)}function ep(t,r,o,u,h){if(Gt(o)){var p=!0;nl(r)}else p=!1;if(Di(r,h),r.stateNode===null)El(t,r),Bf(r,o,u),Ac(r,o,u,h),u=!0;else if(t===null){var v=r.stateNode,I=r.memoizedProps;v.props=I;var N=v.context,U=o.contextType;typeof U=="object"&&U!==null?U=mn(U):(U=Gt(o)?Ps:Vt.current,U=Ri(r,U));var X=o.getDerivedStateFromProps,J=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function";J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I!==u||N!==U)&&$f(r,v,u,U),br=!1;var K=r.memoizedState;v.state=K,hl(r,u,v,h),N=r.memoizedState,I!==u||K!==N||Ht.current||br?(typeof X=="function"&&(Sc(r,o,X,u),N=r.memoizedState),(I=br||zf(r,o,I,u,K,N,U))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=N),v.props=u,v.state=N,v.context=U,u=I):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{v=r.stateNode,gf(t,r),I=r.memoizedProps,U=r.type===r.elementType?I:xn(r.type,I),v.props=U,J=r.pendingProps,K=v.context,N=o.contextType,typeof N=="object"&&N!==null?N=mn(N):(N=Gt(o)?Ps:Vt.current,N=Ri(r,N));var ie=o.getDerivedStateFromProps;(X=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I!==J||K!==N)&&$f(r,v,u,N),br=!1,K=r.memoizedState,v.state=K,hl(r,u,v,h);var ue=r.memoizedState;I!==J||K!==ue||Ht.current||br?(typeof ie=="function"&&(Sc(r,o,ie,u),ue=r.memoizedState),(U=br||zf(r,o,U,u,K,ue,N)||!1)?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,ue,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,ue,N)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||I===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ue),v.props=u,v.state=ue,v.context=N,u=U):(typeof v.componentDidUpdate!="function"||I===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),u=!1)}return Nc(t,r,o,u,p,h)}function Nc(t,r,o,u,h,p){Zf(t,r);var v=(r.flags&128)!==0;if(!u&&!v)return h&&sf(r,o,!1),vr(t,r,p);u=r.stateNode,Mv.current=r;var I=v&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&v?(r.child=xi(r,t.child,null,p),r.child=xi(r,null,I,p)):zt(t,r,I,p),r.memoizedState=u.state,h&&sf(r,o,!0),r.child}function tp(t){var r=t.stateNode;r.pendingContext?nf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&nf(t,r.context,!1),dc(t,r.containerInfo)}function np(t,r,o,u,h){return ki(),ic(h),r.flags|=256,zt(t,r,o,u),r.child}var kc={dehydrated:null,treeContext:null,retryLane:0};function xc(t){return{baseLanes:t,cachePool:null,transitions:null}}function rp(t,r,o){var u=r.pendingProps,h=Ye.current,p=!1,v=(r.flags&128)!==0,I;if((I=v)||(I=t!==null&&t.memoizedState===null?!1:(h&2)!==0),I?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),qe(Ye,h&1),t===null)return sc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(v=u.children,t=u.fallback,p?(u=r.mode,p=r.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Vl(v,u,0,null),t=js(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=xc(o),r.memoizedState=kc,t):Vc(r,v));if(h=t.memoizedState,h!==null&&(I=h.dehydrated,I!==null))return Ov(t,r,v,u,I,h,o);if(p){p=u.fallback,v=r.mode,h=t.child,I=h.sibling;var N={mode:"hidden",children:u.children};return(v&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=N,r.deletions=null):(u=Gr(h,N),u.subtreeFlags=h.subtreeFlags&14680064),I!==null?p=Gr(I,p):(p=js(p,v,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,v=t.child.memoizedState,v=v===null?xc(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=t.childLanes&~o,r.memoizedState=kc,u}return p=t.child,t=p.sibling,u=Gr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function Vc(t,r){return r=Vl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function _l(t,r,o,u){return u!==null&&ic(u),xi(r,t.child,null,o),t=Vc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ov(t,r,o,u,h,p,v){if(o)return r.flags&256?(r.flags&=-257,u=Cc(Error(n(422))),_l(t,r,v,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=Vl({mode:"visible",children:u.children},h,0,null),p=js(p,h,v,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&xi(r,t.child,null,v),r.child.memoizedState=xc(v),r.memoizedState=kc,p);if((r.mode&1)===0)return _l(t,r,v,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var I=u.dgst;return u=I,p=Error(n(419)),u=Cc(p,u,void 0),_l(t,r,v,u)}if(I=(v&t.childLanes)!==0,Wt||I){if(u=Et,u!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|v))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,gr(t,h),Mn(u,t,h,-1))}return Qc(),u=Cc(Error(n(421))),_l(t,r,v,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Qv.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,sn=Or(h.nextSibling),rn=r,Xe=!0,kn=null,t!==null&&(fn[pn++]=pr,fn[pn++]=mr,fn[pn++]=Ns,pr=t.id,mr=t.overflow,Ns=r),r=Vc(r,u.children),r.flags|=4096,r)}function sp(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),uc(t.return,r,o)}function Dc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function ip(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(zt(t,r,u.children,o),u=Ye.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sp(t,o,r);else if(t.tag===19)sp(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(qe(Ye,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&dl(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Dc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&dl(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Dc(r,!0,o,null,p);break;case"together":Dc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function El(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function vr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ms|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Gr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Gr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Lv(t,r,o){switch(r.tag){case 3:tp(r),ki();break;case 5:_f(r);break;case 1:Gt(r.type)&&nl(r);break;case 4:dc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;qe(ll,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(qe(Ye,Ye.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?rp(t,r,o):(qe(Ye,Ye.current&1),t=vr(t,r,o),t!==null?t.sibling:null);qe(Ye,Ye.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return ip(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),qe(Ye,Ye.current),u)break;return null;case 22:case 23:return r.lanes=0,Jf(t,r,o)}return vr(t,r,o)}var op,Mc,ap,lp;op=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Mc=function(){},ap=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Vs(Gn.current);var p=null;switch(o){case"input":h=hs(t,h),u=hs(t,u),p=[];break;case"select":h=ae({},h,{value:void 0}),u=ae({},u,{value:void 0}),p=[];break;case"textarea":h=io(t,h),u=io(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Za)}ho(o,u);var v;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var I=h[U];for(v in I)I.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var N=u[U];if(I=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&N!==I&&(N!=null||I!=null))if(U==="style")if(I){for(v in I)!I.hasOwnProperty(v)||N&&N.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in N)N.hasOwnProperty(v)&&I[v]!==N[v]&&(o||(o={}),o[v]=N[v])}else o||(p||(p=[]),p.push(U,o)),o=N;else U==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,I=I?I.__html:void 0,N!=null&&I!==N&&(p=p||[]).push(U,N)):U==="children"?typeof N!="string"&&typeof N!="number"||(p=p||[]).push(U,""+N):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(N!=null&&U==="onScroll"&&Ge("scroll",t),p||I===N||(p=[])):(p=p||[]).push(U,N))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},lp=function(t,r,o,u){o!==u&&(r.flags|=4)};function Go(t,r){if(!Xe)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Mt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Fv(t,r,o){var u=r.pendingProps;switch(nc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Gt(r.type)&&tl(),Mt(r),null;case 3:return u=r.stateNode,Mi(),We(Ht),We(Vt),mc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(ol(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,kn!==null&&(Hc(kn),kn=null))),Mc(t,r),Mt(r),null;case 5:fc(r);var h=Vs(zo.current);if(o=r.type,t!==null&&r.stateNode!=null)ap(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Mt(r),null}if(t=Vs(Gn.current),ol(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[Hn]=r,u[Lo]=p,t=(r.mode&1)!==0,o){case"dialog":Ge("cancel",u),Ge("close",u);break;case"iframe":case"object":case"embed":Ge("load",u);break;case"video":case"audio":for(h=0;h<Do.length;h++)Ge(Do[h],u);break;case"source":Ge("error",u);break;case"img":case"image":case"link":Ge("error",u),Ge("load",u);break;case"details":Ge("toggle",u);break;case"input":Ks(u,p),Ge("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ge("invalid",u);break;case"textarea":Ys(u,p),Ge("invalid",u)}ho(o,p),h=null;for(var v in p)if(p.hasOwnProperty(v)){var I=p[v];v==="children"?typeof I=="string"?u.textContent!==I&&(p.suppressHydrationWarning!==!0&&Ja(u.textContent,I,t),h=["children",I]):typeof I=="number"&&u.textContent!==""+I&&(p.suppressHydrationWarning!==!0&&Ja(u.textContent,I,t),h=["children",""+I]):a.hasOwnProperty(v)&&I!=null&&v==="onScroll"&&Ge("scroll",u)}switch(o){case"input":nr(u),Sa(u,p,!0);break;case"textarea":nr(u),oo(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Za)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ht(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(o,{is:u.is}):(t=v.createElement(o),o==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,o),t[Hn]=r,t[Lo]=u,op(t,r,!1,!1),r.stateNode=t;e:{switch(v=fo(o,u),o){case"dialog":Ge("cancel",t),Ge("close",t),h=u;break;case"iframe":case"object":case"embed":Ge("load",t),h=u;break;case"video":case"audio":for(h=0;h<Do.length;h++)Ge(Do[h],t);h=u;break;case"source":Ge("error",t),h=u;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),h=u;break;case"details":Ge("toggle",t),h=u;break;case"input":Ks(t,u),h=hs(t,u),Ge("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ae({},u,{value:void 0}),Ge("invalid",t);break;case"textarea":Ys(t,u),h=io(t,u),Ge("invalid",t);break;default:h=u}ho(o,h),I=h;for(p in I)if(I.hasOwnProperty(p)){var N=I[p];p==="style"?uo(t,N):p==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&ao(t,N)):p==="children"?typeof N=="string"?(o!=="textarea"||N!=="")&&Sr(t,N):typeof N=="number"&&Sr(t,""+N):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?N!=null&&p==="onScroll"&&Ge("scroll",t):N!=null&&Y(t,p,N,v))}switch(o){case"input":nr(t),Sa(t,u,!1);break;case"textarea":nr(t),oo(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Fe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?sr(t,!!u.multiple,p,!1):u.defaultValue!=null&&sr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Za)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(t&&r.stateNode!=null)lp(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Vs(zo.current),Vs(Gn.current),ol(r)){if(u=r.stateNode,o=r.memoizedProps,u[Hn]=r,(p=u.nodeValue!==o)&&(t=rn,t!==null))switch(t.tag){case 3:Ja(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ja(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Hn]=r,r.stateNode=u}return Mt(r),null;case 13:if(We(Ye),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&sn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)hf(),ki(),r.flags|=98560,p=!1;else if(p=ol(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Hn]=r}else ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),p=!1}else kn!==null&&(Hc(kn),kn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Ye.current&1)!==0?mt===0&&(mt=3):Qc())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return Mi(),Mc(t,r),t===null&&Mo(r.stateNode.containerInfo),Mt(r),null;case 10:return lc(r.type._context),Mt(r),null;case 17:return Gt(r.type)&&tl(),Mt(r),null;case 19:if(We(Ye),p=r.memoizedState,p===null)return Mt(r),null;if(u=(r.flags&128)!==0,v=p.rendering,v===null)if(u)Go(p,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(v=dl(t),v!==null){for(r.flags|=128,Go(p,!1),u=v.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,t=v.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return qe(Ye,Ye.current&1|2),r.child}t=t.sibling}p.tail!==null&&$e()>ji&&(r.flags|=128,u=!0,Go(p,!1),r.lanes=4194304)}else{if(!u)if(t=dl(v),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Go(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Xe)return Mt(r),null}else 2*$e()-p.renderingStartTime>ji&&o!==1073741824&&(r.flags|=128,u=!0,Go(p,!1),r.lanes=4194304);p.isBackwards?(v.sibling=r.child,r.child=v):(o=p.last,o!==null?o.sibling=v:r.child=v,p.last=v)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=$e(),r.sibling=null,o=Ye.current,qe(Ye,u?o&1|2:o&1),r):(Mt(r),null);case 22:case 23:return Wc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(on&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function jv(t,r){switch(nc(r),r.tag){case 1:return Gt(r.type)&&tl(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Mi(),We(Ht),We(Vt),mc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return fc(r),null;case 13:if(We(Ye),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ki()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(Ye),null;case 4:return Mi(),null;case 10:return lc(r.type._context),null;case 22:case 23:return Wc(),null;case 24:return null;default:return null}}var wl=!1,Ot=!1,bv=typeof WeakSet=="function"?WeakSet:Set,le=null;function Li(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){et(t,r,u)}else o.current=null}function Oc(t,r,o){try{o()}catch(u){et(t,r,u)}}var up=!1;function Uv(t,r){if(Wu=Vr,t=Ud(),bu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,I=-1,N=-1,U=0,X=0,J=t,K=null;t:for(;;){for(var ie;J!==o||h!==0&&J.nodeType!==3||(I=v+h),J!==p||u!==0&&J.nodeType!==3||(N=v+u),J.nodeType===3&&(v+=J.nodeValue.length),(ie=J.firstChild)!==null;)K=J,J=ie;for(;;){if(J===t)break t;if(K===o&&++U===h&&(I=v),K===p&&++X===u&&(N=v),(ie=J.nextSibling)!==null)break;J=K,K=J.parentNode}J=ie}o=I===-1||N===-1?null:{start:I,end:N}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qu={focusedElem:t,selectionRange:o},Vr=!1,le=r;le!==null;)if(r=le,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,le=t;else for(;le!==null;){r=le;try{var ue=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,rt=ue.memoizedState,F=r.stateNode,k=F.getSnapshotBeforeUpdate(r.elementType===r.type?ce:xn(r.type,ce),rt);F.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var j=r.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ee){et(r,r.return,ee)}if(t=r.sibling,t!==null){t.return=r.return,le=t;break}le=r.return}return ue=up,up=!1,ue}function Wo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Oc(r,o,p)}h=h.next}while(h!==u)}}function Tl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Lc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function cp(t){var r=t.alternate;r!==null&&(t.alternate=null,cp(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Hn],delete r[Lo],delete r[Ju],delete r[Tv],delete r[Iv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hp(t){return t.tag===5||t.tag===3||t.tag===4}function dp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Za));else if(u!==4&&(t=t.child,t!==null))for(Fc(t,r,o),t=t.sibling;t!==null;)Fc(t,r,o),t=t.sibling}function jc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(jc(t,r,o),t=t.sibling;t!==null;)jc(t,r,o),t=t.sibling}var At=null,Vn=!1;function zr(t,r,o){for(o=o.child;o!==null;)fp(t,r,o),o=o.sibling}function fp(t,r,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Es,o)}catch{}switch(o.tag){case 5:Ot||Li(o,r);case 6:var u=At,h=Vn;At=null,zr(t,r,o),At=u,Vn=h,At!==null&&(Vn?(t=At,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):At.removeChild(o.stateNode));break;case 18:At!==null&&(Vn?(t=At,o=o.stateNode,t.nodeType===8?Yu(t.parentNode,o):t.nodeType===1&&Yu(t,o),Rn(t)):Yu(At,o.stateNode));break;case 4:u=At,h=Vn,At=o.stateNode.containerInfo,Vn=!0,zr(t,r,o),At=u,Vn=h;break;case 0:case 11:case 14:case 15:if(!Ot&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&Oc(o,r,v),h=h.next}while(h!==u)}zr(t,r,o);break;case 1:if(!Ot&&(Li(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(I){et(o,r,I)}zr(t,r,o);break;case 21:zr(t,r,o);break;case 22:o.mode&1?(Ot=(u=Ot)||o.memoizedState!==null,zr(t,r,o),Ot=u):zr(t,r,o);break;default:zr(t,r,o)}}function pp(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new bv),r.forEach(function(u){var h=Kv.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Dn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,v=r,I=v;e:for(;I!==null;){switch(I.tag){case 5:At=I.stateNode,Vn=!1;break e;case 3:At=I.stateNode.containerInfo,Vn=!0;break e;case 4:At=I.stateNode.containerInfo,Vn=!0;break e}I=I.return}if(At===null)throw Error(n(160));fp(p,v,h),At=null,Vn=!1;var N=h.alternate;N!==null&&(N.return=null),h.return=null}catch(U){et(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)mp(r,t),r=r.sibling}function mp(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(r,t),Qn(t),u&4){try{Wo(3,t,t.return),Tl(3,t)}catch(ce){et(t,t.return,ce)}try{Wo(5,t,t.return)}catch(ce){et(t,t.return,ce)}}break;case 1:Dn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return);break;case 5:if(Dn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return),t.flags&32){var h=t.stateNode;try{Sr(h,"")}catch(ce){et(t,t.return,ce)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,v=o!==null?o.memoizedProps:p,I=t.type,N=t.updateQueue;if(t.updateQueue=null,N!==null)try{I==="input"&&p.type==="radio"&&p.name!=null&&ro(h,p),fo(I,v);var U=fo(I,p);for(v=0;v<N.length;v+=2){var X=N[v],J=N[v+1];X==="style"?uo(h,J):X==="dangerouslySetInnerHTML"?ao(h,J):X==="children"?Sr(h,J):Y(h,X,J,U)}switch(I){case"input":so(h,p);break;case"textarea":Js(h,p);break;case"select":var K=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var ie=p.value;ie!=null?sr(h,!!p.multiple,ie,!1):K!==!!p.multiple&&(p.defaultValue!=null?sr(h,!!p.multiple,p.defaultValue,!0):sr(h,!!p.multiple,p.multiple?[]:"",!1))}h[Lo]=p}catch(ce){et(t,t.return,ce)}}break;case 6:if(Dn(r,t),Qn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ce){et(t,t.return,ce)}}break;case 3:if(Dn(r,t),Qn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Rn(r.containerInfo)}catch(ce){et(t,t.return,ce)}break;case 4:Dn(r,t),Qn(t);break;case 13:Dn(r,t),Qn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(zc=$e())),u&4&&pp(t);break;case 22:if(X=o!==null&&o.memoizedState!==null,t.mode&1?(Ot=(U=Ot)||X,Dn(r,t),Ot=U):Dn(r,t),Qn(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!X&&(t.mode&1)!==0)for(le=t,X=t.child;X!==null;){for(J=le=X;le!==null;){switch(K=le,ie=K.child,K.tag){case 0:case 11:case 14:case 15:Wo(4,K,K.return);break;case 1:Li(K,K.return);var ue=K.stateNode;if(typeof ue.componentWillUnmount=="function"){u=K,o=K.return;try{r=u,ue.props=r.memoizedProps,ue.state=r.memoizedState,ue.componentWillUnmount()}catch(ce){et(u,o,ce)}}break;case 5:Li(K,K.return);break;case 22:if(K.memoizedState!==null){vp(J);continue}}ie!==null?(ie.return=K,le=ie):vp(J)}X=X.sibling}e:for(X=null,J=t;;){if(J.tag===5){if(X===null){X=J;try{h=J.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(I=J.stateNode,N=J.memoizedProps.style,v=N!=null&&N.hasOwnProperty("display")?N.display:null,I.style.display=lo("display",v))}catch(ce){et(t,t.return,ce)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=U?"":J.memoizedProps}catch(ce){et(t,t.return,ce)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===t)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===t)break e;for(;J.sibling===null;){if(J.return===null||J.return===t)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Dn(r,t),Qn(t),u&4&&pp(t);break;case 21:break;default:Dn(r,t),Qn(t)}}function Qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(hp(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Sr(h,""),u.flags&=-33);var p=dp(t);jc(t,p,h);break;case 3:case 4:var v=u.stateNode.containerInfo,I=dp(t);Fc(t,I,v);break;default:throw Error(n(161))}}catch(N){et(t,t.return,N)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function zv(t,r,o){le=t,gp(t)}function gp(t,r,o){for(var u=(t.mode&1)!==0;le!==null;){var h=le,p=h.child;if(h.tag===22&&u){var v=h.memoizedState!==null||wl;if(!v){var I=h.alternate,N=I!==null&&I.memoizedState!==null||Ot;I=wl;var U=Ot;if(wl=v,(Ot=N)&&!U)for(le=h;le!==null;)v=le,N=v.child,v.tag===22&&v.memoizedState!==null?_p(h):N!==null?(N.return=v,le=N):_p(h);for(;p!==null;)le=p,gp(p),p=p.sibling;le=h,wl=I,Ot=U}yp(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,le=p):yp(t)}}function yp(t){for(;le!==null;){var r=le;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ot||Tl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ot)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:xn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&vf(r,p,u);break;case 3:var v=r.updateQueue;if(v!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}vf(r,v,o)}break;case 5:var I=r.stateNode;if(o===null&&r.flags&4){o=I;var N=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&o.focus();break;case"img":N.src&&(o.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var X=U.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&Rn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ot||r.flags&512&&Lc(r)}catch(K){et(r,r.return,K)}}if(r===t){le=null;break}if(o=r.sibling,o!==null){o.return=r.return,le=o;break}le=r.return}}function vp(t){for(;le!==null;){var r=le;if(r===t){le=null;break}var o=r.sibling;if(o!==null){o.return=r.return,le=o;break}le=r.return}}function _p(t){for(;le!==null;){var r=le;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Tl(4,r)}catch(N){et(r,o,N)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(N){et(r,h,N)}}var p=r.return;try{Lc(r)}catch(N){et(r,p,N)}break;case 5:var v=r.return;try{Lc(r)}catch(N){et(r,v,N)}}}catch(N){et(r,r.return,N)}if(r===t){le=null;break}var I=r.sibling;if(I!==null){I.return=r.return,le=I;break}le=r.return}}var Bv=Math.ceil,Il=re.ReactCurrentDispatcher,bc=re.ReactCurrentOwner,yn=re.ReactCurrentBatchConfig,Me=0,Et=null,at=null,Ct=0,on=0,Fi=Lr(0),mt=0,Qo=null,Ms=0,Sl=0,Uc=0,Ko=null,Qt=null,zc=0,ji=1/0,_r=null,Al=!1,Bc=null,Br=null,Cl=!1,$r=null,Rl=0,Xo=0,$c=null,Pl=-1,Nl=0;function Bt(){return(Me&6)!==0?$e():Pl!==-1?Pl:Pl=$e()}function qr(t){return(t.mode&1)===0?1:(Me&2)!==0&&Ct!==0?Ct&-Ct:Av.transition!==null?(Nl===0&&(Nl=Ts()),Nl):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:So(t.type)),t)}function Mn(t,r,o,u){if(50<Xo)throw Xo=0,$c=null,Error(n(185));Pr(t,o,u),((Me&2)===0||t!==Et)&&(t===Et&&((Me&2)===0&&(Sl|=o),mt===4&&Hr(t,Ct)),Kt(t,u),o===1&&Me===0&&(r.mode&1)===0&&(ji=$e()+500,rl&&jr()))}function Kt(t,r){var o=t.callbackNode;ar(t,r);var u=ws(t,t===Et?Ct:0);if(u===0)o!==null&&_o(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&_o(o),r===1)t.tag===0?Sv(wp.bind(null,t)):of(wp.bind(null,t)),Ev(function(){(Me&6)===0&&jr()}),o=null;else{switch(kr(u)){case 1:o=_s;break;case 4:o=Ar;break;case 16:o=cn;break;case 536870912:o=Na;break;default:o=cn}o=Np(o,Ep.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Ep(t,r){if(Pl=-1,Nl=0,(Me&6)!==0)throw Error(n(327));var o=t.callbackNode;if(bi()&&t.callbackNode!==o)return null;var u=ws(t,t===Et?Ct:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=kl(t,u);else{r=u;var h=Me;Me|=2;var p=Ip();(Et!==t||Ct!==r)&&(_r=null,ji=$e()+500,Ls(t,r));do try{Hv();break}catch(I){Tp(t,I)}while(!0);ac(),Il.current=p,Me=h,at!==null?r=0:(Et=null,Ct=0,r=mt)}if(r!==0){if(r===2&&(h=en(t),h!==0&&(u=h,r=qc(t,h))),r===1)throw o=Qo,Ls(t,0),Hr(t,u),Kt(t,$e()),o;if(r===6)Hr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!$v(h)&&(r=kl(t,u),r===2&&(p=en(t),p!==0&&(u=p,r=qc(t,p))),r===1))throw o=Qo,Ls(t,0),Hr(t,u),Kt(t,$e()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Fs(t,Qt,_r);break;case 3:if(Hr(t,u),(u&130023424)===u&&(r=zc+500-$e(),10<r)){if(ws(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Bt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Xu(Fs.bind(null,t,Qt,_r),r);break}Fs(t,Qt,_r);break;case 4:if(Hr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var v=31-bt(u);p=1<<v,v=r[v],v>h&&(h=v),u&=~p}if(u=h,u=$e()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Bv(u/1960))-u,10<u){t.timeoutHandle=Xu(Fs.bind(null,t,Qt,_r),u);break}Fs(t,Qt,_r);break;case 5:Fs(t,Qt,_r);break;default:throw Error(n(329))}}}return Kt(t,$e()),t.callbackNode===o?Ep.bind(null,t):null}function qc(t,r){var o=Ko;return t.current.memoizedState.isDehydrated&&(Ls(t,r).flags|=256),t=kl(t,r),t!==2&&(r=Qt,Qt=o,r!==null&&Hc(r)),t}function Hc(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function $v(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Nn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hr(t,r){for(r&=~Uc,r&=~Sl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-bt(r),u=1<<o;t[o]=-1,r&=~u}}function wp(t){if((Me&6)!==0)throw Error(n(327));bi();var r=ws(t,0);if((r&1)===0)return Kt(t,$e()),null;var o=kl(t,r);if(t.tag!==0&&o===2){var u=en(t);u!==0&&(r=u,o=qc(t,u))}if(o===1)throw o=Qo,Ls(t,0),Hr(t,r),Kt(t,$e()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Fs(t,Qt,_r),Kt(t,$e()),null}function Gc(t,r){var o=Me;Me|=1;try{return t(r)}finally{Me=o,Me===0&&(ji=$e()+500,rl&&jr())}}function Os(t){$r!==null&&$r.tag===0&&(Me&6)===0&&bi();var r=Me;Me|=1;var o=yn.transition,u=Ne;try{if(yn.transition=null,Ne=1,t)return t()}finally{Ne=u,yn.transition=o,Me=r,(Me&6)===0&&jr()}}function Wc(){on=Fi.current,We(Fi)}function Ls(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,_v(o)),at!==null)for(o=at.return;o!==null;){var u=o;switch(nc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&tl();break;case 3:Mi(),We(Ht),We(Vt),mc();break;case 5:fc(u);break;case 4:Mi();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:lc(u.type._context);break;case 22:case 23:Wc()}o=o.return}if(Et=t,at=t=Gr(t.current,null),Ct=on=r,mt=0,Qo=null,Uc=Sl=Ms=0,Qt=Ko=null,xs!==null){for(r=0;r<xs.length;r++)if(o=xs[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var v=p.next;p.next=h,u.next=v}o.pending=u}xs=null}return t}function Tp(t,r){do{var o=at;try{if(ac(),fl.current=yl,pl){for(var u=Je.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}pl=!1}if(Ds=0,_t=pt=Je=null,Bo=!1,$o=0,bc.current=null,o===null||o.return===null){mt=1,Qo=r,at=null;break}e:{var p=t,v=o.return,I=o,N=r;if(r=Ct,I.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var U=N,X=I,J=X.tag;if((X.mode&1)===0&&(J===0||J===11||J===15)){var K=X.alternate;K?(X.updateQueue=K.updateQueue,X.memoizedState=K.memoizedState,X.lanes=K.lanes):(X.updateQueue=null,X.memoizedState=null)}var ie=Wf(v);if(ie!==null){ie.flags&=-257,Qf(ie,v,I,p,r),ie.mode&1&&Gf(p,U,r),r=ie,N=U;var ue=r.updateQueue;if(ue===null){var ce=new Set;ce.add(N),r.updateQueue=ce}else ue.add(N);break e}else{if((r&1)===0){Gf(p,U,r),Qc();break e}N=Error(n(426))}}else if(Xe&&I.mode&1){var rt=Wf(v);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),Qf(rt,v,I,p,r),ic(Oi(N,I));break e}}p=N=Oi(N,I),mt!==4&&(mt=2),Ko===null?Ko=[p]:Ko.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var F=qf(p,N,r);yf(p,F);break e;case 1:I=N;var k=p.type,j=p.stateNode;if((p.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Br===null||!Br.has(j)))){p.flags|=65536,r&=-r,p.lanes|=r;var ee=Hf(p,I,r);yf(p,ee);break e}}p=p.return}while(p!==null)}Ap(o)}catch(he){r=he,at===o&&o!==null&&(at=o=o.return);continue}break}while(!0)}function Ip(){var t=Il.current;return Il.current=yl,t===null?yl:t}function Qc(){(mt===0||mt===3||mt===2)&&(mt=4),Et===null||(Ms&268435455)===0&&(Sl&268435455)===0||Hr(Et,Ct)}function kl(t,r){var o=Me;Me|=2;var u=Ip();(Et!==t||Ct!==r)&&(_r=null,Ls(t,r));do try{qv();break}catch(h){Tp(t,h)}while(!0);if(ac(),Me=o,Il.current=u,at!==null)throw Error(n(261));return Et=null,Ct=0,mt}function qv(){for(;at!==null;)Sp(at)}function Hv(){for(;at!==null&&!Ra();)Sp(at)}function Sp(t){var r=Pp(t.alternate,t,on);t.memoizedProps=t.pendingProps,r===null?Ap(t):at=r,bc.current=null}function Ap(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=Fv(o,r,on),o!==null){at=o;return}}else{if(o=jv(o,r),o!==null){o.flags&=32767,at=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,at=null;return}}if(r=r.sibling,r!==null){at=r;return}at=r=t}while(r!==null);mt===0&&(mt=5)}function Fs(t,r,o){var u=Ne,h=yn.transition;try{yn.transition=null,Ne=1,Gv(t,r,o,u)}finally{yn.transition=h,Ne=u}return null}function Gv(t,r,o,u){do bi();while($r!==null);if((Me&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(ze(t,p),t===Et&&(at=Et=null,Ct=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Cl||(Cl=!0,Np(cn,function(){return bi(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=yn.transition,yn.transition=null;var v=Ne;Ne=1;var I=Me;Me|=4,bc.current=null,Uv(t,o),mp(o,t),dv(Qu),Vr=!!Wu,Qu=Wu=null,t.current=o,zv(o),xu(),Me=I,Ne=v,yn.transition=p}else t.current=o;if(Cl&&(Cl=!1,$r=t,Rl=h),p=t.pendingLanes,p===0&&(Br=null),ka(o.stateNode),Kt(t,$e()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(Al)throw Al=!1,t=Bc,Bc=null,t;return(Rl&1)!==0&&t.tag!==0&&bi(),p=t.pendingLanes,(p&1)!==0?t===$c?Xo++:(Xo=0,$c=t):Xo=0,jr(),null}function bi(){if($r!==null){var t=kr(Rl),r=yn.transition,o=Ne;try{if(yn.transition=null,Ne=16>t?16:t,$r===null)var u=!1;else{if(t=$r,$r=null,Rl=0,(Me&6)!==0)throw Error(n(331));var h=Me;for(Me|=4,le=t.current;le!==null;){var p=le,v=p.child;if((le.flags&16)!==0){var I=p.deletions;if(I!==null){for(var N=0;N<I.length;N++){var U=I[N];for(le=U;le!==null;){var X=le;switch(X.tag){case 0:case 11:case 15:Wo(8,X,p)}var J=X.child;if(J!==null)J.return=X,le=J;else for(;le!==null;){X=le;var K=X.sibling,ie=X.return;if(cp(X),X===U){le=null;break}if(K!==null){K.return=ie,le=K;break}le=ie}}}var ue=p.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var rt=ce.sibling;ce.sibling=null,ce=rt}while(ce!==null)}}le=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,le=v;else e:for(;le!==null;){if(p=le,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Wo(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,le=F;break e}le=p.return}}var k=t.current;for(le=k;le!==null;){v=le;var j=v.child;if((v.subtreeFlags&2064)!==0&&j!==null)j.return=v,le=j;else e:for(v=k;le!==null;){if(I=le,(I.flags&2048)!==0)try{switch(I.tag){case 0:case 11:case 15:Tl(9,I)}}catch(he){et(I,I.return,he)}if(I===v){le=null;break e}var ee=I.sibling;if(ee!==null){ee.return=I.return,le=ee;break e}le=I.return}}if(Me=h,jr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Es,t)}catch{}u=!0}return u}finally{Ne=o,yn.transition=r}}return!1}function Cp(t,r,o){r=Oi(o,r),r=qf(t,r,1),t=Ur(t,r,1),r=Bt(),t!==null&&(Pr(t,1,r),Kt(t,r))}function et(t,r,o){if(t.tag===3)Cp(t,t,o);else for(;r!==null;){if(r.tag===3){Cp(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Br===null||!Br.has(u))){t=Oi(o,t),t=Hf(r,t,1),r=Ur(r,t,1),t=Bt(),r!==null&&(Pr(r,1,t),Kt(r,t));break}}r=r.return}}function Wv(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Bt(),t.pingedLanes|=t.suspendedLanes&o,Et===t&&(Ct&o)===o&&(mt===4||mt===3&&(Ct&130023424)===Ct&&500>$e()-zc?Ls(t,0):Uc|=o),Kt(t,r)}function Rp(t,r){r===0&&((t.mode&1)===0?r=1:(r=li,li<<=1,(li&130023424)===0&&(li=4194304)));var o=Bt();t=gr(t,r),t!==null&&(Pr(t,r,o),Kt(t,o))}function Qv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Rp(t,o)}function Kv(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),Rp(t,o)}var Pp;Pp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Ht.current)Wt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Wt=!1,Lv(t,r,o);Wt=(t.flags&131072)!==0}else Wt=!1,Xe&&(r.flags&1048576)!==0&&af(r,il,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;El(t,r),t=r.pendingProps;var h=Ri(r,Vt.current);Di(r,o),h=vc(null,r,u,t,h,o);var p=_c();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gt(u)?(p=!0,nl(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,hc(r),h.updater=vl,r.stateNode=h,h._reactInternals=r,Ac(r,u,t,o),r=Nc(null,r,u,!0,p,o)):(r.tag=0,Xe&&p&&tc(r),zt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(El(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Yv(u),t=xn(u,t),h){case 0:r=Pc(null,r,u,t,o);break e;case 1:r=ep(null,r,u,t,o);break e;case 11:r=Kf(null,r,u,t,o);break e;case 14:r=Xf(null,r,u,xn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),Pc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),ep(t,r,u,h,o);case 3:e:{if(tp(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,gf(t,r),hl(r,u,null,o);var v=r.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Oi(Error(n(423)),r),r=np(t,r,u,o,h);break e}else if(u!==h){h=Oi(Error(n(424)),r),r=np(t,r,u,o,h);break e}else for(sn=Or(r.stateNode.containerInfo.firstChild),rn=r,Xe=!0,kn=null,o=pf(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ki(),u===h){r=vr(t,r,o);break e}zt(t,r,u,o)}r=r.child}return r;case 5:return _f(r),t===null&&sc(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,v=h.children,Ku(u,h)?v=null:p!==null&&Ku(u,p)&&(r.flags|=32),Zf(t,r),zt(t,r,v,o),r.child;case 6:return t===null&&sc(r),null;case 13:return rp(t,r,o);case 4:return dc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=xi(r,null,u,o):zt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),Kf(t,r,u,h,o);case 7:return zt(t,r,r.pendingProps,o),r.child;case 8:return zt(t,r,r.pendingProps.children,o),r.child;case 12:return zt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,v=h.value,qe(ll,u._currentValue),u._currentValue=v,p!==null)if(Nn(p.value,v)){if(p.children===h.children&&!Ht.current){r=vr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var I=p.dependencies;if(I!==null){v=p.child;for(var N=I.firstContext;N!==null;){if(N.context===u){if(p.tag===1){N=yr(-1,o&-o),N.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var X=U.pending;X===null?N.next=N:(N.next=X.next,X.next=N),U.pending=N}}p.lanes|=o,N=p.alternate,N!==null&&(N.lanes|=o),uc(p.return,o,r),I.lanes|=o;break}N=N.next}}else if(p.tag===10)v=p.type===r.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(n(341));v.lanes|=o,I=v.alternate,I!==null&&(I.lanes|=o),uc(v,o,r),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===r){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}zt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Di(r,o),h=mn(h),u=u(h),r.flags|=1,zt(t,r,u,o),r.child;case 14:return u=r.type,h=xn(u,r.pendingProps),h=xn(u.type,h),Xf(t,r,u,h,o);case 15:return Yf(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),El(t,r),r.tag=1,Gt(u)?(t=!0,nl(r)):t=!1,Di(r,o),Bf(r,u,h),Ac(r,u,h,o),Nc(null,r,u,!0,t,o);case 19:return ip(t,r,o);case 22:return Jf(t,r,o)}throw Error(n(156,r.tag))};function Np(t,r){return oi(t,r)}function Xv(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,r,o,u){return new Xv(t,r,o,u)}function Kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yv(t){if(typeof t=="function")return Kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===kt)return 14}return 2}function Gr(t,r){var o=t.alternate;return o===null?(o=vn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function xl(t,r,o,u,h,p){var v=2;if(u=t,typeof t=="function")Kc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case V:return js(o.children,h,p,r);case S:v=8,h|=8;break;case R:return t=vn(12,o,r,h|2),t.elementType=R,t.lanes=p,t;case A:return t=vn(13,o,r,h),t.elementType=A,t.lanes=p,t;case tt:return t=vn(19,o,r,h),t.elementType=tt,t.lanes=p,t;case Ue:return Vl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x:v=10;break e;case D:v=9;break e;case O:v=11;break e;case kt:v=14;break e;case xt:v=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=vn(v,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function js(t,r,o,u){return t=vn(7,t,u,r),t.lanes=o,t}function Vl(t,r,o,u){return t=vn(22,t,u,r),t.elementType=Ue,t.lanes=o,t.stateNode={isHidden:!1},t}function Xc(t,r,o){return t=vn(6,t,null,r),t.lanes=o,t}function Yc(t,r,o){return r=vn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Jv(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rr(0),this.expirationTimes=Rr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Jc(t,r,o,u,h,p,v,I,N){return t=new Jv(t,r,o,I,N),r===1?(r=1,p===!0&&(r|=8)):r=0,p=vn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},hc(p),t}function Zv(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ee,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function kp(t){if(!t)return Fr;t=t._reactInternals;e:{if(Tn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Gt(o))return rf(t,o,r)}return r}function xp(t,r,o,u,h,p,v,I,N){return t=Jc(o,u,!0,t,h,p,v,I,N),t.context=kp(null),o=t.current,u=Bt(),h=qr(o),p=yr(u,h),p.callback=r??null,Ur(o,p,h),t.current.lanes=h,Pr(t,h,u),Kt(t,u),t}function Dl(t,r,o,u){var h=r.current,p=Bt(),v=qr(h);return o=kp(o),r.context===null?r.context=o:r.pendingContext=o,r=yr(p,v),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Ur(h,r,v),t!==null&&(Mn(t,h,v,p),cl(t,h,v)),v}function Ml(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Zc(t,r){Vp(t,r),(t=t.alternate)&&Vp(t,r)}function e_(){return null}var Dp=typeof reportError=="function"?reportError:function(t){console.error(t)};function eh(t){this._internalRoot=t}Ol.prototype.render=eh.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Dl(t,r,null,null)},Ol.prototype.unmount=eh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Os(function(){Dl(null,t,null,null)}),r[dr]=null}};function Ol(t){this._internalRoot=t}Ol.prototype.unstable_scheduleHydration=function(t){if(t){var r=Oa();t={blockedOn:null,target:t,priority:r};for(var o=0;o<zn.length&&r!==0&&r<zn[o].priority;o++);zn.splice(o,0,t),o===0&&ja(t)}};function th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ll(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mp(){}function t_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=Ml(v);p.call(U)}}var v=xp(r,u,t,0,null,!1,!1,"",Mp);return t._reactRootContainer=v,t[dr]=v.current,Mo(t.nodeType===8?t.parentNode:t),Os(),v}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var I=u;u=function(){var U=Ml(N);I.call(U)}}var N=Jc(t,0,!1,null,null,!1,!1,"",Mp);return t._reactRootContainer=N,t[dr]=N.current,Mo(t.nodeType===8?t.parentNode:t),Os(function(){Dl(r,N,o,u)}),N}function Fl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var v=p;if(typeof h=="function"){var I=h;h=function(){var N=Ml(v);I.call(N)}}Dl(r,v,t,h)}else v=t_(o,r,t,h,u);return Ml(v)}Da=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Cr(r.pendingLanes);o!==0&&(Nr(r,o|1),Kt(r,$e()),(Me&6)===0&&(ji=$e()+500,jr()))}break;case 13:Os(function(){var u=gr(t,1);if(u!==null){var h=Bt();Mn(u,t,1,h)}}),Zc(t,1)}},ui=function(t){if(t.tag===13){var r=gr(t,134217728);if(r!==null){var o=Bt();Mn(r,t,134217728,o)}Zc(t,134217728)}},Ma=function(t){if(t.tag===13){var r=qr(t),o=gr(t,r);if(o!==null){var u=Bt();Mn(o,t,r,u)}Zc(t,r)}},Oa=function(){return Ne},La=function(t,r){var o=Ne;try{return Ne=t,r()}finally{Ne=o}},ei=function(t,r,o){switch(r){case"input":if(so(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=el(u);if(!h)throw Error(n(90));Qs(u),so(u,h)}}}break;case"textarea":Js(t,o);break;case"select":r=o.value,r!=null&&sr(t,!!o.multiple,r,!1)}},ms=Gc,mo=Os;var n_={usingClientEntryPoint:!1,Events:[Fo,Ai,el,bn,po,Gc]},Yo={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r_={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vo(t),t===null?null:t.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||e_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{Es=jl.inject(r_),Zt=jl}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n_,Xt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!th(r))throw Error(n(200));return Zv(t,r,null,o)},Xt.createRoot=function(t,r){if(!th(t))throw Error(n(299));var o=!1,u="",h=Dp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Jc(t,1,!1,null,null,o,!1,u,h),t[dr]=r.current,Mo(t.nodeType===8?t.parentNode:t),new eh(r)},Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=vo(r),t=t===null?null:t.stateNode,t},Xt.flushSync=function(t){return Os(t)},Xt.hydrate=function(t,r,o){if(!Ll(r))throw Error(n(200));return Fl(null,t,r,!0,o)},Xt.hydrateRoot=function(t,r,o){if(!th(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",v=Dp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),r=xp(r,null,t,1,o??null,h,!1,p,v),t[dr]=r.current,Mo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Ol(r)},Xt.render=function(t,r,o){if(!Ll(r))throw Error(n(200));return Fl(null,t,r,!1,o)},Xt.unmountComponentAtNode=function(t){if(!Ll(t))throw Error(n(40));return t._reactRootContainer?(Os(function(){Fl(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1},Xt.unstable_batchedUpdates=Gc,Xt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Ll(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Fl(t,r,o,!1,u)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var Bp;function h_(){if(Bp)return sh.exports;Bp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),sh.exports=c_(),sh.exports}var $p;function d_(){if($p)return bl;$p=1;var s=h_();return bl.createRoot=s.createRoot,bl.hydrateRoot=s.hydrateRoot,bl}var f_=d_();const p_=()=>{};var qp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},m_=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const a=s[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[n++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[n++],d=s[n++],m=s[n++],y=((a&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const c=s[n++],d=s[n++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},sg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],d=a+1<s.length,m=d?s[a+1]:0,y=a+2<s.length,_=y?s[a+2]:0,w=c>>2,P=(c&3)<<4|m>>4;let C=(m&15)<<2|_>>6,b=_&63;y||(b=64,d||(C=64)),i.push(n[w],n[P],n[C],n[b])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(rg(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):m_(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=n[s.charAt(a++)],m=a<s.length?n[s.charAt(a)]:0;++a;const _=a<s.length?n[s.charAt(a)]:64;++a;const P=a<s.length?n[s.charAt(a)]:64;if(++a,c==null||m==null||_==null||P==null)throw new g_;const C=c<<2|m>>4;if(i.push(C),_!==64){const b=m<<4&240|_>>2;if(i.push(b),P!==64){const z=_<<6&192|P;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class g_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y_=function(s){const e=rg(s);return sg.encodeByteArray(e,!0)},Jl=function(s){return y_(s).replace(/\./g,"")},v_=function(s){try{return sg.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=()=>__().__FIREBASE_DEFAULTS__,w_=()=>{if(typeof process>"u"||typeof qp>"u")return;const s=qp.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},T_=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&v_(s[1]);return e&&JSON.parse(e)},Uh=()=>{try{return p_()||E_()||w_()||T_()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},I_=s=>{var e,n;return(n=(e=Uh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},S_=s=>{const e=I_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ig=()=>{var s;return(s=Uh())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C_(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Jl(JSON.stringify(n)),Jl(JSON.stringify(d)),""].join(".")}const ra={};function P_(){const s={prod:[],emulator:[]};for(const e of Object.keys(ra))ra[e]?s.emulator.push(e):s.prod.push(e);return s}function N_(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Hp=!1;function k_(s,e){if(typeof window>"u"||typeof document>"u"||!zh(window.location.host)||ra[s]===e||ra[s]||Hp)return;ra[s]=e;function n(C){return`__firebase__banner__${C}`}const i="__firebase__banner",c=P_().prod.length>0;function d(){const C=document.getElementById(i);C&&C.remove()}function m(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function y(C,b){C.setAttribute("width","24"),C.setAttribute("id",b),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function _(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Hp=!0,d()},C}function w(C,b){C.setAttribute("id",b),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function P(){const C=N_(i),b=n("text"),z=document.getElementById(b)||document.createElement("span"),Q=n("learnmore"),q=document.getElementById(Q)||document.createElement("a"),Z=n("preprendIcon"),$=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const Y=C.element;m(Y),w(q,Q);const re=_();y($,Z),Y.append($,z,q,re),document.body.appendChild(Y)}c?(z.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",P):P()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V_(){var s;const e=(s=Uh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D_(){return!V_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M_(){try{return typeof indexedDB=="object"}catch{return!1}}function O_(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="FirebaseError";class Yi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=L_,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,og.prototype.create)}}class og{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?F_(c,i):"Error",m=`${this.serviceName}: ${d} (${a}).`;return new Yi(a,m,i)}}function F_(s,e){return s.replace(j_,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const j_=/\{\$([^}]+)}/g;function Zl(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const c=s[a],d=e[a];if(Gp(c)&&Gp(d)){if(!Zl(c,d))return!1}else if(c!==d)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function Gp(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(s){return s&&s._delegate?s._delegate:s}class la{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new A_;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z_(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&d.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:U_(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U_(s){return s===bs?void 0:s}function z_(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new b_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(De||(De={}));const $_={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},q_=De.INFO,H_={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},G_=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=H_[e];if(a)console[a](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ag{constructor(e){this.name=e,this._logLevel=q_,this._logHandler=G_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const W_=(s,e)=>e.some(n=>s instanceof n);let Wp,Qp;function Q_(){return Wp||(Wp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K_(){return Qp||(Qp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lg=new WeakMap,mh=new WeakMap,ug=new WeakMap,ah=new WeakMap,Bh=new WeakMap;function X_(s){const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(Kr(s.result)),a()},d=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&lg.set(n,s)}).catch(()=>{}),Bh.set(e,s),e}function Y_(s){if(mh.has(s))return;const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});mh.set(s,e)}let gh={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return mh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ug.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function J_(s){gh=s(gh)}function Z_(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(lh(this),e,...n);return ug.set(i,e.sort?e.sort():[e]),Kr(i)}:K_().includes(s)?function(...e){return s.apply(lh(this),e),Kr(lg.get(this))}:function(...e){return Kr(s.apply(lh(this),e))}}function e0(s){return typeof s=="function"?Z_(s):(s instanceof IDBTransaction&&Y_(s),W_(s,Q_())?new Proxy(s,gh):s)}function Kr(s){if(s instanceof IDBRequest)return X_(s);if(ah.has(s))return ah.get(s);const e=e0(s);return e!==s&&(ah.set(s,e),Bh.set(e,s)),e}const lh=s=>Bh.get(s);function t0(s,e,{blocked:n,upgrade:i,blocking:a,terminated:c}={}){const d=indexedDB.open(s,e),m=Kr(d);return i&&d.addEventListener("upgradeneeded",y=>{i(Kr(d.result),y.oldVersion,y.newVersion,Kr(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",_=>a(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const n0=["get","getKey","getAll","getAllKeys","count"],r0=["put","add","delete","clear"],uh=new Map;function Kp(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(uh.get(e))return uh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=r0.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||n0.includes(n)))return;const c=async function(d,...m){const y=this.transaction(d,a?"readwrite":"readonly");let _=y.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),a&&y.done]))[0]};return uh.set(e,c),c}J_(s=>({...s,get:(e,n,i)=>Kp(e,n)||s.get(e,n,i),has:(e,n)=>!!Kp(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i0(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function i0(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yh="@firebase/app",Xp="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new ag("@firebase/app"),o0="@firebase/app-compat",a0="@firebase/analytics-compat",l0="@firebase/analytics",u0="@firebase/app-check-compat",c0="@firebase/app-check",h0="@firebase/auth",d0="@firebase/auth-compat",f0="@firebase/database",p0="@firebase/data-connect",m0="@firebase/database-compat",g0="@firebase/functions",y0="@firebase/functions-compat",v0="@firebase/installations",_0="@firebase/installations-compat",E0="@firebase/messaging",w0="@firebase/messaging-compat",T0="@firebase/performance",I0="@firebase/performance-compat",S0="@firebase/remote-config",A0="@firebase/remote-config-compat",C0="@firebase/storage",R0="@firebase/storage-compat",P0="@firebase/firestore",N0="@firebase/ai",k0="@firebase/firestore-compat",x0="firebase",V0="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="[DEFAULT]",D0={[yh]:"fire-core",[o0]:"fire-core-compat",[l0]:"fire-analytics",[a0]:"fire-analytics-compat",[c0]:"fire-app-check",[u0]:"fire-app-check-compat",[h0]:"fire-auth",[d0]:"fire-auth-compat",[f0]:"fire-rtdb",[p0]:"fire-data-connect",[m0]:"fire-rtdb-compat",[g0]:"fire-fn",[y0]:"fire-fn-compat",[v0]:"fire-iid",[_0]:"fire-iid-compat",[E0]:"fire-fcm",[w0]:"fire-fcm-compat",[T0]:"fire-perf",[I0]:"fire-perf-compat",[S0]:"fire-rc",[A0]:"fire-rc-compat",[C0]:"fire-gcs",[R0]:"fire-gcs-compat",[P0]:"fire-fst",[k0]:"fire-fst-compat",[N0]:"fire-vertex","fire-js":"fire-js",[x0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,M0=new Map,_h=new Map;function Yp(s,e){try{s.container.addComponent(e)}catch(n){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function tu(s){const e=s.name;if(_h.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;_h.set(e,s);for(const n of eu.values())Yp(n,s);for(const n of M0.values())Yp(n,s);return!0}function O0(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function L0(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new og("app","Firebase",F0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=V0;function cg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:vh,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Xr.create("bad-app-name",{appName:String(a)});if(n||(n=ig()),!n)throw Xr.create("no-options");const c=eu.get(a);if(c){if(Zl(n,c.options)&&Zl(i,c.config))return c;throw Xr.create("duplicate-app",{appName:a})}const d=new B_(a);for(const y of _h.values())d.addComponent(y);const m=new j0(n,i,d);return eu.set(a,m),m}function U0(s=vh){const e=eu.get(s);if(!e&&s===vh&&ig())return cg();if(!e)throw Xr.create("no-app",{appName:s});return e}function qi(s,e,n){var i;let a=(i=D0[s])!==null&&i!==void 0?i:s;n&&(a+=`-${n}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(m.join(" "));return}tu(new la(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="firebase-heartbeat-database",B0=1,ua="firebase-heartbeat-store";let ch=null;function hg(){return ch||(ch=t0(z0,B0,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ua)}catch(n){console.warn(n)}}}}).catch(s=>{throw Xr.create("idb-open",{originalErrorMessage:s.message})})),ch}async function $0(s){try{const n=(await hg()).transaction(ua),i=await n.objectStore(ua).get(dg(s));return await n.done,i}catch(e){if(e instanceof Yi)Er.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Er.warn(n.message)}}}async function Jp(s,e){try{const i=(await hg()).transaction(ua,"readwrite");await i.objectStore(ua).put(e,dg(s)),await i.done}catch(n){if(n instanceof Yi)Er.warn(n.message);else{const i=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Er.warn(i.message)}}}function dg(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=1024,H0=30;class G0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Q0(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Zp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>H0){const d=K0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Er.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zp(),{heartbeatsToSend:i,unsentEntries:a}=W0(this._heartbeatsCache.heartbeats),c=Jl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Er.warn(n),""}}}function Zp(){return new Date().toISOString().substring(0,10)}function W0(s,e=q0){const n=[];let i=s.slice();for(const a of s){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),em(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),em(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Q0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M_()?O_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Jp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Jp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function em(s){return Jl(JSON.stringify({version:2,heartbeats:s})).length}function K0(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(s){tu(new la("platform-logger",e=>new s0(e),"PRIVATE")),tu(new la("heartbeat",e=>new G0(e),"PRIVATE")),qi(yh,Xp,s),qi(yh,Xp,"esm2017"),qi("fire-js","")}X0("");var Y0="firebase",J0="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(Y0,J0,"app");var tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yr,fg;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,S){function R(){}R.prototype=S.prototype,V.D=S.prototype,V.prototype=new R,V.prototype.constructor=V,V.C=function(x,D,O){for(var A=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)A[tt-2]=arguments[tt];return S.prototype[D].apply(x,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,S,R){R||(R=0);var x=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)x[D]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(D=0;16>D;++D)x[D]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=V.g[0],R=V.g[1],D=V.g[2];var O=V.g[3],A=S+(O^R&(D^O))+x[0]+3614090360&4294967295;S=R+(A<<7&4294967295|A>>>25),A=O+(D^S&(R^D))+x[1]+3905402710&4294967295,O=S+(A<<12&4294967295|A>>>20),A=D+(R^O&(S^R))+x[2]+606105819&4294967295,D=O+(A<<17&4294967295|A>>>15),A=R+(S^D&(O^S))+x[3]+3250441966&4294967295,R=D+(A<<22&4294967295|A>>>10),A=S+(O^R&(D^O))+x[4]+4118548399&4294967295,S=R+(A<<7&4294967295|A>>>25),A=O+(D^S&(R^D))+x[5]+1200080426&4294967295,O=S+(A<<12&4294967295|A>>>20),A=D+(R^O&(S^R))+x[6]+2821735955&4294967295,D=O+(A<<17&4294967295|A>>>15),A=R+(S^D&(O^S))+x[7]+4249261313&4294967295,R=D+(A<<22&4294967295|A>>>10),A=S+(O^R&(D^O))+x[8]+1770035416&4294967295,S=R+(A<<7&4294967295|A>>>25),A=O+(D^S&(R^D))+x[9]+2336552879&4294967295,O=S+(A<<12&4294967295|A>>>20),A=D+(R^O&(S^R))+x[10]+4294925233&4294967295,D=O+(A<<17&4294967295|A>>>15),A=R+(S^D&(O^S))+x[11]+2304563134&4294967295,R=D+(A<<22&4294967295|A>>>10),A=S+(O^R&(D^O))+x[12]+1804603682&4294967295,S=R+(A<<7&4294967295|A>>>25),A=O+(D^S&(R^D))+x[13]+4254626195&4294967295,O=S+(A<<12&4294967295|A>>>20),A=D+(R^O&(S^R))+x[14]+2792965006&4294967295,D=O+(A<<17&4294967295|A>>>15),A=R+(S^D&(O^S))+x[15]+1236535329&4294967295,R=D+(A<<22&4294967295|A>>>10),A=S+(D^O&(R^D))+x[1]+4129170786&4294967295,S=R+(A<<5&4294967295|A>>>27),A=O+(R^D&(S^R))+x[6]+3225465664&4294967295,O=S+(A<<9&4294967295|A>>>23),A=D+(S^R&(O^S))+x[11]+643717713&4294967295,D=O+(A<<14&4294967295|A>>>18),A=R+(O^S&(D^O))+x[0]+3921069994&4294967295,R=D+(A<<20&4294967295|A>>>12),A=S+(D^O&(R^D))+x[5]+3593408605&4294967295,S=R+(A<<5&4294967295|A>>>27),A=O+(R^D&(S^R))+x[10]+38016083&4294967295,O=S+(A<<9&4294967295|A>>>23),A=D+(S^R&(O^S))+x[15]+3634488961&4294967295,D=O+(A<<14&4294967295|A>>>18),A=R+(O^S&(D^O))+x[4]+3889429448&4294967295,R=D+(A<<20&4294967295|A>>>12),A=S+(D^O&(R^D))+x[9]+568446438&4294967295,S=R+(A<<5&4294967295|A>>>27),A=O+(R^D&(S^R))+x[14]+3275163606&4294967295,O=S+(A<<9&4294967295|A>>>23),A=D+(S^R&(O^S))+x[3]+4107603335&4294967295,D=O+(A<<14&4294967295|A>>>18),A=R+(O^S&(D^O))+x[8]+1163531501&4294967295,R=D+(A<<20&4294967295|A>>>12),A=S+(D^O&(R^D))+x[13]+2850285829&4294967295,S=R+(A<<5&4294967295|A>>>27),A=O+(R^D&(S^R))+x[2]+4243563512&4294967295,O=S+(A<<9&4294967295|A>>>23),A=D+(S^R&(O^S))+x[7]+1735328473&4294967295,D=O+(A<<14&4294967295|A>>>18),A=R+(O^S&(D^O))+x[12]+2368359562&4294967295,R=D+(A<<20&4294967295|A>>>12),A=S+(R^D^O)+x[5]+4294588738&4294967295,S=R+(A<<4&4294967295|A>>>28),A=O+(S^R^D)+x[8]+2272392833&4294967295,O=S+(A<<11&4294967295|A>>>21),A=D+(O^S^R)+x[11]+1839030562&4294967295,D=O+(A<<16&4294967295|A>>>16),A=R+(D^O^S)+x[14]+4259657740&4294967295,R=D+(A<<23&4294967295|A>>>9),A=S+(R^D^O)+x[1]+2763975236&4294967295,S=R+(A<<4&4294967295|A>>>28),A=O+(S^R^D)+x[4]+1272893353&4294967295,O=S+(A<<11&4294967295|A>>>21),A=D+(O^S^R)+x[7]+4139469664&4294967295,D=O+(A<<16&4294967295|A>>>16),A=R+(D^O^S)+x[10]+3200236656&4294967295,R=D+(A<<23&4294967295|A>>>9),A=S+(R^D^O)+x[13]+681279174&4294967295,S=R+(A<<4&4294967295|A>>>28),A=O+(S^R^D)+x[0]+3936430074&4294967295,O=S+(A<<11&4294967295|A>>>21),A=D+(O^S^R)+x[3]+3572445317&4294967295,D=O+(A<<16&4294967295|A>>>16),A=R+(D^O^S)+x[6]+76029189&4294967295,R=D+(A<<23&4294967295|A>>>9),A=S+(R^D^O)+x[9]+3654602809&4294967295,S=R+(A<<4&4294967295|A>>>28),A=O+(S^R^D)+x[12]+3873151461&4294967295,O=S+(A<<11&4294967295|A>>>21),A=D+(O^S^R)+x[15]+530742520&4294967295,D=O+(A<<16&4294967295|A>>>16),A=R+(D^O^S)+x[2]+3299628645&4294967295,R=D+(A<<23&4294967295|A>>>9),A=S+(D^(R|~O))+x[0]+4096336452&4294967295,S=R+(A<<6&4294967295|A>>>26),A=O+(R^(S|~D))+x[7]+1126891415&4294967295,O=S+(A<<10&4294967295|A>>>22),A=D+(S^(O|~R))+x[14]+2878612391&4294967295,D=O+(A<<15&4294967295|A>>>17),A=R+(O^(D|~S))+x[5]+4237533241&4294967295,R=D+(A<<21&4294967295|A>>>11),A=S+(D^(R|~O))+x[12]+1700485571&4294967295,S=R+(A<<6&4294967295|A>>>26),A=O+(R^(S|~D))+x[3]+2399980690&4294967295,O=S+(A<<10&4294967295|A>>>22),A=D+(S^(O|~R))+x[10]+4293915773&4294967295,D=O+(A<<15&4294967295|A>>>17),A=R+(O^(D|~S))+x[1]+2240044497&4294967295,R=D+(A<<21&4294967295|A>>>11),A=S+(D^(R|~O))+x[8]+1873313359&4294967295,S=R+(A<<6&4294967295|A>>>26),A=O+(R^(S|~D))+x[15]+4264355552&4294967295,O=S+(A<<10&4294967295|A>>>22),A=D+(S^(O|~R))+x[6]+2734768916&4294967295,D=O+(A<<15&4294967295|A>>>17),A=R+(O^(D|~S))+x[13]+1309151649&4294967295,R=D+(A<<21&4294967295|A>>>11),A=S+(D^(R|~O))+x[4]+4149444226&4294967295,S=R+(A<<6&4294967295|A>>>26),A=O+(R^(S|~D))+x[11]+3174756917&4294967295,O=S+(A<<10&4294967295|A>>>22),A=D+(S^(O|~R))+x[2]+718787259&4294967295,D=O+(A<<15&4294967295|A>>>17),A=R+(O^(D|~S))+x[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,V.g[2]=V.g[2]+D&4294967295,V.g[3]=V.g[3]+O&4294967295}i.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var R=S-this.blockSize,x=this.B,D=this.h,O=0;O<S;){if(D==0)for(;O<=R;)a(this,V,O),O+=this.blockSize;if(typeof V=="string"){for(;O<S;)if(x[D++]=V.charCodeAt(O++),D==this.blockSize){a(this,x),D=0;break}}else for(;O<S;)if(x[D++]=V[O++],D==this.blockSize){a(this,x),D=0;break}}this.h=D,this.o+=S},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var R=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=R&255,R/=256;for(this.u(V),V=Array(16),S=R=0;4>S;++S)for(var x=0;32>x;x+=8)V[R++]=this.g[S]>>>x&255;return V};function c(V,S){var R=m;return Object.prototype.hasOwnProperty.call(R,V)?R[V]:R[V]=S(V)}function d(V,S){this.h=S;for(var R=[],x=!0,D=V.length-1;0<=D;D--){var O=V[D]|0;x&&O==S||(R[D]=O,x=!1)}this.g=R}var m={};function y(V){return-128<=V&&128>V?c(V,function(S){return new d([S|0],0>S?-1:0)}):new d([V|0],0>V?-1:0)}function _(V){if(isNaN(V)||!isFinite(V))return P;if(0>V)return q(_(-V));for(var S=[],R=1,x=0;V>=R;x++)S[x]=V/R|0,R*=4294967296;return new d(S,0)}function w(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return q(w(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=_(Math.pow(S,8)),x=P,D=0;D<V.length;D+=8){var O=Math.min(8,V.length-D),A=parseInt(V.substring(D,D+O),S);8>O?(O=_(Math.pow(S,O)),x=x.j(O).add(_(A))):(x=x.j(R),x=x.add(_(A)))}return x}var P=y(0),C=y(1),b=y(16777216);s=d.prototype,s.m=function(){if(Q(this))return-q(this).m();for(var V=0,S=1,R=0;R<this.g.length;R++){var x=this.i(R);V+=(0<=x?x:4294967296+x)*S,S*=4294967296}return V},s.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(z(this))return"0";if(Q(this))return"-"+q(this).toString(V);for(var S=_(Math.pow(V,6)),R=this,x="";;){var D=re(R,S).g;R=Z(R,D.j(S));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(V);if(R=D,z(R))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},s.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function z(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function Q(V){return V.h==-1}s.l=function(V){return V=Z(this,V),Q(V)?-1:z(V)?0:1};function q(V){for(var S=V.g.length,R=[],x=0;x<S;x++)R[x]=~V.g[x];return new d(R,~V.h).add(C)}s.abs=function(){return Q(this)?q(this):this},s.add=function(V){for(var S=Math.max(this.g.length,V.g.length),R=[],x=0,D=0;D<=S;D++){var O=x+(this.i(D)&65535)+(V.i(D)&65535),A=(O>>>16)+(this.i(D)>>>16)+(V.i(D)>>>16);x=A>>>16,O&=65535,A&=65535,R[D]=A<<16|O}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Z(V,S){return V.add(q(S))}s.j=function(V){if(z(this)||z(V))return P;if(Q(this))return Q(V)?q(this).j(q(V)):q(q(this).j(V));if(Q(V))return q(this.j(q(V)));if(0>this.l(b)&&0>V.l(b))return _(this.m()*V.m());for(var S=this.g.length+V.g.length,R=[],x=0;x<2*S;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(var D=0;D<V.g.length;D++){var O=this.i(x)>>>16,A=this.i(x)&65535,tt=V.i(D)>>>16,kt=V.i(D)&65535;R[2*x+2*D]+=A*kt,$(R,2*x+2*D),R[2*x+2*D+1]+=O*kt,$(R,2*x+2*D+1),R[2*x+2*D+1]+=A*tt,$(R,2*x+2*D+1),R[2*x+2*D+2]+=O*tt,$(R,2*x+2*D+2)}for(x=0;x<S;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=S;x<2*S;x++)R[x]=0;return new d(R,0)};function $(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function Y(V,S){this.g=V,this.h=S}function re(V,S){if(z(S))throw Error("division by zero");if(z(V))return new Y(P,P);if(Q(V))return S=re(q(V),S),new Y(q(S.g),q(S.h));if(Q(S))return S=re(V,q(S)),new Y(q(S.g),S.h);if(30<V.g.length){if(Q(V)||Q(S))throw Error("slowDivide_ only works with positive integers.");for(var R=C,x=S;0>=x.l(V);)R=ve(R),x=ve(x);var D=Ee(R,1),O=Ee(x,1);for(x=Ee(x,2),R=Ee(R,2);!z(x);){var A=O.add(x);0>=A.l(V)&&(D=D.add(R),O=A),x=Ee(x,1),R=Ee(R,1)}return S=Z(V,D.j(S)),new Y(D,S)}for(D=P;0<=V.l(S);){for(R=Math.max(1,Math.floor(V.m()/S.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),O=_(R),A=O.j(S);Q(A)||0<A.l(V);)R-=x,O=_(R),A=O.j(S);z(O)&&(O=C),D=D.add(O),V=Z(V,A)}return new Y(D,V)}s.A=function(V){return re(this,V).h},s.and=function(V){for(var S=Math.max(this.g.length,V.g.length),R=[],x=0;x<S;x++)R[x]=this.i(x)&V.i(x);return new d(R,this.h&V.h)},s.or=function(V){for(var S=Math.max(this.g.length,V.g.length),R=[],x=0;x<S;x++)R[x]=this.i(x)|V.i(x);return new d(R,this.h|V.h)},s.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),R=[],x=0;x<S;x++)R[x]=this.i(x)^V.i(x);return new d(R,this.h^V.h)};function ve(V){for(var S=V.g.length+1,R=[],x=0;x<S;x++)R[x]=V.i(x)<<1|V.i(x-1)>>>31;return new d(R,V.h)}function Ee(V,S){var R=S>>5;S%=32;for(var x=V.g.length-R,D=[],O=0;O<x;O++)D[O]=0<S?V.i(O+R)>>>S|V.i(O+R+1)<<32-S:V.i(O+R);return new d(D,V.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,fg=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=w,Yr=d}).apply(typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{});var Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pg,Zo,mg,Gl,Eh,gg,yg,vg;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ul=="object"&&Ul];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function a(l,f){if(f)e:{var g=i;l=l.split(".");for(var E=0;E<l.length-1;E++){var L=l[E];if(!(L in g))break e;g=g[L]}l=l[l.length-1],E=g[l],f=f(E),f!=E&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function c(l,f){l instanceof String&&(l+="");var g=0,E=!1,L={next:function(){if(!E&&g<l.length){var B=g++;return{value:f(B,l[B]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function _(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function w(l,f,g){return l.call.apply(l.bind,arguments)}function P(l,f,g){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),l.apply(f,L)}}return function(){return l.apply(f,arguments)}}function C(l,f,g){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:P,C.apply(null,arguments)}function b(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function z(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(E,L,B){for(var te=Array(arguments.length-2),be=2;be<arguments.length;be++)te[be-2]=arguments[be];return f.prototype[L].apply(E,te)}}function Q(l){const f=l.length;if(0<f){const g=Array(f);for(let E=0;E<f;E++)g[E]=l[E];return g}return[]}function q(l,f){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(y(E)){const L=l.length||0,B=E.length||0;l.length=L+B;for(let te=0;te<B;te++)l[L+te]=E[te]}else l.push(E)}}class Z{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function $(l){return/^[\s\xa0]*$/.test(l)}function Y(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function re(l){return re[" "](l),l}re[" "]=function(){};var ve=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function Ee(l,f,g){for(const E in l)f.call(g,l[E],E,l)}function V(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function S(l){const f={};for(const g in l)f[g]=l[g];return f}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,f){let g,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(g in E)l[g]=E[g];for(let B=0;B<R.length;B++)g=R[B],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function D(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function O(l){m.setTimeout(()=>{throw l},0)}function A(){var l=pe;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class tt{constructor(){this.h=this.g=null}add(f,g){const E=kt.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var kt=new Z(()=>new xt,l=>l.reset());class xt{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,ne=!1,pe=new tt,ae=()=>{const l=m.Promise.resolve(void 0);Ue=()=>{l.then(M)}};var M=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(g){O(g)}var f=kt;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ne=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Se=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,f),m.removeEventListener("test",g,f)}catch{}return l})();function Ce(l,f){if(de.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(ve){e:{try{re(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ke[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ce.aa.h.call(this)}}z(Ce,de);var ke={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Be(l,f,g,E,L){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=L,this.key=++Fe,this.da=this.fa=!1}function yt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function nr(l){this.src=l,this.g={},this.h=0}nr.prototype.add=function(l,f,g,E,L){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var te=Ir(l,f,E,L);return-1<te?(f=l[te],g||(f.fa=!1)):(f=new Be(f,this.src,B,!!E,L),f.fa=g,l.push(f)),f};function Qs(l,f){var g=f.type;if(g in l.g){var E=l.g[g],L=Array.prototype.indexOf.call(E,f,void 0),B;(B=0<=L)&&Array.prototype.splice.call(E,L,1),B&&(yt(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Ir(l,f,g,E){for(var L=0;L<l.length;++L){var B=l[L];if(!B.da&&B.listener==f&&B.capture==!!g&&B.ha==E)return L}return-1}var hs="closure_lm_"+(1e6*Math.random()|0),Ks={};function ro(l,f,g,E,L){if(Array.isArray(f)){for(var B=0;B<f.length;B++)ro(l,f[B],g,E,L);return null}return g=oo(g),l&&l[Le]?l.K(f,g,_(E)?!!E.capture:!1,L):so(l,f,g,!1,E,L)}function so(l,f,g,E,L,B){if(!f)throw Error("Invalid event type");var te=_(L)?!!L.capture:!!L,be=Ys(l);if(be||(l[hs]=be=new nr(l)),g=be.add(f,g,E,te,B),g.proxy)return g;if(E=Sa(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)Se||(L=te),L===void 0&&(L=!1),l.addEventListener(f.toString(),E,L);else if(l.attachEvent)l.attachEvent(sr(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Sa(){function l(g){return f.call(l.src,l.listener,g)}const f=io;return l}function Xs(l,f,g,E,L){if(Array.isArray(f))for(var B=0;B<f.length;B++)Xs(l,f[B],g,E,L);else E=_(E)?!!E.capture:!!E,g=oo(g),l&&l[Le]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],g=Ir(B,g,E,L),-1<g&&(yt(B[g]),Array.prototype.splice.call(B,g,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=Ys(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Ir(f,g,E,L)),(g=-1<l?f[l]:null)&&rr(g))}function rr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Le])Qs(f.i,l);else{var g=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(g,E,l.capture):f.detachEvent?f.detachEvent(sr(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=Ys(f))?(Qs(g,l),g.h==0&&(g.src=null,f[hs]=null)):yt(l)}}}function sr(l){return l in Ks?Ks[l]:Ks[l]="on"+l}function io(l,f){if(l.da)l=!0;else{f=new Ce(f,this);var g=l.listener,E=l.ha||l.src;l.fa&&rr(l),l=g.call(E,f)}return l}function Ys(l){return l=l[hs],l instanceof nr?l:null}var Js="__closure_events_fn_"+(1e9*Math.random()>>>0);function oo(l){return typeof l=="function"?l:(l[Js]||(l[Js]=function(f){return l.handleEvent(f)}),l[Js])}function ht(){W.call(this),this.i=new nr(this),this.M=this,this.F=null}z(ht,W),ht.prototype[Le]=!0,ht.prototype.removeEventListener=function(l,f,g,E){Xs(this,l,f,g,E)};function dt(l,f){var g,E=l.F;if(E)for(g=[];E;E=E.F)g.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new de(f,l);else if(f instanceof de)f.target=f.target||l;else{var L=f;f=new de(E,l),x(f,L)}if(L=!0,g)for(var B=g.length-1;0<=B;B--){var te=f.g=g[B];L=ir(te,E,!0,f)&&L}if(te=f.g=l,L=ir(te,E,!0,f)&&L,L=ir(te,E,!1,f)&&L,g)for(B=0;B<g.length;B++)te=f.g=g[B],L=ir(te,E,!1,f)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],E=0;E<g.length;E++)yt(g[E]);delete l.g[f],l.h--}}this.F=null},ht.prototype.K=function(l,f,g,E){return this.i.add(String(l),f,!1,g,E)},ht.prototype.L=function(l,f,g,E){return this.i.add(String(l),f,!0,g,E)};function ir(l,f,g,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,B=0;B<f.length;++B){var te=f[B];if(te&&!te.da&&te.capture==g){var be=te.listener,ft=te.ha||te.src;te.fa&&Qs(l.i,te),L=be.call(ft,E)!==!1&&L}}return L&&!E.defaultPrevented}function ao(l,f,g){if(typeof l=="function")g&&(l=C(l,g));else if(l&&typeof l.handleEvent=="function")l=C(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Sr(l){l.g=ao(()=>{l.g=null,l.i&&(l.i=!1,Sr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class ds extends W{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(l){W.call(this),this.h=l,this.g={}}z(fs,W);var lo=[];function uo(l){Ee(l.g,function(f,g){this.g.hasOwnProperty(g)&&rr(f)},l),l.g={}}fs.prototype.N=function(){fs.aa.N.call(this),uo(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var co=m.JSON.stringify,ho=m.JSON.parse,fo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function ps(){}ps.prototype.h=null;function Zs(l){return l.h||(l.h=l.i())}function ei(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jn(){de.call(this,"d")}z(jn,de);function ti(){de.call(this,"c")}z(ti,de);var bn={},po=null;function ms(){return po=po||new ht}bn.La="serverreachability";function mo(l){de.call(this,bn.La,l)}z(mo,de);function or(l){const f=ms();dt(f,new mo(f))}bn.STAT_EVENT="statevent";function go(l,f){de.call(this,bn.STAT_EVENT,l),this.stat=f}z(go,de);function nt(l){const f=ms();dt(f,new go(f,l))}bn.Ma="timingevent";function ni(l,f){de.call(this,bn.Ma,l),this.size=f}z(ni,de);function En(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function gs(){this.g=!0}gs.prototype.xa=function(){this.g=!1};function ys(l,f,g,E,L,B){l.info(function(){if(l.g)if(B)for(var te="",be=B.split("&"),ft=0;ft<be.length;ft++){var xe=be[ft].split("=");if(1<xe.length){var vt=xe[0];xe=xe[1];var ot=vt.split("_");te=2<=ot.length&&ot[1]=="type"?te+(vt+"="+xe+"&"):te+(vt+"=redacted&")}}else te=null;else te=B;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+f+`
`+g+`
`+te})}function ri(l,f,g,E,L,B,te){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+f+`
`+g+`
`+B+" "+te})}function wn(l,f,g,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+ku(l,g)+(E?" "+E:"")})}function yo(l,f){l.info(function(){return"TIMEOUT: "+f})}gs.prototype.info=function(){};function ku(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var E=g[l];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var te=1;te<L.length;te++)L[te]=""}}}}return co(g)}catch{return f}}var si={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Aa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tn;function vs(){}z(vs,ps),vs.prototype.g=function(){return new XMLHttpRequest},vs.prototype.i=function(){return{}},Tn=new vs;function In(l,f,g,E){this.j=l,this.i=f,this.l=g,this.R=E||1,this.U=new fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ca}function Ca(){this.i=null,this.g="",this.h=!1}var vo={},ii={};function oi(l,f,g){l.L=1,l.v=Nr(en(f)),l.m=g,l.P=!0,_o(l,null)}function _o(l,f){l.F=Date.now(),$e(l),l.A=en(l.v);var g=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),xr(g.i,"t",E),l.C=0,g=l.j.J,l.h=new Ca,l.g=qa(l.j,g?f:null,!l.m),0<l.O&&(l.M=new ds(C(l.Y,l,l.g),l.O)),f=l.U,g=l.g,E=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(lo[0]=L.toString()),L=lo);for(var B=0;B<L.length;B++){var te=ro(g,L[B],E||f.handleEvent,!1,f.h||f);if(!te)break;f.g[te.key]=te}f=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),or(),ys(l.i,l.u,l.A,l.l,l.R,l.m)}In.prototype.ca=function(l){l=l.target;const f=this.M;f&&qt(l)==3?f.j():this.Y(l)},In.prototype.Y=function(l){try{if(l==this.g)e:{const ot=qt(this.g);var f=this.g.Ba();const dn=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Ao(this.g)))){this.J||ot!=4||f==7||(f==8||0>=dn?or(3):or(2)),_s(this);var g=this.g.Z();this.X=g;t:if(Ra(this)){var E=Ao(this.g);l="";var L=E.length,B=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),Ar(this);var te="";break t}this.h.i=new m.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(B&&f==L-1)});E.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=g==200,ri(this.i,this.u,this.A,this.l,this.R,ot,g),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ft=this.g;if((be=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(be)){var xe=be;break t}}xe=null}if(g=xe)wn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eo(this,g);else{this.o=!1,this.s=3,nt(12),cn(this),Ar(this);break e}}if(this.P){g=!0;let nn;for(;!this.J&&this.C<te.length;)if(nn=xu(this,te),nn==ii){ot==4&&(this.s=4,nt(14),g=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==vo){this.s=4,nt(15),wn(this.i,this.l,te,"[Invalid Chunk]"),g=!1;break}else wn(this.i,this.l,nn,null),Eo(this,nn);if(Ra(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||te.length!=0||this.h.h||(this.s=1,nt(16),g=!1),this.o=this.o&&g,!g)wn(this.i,this.l,te,"[Invalid Chunked Response]"),cn(this),Ar(this);else if(0<te.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Ro(vt),vt.M=!0,nt(11))}}else wn(this.i,this.l,te,null),Eo(this,te);ot==4&&cn(this),this.o&&!this.J&&(ot==4?yi(this.j,this):(this.o=!1,$e(this)))}else di(this.g),g==400&&0<te.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),cn(this),Ar(this)}}}catch{}finally{}};function Ra(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function xu(l,f){var g=l.C,E=f.indexOf(`
`,g);return E==-1?ii:(g=Number(f.substring(g,E)),isNaN(g)?vo:(E+=1,E+g>f.length?ii:(f=f.slice(E,E+g),l.C=E+g,f)))}In.prototype.cancel=function(){this.J=!0,cn(this)};function $e(l){l.S=Date.now()+l.I,Pa(l,l.I)}function Pa(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=En(C(l.ba,l),f)}function _s(l){l.B&&(m.clearTimeout(l.B),l.B=null)}In.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(yo(this.i,this.A),this.L!=2&&(or(),nt(17)),cn(this),this.s=2,Ar(this)):Pa(this,this.S-l)};function Ar(l){l.j.G==0||l.J||yi(l.j,l)}function cn(l){_s(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,uo(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Eo(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||bt(g.h,l))){if(!l.K&&bt(g.h,l)&&g.G==3){try{var E=g.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)gi(g),Pn(g);else break e;mi(g),nt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=En(C(g.Za,g),6e3));if(1>=ka(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else hr(g,11)}else if((l.K||g.g==l)&&gi(g),!$(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let xe=L[f];if(g.T=xe[0],xe=xe[1],g.G==2)if(xe[0]=="c"){g.K=xe[1],g.ia=xe[2];const vt=xe[3];vt!=null&&(g.la=vt,g.j.info("VER="+g.la));const ot=xe[4];ot!=null&&(g.Aa=ot,g.j.info("SVER="+g.Aa));const dn=xe[5];dn!=null&&typeof dn=="number"&&0<dn&&(E=1.5*dn,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const nn=l.g;if(nn){const Cs=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var B=E.h;B.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(wo(B,B.h),B.h=null))}if(E.D){const _i=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;_i&&(E.ya=_i,ze(E.I,E.D,_i))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var te=l;if(E.qa=$a(E,E.J?E.ia:null,E.W),te.K){xa(E.h,te);var be=te,ft=E.L;ft&&(be.I=ft),be.B&&(_s(be),$e(be)),E.g=te}else As(E);0<g.i.length&&$n(g)}else xe[0]!="stop"&&xe[0]!="close"||hr(g,7);else g.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?hr(g,7):St(g):xe[0]!="noop"&&g.l&&g.l.ta(xe),g.v=0)}}or(4)}catch{}}var Na=class{constructor(l,f){this.g=l,this.map=f}};function Es(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ka(l){return l.h?1:l.g?l.g.size:0}function bt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function wo(l,f){l.g?l.g.add(f):l.h=f}function xa(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Es.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Va(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return Q(l.i)}function ai(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var f=[],g=l.length,E=0;E<g;E++)f.push(l[E]);return f}f=[],g=0;for(E in l)f[g++]=l[E];return f}function li(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const E in l)f[g++]=E;return f}}}function Cr(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=li(l),E=ai(l),L=E.length,B=0;B<L;B++)f.call(void 0,E[B],g&&g[B],l)}var ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vu(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var E=l[g].indexOf("="),L=null;if(0<=E){var B=l[g].substring(0,E);L=l[g].substring(E+1)}else B=l[g];f(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ar(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ar){this.h=l.h,Ts(this,l.j),this.o=l.o,this.g=l.g,Rr(this,l.s),this.l=l.l;var f=l.i,g=new Un;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Pr(this,g),this.m=l.m}else l&&(f=String(l).match(ws))?(this.h=!1,Ts(this,f[1]||"",!0),this.o=Ne(f[2]||""),this.g=Ne(f[3]||"",!0),Rr(this,f[4]),this.l=Ne(f[5]||"",!0),Pr(this,f[6]||"",!0),this.m=Ne(f[7]||"")):(this.h=!1,this.i=new Un(null,this.h))}ar.prototype.toString=function(){var l=[],f=this.j;f&&l.push(kr(f,ui,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(kr(f,ui,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(kr(g,g.charAt(0)=="/"?Oa:Ma,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",kr(g,To)),l.join("")};function en(l){return new ar(l)}function Ts(l,f,g){l.j=g?Ne(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Rr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Pr(l,f,g){f instanceof Un?(l.i=f,zn(l.i,l.h)):(g||(f=kr(f,La)),l.i=new Un(f,l.h))}function ze(l,f,g){l.i.set(f,g)}function Nr(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ne(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function kr(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,Da),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Da(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ui=/[#\/\?@]/g,Ma=/[#\?:]/g,Oa=/[#\?]/g,La=/[#\?@]/g,To=/#/g;function Un(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function It(l){l.g||(l.g=new Map,l.h=0,l.i&&Vu(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}s=Un.prototype,s.add=function(l,f){It(this),this.i=null,l=hn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function Sn(l,f){It(l),f=hn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function An(l,f){return It(l),f=hn(l,f),l.g.has(f)}s.forEach=function(l,f){It(this),this.g.forEach(function(g,E){g.forEach(function(L){l.call(f,L,E,this)},this)},this)},s.na=function(){It(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let E=0;E<f.length;E++){const L=l[E];for(let B=0;B<L.length;B++)g.push(f[E])}return g},s.V=function(l){It(this);let f=[];if(typeof l=="string")An(this,l)&&(f=f.concat(this.g.get(hn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},s.set=function(l,f){return It(this),this.i=null,l=hn(this,l),An(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},s.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function xr(l,f,g){Sn(l,f),0<g.length&&(l.i=null,l.g.set(hn(l,f),Q(g)),l.h+=g.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var E=f[g];const B=encodeURIComponent(String(E)),te=this.V(E);for(E=0;E<te.length;E++){var L=B;te[E]!==""&&(L+="="+encodeURIComponent(String(te[E]))),l.push(L)}}return this.i=l.join("&")};function hn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function zn(l,f){f&&!l.j&&(It(l),l.i=null,l.g.forEach(function(g,E){var L=E.toLowerCase();E!=L&&(Sn(this,E),xr(this,L,g))},l)),l.j=f}function Du(l,f){const g=new gs;if(m.Image){const E=new Image;E.onload=b($t,g,"TestLoadImage: loaded",!0,f,E),E.onerror=b($t,g,"TestLoadImage: error",!1,f,E),E.onabort=b($t,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=b($t,g,"TestLoadImage: timeout",!1,f,E),m.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function Fa(l,f){const g=new gs,E=new AbortController,L=setTimeout(()=>{E.abort(),$t(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(B=>{clearTimeout(L),B.ok?$t(g,"TestPingServer: ok",!0,f):$t(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),$t(g,"TestPingServer: error",!1,f)})}function $t(l,f,g,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(g)}catch{}}function Mu(){this.g=new fo}function ja(l,f,g){const E=g||"";try{Cr(l,function(L,B){let te=L;_(L)&&(te=co(L)),f.push(E+B+"="+encodeURIComponent(te))})}catch(L){throw f.push(E+"type="+encodeURIComponent("_badmap")),L}}function lr(l){this.l=l.Ub||null,this.j=l.eb||!1}z(lr,ps),lr.prototype.g=function(){return new Is(this.l,this.j)},lr.prototype.i=(function(l){return function(){return l}})({});function Is(l,f){ht.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(Is,ht),s=Is.prototype,s.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Rn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rn(this)),this.g&&(this.readyState=3,Rn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ba(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ba(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Cn(this):Rn(this),this.readyState==3&&ba(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Cn(this))},s.Qa=function(l){this.g&&(this.response=l,Cn(this))},s.ga=function(){this.g&&Cn(this)};function Cn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Rn(l)}s.setRequestHeader=function(l,f){this.u.append(l,f)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Rn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ur(l){let f="";return Ee(l,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function Vr(l,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=ur(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ze(l,f,g))}function Ke(l){ht.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(Ke,ht);var Ou=/^https?$/i,Io=["POST","PUT"];s=Ke.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tn.g(),this.v=this.o?Zs(this.o):Zs(Tn),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){Ss(this,B);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)g.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const B of E.keys())g.set(B,E.get(B));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Io,f,void 0))||E||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,te]of g)this.g.setRequestHeader(B,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hi(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Ss(this,B)}};function Ss(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,ci(l),tn(l)}function ci(l){l.A||(l.A=!0,dt(l,"complete"),dt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,dt(this,"complete"),dt(this,"abort"),tn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Ke.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?So(this):this.bb())},s.bb=function(){So(this)};function So(l){if(l.h&&typeof d<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)ao(l.Ea,0,l);else if(dt(l,"readystatechange"),qt(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=te===0){var L=String(l.D).match(ws)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),E=!Ou.test(L?L.toLowerCase():"")}g=E}if(g)dt(l,"complete"),dt(l,"success");else{l.m=6;try{var B=2<qt(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",ci(l)}}finally{tn(l)}}}}function tn(l,f){if(l.g){hi(l);const g=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||dt(l,"ready");try{g.onreadystatechange=E}catch{}}}function hi(l){l.I&&(m.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),ho(f)}};function Ao(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function di(l){const f={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if($(l[E]))continue;var g=D(l[E]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=f[L]||[];f[L]=B,B.push(g)}V(f,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bn(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Co(l){this.Aa=0,this.i=[],this.j=new gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bn("baseRetryDelayMs",5e3,l),this.cb=Bn("retryDelaySeedMs",1e4,l),this.Wa=Bn("forwardChannelMaxRetries",2,l),this.wa=Bn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Es(l&&l.concurrentRequestLimit),this.Da=new Mu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Co.prototype,s.la=8,s.G=1,s.connect=function(l,f,g,E){nt(0),this.W=l,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=$a(this,null,this.W),$n(this)};function St(l){if(fi(l),l.G==3){var f=l.U++,g=en(l.I);if(ze(g,"SID",l.K),ze(g,"RID",f),ze(g,"TYPE","terminate"),cr(l,g),f=new In(l,l.j,f),f.L=2,f.v=Nr(en(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=f.v,g=!0),g||(f.g=qa(f.j,null),f.g.ea(f.v)),f.F=Date.now(),$e(f)}Ba(l)}function Pn(l){l.g&&(Ro(l),l.g.cancel(),l.g=null)}function fi(l){Pn(l),l.u&&(m.clearTimeout(l.u),l.u=null),gi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function $n(l){if(!Zt(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ue||ae(),ne||(Ue(),ne=!0),pe.add(f,l),l.B=0}}function Lu(l,f){return ka(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=En(C(l.Ga,l,f),za(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new In(this,this.j,l);let B=this.o;if(this.S&&(B?(B=S(B),x(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Dr(this,L,f),g=en(this.I),ze(g,"RID",l),ze(g,"CVER",22),this.D&&ze(g,"X-HTTP-Session-Id",this.D),cr(this,g),B&&(this.O?f="headers="+encodeURIComponent(String(ur(B)))+"&"+f:this.m&&Vr(g,this.m,B)),wo(this.h,L),this.Ua&&ze(g,"TYPE","init"),this.P?(ze(g,"$req",f),ze(g,"SID","null"),L.T=!0,oi(L,g,null)):oi(L,g,f),this.G=2}}else this.G==3&&(l?pi(this,l):this.i.length==0||Zt(this.h)||pi(this))};function pi(l,f){var g;f?g=f.l:g=l.U++;const E=en(l.I);ze(E,"SID",l.K),ze(E,"RID",g),ze(E,"AID",l.T),cr(l,E),l.m&&l.o&&Vr(E,l.m,l.o),g=new In(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Dr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),wo(l.h,g),oi(g,E,f)}function cr(l,f){l.H&&Ee(l.H,function(g,E){ze(f,E,g)}),l.l&&Cr({},function(g,E){ze(f,E,g)})}function Dr(l,f,g){g=Math.min(l.i.length,g);var E=l.l?C(l.l.Na,l.l,l):null;e:{var L=l.i;let B=-1;for(;;){const te=["count="+g];B==-1?0<g?(B=L[0].g,te.push("ofs="+B)):B=0:te.push("ofs="+B);let be=!0;for(let ft=0;ft<g;ft++){let xe=L[ft].g;const vt=L[ft].map;if(xe-=B,0>xe)B=Math.max(0,L[ft].g-100),be=!1;else try{ja(vt,te,"req"+xe+"_")}catch{E&&E(vt)}}if(be){E=te.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,E}function As(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ue||ae(),ne||(Ue(),ne=!0),pe.add(f,l),l.v=0}}function mi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=En(C(l.Fa,l),za(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,Ua(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=En(C(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Pn(this),Ua(this))};function Ro(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Ua(l){l.g=new In(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=en(l.qa);ze(f,"RID","rpc"),ze(f,"SID",l.K),ze(f,"AID",l.T),ze(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(f,"TO",l.ja),ze(f,"TYPE","xmlhttp"),cr(l,f),l.m&&l.o&&Vr(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Nr(en(f)),g.m=null,g.P=!0,_o(g,l)}s.Za=function(){this.C!=null&&(this.C=null,Pn(this),mi(this),nt(19))};function gi(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function yi(l,f){var g=null;if(l.g==f){gi(l),Ro(l),l.g=null;var E=2}else if(bt(l.h,f))g=f.D,xa(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=l.B;E=ms(),dt(E,new ni(E,g)),$n(l)}else As(l);else if(L=f.s,L==3||L==0&&0<f.X||!(E==1&&Lu(l,f)||E==2&&mi(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),L){case 1:hr(l,5);break;case 4:hr(l,10);break;case 3:hr(l,6);break;default:hr(l,2)}}}function za(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function hr(l,f){if(l.j.info("Error code "+f),f==2){var g=C(l.fb,l),E=l.Xa;const L=!E;E=new ar(E||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ts(E,"https"),Nr(E),L?Du(E.toString(),g):Fa(E.toString(),g)}else nt(2);l.G=0,l.l&&l.l.sa(f),Ba(l),fi(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Ba(l){if(l.G=0,l.ka=[],l.l){const f=Va(l.h);(f.length!=0||l.i.length!=0)&&(q(l.ka,f),q(l.ka,l.i),l.h.i.length=0,Q(l.i),l.i.length=0),l.l.ra()}}function $a(l,f,g){var E=g instanceof ar?en(g):new ar(g);if(E.g!="")f&&(E.g=f+"."+E.g),Rr(E,E.s);else{var L=m.location;E=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var B=new ar(null);E&&Ts(B,E),f&&(B.g=f),L&&Rr(B,L),g&&(B.l=g),E=B}return g=l.D,f=l.ya,g&&f&&ze(E,g,f),ze(E,"VER",l.la),cr(l,E),E}function qa(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ke(new lr({eb:g})):new Ke(l.pa),f.Ha(l.J),f}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Po(){}s=Po.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function vi(){}vi.prototype.g=function(l,f){return new Ut(l,f)};function Ut(l,f){ht.call(this),this.g=new Co(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!$(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!$(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new qn(this)}z(Ut,ht),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){St(this.g)},Ut.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=co(l),l=g);f.i.push(new Na(f.Ya++,l)),f.G==3&&$n(f)},Ut.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,Ut.aa.N.call(this)};function Ha(l){jn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}z(Ha,jn);function Ga(){ti.call(this),this.status=1}z(Ga,ti);function qn(l){this.g=l}z(qn,Po),qn.prototype.ua=function(){dt(this.g,"a")},qn.prototype.ta=function(l){dt(this.g,new Ha(l))},qn.prototype.sa=function(l){dt(this.g,new Ga)},qn.prototype.ra=function(){dt(this.g,"b")},vi.prototype.createWebChannel=vi.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,vg=function(){return new vi},yg=function(){return ms()},gg=bn,Eh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},si.NO_ERROR=0,si.TIMEOUT=8,si.HTTP_ERROR=6,Gl=si,Aa.COMPLETE="complete",mg=Aa,ei.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Zo=ei,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,pg=Ke}).apply(typeof Ul<"u"?Ul:typeof self<"u"?self:typeof window<"u"?window:{});const nm="@firebase/firestore",rm="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ji="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new ag("@firebase/firestore");function Ui(){return $s.logLevel}function oe(s,...e){if($s.logLevel<=De.DEBUG){const n=e.map($h);$s.debug(`Firestore (${Ji}): ${s}`,...n)}}function wr(s,...e){if($s.logLevel<=De.ERROR){const n=e.map($h);$s.error(`Firestore (${Ji}): ${s}`,...n)}}function es(s,...e){if($s.logLevel<=De.WARN){const n=e.map($h);$s.warn(`Firestore (${Ji}): ${s}`,...n)}}function $h(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,_g(s,i,n)}function _g(s,e,n){let i=`FIRESTORE (${Ji}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw wr(i),new Error(i)}function je(s,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,s||_g(e,a,i)}function Te(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Yi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ft.UNAUTHENTICATED)))}shutdown(){}}class eE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class tE{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0,42304);let i=this.i;const a=y=>this.i!==i?(i=this.i,n(y)):Promise.resolve();let c=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Jr,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await a(this.currentUser)}))},m=y=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Jr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new Eg(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class nE{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rE{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new nE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sE{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,L0(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){je(this.o===void 0,3512);const i=c=>{c.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const a=c=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sm(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=iE(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<n&&(i+=e.charAt(a[c]%62))}return i}}function Ae(s,e){return s<e?-1:s>e?1:0}function wh(s,e){let n=0;for(;n<s.length&&n<e.length;){const i=s.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return Ae(i,a);{const c=wg(),d=oE(c.encode(im(s,n)),c.encode(im(e,n)));return d!==0?d:Ae(i,a)}}n+=i>65535?2:1}return Ae(s.length,e.length)}function im(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function oE(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return Ae(s[n],e[n]);return Ae(s.length,e.length)}function Gi(s,e,n){return s.length===e.length&&s.every(((i,a)=>n(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="__name__";class Kn{constructor(e,n,i){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ye(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kn?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const c=Kn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Ae(e.length,n.length)}static compareSegments(e,n){const i=Kn.isNumericId(e),a=Kn.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?Kn.extractNumericId(e).compare(Kn.extractNumericId(n)):wh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yr.fromString(e.substring(4,e.length-2))}}class He extends Kn{construct(e,n,i){return new He(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(H.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new He(n)}static emptyPath(){return new He([])}}const aE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Kn{construct(e,n,i){return new Pt(e,n,i)}static isValidIdentifier(e){return aE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===om}static keyField(){return new Pt([om])}static fromServerFormat(e){const n=[];let i="",a=0;const c=()=>{if(i.length===0)throw new se(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new se(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new se(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,a+=2}else m==="`"?(d=!d,a++):m!=="."||d?(i+=m,a++):(c(),a++)}if(c(),d)throw new se(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(He.fromString(e))}static fromName(e){return new fe(He.fromString(e).popFirst(5))}static empty(){return new fe(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(s,e,n){if(!n)throw new se(H.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function lE(s,e,n,i){if(e===!0&&i===!0)throw new se(H.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function am(s){if(!fe.isDocumentKey(s))throw new se(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function lm(s){if(fe.isDocumentKey(s))throw new se(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Ig(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function du(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ye(12329,{type:typeof s})}function On(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new se(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=du(s);throw new se(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(s,e){const n={typeString:s};return e&&(n.value=e),n}function va(s,e){if(!Ig(s))throw new se(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(a&&typeof d!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new se(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=-62135596800,cm=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*cm);return new Qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<um)throw new se(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cm}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(va(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-um;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:ct("string",Qe._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Qe(0,0))}static max(){return new we(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=-1;function uE(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=we.fromTimestamp(i===1e9?new Qe(n+1,0):new Qe(n,i));return new ts(a,fe.empty(),e)}function cE(s){return new ts(s.readTime,s.key,ca)}class ts{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ts(we.min(),fe.empty(),ca)}static max(){return new ts(we.max(),fe.empty(),ca)}}function hE(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(s.documentKey,e.documentKey),n!==0?n:Ae(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zi(s){if(s.code!==H.FAILED_PRECONDITION||s.message!==dE)throw s;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):G.reject(n)}static resolve(e){return new G(((n,i)=>{n(e)}))}static reject(e){return new G(((n,i)=>{i(e)}))}static waitFor(e){return new G(((n,i)=>{let a=0,c=0,d=!1;e.forEach((m=>{++a,m.next((()=>{++c,d&&c===a&&n()}),(y=>i(y)))})),d=!0,c===a&&n()}))}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next((a=>a?G.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,c)=>{i.push(n.call(this,a,c))})),this.waitFor(i)}static mapArray(e,n){return new G(((i,a)=>{const c=e.length,d=new Array(c);let m=0;for(let y=0;y<c;y++){const _=y;n(e[_]).next((w=>{d[_]=w,++m,m===c&&i(d)}),(w=>a(w)))}}))}static doWhile(e,n){return new G(((i,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):i()};c()}))}}function pE(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function eo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}fu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=-1;function pu(s){return s==null}function nu(s){return s===0&&1/s==-1/0}function mE(s){return typeof s=="number"&&Number.isInteger(s)&&!nu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="";function gE(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=hm(e)),e=yE(s.get(n),e);return hm(e)}function yE(s,e){let n=e;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":n+="";break;case Sg:n+="";break;default:n+=c}}return n}function hm(s){return s+Sg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function as(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Ag(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zl(this.root,e,this.comparator,!0)}}class zl{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,a,c){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=a??Rt.EMPTY,this.right=c??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,c){return new Rt(e??this.key,n??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,i),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Rt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,i,a,c){return this}insert(e,n,i){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fm(this.data.getIterator())}getIteratorFrom(e){return new fm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class fm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new an([])}unionWith(e){let n=new gt(Pt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Cg("Invalid base64 string: "+c):c}})(e);return new Nt(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c})(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const vE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(s){if(je(!!s,39018),typeof s=="string"){let e=0;const n=vE.exec(s);if(je(!!n,46558,{timestamp:s}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:st(s.seconds),nanos:st(s.nanos)}}function st(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function rs(s){return typeof s=="string"?Nt.fromBase64String(s):Nt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="server_timestamp",Pg="__type__",Ng="__previous_value__",kg="__local_write_time__";function Gh(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Pg])===null||n===void 0?void 0:n.stringValue)===Rg}function mu(s){const e=s.mapValue.fields[Ng];return Gh(e)?mu(e):e}function ha(s){const e=ns(s.mapValue.fields[kg].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n,i,a,c,d,m,y,_,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=w}}const ru="(default)";class da{constructor(e,n){this.projectId=e,this.database=n||ru}static empty(){return new da("","")}get isDefaultDatabase(){return this.database===ru}isEqual(e){return e instanceof da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="__type__",EE="__max__",Bl={mapValue:{}},Vg="__vector__",su="value";function ss(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Gh(s)?4:TE(s)?9007199254740991:wE(s)?10:11:ye(28295,{value:s})}function tr(s,e){if(s===e)return!0;const n=ss(s);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ha(s).isEqual(ha(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=ns(a.timestampValue),m=ns(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,c){return rs(a.bytesValue).isEqual(rs(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,c){return st(a.geoPointValue.latitude)===st(c.geoPointValue.latitude)&&st(a.geoPointValue.longitude)===st(c.geoPointValue.longitude)})(s,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return st(a.integerValue)===st(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=st(a.doubleValue),m=st(c.doubleValue);return d===m?nu(d)===nu(m):isNaN(d)&&isNaN(m)}return!1})(s,e);case 9:return Gi(s.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(a,c){const d=a.mapValue.fields||{},m=c.mapValue.fields||{};if(dm(d)!==dm(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!tr(d[y],m[y])))return!1;return!0})(s,e);default:return ye(52216,{left:s})}}function fa(s,e){return(s.values||[]).find((n=>tr(n,e)))!==void 0}function Wi(s,e){if(s===e)return 0;const n=ss(s),i=ss(e);if(n!==i)return Ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=st(c.integerValue||c.doubleValue),y=st(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(s,e);case 3:return pm(s.timestampValue,e.timestampValue);case 4:return pm(ha(s),ha(e));case 5:return wh(s.stringValue,e.stringValue);case 6:return(function(c,d){const m=rs(c),y=rs(d);return m.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),y=d.split("/");for(let _=0;_<m.length&&_<y.length;_++){const w=Ae(m[_],y[_]);if(w!==0)return w}return Ae(m.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=Ae(st(c.latitude),st(d.latitude));return m!==0?m:Ae(st(c.longitude),st(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return mm(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var m,y,_,w;const P=c.fields||{},C=d.fields||{},b=(m=P[su])===null||m===void 0?void 0:m.arrayValue,z=(y=C[su])===null||y===void 0?void 0:y.arrayValue,Q=Ae(((_=b==null?void 0:b.values)===null||_===void 0?void 0:_.length)||0,((w=z==null?void 0:z.values)===null||w===void 0?void 0:w.length)||0);return Q!==0?Q:mm(b,z)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Bl.mapValue&&d===Bl.mapValue)return 0;if(c===Bl.mapValue)return 1;if(d===Bl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),_=d.fields||{},w=Object.keys(_);y.sort(),w.sort();for(let P=0;P<y.length&&P<w.length;++P){const C=wh(y[P],w[P]);if(C!==0)return C;const b=Wi(m[y[P]],_[w[P]]);if(b!==0)return b}return Ae(y.length,w.length)})(s.mapValue,e.mapValue);default:throw ye(23264,{le:n})}}function pm(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ae(s,e);const n=ns(s),i=ns(e),a=Ae(n.seconds,i.seconds);return a!==0?a:Ae(n.nanos,i.nanos)}function mm(s,e){const n=s.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const c=Wi(n[a],i[a]);if(c)return c}return Ae(n.length,i.length)}function Qi(s){return Th(s)}function Th(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=ns(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return rs(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return fe.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",a=!0;for(const c of n.values||[])a?a=!1:i+=",",i+=Th(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const d of i)c?c=!1:a+=",",a+=`${d}:${Th(n.fields[d])}`;return a+"}"})(s.mapValue):ye(61005,{value:s})}function Wl(s){switch(ss(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mu(s);return e?16+Wl(e):16;case 5:return 2*s.stringValue.length;case 6:return rs(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+Wl(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return as(i.fields,((c,d)=>{a+=c.length+Wl(d)})),a})(s.mapValue);default:throw ye(13486,{value:s})}}function gm(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ih(s){return!!s&&"integerValue"in s}function Wh(s){return!!s&&"arrayValue"in s}function ym(s){return!!s&&"nullValue"in s}function vm(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ql(s){return!!s&&"mapValue"in s}function wE(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[xg])===null||n===void 0?void 0:n.stringValue)===Vg}function sa(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return as(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=sa(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sa(s.arrayValue.values[n]);return e}return Object.assign({},s)}function TE(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===EE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ql(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(n)}setAll(e){let n=Pt.emptyPath(),i={},a=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,i,a),i={},a=[],n=m.popLast()}d?i[m.lastSegment()]=sa(d):a.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,a)}delete(e){const n=this.field(e.popLast());Ql(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Ql(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){as(n,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new Jt(sa(this.value))}}function Dg(s){const e=[];return as(s.fields,((n,i)=>{const a=new Pt([n]);if(Ql(i)){const c=Dg(i.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)})),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,i,a,c,d,m){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new jt(e,0,we.min(),we.min(),we.min(),Jt.empty(),0)}static newFoundDocument(e,n,i,a){return new jt(e,1,n,we.min(),i,a,0)}static newNoDocument(e,n){return new jt(e,2,n,we.min(),we.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,we.min(),we.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.position=e,this.inclusive=n}}function _m(s,e,n){let i=0;for(let a=0;a<s.position.length;a++){const c=e[a],d=s.position[a];if(c.field.isKeyField()?i=fe.comparator(fe.fromName(d.referenceValue),n.key):i=Wi(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Em(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!tr(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n="asc"){this.field=e,this.dir=n}}function IE(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{}class ut extends Mg{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new AE(e,n,i):n==="array-contains"?new PE(e,i):n==="in"?new NE(e,i):n==="not-in"?new kE(e,i):n==="array-contains-any"?new xE(e,i):new ut(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new CE(e,i):new RE(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wi(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(Wi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends Mg{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Fn(e,n)}matches(e){return Og(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Og(s){return s.op==="and"}function Lg(s){return SE(s)&&Og(s)}function SE(s){for(const e of s.filters)if(e instanceof Fn)return!1;return!0}function Sh(s){if(s instanceof ut)return s.field.canonicalString()+s.op.toString()+Qi(s.value);if(Lg(s))return s.filters.map((e=>Sh(e))).join(",");{const e=s.filters.map((n=>Sh(n))).join(",");return`${s.op}(${e})`}}function Fg(s,e){return s instanceof ut?(function(i,a){return a instanceof ut&&i.op===a.op&&i.field.isEqual(a.field)&&tr(i.value,a.value)})(s,e):s instanceof Fn?(function(i,a){return a instanceof Fn&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,d,m)=>c&&Fg(d,a.filters[m])),!0):!1})(s,e):void ye(19439)}function jg(s){return s instanceof ut?(function(n){return`${n.field.canonicalString()} ${n.op} ${Qi(n.value)}`})(s):s instanceof Fn?(function(n){return n.op.toString()+" {"+n.getFilters().map(jg).join(" ,")+"}"})(s):"Filter"}class AE extends ut{constructor(e,n,i){super(e,n,i),this.key=fe.fromName(i.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class CE extends ut{constructor(e,n){super(e,"in",n),this.keys=bg("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class RE extends ut{constructor(e,n){super(e,"not-in",n),this.keys=bg("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function bg(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>fe.fromName(i.referenceValue)))}class PE extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wh(n)&&fa(n.arrayValue,this.value)}}class NE extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fa(this.value.arrayValue,n)}}class kE extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fa(this.value.arrayValue,n)}}class xE extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>fa(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n=null,i=[],a=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=d,this.endAt=m,this.Pe=null}}function wm(s,e=null,n=[],i=[],a=null,c=null,d=null){return new VE(s,e,n,i,a,c,d)}function Qh(s){const e=Te(s);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Sh(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Qi(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Qi(i))).join(",")),e.Pe=n}return e.Pe}function Kh(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!IE(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Fg(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Em(s.startAt,e.startAt)&&Em(s.endAt,e.endAt)}function Ah(s){return fe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n=null,i=[],a=[],c=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=y,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function DE(s,e,n,i,a,c,d,m){return new to(s,e,n,i,a,c,d,m)}function Xh(s){return new to(s)}function Tm(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Ug(s){return s.collectionGroup!==null}function ia(s){const e=Te(s);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new gt(Pt.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new pa(c,i))})),n.has(Pt.keyField().canonicalString())||e.Te.push(new pa(Pt.keyField(),i))}return e.Te}function Xn(s){const e=Te(s);return e.Ie||(e.Ie=ME(e,ia(s))),e.Ie}function ME(s,e){if(s.limitType==="F")return wm(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new pa(a.field,c)}));const n=s.endAt?new iu(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new iu(s.startAt.position,s.startAt.inclusive):null;return wm(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Ch(s,e){const n=s.filters.concat([e]);return new to(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Rh(s,e,n){return new to(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function gu(s,e){return Kh(Xn(s),Xn(e))&&s.limitType===e.limitType}function zg(s){return`${Qh(Xn(s))}|lt:${s.limitType}`}function zi(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>jg(a))).join(", ")}]`),pu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Qi(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Qi(a))).join(",")),`Target(${i})`})(Xn(s))}; limitType=${s.limitType})`}function yu(s,e){return e.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):fe.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,a){for(const c of ia(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(d,m,y){const _=_m(d,m,y);return d.inclusive?_<=0:_<0})(i.startAt,ia(i),a)||i.endAt&&!(function(d,m,y){const _=_m(d,m,y);return d.inclusive?_>=0:_>0})(i.endAt,ia(i),a))})(s,e)}function OE(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Bg(s){return(e,n)=>{let i=!1;for(const a of ia(s)){const c=LE(a,e,n);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function LE(s,e,n){const i=s.field.isKeyField()?fe.comparator(e.key,n.key):(function(c,d,m){const y=d.data.field(c),_=m.data.field(c);return y!==null&&_!==null?Wi(y,_):ye(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,((n,i)=>{for(const[a,c]of i)e(a,c)}))}isEmpty(){return Ag(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=new Ze(fe.comparator);function Tr(){return FE}const $g=new Ze(fe.comparator);function ea(...s){let e=$g;for(const n of s)e=e.insert(n.key,n);return e}function qg(s){let e=$g;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Us(){return oa()}function Hg(){return oa()}function oa(){return new Gs((s=>s.toString()),((s,e)=>s.isEqual(e)))}const jE=new Ze(fe.comparator),bE=new gt(fe.comparator);function Pe(...s){let e=bE;for(const n of s)e=e.add(n);return e}const UE=new gt(Ae);function zE(){return UE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function Gg(s){return{integerValue:""+s}}function BE(s,e){return mE(e)?Gg(e):Yh(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this._=void 0}}function $E(s,e,n){return s instanceof ma?(function(a,c){const d={fields:{[Pg]:{stringValue:Rg},[kg]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Gh(c)&&(c=mu(c)),c&&(d.fields[Ng]=c),{mapValue:d}})(n,e):s instanceof ga?Qg(s,e):s instanceof ya?Kg(s,e):(function(a,c){const d=Wg(a,c),m=Im(d)+Im(a.Ee);return Ih(d)&&Ih(a.Ee)?Gg(m):Yh(a.serializer,m)})(s,e)}function qE(s,e,n){return s instanceof ga?Qg(s,e):s instanceof ya?Kg(s,e):n}function Wg(s,e){return s instanceof ou?(function(i){return Ih(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class ma extends vu{}class ga extends vu{constructor(e){super(),this.elements=e}}function Qg(s,e){const n=Xg(e);for(const i of s.elements)n.some((a=>tr(a,i)))||n.push(i);return{arrayValue:{values:n}}}class ya extends vu{constructor(e){super(),this.elements=e}}function Kg(s,e){let n=Xg(e);for(const i of s.elements)n=n.filter((a=>!tr(a,i)));return{arrayValue:{values:n}}}class ou extends vu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Im(s){return st(s.integerValue||s.doubleValue)}function Xg(s){return Wh(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.field=e,this.transform=n}}function GE(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof ga&&a instanceof ga||i instanceof ya&&a instanceof ya?Gi(i.elements,a.elements,tr):i instanceof ou&&a instanceof ou?tr(i.Ee,a.Ee):i instanceof ma&&a instanceof ma})(s.transform,e.transform)}class WE{constructor(e,n){this.version=e,this.transformResults=n}}class Ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kl(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class _u{}function Yg(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Zg(s.key,Ln.none()):new _a(s.key,s.data,Ln.none());{const n=s.data,i=Jt.empty();let a=new gt(Pt.comparator);for(let c of e.fields)if(!a.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),a=a.add(c)}return new ls(s.key,i,new an(a.toArray()),Ln.none())}}function QE(s,e,n){s instanceof _a?(function(a,c,d){const m=a.value.clone(),y=Am(a.fieldTransforms,c,d.transformResults);m.setAll(y),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(s,e,n):s instanceof ls?(function(a,c,d){if(!Kl(a.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Am(a.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(Jg(a)),y.setAll(m),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,n):(function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function aa(s,e,n,i){return s instanceof _a?(function(c,d,m,y){if(!Kl(c.precondition,d))return m;const _=c.value.clone(),w=Cm(c.fieldTransforms,y,d);return _.setAll(w),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(s,e,n,i):s instanceof ls?(function(c,d,m,y){if(!Kl(c.precondition,d))return m;const _=Cm(c.fieldTransforms,y,d),w=d.data;return w.setAll(Jg(c)),w.setAll(_),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((P=>P.field)))})(s,e,n,i):(function(c,d,m){return Kl(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(s,e,n)}function KE(s,e){let n=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),c=Wg(i.transform,a||null);c!=null&&(n===null&&(n=Jt.empty()),n.set(i.field,c))}return n||null}function Sm(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Gi(i,a,((c,d)=>GE(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class _a extends _u{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ls extends _u{constructor(e,n,i,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Jg(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Am(s,e,n){const i=new Map;je(s.length===n.length,32656,{Ae:n.length,Re:s.length});for(let a=0;a<n.length;a++){const c=s[a],d=c.transform,m=e.data.field(c.field);i.set(c.field,qE(d,m,n[a]))}return i}function Cm(s,e,n){const i=new Map;for(const a of s){const c=a.transform,d=n.data.field(a.field);i.set(a.field,$E(c,d,e))}return i}class Zg extends _u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XE extends _u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&QE(c,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=aa(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=aa(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Hg();return this.mutations.forEach((a=>{const c=e.get(a.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(a.key)?null:m;const y=Yg(d,m);y!==null&&i.set(a.key,y),d.isValidDocument()||d.convertToNoDocument(we.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,((n,i)=>Sm(n,i)))&&Gi(this.baseMutations,e.baseMutations,((n,i)=>Sm(n,i)))}}class Jh{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){je(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let a=(function(){return jE})();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,i[d].version);return new Jh(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Ve;function ew(s){switch(s){case H.OK:return ye(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ye(15467,{code:s})}}function ey(s){if(s===void 0)return wr("GRPC error has no .code"),H.UNKNOWN;switch(s){case lt.OK:return H.OK;case lt.CANCELLED:return H.CANCELLED;case lt.UNKNOWN:return H.UNKNOWN;case lt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case lt.INTERNAL:return H.INTERNAL;case lt.UNAVAILABLE:return H.UNAVAILABLE;case lt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case lt.NOT_FOUND:return H.NOT_FOUND;case lt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case lt.ABORTED:return H.ABORTED;case lt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case lt.DATA_LOSS:return H.DATA_LOSS;default:return ye(39323,{code:s})}}(Ve=lt||(lt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new Yr([4294967295,4294967295],0);function Rm(s){const e=wg().encode(s),n=new fg;return n.update(e),new Uint8Array(n.digest())}function Pm(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Yr([n,i],0),new Yr([a,c],0)]}class Zh{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ta(`Invalid padding: ${n}`);if(i<0)throw new ta(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ta(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ta(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Yr.fromNumber(this.fe)}pe(e,n,i){let a=e.add(n.multiply(Yr.fromNumber(i)));return a.compare(tw)===1&&(a=new Yr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Rm(e),[i,a]=Pm(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(i,a,c);if(!this.ye(d))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Zh(c,a,n);return i.forEach((m=>d.insert(m))),d}insert(e){if(this.fe===0)return;const n=Rm(e),[i,a]=Pm(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(i,a,c);this.we(d)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,i,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Ea.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Eu(we.min(),a,new Ze(Ae),Tr(),Pe())}}class Ea{constructor(e,n,i,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ea(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,i,a){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=a}}class ty{constructor(e,n){this.targetId=e,this.De=n}}class ny{constructor(e,n,i=Nt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class Nm{constructor(){this.ve=0,this.Ce=km(),this.Fe=Nt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pe(),n=Pe(),i=Pe();return this.Ce.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:ye(38017,{changeType:c})}})),new Ea(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=km()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class nw{constructor(e){this.We=e,this.Ge=new Map,this.ze=Tr(),this.je=$l(),this.Je=$l(),this.He=new Ze(Ae)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,i=e.De.count,a=this.st(n);if(a){const c=a.target;if(Ah(c))if(i===0){const d=new fe(c.path);this.Xe(n,d,jt.newNoDocument(d,we.min()))}else je(i===1,20013,{expectedCount:i});else{const d=this.ot(n);if(d!==i){const m=this._t(e),y=m?this.ut(m,e,d):1;if(y!==0){this.rt(n);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,_)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=n;let d,m;try{d=rs(i).toUint8Array()}catch(y){if(y instanceof Cg)return es("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Zh(d,a,c)}catch(y){return es(y instanceof ta?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.fe===0?null:m}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let a=0;return i.forEach((c=>{const d=this.We.lt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.Xe(n,c,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((c,d)=>{const m=this.st(d);if(m){if(c.current&&Ah(m.target)){const y=new fe(m.target.path);this.Tt(y).has(d)||this.It(d,y)||this.Xe(d,y,jt.newNoDocument(y,e))}c.Ne&&(n.set(d,c.Le()),c.ke())}}));let i=Pe();this.Je.forEach(((c,d)=>{let m=!0;d.forEachWhile((y=>{const _=this.st(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.ze.forEach(((c,d)=>d.setReadTime(e)));const a=new Eu(e,n,this.He,this.ze,i);return this.ze=Tr(),this.je=$l(),this.Je=$l(),this.He=new Ze(Ae),a}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Nm,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new gt(Ae),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new gt(Ae),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Nm),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function $l(){return new Ze(fe.comparator)}function km(){return new Ze(fe.comparator)}const rw={asc:"ASCENDING",desc:"DESCENDING"},sw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iw={and:"AND",or:"OR"};class ow{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ph(s,e){return s.useProto3Json||pu(e)?e:{value:e}}function au(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ry(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function aw(s,e){return au(s,e.toTimestamp())}function Yn(s){return je(!!s,49232),we.fromTimestamp((function(n){const i=ns(n);return new Qe(i.seconds,i.nanos)})(s))}function ed(s,e){return Nh(s,e).canonicalString()}function Nh(s,e){const n=(function(a){return new He(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?n:n.child(e)}function sy(s){const e=He.fromString(s);return je(uy(e),10190,{key:e.toString()}),e}function kh(s,e){return ed(s.databaseId,e.path)}function hh(s,e){const n=sy(e);if(n.get(1)!==s.databaseId.projectId)throw new se(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new se(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new fe(oy(n))}function iy(s,e){return ed(s.databaseId,e)}function lw(s){const e=sy(s);return e.length===4?He.emptyPath():oy(e)}function xh(s){return new He(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function oy(s){return je(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function xm(s,e,n){return{name:kh(s,e),fields:n.value.mapValue.fields}}function uw(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ye(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(_,w){return _.useProto3Json?(je(w===void 0||typeof w=="string",58123),Nt.fromBase64String(w||"")):(je(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Nt.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(_){const w=_.code===void 0?H.UNKNOWN:ey(_.code);return new se(w,_.message||"")})(d);n=new ny(i,a,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=hh(s,i.document.name),c=Yn(i.document.updateTime),d=i.document.createTime?Yn(i.document.createTime):we.min(),m=new Jt({mapValue:{fields:i.document.fields}}),y=jt.newFoundDocument(a,c,d,m),_=i.targetIds||[],w=i.removedTargetIds||[];n=new Xl(_,w,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=hh(s,i.document),c=i.readTime?Yn(i.readTime):we.min(),d=jt.newNoDocument(a,c),m=i.removedTargetIds||[];n=new Xl([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=hh(s,i.document),c=i.removedTargetIds||[];n=new Xl([],c,a,null)}else{if(!("filter"in e))return ye(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,d=new ZE(a,c),m=i.targetId;n=new ty(m,d)}}return n}function cw(s,e){let n;if(e instanceof _a)n={update:xm(s,e.key,e.value)};else if(e instanceof Zg)n={delete:kh(s,e.key)};else if(e instanceof ls)n={update:xm(s,e.key,e.data),updateMask:_w(e.fieldMask)};else{if(!(e instanceof XE))return ye(16599,{Rt:e.type});n={verify:kh(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const m=d.transform;if(m instanceof ma)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ga)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ya)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ou)return{fieldPath:d.field.canonicalString(),increment:m.Ee};throw ye(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:aw(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ye(27497)})(s,e.precondition)),n}function hw(s,e){return s&&s.length>0?(je(e!==void 0,14353),s.map((n=>(function(a,c){let d=a.updateTime?Yn(a.updateTime):Yn(c);return d.isEqual(we.min())&&(d=Yn(c)),new WE(d,a.transformResults||[])})(n,e)))):[]}function dw(s,e){return{documents:[iy(s,e.path)]}}function fw(s,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=iy(s,a);const c=(function(_){if(_.length!==0)return ly(Fn.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((w=>(function(C){return{field:Bi(C.field),direction:gw(C.dir)}})(w)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Ph(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{Vt:n,parent:a}}function pw(s){let e=lw(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){je(i===1,65062);const w=n.from[0];w.allDescendants?a=w.collectionId:e=e.child(w.collectionId)}let c=[];n.where&&(c=(function(P){const C=ay(P);return C instanceof Fn&&Lg(C)?C.getFilters():[C]})(n.where));let d=[];n.orderBy&&(d=(function(P){return P.map((C=>(function(z){return new pa($i(z.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(C)))})(n.orderBy));let m=null;n.limit&&(m=(function(P){let C;return C=typeof P=="object"?P.value:P,pu(C)?null:C})(n.limit));let y=null;n.startAt&&(y=(function(P){const C=!!P.before,b=P.values||[];return new iu(b,C)})(n.startAt));let _=null;return n.endAt&&(_=(function(P){const C=!P.before,b=P.values||[];return new iu(b,C)})(n.endAt)),DE(e,a,d,c,m,"F",y,_)}function mw(s,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ay(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=$i(n.unaryFilter.field);return ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=$i(n.unaryFilter.field);return ut.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$i(n.unaryFilter.field);return ut.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=$i(n.unaryFilter.field);return ut.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ut.create($i(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Fn.create(n.compositeFilter.filters.map((i=>ay(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(n.compositeFilter.op))})(s):ye(30097,{filter:s})}function gw(s){return rw[s]}function yw(s){return sw[s]}function vw(s){return iw[s]}function Bi(s){return{fieldPath:s.canonicalString()}}function $i(s){return Pt.fromServerFormat(s.fieldPath)}function ly(s){return s instanceof ut?(function(n){if(n.op==="=="){if(vm(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NAN"}};if(ym(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vm(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NAN"}};if(ym(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(n.field),op:yw(n.op),value:n.value}}})(s):s instanceof Fn?(function(n){const i=n.getFilters().map((a=>ly(a)));return i.length===1?i[0]:{compositeFilter:{op:vw(n.op),filters:i}}})(s):ye(54877,{filter:s})}function _w(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function uy(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,i,a,c=we.min(),d=we.min(),m=Nt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.gt=e}}function ww(s){const e=pw({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Rh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.Dn=new Iw}addToCollectionParentIndex(e,n){return this.Dn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ts.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class Iw{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new gt(He.comparator),c=!a.has(i);return this.index[n]=a.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new gt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cy=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(cy,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ki(0)}static ur(){return new Ki(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="LruGarbageCollector",Sw=1048576;function Mm([s,e],[n,i]){const a=Ae(s,n);return a===0?Ae(e,i):a}class Aw{constructor(e){this.Tr=e,this.buffer=new gt(Mm),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Mm(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Cw{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(Dm,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){eo(n)?oe(Dm,"Ignoring IndexedDB error during garbage collection: ",n):await Zi(n)}await this.Rr(3e5)}))}}class Rw{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return G.resolve(fu.ue);const i=new Aw(n);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Vm)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vm):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,a,c,d,m,y,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((P=>(P>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),a=this.params.maximumSequenceNumbersToCollect):a=P,d=Date.now(),this.nthSequenceNumber(e,a)))).next((P=>(i=P,m=Date.now(),this.removeTargets(e,i,n)))).next((P=>(c=P,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((P=>(_=Date.now(),Ui()<=De.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${a} in `+(m-d)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${P} documents in `+(_-y)+`ms
Total Duration: ${_-w}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:P}))))}}function Pw(s,e){return new Rw(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.changes=new Gs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&aa(i.mutation,a,an.empty(),Qe.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Pe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Pe()){const a=Us();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((c=>{let d=ea();return c.forEach(((m,y)=>{d=d.insert(m,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=Us();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Pe())))}populateOverlays(e,n,i){const a=[];return i.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,i,a){let c=Tr();const d=oa(),m=(function(){return oa()})();return n.forEach(((y,_)=>{const w=i.get(_.key);a.has(_.key)&&(w===void 0||w.mutation instanceof ls)?c=c.insert(_.key,_):w!==void 0?(d.set(_.key,w.mutation.getFieldMask()),aa(w.mutation,_,w.mutation.getFieldMask(),Qe.now())):d.set(_.key,an.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((_,w)=>d.set(_,w))),n.forEach(((_,w)=>{var P;return m.set(_,new kw(w,(P=d.get(_))!==null&&P!==void 0?P:null))})),m)))}recalculateAndSaveOverlays(e,n){const i=oa();let a=new Ze(((d,m)=>d-m)),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((y=>{const _=n.get(y);if(_===null)return;let w=i.get(y)||an.empty();w=m.applyToLocalView(_,w),i.set(y,w);const P=(a.get(m.batchId)||Pe()).add(y);a=a.insert(m.batchId,P)}))})).next((()=>{const d=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),_=y.key,w=y.value,P=Hg();w.forEach((C=>{if(!c.has(C)){const b=Yg(n.get(C),i.get(C));b!==null&&P.set(C,b),c=c.add(C)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,P))}return G.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return(function(d){return fe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ug(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-c.size):G.resolve(Us());let m=ca,y=c;return d.next((_=>G.forEach(_,((w,P)=>(m<P.largestBatchId&&(m=P.largestBatchId),c.get(w)?G.resolve():this.remoteDocumentCache.getEntry(e,w).next((C=>{y=y.insert(w,C)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,y,_,Pe()))).next((w=>({batchId:m,changes:qg(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next((i=>{let a=ea();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const c=n.collectionGroup;let d=ea();return this.indexManager.getCollectionParents(e,c).next((m=>G.forEach(m,(y=>{const _=(function(P,C){return new to(C,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,i,a).next((w=>{w.forEach(((P,C)=>{d=d.insert(P,C)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,a)))).next((d=>{c.forEach(((y,_)=>{const w=_.getKey();d.get(w)===null&&(d=d.insert(w,jt.newInvalidDocument(w)))}));let m=ea();return d.forEach(((y,_)=>{const w=c.get(y);w!==void 0&&aa(w.mutation,_,an.empty(),Qe.now()),yu(n,_)&&(m=m.insert(y,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return G.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Yn(a.createTime)}})(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:ww(a.bundledQuery),readTime:Yn(a.readTime)}})(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.overlays=new Ze(fe.comparator),this.kr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Us();return G.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,c)=>{this.wt(e,n,c)})),G.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.kr.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const a=Us(),c=n.length+1,d=new fe(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,_=y.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&y.largestBatchId>i&&a.set(y.getKey(),y)}return G.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let c=new Ze(((_,w)=>_-w));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>i){let w=c.get(_.largestBatchId);w===null&&(w=Us(),c=c.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const m=Us(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,w)=>m.set(_,w))),!(m.size()>=a)););return G.resolve(m)}wt(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const d=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new JE(n,i));let c=this.kr.get(n);c===void 0&&(c=Pe(),this.kr.set(n,c)),this.kr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this.qr=new gt(Tt.Qr),this.$r=new gt(Tt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Tt(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Tt(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new fe(new He([])),i=new Tt(n,e),a=new Tt(n,e+1),c=[];return this.$r.forEachInRange([i,a],(d=>{this.Wr(d),c.push(d.key)})),c}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new fe(new He([])),i=new Tt(n,e),a=new Tt(n,e+1);let c=Pe();return this.$r.forEachInRange([i,a],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Tt(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Tt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return fe.comparator(e.key,n.key)||Ae(e.Hr,n.Hr)}static Ur(e,n){return Ae(e.Hr,n.Hr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new gt(Tt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new YE(c,n,i,a);this.mutationQueue.push(d);for(const m of a)this.Yr=this.Yr.add(new Tt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return G.resolve(d)}lookupMutationBatch(e,n){return G.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.Xr(i),c=a<0?0:a;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Hh:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Tt(n,0),a=new Tt(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([i,a],(d=>{const m=this.Zr(d.Hr);c.push(m)})),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new gt(Ae);return n.forEach((a=>{const c=new Tt(a,0),d=new Tt(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,d],(m=>{i=i.add(m.Hr)}))})),G.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let c=i;fe.isDocumentKey(c)||(c=c.child(""));const d=new Tt(new fe(c),0);let m=new gt(Ae);return this.Yr.forEachWhile((y=>{const _=y.key.path;return!!i.isPrefixOf(_)&&(_.length===a&&(m=m.add(y.Hr)),!0)}),d),G.resolve(this.ei(m))}ei(e){const n=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){je(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return G.forEach(n.mutations,(a=>{const c=new Tt(a.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Tt(n,0),a=this.Yr.firstAfterOrEqual(i);return G.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.ni=e,this.docs=(function(){return new Ze(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),c=a?a.size:0,d=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let i=Tr();return n.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():jt.newInvalidDocument(a))})),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let c=Tr();const d=n.path,m=new fe(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:_,value:{document:w}}=y.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||hE(cE(w),i)<=0||(a.has(w.key)||yu(n,w))&&(c=c.insert(w.key,w.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(e,n,i,a){ye(9500)}ri(e,n){return G.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new Fw(this)}getSize(e){return G.resolve(this.size)}}class Fw extends Nw{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(i)})),G.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.persistence=e,this.ii=new Gs((n=>Qh(n)),Kh),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.si=0,this.oi=new td,this.targetCount=0,this._i=Ki.ar()}forEachTarget(e,n){return this.ii.forEach(((i,a)=>n(a))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),G.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ki(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.hr(n),G.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let a=0;const c=[];return this.ii.forEach(((d,m)=>{m.sequenceNumber<=n&&i.get(m.targetId)===null&&(this.ii.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),G.waitFor(c).next((()=>a))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((d=>{c.push(a.markPotentiallyOrphaned(e,d))})),G.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){this.ai={},this.overlays={},this.ui=new fu(0),this.ci=!1,this.ci=!0,this.li=new Mw,this.referenceDelegate=e(this),this.hi=new jw(this),this.indexManager=new Tw,this.remoteDocumentCache=(function(a){return new Lw(a)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new Ew(n),this.Ti=new Vw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Dw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new Ow(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){oe("MemoryPersistence","Starting transaction:",e);const a=new bw(this.ui.next());return this.referenceDelegate.Ii(),i(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,n){return G.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class bw extends fE{constructor(e){super(),this.currentSequenceNumber=e}}class nd{constructor(e){this.persistence=e,this.Ai=new td,this.Ri=null}static Vi(e){return new nd(e)}get mi(){if(this.Ri)return this.Ri;throw ye(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.mi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,(i=>{const a=fe.fromPath(i);return this.fi(e,a).next((c=>{c||n.removeEntry(a,we.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return G.or([()=>G.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class lu{constructor(e,n){this.persistence=e,this.gi=new Gs((i=>gE(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=Pw(this,n)}static Vi(e,n){return new lu(e,n)}Ii(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return G.forEach(this.gi,((i,a)=>this.Sr(e,i,a).next((c=>c?G.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ri(e,(d=>this.Sr(e,d,n).next((m=>{m||(i++,c.removeEntry(d,we.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wl(e.data.value)),n}Sr(e,n,i){return G.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return G.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=a}static Es(e,n){let i=Pe(),a=Pe();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new rd(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return D_()?8:pE(x_())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,a){const c={result:null};return this.ps(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ys(e,n,a,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new Uw;return this.ws(e,n,d).next((m=>{if(c.result=m,this.Rs)return this.Ss(e,n,d,m.size)}))})).next((()=>c.result))}Ss(e,n,i,a){return i.documentReadCount<this.Vs?(Ui()<=De.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",zi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Ui()<=De.DEBUG&&oe("QueryEngine","Query:",zi(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(Ui()<=De.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",zi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):G.resolve())}ps(e,n){if(Tm(n))return G.resolve(null);let i=Xn(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=Rh(n,null,"F"),i=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Pe(...c);return this.gs.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,i).next((y=>{const _=this.bs(n,m);return this.Ds(n,_,d,y.readTime)?this.ps(e,Rh(n,null,"F")):this.vs(e,_,n,y)}))))})))))}ys(e,n,i,a){return Tm(n)||a.isEqual(we.min())?G.resolve(null):this.gs.getDocuments(e,i).next((c=>{const d=this.bs(n,c);return this.Ds(n,d,i,a)?G.resolve(null):(Ui()<=De.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zi(n)),this.vs(e,d,n,uE(a,ca)).next((m=>m)))}))}bs(e,n){let i=new gt(Bg(e));return n.forEach(((a,c)=>{yu(e,c)&&(i=i.add(c))})),i}Ds(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ws(e,n,i){return Ui()<=De.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",zi(n)),this.gs.getDocumentsMatchingQuery(e,n,ts.min(),i)}vs(e,n,i,a){return this.gs.getDocumentsMatchingQuery(e,i,a).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="LocalStore",Bw=3e8;class $w{constructor(e,n,i,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new Ze(Ae),this.Ms=new Gs((c=>Qh(c)),Kh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function qw(s,e,n,i){return new $w(s,e,n,i)}async function dy(s,e){const n=Te(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],m=[];let y=Pe();for(const _ of a){d.push(_.batchId);for(const w of _.mutations)y=y.add(w.key)}for(const _ of c){m.push(_.batchId);for(const w of _.mutations)y=y.add(w.key)}return n.localDocuments.getDocuments(i,y).next((_=>({Bs:_,removedBatchIds:d,addedBatchIds:m})))}))}))}function Hw(s,e){const n=Te(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return(function(m,y,_,w){const P=_.batch,C=P.keys();let b=G.resolve();return C.forEach((z=>{b=b.next((()=>w.getEntry(y,z))).next((Q=>{const q=_.docVersions.get(z);je(q!==null,48541),Q.version.compareTo(q)<0&&(P.applyToRemoteDocument(Q,_),Q.isValidDocument()&&(Q.setReadTime(_.commitVersion),w.addEntry(Q)))}))})),b.next((()=>m.mutationQueue.removeMutationBatch(y,P)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let y=Pe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(y=y.add(m.batch.mutations[_].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function fy(s){const e=Te(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function Gw(s,e){const n=Te(s),i=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const m=[];e.targetChanges.forEach(((w,P)=>{const C=a.get(P);if(!C)return;m.push(n.hi.removeMatchingKeys(c,w.removedDocuments,P).next((()=>n.hi.addMatchingKeys(c,w.addedDocuments,P))));let b=C.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(P)!==null?b=b.withResumeToken(Nt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):w.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(w.resumeToken,i)),a=a.insert(P,b),(function(Q,q,Z){return Q.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=Bw?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(C,b,w)&&m.push(n.hi.updateTargetData(c,b))}));let y=Tr(),_=Pe();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,w))})),m.push(Ww(c,d,e.documentUpdates).next((w=>{y=w.Ls,_=w.ks}))),!i.isEqual(we.min())){const w=n.hi.getLastRemoteSnapshotVersion(c).next((P=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(w)}return G.waitFor(m).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,_))).next((()=>y))})).then((c=>(n.Fs=a,c)))}function Ww(s,e,n){let i=Pe(),a=Pe();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let d=Tr();return n.forEach(((m,y)=>{const _=c.get(m);y.isFoundDocument()!==_.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(we.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):oe(sd,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",y.version)})),{Ls:d,ks:a}}))}function Qw(s,e){const n=Te(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Hh),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Kw(s,e){const n=Te(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.hi.getTargetData(i,e).next((c=>c?(a=c,G.resolve(a)):n.hi.allocateTargetId(i).next((d=>(a=new Qr(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function Vh(s,e,n){const i=Te(s),a=i.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!eo(d))throw d;oe(sd,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(a.target)}function Om(s,e,n){const i=Te(s);let a=we.min(),c=Pe();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,_,w){const P=Te(y),C=P.Ms.get(w);return C!==void 0?G.resolve(P.Fs.get(C)):P.hi.getTargetData(_,w)})(i,d,Xn(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,m.targetId).next((y=>{c=y}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,n?a:we.min(),n?c:Pe()))).next((m=>(Xw(i,OE(e),m),{documents:m,qs:c})))))}function Xw(s,e,n){let i=s.xs.get(e)||we.min();n.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.xs.set(e,i)}class Lm{constructor(){this.activeTargetIds=zE()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yw{constructor(){this.Fo=new Lm,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Lm,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="ConnectivityMonitor";class jm{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(Fm,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){oe(Fm,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function Dh(){return ql===null?ql=(function(){return 268435456+Math.round(2147483648*Math.random())})():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="RestConnection",Zw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e1{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===ru?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,n,i,a,c){const d=Dh(),m=this.Go(e,n.toUriEncodedString());oe(dh,`Sending RPC '${e}' ${d}:`,m,i);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(y,a,c);const{host:_}=new URL(m),w=zh(_);return this.jo(e,m,y,i,w).then((P=>(oe(dh,`Received RPC '${e}' ${d}: `,P),P)),(P=>{throw es(dh,`RPC '${e}' ${d} failed with error: `,P,"url: ",m,"request:",i),P}))}Jo(e,n,i,a,c,d){return this.Wo(e,n,i,a,c)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ji})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),i&&i.headers.forEach(((a,c)=>e[c]=a))}Go(e,n){const i=Zw[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class n1 extends e1{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,a,c){const d=Dh();return new Promise(((m,y)=>{const _=new pg;_.setWithCredentials(!0),_.listenOnce(mg.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Gl.NO_ERROR:const P=_.getResponseJson();oe(Lt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(P)),m(P);break;case Gl.TIMEOUT:oe(Lt,`RPC '${e}' ${d} timed out`),y(new se(H.DEADLINE_EXCEEDED,"Request time out"));break;case Gl.HTTP_ERROR:const C=_.getStatus();if(oe(Lt,`RPC '${e}' ${d} failed with status:`,C,"response text:",_.getResponseText()),C>0){let b=_.getResponseJson();Array.isArray(b)&&(b=b[0]);const z=b==null?void 0:b.error;if(z&&z.status&&z.message){const Q=(function(Z){const $=Z.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf($)>=0?$:H.UNKNOWN})(z.status);y(new se(Q,z.message))}else y(new se(H.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new se(H.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{c_:e,streamId:d,l_:_.getLastErrorCode(),h_:_.getLastError()})}}finally{oe(Lt,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(a);oe(Lt,`RPC '${e}' ${d} sending request:`,a),_.send(n,"POST",w,i,15)}))}P_(e,n,i){const a=Dh(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=vg(),m=yg(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.zo(y.initMessageHeaders,n,i),y.encodeInitMessageHeaders=!0;const w=c.join("");oe(Lt,`Creating RPC '${e}' stream ${a}: ${w}`,y);const P=d.createWebChannel(w,y);this.T_(P);let C=!1,b=!1;const z=new t1({Ho:q=>{b?oe(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(C||(oe(Lt,`Opening RPC '${e}' stream ${a} transport.`),P.open(),C=!0),oe(Lt,`RPC '${e}' stream ${a} sending:`,q),P.send(q))},Yo:()=>P.close()}),Q=(q,Z,$)=>{q.listen(Z,(Y=>{try{$(Y)}catch(re){setTimeout((()=>{throw re}),0)}}))};return Q(P,Zo.EventType.OPEN,(()=>{b||(oe(Lt,`RPC '${e}' stream ${a} transport opened.`),z.s_())})),Q(P,Zo.EventType.CLOSE,(()=>{b||(b=!0,oe(Lt,`RPC '${e}' stream ${a} transport closed`),z.__(),this.I_(P))})),Q(P,Zo.EventType.ERROR,(q=>{b||(b=!0,es(Lt,`RPC '${e}' stream ${a} transport errored. Name:`,q.name,"Message:",q.message),z.__(new se(H.UNAVAILABLE,"The operation could not be completed")))})),Q(P,Zo.EventType.MESSAGE,(q=>{var Z;if(!b){const $=q.data[0];je(!!$,16349);const Y=$,re=(Y==null?void 0:Y.error)||((Z=Y[0])===null||Z===void 0?void 0:Z.error);if(re){oe(Lt,`RPC '${e}' stream ${a} received error:`,re);const ve=re.status;let Ee=(function(R){const x=lt[R];if(x!==void 0)return ey(x)})(ve),V=re.message;Ee===void 0&&(Ee=H.INTERNAL,V="Unknown error status: "+ve+" with message "+re.message),b=!0,z.__(new se(Ee,V)),P.close()}else oe(Lt,`RPC '${e}' stream ${a} received:`,$),z.a_($)}})),Q(m,gg.STAT_EVENT,(q=>{q.stat===Eh.PROXY?oe(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):q.stat===Eh.NOPROXY&&oe(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{z.o_()}),0),z}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(s){return new ow(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,i=1e3,a=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=a,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-i);a>0&&oe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="PersistentStream";class my{constructor(e,n,i,a,c,d,m,y){this.Fi=e,this.w_=i,this.S_=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new py(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.b_===n&&this.W_(i,a)}),(i=>{e((()=>{const a=new se(H.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{i((()=>this.G_(a)))})),this.stream.onMessage((a=>{i((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return oe(bm,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(oe(bm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class r1 extends my{constructor(e,n,i,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=uw(this.serializer,e),i=(function(c){if(!("targetChange"in c))return we.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?we.min():d.readTime?Yn(d.readTime):we.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=xh(this.serializer),n.addTarget=(function(c,d){let m;const y=d.target;if(m=Ah(y)?{documents:dw(c,y)}:{query:fw(c,y).Vt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=ry(c,d.resumeToken);const _=Ph(c,d.expectedCount);_!==null&&(m.expectedCount=_)}else if(d.snapshotVersion.compareTo(we.min())>0){m.readTime=au(c,d.snapshotVersion.toTimestamp());const _=Ph(c,d.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=mw(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=xh(this.serializer),n.removeTarget=e,this.k_(n)}}class s1 extends my{constructor(e,n,i,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=hw(e.writeResults,e.commitTime),i=Yn(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=xh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>cw(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{}class o1 extends i1{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new se(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,Nh(n,i),a,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(H.UNKNOWN,c.toString())}))}Jo(e,n,i,a,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Jo(e,Nh(n,i),a,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new se(H.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class a1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(wr(n),this._a=!1):oe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="RemoteStore";class l1{constructor(e,n,i,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{Ws(this)&&(oe(qs,"Restarting streams for network reachability change."),await(async function(y){const _=Te(y);_.Ia.add(4),await wa(_),_.Aa.set("Unknown"),_.Ia.delete(4),await Tu(_)})(this))}))})),this.Aa=new a1(i,a)}}async function Tu(s){if(Ws(s))for(const e of s.da)await e(!0)}async function wa(s){for(const e of s.da)await e(!1)}function gy(s,e){const n=Te(s);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),ld(n)?ad(n):no(n).x_()&&od(n,e))}function id(s,e){const n=Te(s),i=no(n);n.Ta.delete(e),i.x_()&&yy(n,e),n.Ta.size===0&&(i.x_()?i.B_():Ws(n)&&n.Aa.set("Unknown"))}function od(s,e){if(s.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}no(s).H_(e)}function yy(s,e){s.Ra.$e(e),no(s).Y_(e)}function ad(s){s.Ra=new nw({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>s.Ta.get(e)||null,lt:()=>s.datastore.serializer.databaseId}),no(s).start(),s.Aa.aa()}function ld(s){return Ws(s)&&!no(s).M_()&&s.Ta.size>0}function Ws(s){return Te(s).Ia.size===0}function vy(s){s.Ra=void 0}async function u1(s){s.Aa.set("Online")}async function c1(s){s.Ta.forEach(((e,n)=>{od(s,e)}))}async function h1(s,e){vy(s),ld(s)?(s.Aa.la(e),ad(s)):s.Aa.set("Unknown")}async function d1(s,e,n){if(s.Aa.set("Online"),e instanceof ny&&e.state===2&&e.cause)try{await(async function(a,c){const d=c.cause;for(const m of c.targetIds)a.Ta.has(m)&&(await a.remoteSyncer.rejectListen(m,d),a.Ta.delete(m),a.Ra.removeTarget(m))})(s,e)}catch(i){oe(qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await uu(s,i)}else if(e instanceof Xl?s.Ra.Ye(e):e instanceof ty?s.Ra.it(e):s.Ra.et(e),!n.isEqual(we.min()))try{const i=await fy(s.localStore);n.compareTo(i)>=0&&await(function(c,d){const m=c.Ra.Pt(d);return m.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const w=c.Ta.get(_);w&&c.Ta.set(_,w.withResumeToken(y.resumeToken,d))}})),m.targetMismatches.forEach(((y,_)=>{const w=c.Ta.get(y);if(!w)return;c.Ta.set(y,w.withResumeToken(Nt.EMPTY_BYTE_STRING,w.snapshotVersion)),yy(c,y);const P=new Qr(w.target,y,_,w.sequenceNumber);od(c,P)})),c.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(i){oe(qs,"Failed to raise snapshot:",i),await uu(s,i)}}async function uu(s,e,n){if(!eo(e))throw e;s.Ia.add(1),await wa(s),s.Aa.set("Offline"),n||(n=()=>fy(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{oe(qs,"Retrying IndexedDB access"),await n(),s.Ia.delete(1),await Tu(s)}))}function _y(s,e){return e().catch((n=>uu(s,n,e)))}async function Iu(s){const e=Te(s),n=is(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hh;for(;f1(e);)try{const a=await Qw(e.localStore,i);if(a===null){e.Pa.length===0&&n.B_();break}i=a.batchId,p1(e,a)}catch(a){await uu(e,a)}Ey(e)&&wy(e)}function f1(s){return Ws(s)&&s.Pa.length<10}function p1(s,e){s.Pa.push(e);const n=is(s);n.x_()&&n.Z_&&n.X_(e.mutations)}function Ey(s){return Ws(s)&&!is(s).M_()&&s.Pa.length>0}function wy(s){is(s).start()}async function m1(s){is(s).na()}async function g1(s){const e=is(s);for(const n of s.Pa)e.X_(n.mutations)}async function y1(s,e,n){const i=s.Pa.shift(),a=Jh.from(i,e,n);await _y(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Iu(s)}async function v1(s,e){e&&is(s).Z_&&await(async function(i,a){if((function(d){return ew(d)&&d!==H.ABORTED})(a.code)){const c=i.Pa.shift();is(i).N_(),await _y(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Iu(i)}})(s,e),Ey(s)&&wy(s)}async function Um(s,e){const n=Te(s);n.asyncQueue.verifyOperationInProgress(),oe(qs,"RemoteStore received new credentials");const i=Ws(n);n.Ia.add(3),await wa(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Tu(n)}async function _1(s,e){const n=Te(s);e?(n.Ia.delete(2),await Tu(n)):e||(n.Ia.add(2),await wa(n),n.Aa.set("Unknown"))}function no(s){return s.Va||(s.Va=(function(n,i,a){const c=Te(n);return c.ia(),new r1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:u1.bind(null,s),e_:c1.bind(null,s),n_:h1.bind(null,s),J_:d1.bind(null,s)}),s.da.push((async e=>{e?(s.Va.N_(),ld(s)?ad(s):s.Aa.set("Unknown")):(await s.Va.stop(),vy(s))}))),s.Va}function is(s){return s.ma||(s.ma=(function(n,i,a){const c=Te(n);return c.ia(),new s1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),e_:m1.bind(null,s),n_:v1.bind(null,s),ea:g1.bind(null,s),ta:y1.bind(null,s)}),s.da.push((async e=>{e?(s.ma.N_(),await Iu(s)):(await s.ma.stop(),s.Pa.length>0&&(oe(qs,`Stopping write stream with ${s.Pa.length} pending writes`),s.Pa=[]))}))),s.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,i,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,c){const d=Date.now()+i,m=new ud(e,n,d,a,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cd(s,e){if(wr("AsyncQueue",`${e}: ${s}`),eo(s))return new se(H.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{static emptySet(e){return new Hi(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||fe.comparator(n.key,i.key):(n,i)=>fe.comparator(n.key,i.key),this.keyedMap=ea(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Hi;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.fa=new Ze(fe.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ye(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Xi{constructor(e,n,i,a,c,d,m,y,_){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,n,i,a,c){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new Xi(e,n,Hi.emptySet(n),d,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class w1{constructor(){this.queries=Bm(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const a=Te(n),c=a.queries;a.queries=Bm(),c.forEach(((d,m)=>{for(const y of m.wa)y.onError(i)}))})(this,new se(H.ABORTED,"Firestore shutting down"))}}function Bm(){return new Gs((s=>zg(s)),gu)}async function Ty(s,e){const n=Te(s);let i=3;const a=e.query;let c=n.queries.get(a);c?!c.Sa()&&e.ba()&&(i=2):(c=new E1,i=e.ba()?0:1);try{switch(i){case 0:c.ya=await n.onListen(a,!0);break;case 1:c.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(d){const m=cd(d,`Initialization of query '${zi(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&hd(n)}async function Iy(s,e){const n=Te(s),i=e.query;let a=3;const c=n.queries.get(i);if(c){const d=c.wa.indexOf(e);d>=0&&(c.wa.splice(d,1),c.wa.length===0?a=e.ba()?0:1:!c.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function T1(s,e){const n=Te(s);let i=!1;for(const a of e){const c=a.query,d=n.queries.get(c);if(d){for(const m of d.wa)m.Ca(a)&&(i=!0);d.ya=a}}i&&hd(n)}function I1(s,e,n){const i=Te(s),a=i.queries.get(e);if(a)for(const c of a.wa)c.onError(n);i.queries.delete(e)}function hd(s){s.Da.forEach((e=>{e.next()}))}var Mh,$m;($m=Mh||(Mh={})).Fa="default",$m.Cache="cache";class Sy{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Xi(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Mh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this.key=e}}class Cy{constructor(e){this.key=e}}class S1{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pe(),this.mutatedKeys=Pe(),this.Xa=Bg(e),this.eu=new Hi(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new zm,a=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,d=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,_=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((w,P)=>{const C=a.get(w),b=yu(this.query,P)?P:null,z=!!C&&this.mutatedKeys.has(C.key),Q=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let q=!1;C&&b?C.data.isEqual(b.data)?z!==Q&&(i.track({type:3,doc:b}),q=!0):this.iu(C,b)||(i.track({type:2,doc:b}),q=!0,(y&&this.Xa(b,y)>0||_&&this.Xa(b,_)<0)&&(m=!0)):!C&&b?(i.track({type:0,doc:b}),q=!0):C&&!b&&(i.track({type:1,doc:C}),q=!0,(y||_)&&(m=!0)),q&&(b?(d=d.add(b),c=Q?c.add(w):c.delete(w)):(d=d.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),c=c.delete(w.key),i.track({type:1,doc:w})}return{eu:d,ru:i,Ds:m,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((w,P)=>(function(b,z){const Q=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{At:q})}};return Q(b)-Q(z)})(w.type,P.type)||this.Xa(w.doc,P.doc))),this.su(i),a=a!=null&&a;const m=n&&!a?this.ou():[],y=this.Za.size===0&&this.current&&!a?1:0,_=y!==this.Ya;return this.Ya=y,d.length!==0||_?{snapshot:new Xi(this.query,e.eu,c,d,e.mutatedKeys,y===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:m}:{_u:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zm,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pe(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new Cy(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new Ay(i))})),n}uu(e){this.Ha=e.qs,this.Za=Pe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Xi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const dd="SyncEngine";class A1{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class C1{constructor(e){this.key=e,this.lu=!1}}class R1{constructor(e,n,i,a,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Gs((m=>zg(m)),gu),this.Tu=new Map,this.Iu=new Set,this.du=new Ze(fe.comparator),this.Eu=new Map,this.Au=new td,this.Ru={},this.Vu=new Map,this.mu=Ki.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function P1(s,e,n=!0){const i=Vy(s);let a;const c=i.Pu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.cu()):a=await Ry(i,e,n,!0),a}async function N1(s,e){const n=Vy(s);await Ry(n,e,!0,!1)}async function Ry(s,e,n,i){const a=await Kw(s.localStore,Xn(e)),c=a.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let m;return i&&(m=await k1(s,e,c,d==="current",a.resumeToken)),s.isPrimaryClient&&n&&gy(s.remoteStore,a),m}async function k1(s,e,n,i,a){s.gu=(P,C,b)=>(async function(Q,q,Z,$){let Y=q.view.nu(Z);Y.Ds&&(Y=await Om(Q.localStore,q.query,!1).then((({documents:V})=>q.view.nu(V,Y))));const re=$&&$.targetChanges.get(q.targetId),ve=$&&$.targetMismatches.get(q.targetId)!=null,Ee=q.view.applyChanges(Y,Q.isPrimaryClient,re,ve);return Hm(Q,q.targetId,Ee._u),Ee.snapshot})(s,P,C,b);const c=await Om(s.localStore,e,!0),d=new S1(e,c.qs),m=d.nu(c.documents),y=Ea.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",a),_=d.applyChanges(m,s.isPrimaryClient,y);Hm(s,n,_._u);const w=new A1(e,n,d);return s.Pu.set(e,w),s.Tu.has(n)?s.Tu.get(n).push(e):s.Tu.set(n,[e]),_.snapshot}async function x1(s,e,n){const i=Te(s),a=i.Pu.get(e),c=i.Tu.get(a.targetId);if(c.length>1)return i.Tu.set(a.targetId,c.filter((d=>!gu(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Vh(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&id(i.remoteStore,a.targetId),Oh(i,a.targetId)})).catch(Zi)):(Oh(i,a.targetId),await Vh(i.localStore,a.targetId,!0))}async function V1(s,e){const n=Te(s),i=n.Pu.get(e),a=n.Tu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),id(n.remoteStore,i.targetId))}async function D1(s,e,n){const i=U1(s);try{const a=await(function(d,m){const y=Te(d),_=Qe.now(),w=m.reduce(((b,z)=>b.add(z.key)),Pe());let P,C;return y.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let z=Tr(),Q=Pe();return y.Os.getEntries(b,w).next((q=>{z=q,z.forEach(((Z,$)=>{$.isValidDocument()||(Q=Q.add(Z))}))})).next((()=>y.localDocuments.getOverlayedDocuments(b,z))).next((q=>{P=q;const Z=[];for(const $ of m){const Y=KE($,P.get($.key).overlayedDocument);Y!=null&&Z.push(new ls($.key,Y,Dg(Y.value.mapValue),Ln.exists(!0)))}return y.mutationQueue.addMutationBatch(b,_,Z,m)})).next((q=>{C=q;const Z=q.applyToLocalDocumentSet(P,Q);return y.documentOverlayCache.saveOverlays(b,q.batchId,Z)}))})).then((()=>({batchId:C.batchId,changes:qg(P)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(d,m,y){let _=d.Ru[d.currentUser.toKey()];_||(_=new Ze(Ae)),_=_.insert(m,y),d.Ru[d.currentUser.toKey()]=_})(i,a.batchId,n),await Ta(i,a.changes),await Iu(i.remoteStore)}catch(a){const c=cd(a,"Failed to persist write");n.reject(c)}}async function Py(s,e){const n=Te(s);try{const i=await Gw(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const d=n.Eu.get(c);d&&(je(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.lu=!0:a.modifiedDocuments.size>0?je(d.lu,14607):a.removedDocuments.size>0&&(je(d.lu,42227),d.lu=!1))})),await Ta(n,i,e)}catch(i){await Zi(i)}}function qm(s,e,n){const i=Te(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Pu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(d,m){const y=Te(d);y.onlineState=m;let _=!1;y.queries.forEach(((w,P)=>{for(const C of P.wa)C.va(m)&&(_=!0)})),_&&hd(y)})(i.eventManager,e),a.length&&i.hu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function M1(s,e,n){const i=Te(s);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),c=a&&a.key;if(c){let d=new Ze(fe.comparator);d=d.insert(c,jt.newNoDocument(c,we.min()));const m=Pe().add(c),y=new Eu(we.min(),new Map,new Ze(Ae),d,m);await Py(i,y),i.du=i.du.remove(c),i.Eu.delete(e),fd(i)}else await Vh(i.localStore,e,!1).then((()=>Oh(i,e,n))).catch(Zi)}async function O1(s,e){const n=Te(s),i=e.batch.batchId;try{const a=await Hw(n.localStore,e);ky(n,i,null),Ny(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ta(n,a)}catch(a){await Zi(a)}}async function L1(s,e,n){const i=Te(s);try{const a=await(function(d,m){const y=Te(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let w;return y.mutationQueue.lookupMutationBatch(_,m).next((P=>(je(P!==null,37113),w=P.keys(),y.mutationQueue.removeMutationBatch(_,P)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,w,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w))).next((()=>y.localDocuments.getDocuments(_,w)))}))})(i.localStore,e);ky(i,e,n),Ny(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ta(i,a)}catch(a){await Zi(a)}}function Ny(s,e){(s.Vu.get(e)||[]).forEach((n=>{n.resolve()})),s.Vu.delete(e)}function ky(s,e,n){const i=Te(s);let a=i.Ru[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),i.Ru[i.currentUser.toKey()]=a}}function Oh(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Tu.get(e))s.Pu.delete(i),n&&s.hu.pu(i,n);s.Tu.delete(e),s.isPrimaryClient&&s.Au.zr(e).forEach((i=>{s.Au.containsKey(i)||xy(s,i)}))}function xy(s,e){s.Iu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(id(s.remoteStore,n),s.du=s.du.remove(e),s.Eu.delete(n),fd(s))}function Hm(s,e,n){for(const i of n)i instanceof Ay?(s.Au.addReference(i.key,e),F1(s,i)):i instanceof Cy?(oe(dd,"Document no longer in limbo: "+i.key),s.Au.removeReference(i.key,e),s.Au.containsKey(i.key)||xy(s,i.key)):ye(19791,{yu:i})}function F1(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Iu.has(i)||(oe(dd,"New document in limbo: "+n),s.Iu.add(i),fd(s))}function fd(s){for(;s.Iu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Iu.values().next().value;s.Iu.delete(e);const n=new fe(He.fromString(e)),i=s.mu.next();s.Eu.set(i,new C1(n)),s.du=s.du.insert(n,i),gy(s.remoteStore,new Qr(Xn(Xh(n.path)),i,"TargetPurposeLimboResolution",fu.ue))}}async function Ta(s,e,n){const i=Te(s),a=[],c=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((m,y)=>{d.push(i.gu(y,e,n).then((_=>{var w;if((_||n)&&i.isPrimaryClient){const P=_?!_.fromCache:(w=n==null?void 0:n.targetChanges.get(y.targetId))===null||w===void 0?void 0:w.current;i.sharedClientState.updateQueryState(y.targetId,P?"current":"not-current")}if(_){a.push(_);const P=rd.Es(y.targetId,_);c.push(P)}})))})),await Promise.all(d),i.hu.J_(a),await(async function(y,_){const w=Te(y);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(P=>G.forEach(_,(C=>G.forEach(C.Is,(b=>w.persistence.referenceDelegate.addReference(P,C.targetId,b))).next((()=>G.forEach(C.ds,(b=>w.persistence.referenceDelegate.removeReference(P,C.targetId,b)))))))))}catch(P){if(!eo(P))throw P;oe(sd,"Failed to update sequence numbers: "+P)}for(const P of _){const C=P.targetId;if(!P.fromCache){const b=w.Fs.get(C),z=b.snapshotVersion,Q=b.withLastLimboFreeSnapshotVersion(z);w.Fs=w.Fs.insert(C,Q)}}})(i.localStore,c))}async function j1(s,e){const n=Te(s);if(!n.currentUser.isEqual(e)){oe(dd,"User change. New user:",e.toKey());const i=await dy(n.localStore,e);n.currentUser=e,(function(c,d){c.Vu.forEach((m=>{m.forEach((y=>{y.reject(new se(H.CANCELLED,d))}))})),c.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ta(n,i.Bs)}}function b1(s,e){const n=Te(s),i=n.Eu.get(e);if(i&&i.lu)return Pe().add(i.key);{let a=Pe();const c=n.Tu.get(e);if(!c)return a;for(const d of c){const m=n.Pu.get(d);a=a.unionWith(m.view.tu)}return a}}function Vy(s){const e=Te(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Py.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M1.bind(null,e),e.hu.J_=T1.bind(null,e.eventManager),e.hu.pu=I1.bind(null,e.eventManager),e}function U1(s){const e=Te(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L1.bind(null,e),e}class cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return qw(this.persistence,new zw,e.initialUser,this.serializer)}Du(e){return new hy(nd.Vi,this.serializer)}bu(e){return new Yw}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cu.provider={build:()=>new cu};class z1 extends cu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){je(this.persistence.referenceDelegate instanceof lu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Cw(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new hy((i=>lu.Vi(i,n)),this.serializer)}}class Lh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qm(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=j1.bind(null,this.syncEngine),await _1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new w1})()}createDatastore(e){const n=wu(e.databaseInfo.databaseId),i=(function(c){return new n1(c)})(e.databaseInfo);return(function(c,d,m,y){return new o1(c,d,m,y)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,c,d,m){return new l1(i,a,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>qm(this.syncEngine,n,0)),(function(){return jm.C()?new jm:new Jw})())}createSyncEngine(e,n){return(function(a,c,d,m,y,_,w){const P=new R1(a,c,d,m,y,_);return w&&(P.fu=!0),P})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const c=Te(a);oe(qs,"RemoteStore shutting down."),c.Ia.add(5),await wa(c),c.Ea.shutdown(),c.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Lh.provider={build:()=>new Lh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class B1{constructor(e,n,i,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=Ft.UNAUTHENTICATED,this.clientId=qh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{oe(os,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(oe(os,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=cd(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ph(s,e){s.asyncQueue.verifyOperationInProgress(),oe(os,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await dy(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>{es("Terminating Firestore due to IndexedDb database deletion"),s.terminate().then((()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{es("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),s._offlineComponents=e}async function Gm(s,e){s.asyncQueue.verifyOperationInProgress();const n=await $1(s);oe(os,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>Um(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>Um(e.remoteStore,a))),s._onlineComponents=e}async function $1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){oe(os,"Using user provided OfflineComponentProvider");try{await ph(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===H.FAILED_PRECONDITION||a.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;es("Error using user provided cache. Falling back to memory cache: "+n),await ph(s,new cu)}}else oe(os,"Using default OfflineComponentProvider"),await ph(s,new z1(void 0));return s._offlineComponents}async function My(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(oe(os,"Using user provided OnlineComponentProvider"),await Gm(s,s._uninitializedComponentsProvider._online)):(oe(os,"Using default OnlineComponentProvider"),await Gm(s,new Lh))),s._onlineComponents}function q1(s){return My(s).then((e=>e.syncEngine))}async function Fh(s){const e=await My(s),n=e.eventManager;return n.onListen=P1.bind(null,e.syncEngine),n.onUnlisten=x1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=V1.bind(null,e.syncEngine),n}function H1(s,e,n={}){const i=new Jr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,y,_){const w=new Dy({next:C=>{w.Ou(),d.enqueueAndForget((()=>Iy(c,P))),C.fromCache&&y.source==="server"?_.reject(new se(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(C)},error:C=>_.reject(C)}),P=new Sy(m,w,{includeMetadataChanges:!0,ka:!0});return Ty(c,P)})(await Fh(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="firestore.googleapis.com",Qm=!0;class Km{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ly,this.ssl=Qm}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Qm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Sw)throw new se(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Oy((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new se(H.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new se(H.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new se(H.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Su{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Km({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Km(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Z0;switch(i.type){case"firstParty":return new rE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Wm.get(n);i&&(oe("ComponentProvider","Removing Datastore"),Wm.delete(n),i.terminate())})(this),Promise.resolve()}}function G1(s,e,n,i={}){var a;s=On(s,Su);const c=zh(e),d=s._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:s._getEmulatorOptions()}),y=`${e}:${n}`;c&&(C_(`https://${y}`),k_("Firestore",!0)),d.host!==Ly&&d.host!==y&&es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _=Object.assign(Object.assign({},d),{host:y,ssl:c,emulatorOptions:i});if(!Zl(_,m)&&(s._setSettings(_),i.mockUserToken)){let w,P;if(typeof i.mockUserToken=="string")w=i.mockUserToken,P=Ft.MOCK_USER;else{w=R_(i.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new se(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new Ft(C)}s._authCredentials=new eE(new Eg(w,P))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class it{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(va(n,it._jsonSchema))return new it(e,i||null,new fe(He.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:ct("string",it._jsonSchemaVersion),referencePath:ct("string")};class Zr extends us{constructor(e,n,i){super(e,n,Xh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new fe(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function Fy(s,e,...n){if(s=er(s),Tg("collection","path",e),s instanceof Su){const i=He.fromString(e,...n);return lm(i),new Zr(s,null,i)}{if(!(s instanceof it||s instanceof Zr))throw new se(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(He.fromString(e,...n));return lm(i),new Zr(s.firestore,null,i)}}function pd(s,e,...n){if(s=er(s),arguments.length===1&&(e=qh.newId()),Tg("doc","path",e),s instanceof Su){const i=He.fromString(e,...n);return am(i),new it(s,null,new fe(i))}{if(!(s instanceof it||s instanceof Zr))throw new se(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(He.fromString(e,...n));return am(i),new it(s.firestore,s instanceof Zr?s.converter:null,new fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="AsyncQueue";class Ym{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new py(this,"async_queue_retry"),this.oc=()=>{const i=fh();i&&oe(Xm,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Jr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!eo(e))throw e;oe(Xm,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,wr("INTERNAL UNHANDLED ERROR: ",Jm(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=ud.createAndSchedule(this,e,n,i,(c=>this.lc(c)));return this.ec.push(a),a}ac(){this.tc&&ye(47125,{hc:Jm(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Jm(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of i)if(c in a&&typeof a[c]=="function")return!0;return!1})(s,["next","error","complete"])}class Hs extends Su{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new Ym,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ym(e),this._firestoreClient=void 0,await e}}}function W1(s,e){const n=typeof s=="object"?s:U0(),i=typeof s=="string"?s:ru,a=O0(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=S_("firestore");c&&G1(a,...c)}return a}function md(s){if(s._terminated)throw new se(H.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Q1(s),s._firestoreClient}function Q1(s){var e,n,i;const a=s._freezeSettings(),c=(function(m,y,_,w){return new _E(m,y,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,Oy(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new B1(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&(function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Nt.fromBase64String(e))}catch(n){throw new se(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(va(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:ct("string",_n._jsonSchemaVersion),bytes:ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jn._jsonSchemaVersion}}static fromJSON(e){if(va(e,Jn._jsonSchema))return new Jn(e.latitude,e.longitude)}}Jn._jsonSchemaVersion="firestore/geoPoint/1.0",Jn._jsonSchema={type:ct("string",Jn._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(va(e,Zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zn(e.vectorValues);throw new se(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:ct("string",Zn._jsonSchemaVersion),vectorValues:ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=/^__.*__$/;class X1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new _a(e,this.data,n,this.fieldTransforms)}}class jy{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function by(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ec:s})}}class gd{constructor(e,n,i,a,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new gd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.fc(e),a}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return hu(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(by(this.Ec)&&K1.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Y1{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||wu(e)}Dc(e,n,i,a=!1){return new gd({Ec:e,methodName:n,bc:i,path:Pt.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(s){const e=s._freezeSettings(),n=wu(s._databaseId);return new Y1(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Uy(s,e,n,i,a,c={}){const d=s.Dc(c.merge||c.mergeFields?2:0,e,n,a);vd("Data must be an object, but it was:",d,i);const m=zy(i,d);let y,_;if(c.merge)y=new an(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const w=[];for(const P of c.mergeFields){const C=jh(e,P,n);if(!d.contains(C))throw new se(H.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);$y(w,C)||w.push(C)}y=new an(w),_=d.fieldTransforms.filter((P=>y.covers(P.field)))}else y=null,_=d.fieldTransforms;return new X1(new Jt(m),y,_)}class Pu extends Cu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pu}}class yd extends Cu{_toFieldTransform(e){return new HE(e.path,new ma)}isEqual(e){return e instanceof yd}}function J1(s,e,n,i){const a=s.Dc(1,e,n);vd("Data must be an object, but it was:",a,i);const c=[],d=Jt.empty();as(i,((y,_)=>{const w=_d(e,y,n);_=er(_);const P=a.gc(w);if(_ instanceof Pu)c.push(w);else{const C=Ia(_,P);C!=null&&(c.push(w),d.set(w,C))}}));const m=new an(c);return new jy(d,m,a.fieldTransforms)}function Z1(s,e,n,i,a,c){const d=s.Dc(1,e,n),m=[jh(e,i,n)],y=[a];if(c.length%2!=0)throw new se(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<c.length;C+=2)m.push(jh(e,c[C])),y.push(c[C+1]);const _=[],w=Jt.empty();for(let C=m.length-1;C>=0;--C)if(!$y(_,m[C])){const b=m[C];let z=y[C];z=er(z);const Q=d.gc(b);if(z instanceof Pu)_.push(b);else{const q=Ia(z,Q);q!=null&&(_.push(b),w.set(b,q))}}const P=new an(_);return new jy(w,P,d.fieldTransforms)}function eT(s,e,n,i=!1){return Ia(n,s.Dc(i?4:3,e))}function Ia(s,e){if(By(s=er(s)))return vd("Unsupported field value:",e,s),zy(s,e);if(s instanceof Cu)return(function(i,a){if(!by(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,a){const c=[];let d=0;for(const m of i){let y=Ia(m,a.yc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}})(s,e)}return(function(i,a){if((i=er(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BE(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Qe.fromDate(i);return{timestampValue:au(a.serializer,c)}}if(i instanceof Qe){const c=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:au(a.serializer,c)}}if(i instanceof Jn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _n)return{bytesValue:ry(a.serializer,i._byteString)};if(i instanceof it){const c=a.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw a.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ed(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Zn)return(function(d,m){return{mapValue:{fields:{[xg]:{stringValue:Vg},[su]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw m.wc("VectorValues must only contain numeric values.");return Yh(m.serializer,_)}))}}}}}})(i,a);throw a.wc(`Unsupported field value: ${du(i)}`)})(s,e)}function zy(s,e){const n={};return Ag(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(s,((i,a)=>{const c=Ia(a,e.Vc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function By(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Qe||s instanceof Jn||s instanceof _n||s instanceof it||s instanceof Cu||s instanceof Zn)}function vd(s,e,n){if(!By(n)||!Ig(n)){const i=du(n);throw i==="an object"?e.wc(s+" a custom object"):e.wc(s+" "+i)}}function jh(s,e,n){if((e=er(e))instanceof Au)return e._internalPath;if(typeof e=="string")return _d(s,e);throw hu("Field path arguments must be of type string or ",s,!1,void 0,n)}const tT=new RegExp("[~\\*/\\[\\]]");function _d(s,e,n){if(e.search(tT)>=0)throw hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Au(...e.split("."))._internalPath}catch{throw hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function hu(s,e,n,i,a){const c=i&&!i.isEmpty(),d=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${i}`),d&&(y+=` in document ${a}`),y+=")"),new se(H.INVALID_ARGUMENT,m+s+y)}function $y(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,i,a,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ed("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nT extends qy{data(){return super.data()}}function Ed(s,e){return typeof e=="string"?_d(s,e):e instanceof Au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new se(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wd{}class Gy extends wd{}function Wy(s,e,...n){let i=[];e instanceof wd&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((y=>y instanceof Id)).length,m=c.filter((y=>y instanceof Td)).length;if(d>1||d>0&&m>0)throw new se(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class Td extends Gy{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Td(e,n,i)}_apply(e){const n=this._parse(e);return Ky(e._query,n),new us(e.firestore,e.converter,Ch(e._query,n))}_parse(e){const n=Ru(e.firestore);return(function(c,d,m,y,_,w,P){let C;if(_.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new se(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){tg(P,w);const z=[];for(const Q of P)z.push(eg(y,c,Q));C={arrayValue:{values:z}}}else C=eg(y,c,P)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||tg(P,w),C=eT(m,d,P,w==="in"||w==="not-in");return ut.create(_,w,C)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Id extends wd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Id(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let d=a;const m=c.getFlattenedFilters();for(const y of m)Ky(d,y),d=Ch(d,y)})(e._query,n),new us(e.firestore,e.converter,Ch(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sd extends Gy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sd(e,n)}_apply(e){const n=(function(a,c,d){if(a.startAt!==null)throw new se(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new se(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pa(c,d)})(e._query,this._field,this._direction);return new us(e.firestore,e.converter,(function(a,c){const d=a.explicitOrderBy.concat([c]);return new to(a.path,a.collectionGroup,d,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Qy(s,e="asc"){const n=e,i=Ed("orderBy",s);return Sd._create(i,n)}function eg(s,e,n){if(typeof(n=er(n))=="string"){if(n==="")throw new se(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ug(e)&&n.indexOf("/")!==-1)throw new se(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(He.fromString(n));if(!fe.isDocumentKey(i))throw new se(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gm(s,new fe(i))}if(n instanceof it)return gm(s,n._key);throw new se(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${du(n)}.`)}function tg(s,e){if(!Array.isArray(s)||s.length===0)throw new se(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ky(s,e){const n=(function(a,c){for(const d of a)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rT{convertValue(e,n="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return as(e,((a,c)=>{i[a]=this.convertValue(c,n)})),i}convertVectorValue(e){var n,i,a;const c=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[su].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map((d=>st(d.doubleValue)));return new Zn(c)}convertGeoPoint(e){return new Jn(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=mu(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ha(e));default:return null}}convertTimestamp(e){const n=ns(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=He.fromString(e);je(uy(i),9688,{name:e});const a=new da(i.get(1),i.get(3)),c=new fe(i.popFirst(5));return a.isEqual(n)||wr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class na{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zs extends qy{constructor(e,n,i,a,c,d){super(e,n,i,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Ed("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:ct("string",zs._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};class Yl extends zs{data(e={}){return super.data(e)}}class Bs{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new na(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Yl(this._firestore,this._userDataWriter,i.key,i,new na(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((m=>{const y=new Yl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new na(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const y=new Yl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new na(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let _=-1,w=-1;return m.type!==0&&(_=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),w=d.indexOf(m.doc.key)),{type:sT(m.type),doc:y,oldIndex:_,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sT(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:s})}}Bs._jsonSchemaVersion="firestore/querySnapshot/1.0",Bs._jsonSchema={type:ct("string",Bs._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};class Ad extends rT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function iT(s){s=On(s,us);const e=On(s.firestore,Hs),n=md(e),i=new Ad(e);return Hy(s._query),H1(n,s._query).then((a=>new Bs(e,i,s,a)))}function oT(s,e,n){s=On(s,it);const i=On(s.firestore,Hs),a=Xy(s.converter,e);return Cd(i,[Uy(Ru(i),"setDoc",s._key,a,s.converter!==null,n).toMutation(s._key,Ln.none())])}function aT(s,e,n,...i){s=On(s,it);const a=On(s.firestore,Hs),c=Ru(a);let d;return d=typeof(e=er(e))=="string"||e instanceof Au?Z1(c,"updateDoc",s._key,e,n,i):J1(c,"updateDoc",s._key,e),Cd(a,[d.toMutation(s._key,Ln.exists(!0))])}function lT(s,e){const n=On(s.firestore,Hs),i=pd(s),a=Xy(s.converter,e);return Cd(n,[Uy(Ru(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,Ln.exists(!1))]).then((()=>i))}function Yy(s,...e){var n,i,a;s=er(s);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||Zm(e[d])||(c=e[d++]);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Zm(e[d])){const P=e[d];e[d]=(n=P.next)===null||n===void 0?void 0:n.bind(P),e[d+1]=(i=P.error)===null||i===void 0?void 0:i.bind(P),e[d+2]=(a=P.complete)===null||a===void 0?void 0:a.bind(P)}let y,_,w;if(s instanceof it)_=On(s.firestore,Hs),w=Xh(s._key.path),y={next:P=>{e[d]&&e[d](uT(_,s,P))},error:e[d+1],complete:e[d+2]};else{const P=On(s,us);_=On(P.firestore,Hs),w=P._query;const C=new Ad(_);y={next:b=>{e[d]&&e[d](new Bs(_,C,P,b))},error:e[d+1],complete:e[d+2]},Hy(s._query)}return(function(C,b,z,Q){const q=new Dy(Q),Z=new Sy(b,q,z);return C.asyncQueue.enqueueAndForget((async()=>Ty(await Fh(C),Z))),()=>{q.Ou(),C.asyncQueue.enqueueAndForget((async()=>Iy(await Fh(C),Z)))}})(md(_),w,m,y)}function Cd(s,e){return(function(i,a){const c=new Jr;return i.asyncQueue.enqueueAndForget((async()=>D1(await q1(i),a,c))),c.promise})(md(s),e)}function uT(s,e,n){const i=n.docs.get(e._key),a=new Ad(s);return new zs(s,a,e._key,i,new na(n.hasPendingWrites,n.fromCache),e.converter)}function Rd(){return new yd("serverTimestamp")}(function(e,n=!0){(function(a){Ji=a})(b0),tu(new la("firestore",((i,{instanceIdentifier:a,options:c})=>{const d=i.getProvider("app").getImmediate(),m=new Hs(new tE(i.getProvider("auth-internal")),new sE(d,i.getProvider("app-check-internal")),(function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new se(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new da(_.options.projectId,w)})(d,a),d);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),qi(nm,rm,e),qi(nm,rm,"esm2017")})();const cT=[{id:"match-1",matchNumber:1,home:"feel-united",away:"dhurandhars",date:"2025-01-29",time:"17:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-2",matchNumber:2,home:"userflow",away:"goaldiggers",date:"2025-01-29",time:"17:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-3",matchNumber:3,home:"userflow",away:"dhurandhars",date:"2025-01-29",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-4",matchNumber:4,home:"goaldiggers",away:"dhurandhars",date:"2025-01-29",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-5",matchNumber:5,home:"feel-united",away:"userflow",date:"2025-01-30",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-6",matchNumber:6,home:"goaldiggers",away:"feel-united",date:"2025-01-30",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-7",matchNumber:7,home:"dhurandhars",away:"userflow",date:"2025-01-30",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-8",matchNumber:8,home:"goaldiggers",away:"userflow",date:"2025-01-30",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-9",matchNumber:9,home:"dhurandhars",away:"feel-united",date:"2025-01-30",time:"20:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-10",matchNumber:10,home:"feel-united",away:"goaldiggers",date:"2025-02-02",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-11",matchNumber:11,home:"dhurandhars",away:"goaldiggers",date:"2025-02-02",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-12",matchNumber:12,home:"userflow",away:"feel-united",date:"2025-02-02",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-13",matchNumber:13,home:"tbd",away:"tbd",date:"2025-02-02",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!0}],Jy=s=>new Date(s).toLocaleDateString("en-IN",{weekday:"short",month:"short",day:"numeric"}),hT=s=>{const[e,n]=s.split(":"),i=parseInt(e),a=i>=12?"PM":"AM";return`${i%12||12}:${n} ${a}`},dT={apiKey:"AIzaSyAYRukNJGOvVmL2jRAMgLtKkDzU7c6wo88",authDomain:"republic-cup-live.firebaseapp.com",projectId:"republic-cup-live",storageBucket:"republic-cup-live.firebasestorage.app",messagingSenderId:"642499294047",appId:"1:642499294047:web:f5a8b111b79bb8673abcea"},fT=cg(dT),Nu=W1(fT),Zy=Fy(Nu,"matches"),ev=Fy(Nu,"predictions"),pT=async()=>{try{if((await iT(Zy)).empty){console.log("Seeding matches collection...");for(const e of cT)await oT(pd(Nu,"matches",e.id),{...e,createdAt:Rd()});return console.log("Matches seeded successfully!"),!0}return!1}catch(s){return console.error("Error seeding matches:",s),!1}},mT=s=>{const e=Wy(Zy,Qy("matchNumber"));return Yy(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)},n=>{console.error("Error subscribing to matches:",n)})},Hl=async(s,e)=>{try{const n=pd(Nu,"matches",s);return await aT(n,{...e,updatedAt:Rd()}),!0}catch(n){return console.error("Error updating match:",n),!1}},gT=async s=>{try{return await lT(ev,{...s,submittedAt:Rd()}),!0}catch(e){return console.error("Error submitting prediction:",e),!1}},yT=s=>{const e=Wy(ev,Qy("submittedAt","desc"));return Yy(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)})},ln={"feel-united":{id:"feel-united",name:"Feel United",shortName:"FEE",color:"#FFFFFF",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249520/spitha_prod_uploads/2026_01/feel_united_1769249519167.webp",players:["Ninad","Aditya Thakur","Umair","Sagar Awasthi","Sandipan Bala","Gahan","Rishab Khanna"]},dhurandhars:{id:"dhurandhars",name:"Dhurandhars",shortName:"DHU",color:"#000000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249469/spitha_prod_uploads/2026_01/durandhars_1769249467581.webp",players:["Sagar Singh","Raghu","Sukhpal","Mayank","Manish Pandey","Bharath Kumar","Shashank"]},goaldiggers:{id:"goaldiggers",name:"The Goaldiggers",shortName:"GDG",color:"#87CEEB",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249929/spitha_prod_uploads/2026_01/the_goaldiggers2_1769249927876.webp",players:["Parth Jhawar","Abdul Rehman","Pratham P","Durgesh Suthar","Navdeep","Rajendra Ranka","Dhrouv Pujari"]},userflow:{id:"userflow",name:"Userflow United",shortName:"UFU",color:"#FF0000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249558/spitha_prod_uploads/2026_01/userflow_united_1769249557427.webp",players:["Sumedh Zope","Avaneesh Kulkarni","Kushal","Jalaj Varshney","Anurag Kumar Singh","Sandeep Xavier","Hriday Bhatia"]}},tv=Ie.createContext(null),cs=()=>{const s=Ie.useContext(tv);if(!s)throw new Error("useApp must be used within AppProvider");return s},vT=({children:s})=>{const[e,n]=Ie.useState([]),[i,a]=Ie.useState([]),[c,d]=Ie.useState(!1),[m,y]=Ie.useState(!0),[_,w]=Ie.useState("matches");Ie.useEffect(()=>{localStorage.getItem("republic-cup-admin")==="true"&&d(!0)},[]),Ie.useEffect(()=>{let Z,$;return(async()=>{await pT(),Z=mT(re=>{n(re),y(!1)}),$=yT(re=>{a(re)})})(),()=>{Z&&Z(),$&&$()}},[]);const P=Ie.useCallback(Z=>Z==="1234"?(d(!0),localStorage.setItem("republic-cup-admin","true"),!0):!1,[]),C=Ie.useCallback(()=>{d(!1),localStorage.removeItem("republic-cup-admin")},[]),b=Ie.useCallback(()=>{const Z={};return Object.keys(ln).forEach($=>{Z[$]={teamId:$,played:0,won:0,drawn:0,lost:0,goalsFor:0,goalsAgainst:0,goalDifference:0,points:0}}),e.filter($=>$.status==="ft"&&!$.isFinal).forEach($=>{const Y=$.home,re=$.away,ve=$.scoreHome||0,Ee=$.scoreAway||0;!Z[Y]||!Z[re]||(Z[Y].played++,Z[re].played++,Z[Y].goalsFor+=ve,Z[Y].goalsAgainst+=Ee,Z[re].goalsFor+=Ee,Z[re].goalsAgainst+=ve,ve>Ee?(Z[Y].won++,Z[Y].points+=3,Z[re].lost++):ve<Ee?(Z[re].won++,Z[re].points+=3,Z[Y].lost++):(Z[Y].drawn++,Z[re].drawn++,Z[Y].points++,Z[re].points++))}),Object.values(Z).map($=>({...$,goalDifference:$.goalsFor-$.goalsAgainst})).sort(($,Y)=>Y.points!==$.points?Y.points-$.points:Y.goalDifference!==$.goalDifference?Y.goalDifference-$.goalDifference:Y.goalsFor-$.goalsFor)},[e]),z=Ie.useCallback(()=>{const Z={};return e.forEach($=>{($.goals||[]).forEach(Y=>{const re=`${Y.player}-${Y.team}`;Z[re]||(Z[re]={player:Y.player,team:Y.team,goals:0}),Z[re].goals++})}),Object.values(Z).sort(($,Y)=>Y.goals-$.goals).slice(0,10)},[e]),Q=Ie.useCallback(()=>e.filter(Z=>Z.status==="upcoming"&&Z.home!=="tbd"),[e]),q={matches:e,predictions:i,isAdmin:c,loading:m,activeTab:_,setActiveTab:w,loginAdmin:P,logoutAdmin:C,calculateTable:b,calculateTopScorers:z,getUpcomingMatches:Q};return T.jsx(tv.Provider,{value:q,children:s})},_T=({onClose:s})=>{const{loginAdmin:e}=cs(),[n,i]=Ie.useState(["","","",""]),[a,c]=Ie.useState(!1),[d,m]=Ie.useState(!1),y=[Ie.useRef(),Ie.useRef(),Ie.useRef(),Ie.useRef()];Ie.useEffect(()=>{var C;(C=y[0].current)==null||C.focus()},[]);const _=(C,b)=>{var Q;if(b&&!/^\d$/.test(b))return;const z=[...n];if(z[C]=b,i(z),c(!1),b&&C<3&&((Q=y[C+1].current)==null||Q.focus()),b&&C===3){const q=z.join("");setTimeout(()=>{e(q)?s():(c(!0),m(!0),setTimeout(()=>{var Z;m(!1),i(["","","",""]),(Z=y[0].current)==null||Z.focus()},500))},100)}},w=(C,b)=>{var z;b.key==="Backspace"&&!n[C]&&C>0&&((z=y[C-1].current)==null||z.focus())},P=C=>{C.preventDefault();const b=C.clipboardData.getData("text").slice(0,4);if(/^\d+$/.test(b)){const z=b.split("").concat(["","","",""]).slice(0,4);i(z),z[3]&&setTimeout(()=>{e(z.join(""))?s():(c(!0),m(!0),setTimeout(()=>{var Q;m(!1),i(["","","",""]),(Q=y[0].current)==null||Q.focus()},500))},100)}};return T.jsx("div",{className:"modal-overlay",onClick:s,children:T.jsxs("div",{className:`modal-content pin-modal ${d?"shake":""}`,onClick:C=>C.stopPropagation(),children:[T.jsxs("div",{className:"modal-header",children:[T.jsx("h2",{children:"Admin Access"}),T.jsx("button",{className:"modal-close",onClick:s,children:""})]}),T.jsxs("div",{className:"pin-content",children:[T.jsx("p",{className:"pin-label",children:"Enter 4-digit PIN"}),T.jsx("div",{className:"pin-inputs",onPaste:P,children:n.map((C,b)=>T.jsx("input",{ref:y[b],type:"password",inputMode:"numeric",maxLength:1,value:C,onChange:z=>_(b,z.target.value),onKeyDown:z=>w(b,z),className:`pin-input ${a?"error":""}`,autoComplete:"off"},b))}),a&&T.jsx("p",{className:"pin-error",children:"Incorrect PIN. Try again."})]})]})})},ET=()=>{const{isAdmin:s,logoutAdmin:e}=cs(),[n,i]=Ie.useState(!1),[a,c]=Ie.useState(0),d=()=>{const m=a+1;c(m),m>=3&&(i(!0),c(0)),setTimeout(()=>c(0),2e3)};return T.jsxs(T.Fragment,{children:[T.jsxs("header",{className:"header",children:[T.jsxs("div",{className:"header-content",children:[T.jsxs("div",{className:"header-brand",children:[T.jsx("img",{src:"/trophy.svg",alt:"Trophy",className:"header-logo"}),T.jsxs("div",{className:"header-title-group",children:[T.jsx("h1",{className:"header-title",children:"REPUBLIC CUP"}),T.jsx("span",{className:"header-year",children:"2025"})]})]}),T.jsxs("div",{className:"header-actions",children:[s&&T.jsx("button",{className:"admin-badge",onClick:e,title:"Click to logout",children:"ADMIN"}),T.jsx("span",{className:"version-tag",onClick:d,children:"v1.0"})]})]}),s&&T.jsx("div",{className:"admin-banner",children:"Admin Mode Active - You can edit matches"})]}),n&&T.jsx(_T,{onClose:()=>i(!1)})]})},wT=()=>{const{activeTab:s,setActiveTab:e,matches:n}=cs(),i=n.filter(c=>c.status==="live").length,a=[{id:"matches",label:"Matches",icon:T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.jsx("circle",{cx:"12",cy:"12",r:"10"}),T.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}),T.jsx("path",{d:"M2 12h20"})]}),badge:i>0?i:null},{id:"table",label:"Table",icon:T.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:T.jsx("path",{d:"M3 3h18v18H3zM3 9h18M3 15h18M9 3v18"})})},{id:"polls",label:"Polls",icon:T.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:T.jsx("path",{d:"M18 20V10M12 20V4M6 20v-6"})})}];return T.jsx("nav",{className:"bottom-nav",children:T.jsx("div",{className:"nav-content",children:a.map(c=>T.jsxs("button",{className:`nav-item ${s===c.id?"active":""}`,onClick:()=>e(c.id),children:[T.jsxs("div",{className:"nav-icon-wrapper",children:[T.jsx("span",{className:"nav-icon",children:c.icon}),c.badge&&T.jsx("span",{className:"nav-badge",children:c.badge})]}),T.jsx("span",{className:"nav-label",children:c.label})]},c.id))})})},TT=({teamId:s,isHome:e,onSelect:n,onClose:i})=>{const a=ln[s];return a?T.jsx("div",{className:"modal-overlay",onClick:i,children:T.jsxs("div",{className:"modal-content goal-modal",onClick:c=>c.stopPropagation(),children:[T.jsxs("div",{className:"modal-header",children:[T.jsx("h2",{children:"Who Scored?"}),T.jsx("button",{className:"modal-close",onClick:i,children:""})]}),T.jsxs("div",{className:"goal-modal-content",children:[T.jsxs("div",{className:"goal-team-header",children:[T.jsx("img",{src:a.logo,alt:a.name,className:"goal-team-logo"}),T.jsx("span",{className:"goal-team-name",children:a.name})]}),T.jsxs("div",{className:"player-grid",children:[a.players.map(c=>T.jsxs("button",{className:"player-btn",onClick:()=>n(c,s),children:[T.jsx("span",{className:"player-initial",children:c.charAt(0)}),T.jsx("span",{className:"player-name",children:c})]},c)),T.jsxs("button",{className:"player-btn own-goal",onClick:()=>n("Own Goal",s),children:[T.jsx("span",{className:"player-initial",children:"OG"}),T.jsx("span",{className:"player-name",children:"Own Goal"})]})]})]})]})}):null},IT=({match:s,onClose:e})=>{const[n,i]=Ie.useState(s.status),[a,c]=Ie.useState(null),[d,m]=Ie.useState(!1),y=ln[s.home]||{name:"TBD",shortName:"TBD"},_=ln[s.away]||{name:"TBD",shortName:"TBD"},w=async z=>{m(!0),await Hl(s.id,{status:z}),i(z),m(!1)},P=async()=>{window.confirm("Are you sure you want to reset the score to 0-0?")&&(m(!0),await Hl(s.id,{scoreHome:0,scoreAway:0,goals:[]}),m(!1))},C=async(z,Q,q)=>{m(!0);const Z={player:z,team:Q,timestamp:new Date().toISOString()},$=[...s.goals||[],Z],Y=$.filter(ve=>ve.team===s.home).length,re=$.filter(ve=>ve.team===s.away).length;await Hl(s.id,{goals:$,scoreHome:Y,scoreAway:re}),c(null),m(!1)},b=async z=>{const Q=z?s.home:s.away;if((s.goals||[]).filter(ve=>ve.team===Q).length===0)return;const Z=s.goals.map(ve=>ve.team).lastIndexOf(Q),$=s.goals.filter((ve,Ee)=>Ee!==Z),Y=$.filter(ve=>ve.team===s.home).length,re=$.filter(ve=>ve.team===s.away).length;m(!0),await Hl(s.id,{goals:$,scoreHome:Y,scoreAway:re}),m(!1)};return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"modal-overlay",onClick:e,children:T.jsxs("div",{className:"modal-content admin-modal",onClick:z=>z.stopPropagation(),children:[T.jsxs("div",{className:"modal-header",children:[T.jsxs("h2",{children:["Edit Match ",s.matchNumber]}),T.jsx("button",{className:"modal-close",onClick:e,children:""})]}),T.jsxs("div",{className:"admin-content",children:[T.jsxs("div",{className:"admin-match-info",children:[T.jsxs("div",{className:"admin-team",children:[y.logo&&T.jsx("img",{src:y.logo,alt:y.name}),T.jsx("span",{children:y.shortName})]}),T.jsxs("div",{className:"admin-score",children:[T.jsx("span",{children:s.scoreHome}),T.jsx("span",{className:"admin-score-sep",children:"-"}),T.jsx("span",{children:s.scoreAway})]}),T.jsxs("div",{className:"admin-team",children:[_.logo&&T.jsx("img",{src:_.logo,alt:_.name}),T.jsx("span",{children:_.shortName})]})]}),T.jsxs("div",{className:"admin-section",children:[T.jsx("label",{children:"Match Status"}),T.jsx("div",{className:"status-buttons",children:["upcoming","live","ft"].map(z=>T.jsx("button",{className:`status-btn ${n===z?"active":""} status-${z}`,onClick:()=>w(z),disabled:d,children:z==="upcoming"?"Upcoming":z==="live"?"Live":"Full Time"},z))})]}),T.jsxs("div",{className:"admin-section",children:[T.jsx("label",{children:"Add Goal"}),T.jsxs("div",{className:"goal-buttons",children:[T.jsxs("button",{className:"goal-btn home",onClick:()=>c("home"),disabled:d||s.home==="tbd",children:["+ Goal ",y.shortName]}),T.jsxs("button",{className:"goal-btn away",onClick:()=>c("away"),disabled:d||s.away==="tbd",children:["+ Goal ",_.shortName]})]})]}),T.jsxs("div",{className:"admin-section",children:[T.jsx("label",{children:"Remove Last Goal"}),T.jsxs("div",{className:"goal-buttons",children:[T.jsxs("button",{className:"remove-btn",onClick:()=>b(!0),disabled:d||!(s.goals||[]).some(z=>z.team===s.home),children:["- ",y.shortName]}),T.jsxs("button",{className:"remove-btn",onClick:()=>b(!1),disabled:d||!(s.goals||[]).some(z=>z.team===s.away),children:["- ",_.shortName]})]})]}),s.goals&&s.goals.length>0&&T.jsxs("div",{className:"admin-section",children:[T.jsx("label",{children:"Goal Log"}),T.jsx("div",{className:"goal-log",children:s.goals.map((z,Q)=>{const q=ln[z.team];return T.jsxs("div",{className:"goal-log-item",children:[T.jsxs("span",{className:"goal-time",children:[Q+1,"."]}),T.jsx("span",{className:"goal-player",children:z.player}),T.jsxs("span",{className:"goal-team",children:["(",q==null?void 0:q.shortName,")"]})]},Q)})})]}),T.jsx("div",{className:"admin-section",children:T.jsx("button",{className:"reset-btn",onClick:P,disabled:d,children:"Reset Score (0-0)"})})]})]})}),a&&T.jsx(TT,{teamId:a==="home"?s.home:s.away,isHome:a==="home",onSelect:(z,Q)=>C(z,Q),onClose:()=>c(null)})]})},ng=({match:s})=>{const{isAdmin:e}=cs(),[n,i]=Ie.useState(!1),a=ln[s.home]||{name:"TBD",shortName:"TBD",logo:null},c=ln[s.away]||{name:"TBD",shortName:"TBD",logo:null},d=()=>{switch(s.status){case"live":return"status-live";case"ft":return"status-ft";default:return"status-upcoming"}},m=()=>{switch(s.status){case"live":return"LIVE";case"ft":return"FT";default:return hT(s.time)}},y=_=>(s.goals||[]).filter(w=>w.team===_).map(w=>w.player.split(" ")[0]).join(", ");return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:`match-card ${s.status} ${s.isFinal?"final":""}`,children:[s.isFinal&&T.jsx("div",{className:"final-badge",children:"FINAL"}),T.jsxs("div",{className:"match-header",children:[T.jsxs("span",{className:"match-number",children:["Match ",s.matchNumber]}),T.jsxs("span",{className:`match-status ${d()}`,children:[s.status==="live"&&T.jsx("span",{className:"live-dot"}),m()]})]}),T.jsxs("div",{className:"match-body",children:[T.jsxs("div",{className:"team home-team",children:[T.jsx("div",{className:"team-logo-wrapper",children:a.logo?T.jsx("img",{src:a.logo,alt:a.name,className:"team-logo"}):T.jsx("div",{className:"team-logo-placeholder",children:"?"})}),T.jsx("span",{className:"team-name",children:a.shortName}),s.status!=="upcoming"&&T.jsx("span",{className:"goal-scorers",children:y(s.home)})]}),T.jsx("div",{className:"score-container",children:s.status==="upcoming"?T.jsx("span",{className:"vs-text",children:"VS"}):T.jsxs("div",{className:"score",children:[T.jsx("span",{className:"score-home",children:s.scoreHome}),T.jsx("span",{className:"score-separator",children:"-"}),T.jsx("span",{className:"score-away",children:s.scoreAway})]})}),T.jsxs("div",{className:"team away-team",children:[T.jsx("div",{className:"team-logo-wrapper",children:c.logo?T.jsx("img",{src:c.logo,alt:c.name,className:"team-logo"}):T.jsx("div",{className:"team-logo-placeholder",children:"?"})}),T.jsx("span",{className:"team-name",children:c.shortName}),s.status!=="upcoming"&&T.jsx("span",{className:"goal-scorers",children:y(s.away)})]})]}),e&&T.jsx("button",{className:"edit-button",onClick:()=>i(!0),children:"Edit"})]}),n&&T.jsx(IT,{match:s,onClose:()=>i(!1)})]})},ST=()=>{const{matches:s,loading:e}=cs(),n=Ie.useMemo(()=>{const a={};return s.forEach(c=>{const d=c.date;a[d]||(a[d]=[]),a[d].push(c)}),Object.entries(a).sort(([c],[d])=>new Date(c)-new Date(d)).map(([c,d])=>({date:c,dateLabel:Jy(c),matches:d.sort((m,y)=>m.time.localeCompare(y.time))}))},[s]),i=s.filter(a=>a.status==="live");return e?T.jsx("div",{className:"tab-content",children:T.jsx("div",{className:"loading-container",style:{minHeight:"200px"},children:T.jsx("div",{className:"loading-spinner"})})}):T.jsxs("div",{className:"tab-content",children:[i.length>0&&T.jsxs("section",{className:"live-section animate-fade-in",children:[T.jsxs("div",{className:"section-header",children:[T.jsx("h2",{className:"section-title",children:"PLAYING NOW"}),T.jsxs("span",{className:"section-badge live-badge",children:[i.length," LIVE"]})]}),i.map(a=>T.jsx(ng,{match:a},a.id))]}),n.map(a=>T.jsxs("section",{children:[T.jsx("div",{className:"date-divider",children:T.jsx("span",{className:"date-label",children:a.dateLabel})}),a.matches.map(c=>T.jsx(ng,{match:c},c.id))]},a.date)),s.length===0&&T.jsxs("div",{className:"empty-state",children:[T.jsx("div",{className:"empty-state-icon",children:""}),T.jsx("h3",{children:"No Matches Yet"}),T.jsx("p",{children:"Check back when the tournament begins!"})]})]})},AT=()=>{const{calculateTable:s,calculateTopScorers:e,matches:n}=cs(),i=Ie.useMemo(()=>s(),[s]),a=Ie.useMemo(()=>e(),[e]),c=n.filter(d=>d.status==="ft"&&!d.isFinal).length;return T.jsxs("div",{className:"tab-content",children:[T.jsxs("section",{className:"table-section animate-slide-up",children:[T.jsxs("div",{className:"section-header",children:[T.jsx("h2",{className:"section-title",children:"STANDINGS"}),T.jsxs("span",{className:"section-badge",children:[c," PLAYED"]})]}),T.jsxs("div",{className:"league-table",children:[T.jsxs("div",{className:"table-header",children:[T.jsx("span",{className:"col-pos",children:"#"}),T.jsx("span",{className:"col-team",children:"Team"}),T.jsx("span",{className:"col-stat",children:"P"}),T.jsx("span",{className:"col-stat",children:"GD"}),T.jsx("span",{className:"col-pts",children:"PTS"})]}),i.map((d,m)=>{const y=ln[d.teamId];return y?T.jsxs("div",{className:`table-row ${m<2?"qualified":""}`,style:{animationDelay:`${m*.05}s`},children:[T.jsx("span",{className:"col-pos",children:T.jsx("span",{className:`position ${m<2?"top":""}`,children:m+1})}),T.jsxs("span",{className:"col-team",children:[T.jsx("img",{src:y.logo,alt:y.name,className:"table-team-logo"}),T.jsx("span",{className:"table-team-name",children:y.shortName})]}),T.jsx("span",{className:"col-stat",children:d.played}),T.jsxs("span",{className:"col-stat",children:[d.goalDifference>0?"+":"",d.goalDifference]}),T.jsx("span",{className:"col-pts",children:d.points})]},d.teamId):null})]}),T.jsx("div",{className:"table-legend",children:T.jsxs("span",{className:"legend-item qualified-legend",children:[T.jsx("span",{className:"legend-dot"}),"Qualifies for Final"]})})]}),T.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.2s"},children:[T.jsxs("div",{className:"section-header",children:[T.jsx("h2",{className:"section-title",children:"TOP SCORERS"}),T.jsx("span",{className:"section-badge golden",children:"GOLDEN BOOT"})]}),a.length>0?T.jsx("div",{className:"scorers-list",children:a.map((d,m)=>{const y=ln[d.team];return T.jsxs("div",{className:`scorer-row ${m===0?"leader":""}`,style:{animationDelay:`${(m+4)*.05}s`},children:[T.jsx("span",{className:"scorer-rank",children:m===0?"":m===1?"":m===2?"":m+1}),T.jsxs("div",{className:"scorer-info",children:[T.jsx("span",{className:"scorer-name",children:d.player}),T.jsx("span",{className:"scorer-team",children:(y==null?void 0:y.name)||d.team})]}),T.jsx("span",{className:"scorer-goals",children:d.goals})]},`${d.player}-${d.team}`)})}):T.jsx("div",{className:"empty-state",children:T.jsx("p",{children:"No goals scored yet"})})]}),T.jsxs("section",{className:"stats-section animate-slide-up",style:{animationDelay:"0.3s"},children:[T.jsx("div",{className:"section-header",children:T.jsx("h2",{className:"section-title",children:"TOURNAMENT STATS"})}),T.jsxs("div",{className:"stats-grid",children:[T.jsxs("div",{className:"stat-card",children:[T.jsx("span",{className:"stat-value",children:n.reduce((d,m)=>d+(m.scoreHome||0)+(m.scoreAway||0),0)}),T.jsx("span",{className:"stat-label",children:"Total Goals"})]}),T.jsxs("div",{className:"stat-card",children:[T.jsx("span",{className:"stat-value",children:c}),T.jsx("span",{className:"stat-label",children:"Matches Played"})]}),T.jsxs("div",{className:"stat-card",children:[T.jsx("span",{className:"stat-value",children:c>0?(n.reduce((d,m)=>d+(m.scoreHome||0)+(m.scoreAway||0),0)/c).toFixed(1):"0.0"}),T.jsx("span",{className:"stat-label",children:"Goals/Match"})]})]})]})]})},CT=()=>{const{getUpcomingMatches:s,predictions:e}=cs(),[n,i]=Ie.useState(""),[a,c]=Ie.useState(""),[d,m]=Ie.useState(""),[y,_]=Ie.useState(!1),[w,P]=Ie.useState(!1),[C,b]=Ie.useState(""),z=Ie.useMemo(()=>s(),[s]),Q=Ie.useMemo(()=>{if(!a)return[];const $=z.find(Ee=>Ee.id===a);if(!$)return[];const Y=ln[$.home],re=ln[$.away],ve=[];return Y&&Y.players.forEach(Ee=>{ve.push({name:Ee,team:$.home,teamName:Y.name})}),re&&re.players.forEach(Ee=>{ve.push({name:Ee,team:$.away,teamName:re.name})}),ve},[a,z]),q=async $=>{if($.preventDefault(),b(""),!n.trim()){b("Please enter your name");return}if(!a){b("Please select a match");return}if(!d){b("Please select a player");return}_(!0);try{const Y=Q.find(ve=>ve.name===d),re=z.find(ve=>ve.id===a);await gT({userName:n.trim(),matchId:a,matchNumber:re==null?void 0:re.matchNumber,predictedPlayer:d,predictedTeam:Y==null?void 0:Y.team,predictedTeamName:Y==null?void 0:Y.teamName}),P(!0),i(""),c(""),m(""),setTimeout(()=>P(!1),5e3)}catch{b("Failed to submit prediction. Please try again.")}finally{_(!1)}},Z=Ie.useMemo(()=>{if(!a)return{};const $={};return e.filter(Y=>Y.matchId===a).forEach(Y=>{$[Y.predictedPlayer]=($[Y.predictedPlayer]||0)+1}),$},[a,e]);return T.jsxs("div",{className:"tab-content",children:[T.jsx("section",{className:"rules-section animate-slide-up",children:T.jsxs("div",{className:"rules-card",children:[T.jsxs("div",{className:"rules-header",children:[T.jsx("span",{className:"rules-icon",children:""}),T.jsx("h3",{children:"First Goal Scorer Prediction"})]}),T.jsxs("ul",{className:"rules-list",children:[T.jsxs("li",{children:["Predict who will score the ",T.jsx("strong",{children:"first goal"})," of the match"]}),T.jsxs("li",{children:["Winner receives ",T.jsx("strong",{children:"1000 coins"})]}),T.jsx("li",{children:"Tie-breaker: Prediction from winning team wins"})]})]})}),T.jsxs("section",{className:"poll-section animate-slide-up",style:{animationDelay:"0.1s"},children:[T.jsx("div",{className:"section-header",children:T.jsx("h2",{className:"section-title",children:"MAKE YOUR PREDICTION"})}),w&&T.jsxs("div",{className:"success-message animate-scale-in",children:[T.jsx("span",{className:"success-icon",children:""}),"Prediction submitted successfully!"]}),C&&T.jsx("div",{className:"error-message animate-scale-in",children:C}),T.jsxs("form",{onSubmit:q,className:"poll-form",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"userName",children:"Your Name"}),T.jsx("input",{type:"text",id:"userName",value:n,onChange:$=>i($.target.value),placeholder:"Enter your name",maxLength:30})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"matchSelect",children:"Select Match"}),T.jsxs("select",{id:"matchSelect",value:a,onChange:$=>{c($.target.value),m("")},children:[T.jsx("option",{value:"",children:"-- Choose a match --"}),z.map($=>{const Y=ln[$.home],re=ln[$.away];return T.jsxs("option",{value:$.id,children:["M",$.matchNumber,": ",Y==null?void 0:Y.shortName," vs ",re==null?void 0:re.shortName," (",Jy($.date),")"]},$.id)})]})]}),a&&T.jsxs("div",{className:"form-group animate-fade-in",children:[T.jsx("label",{htmlFor:"playerSelect",children:"First Goal Scorer"}),T.jsxs("select",{id:"playerSelect",value:d,onChange:$=>m($.target.value),children:[T.jsx("option",{value:"",children:"-- Choose a player --"}),Q.map($=>T.jsxs("option",{value:$.name,children:[$.name," (",$.teamName,")",Z[$.name]?` - ${Z[$.name]} votes`:""]},`${$.name}-${$.team}`))]})]}),T.jsx("button",{type:"submit",className:"submit-button",disabled:y||!n||!a||!d,children:y?T.jsxs("span",{className:"button-loading",children:[T.jsx("span",{className:"loading-spinner small"}),"Submitting..."]}):"Submit Prediction"})]})]}),e.length>0&&T.jsxs("section",{className:"recent-section animate-slide-up",style:{animationDelay:"0.2s"},children:[T.jsxs("div",{className:"section-header",children:[T.jsx("h2",{className:"section-title",children:"RECENT PREDICTIONS"}),T.jsx("span",{className:"section-badge",children:e.length})]}),T.jsx("div",{className:"predictions-list",children:e.slice(0,10).map($=>{var Y;return T.jsxs("div",{className:"prediction-item",children:[T.jsxs("div",{className:"prediction-user",children:[T.jsx("span",{className:"user-avatar",children:(Y=$.userName)==null?void 0:Y.charAt(0).toUpperCase()}),T.jsx("span",{className:"user-name",children:$.userName})]}),T.jsxs("div",{className:"prediction-detail",children:[T.jsx("span",{className:"predicted-player",children:$.predictedPlayer}),T.jsxs("span",{className:"predicted-match",children:["Match ",$.matchNumber]})]})]},$.id)})})]}),z.length===0&&T.jsxs("div",{className:"empty-state",children:[T.jsx("div",{className:"empty-state-icon",children:""}),T.jsx("h3",{children:"No Upcoming Matches"}),T.jsx("p",{children:"Predictions open before each match!"})]})]})},RT=()=>{const{activeTab:s,loading:e}=cs();return e?T.jsxs("div",{className:"loading-container",children:[T.jsx("div",{className:"loading-spinner"}),T.jsx("span",{className:"loading-text",children:"LOADING REPUBLIC CUP..."})]}):T.jsxs("div",{className:"app",children:[T.jsx(ET,{}),T.jsxs("main",{className:"main-content",children:[s==="matches"&&T.jsx(ST,{}),s==="table"&&T.jsx(AT,{}),s==="polls"&&T.jsx(CT,{})]}),T.jsx(wT,{})]})},PT=()=>T.jsx(vT,{children:T.jsx(RT,{})});f_.createRoot(document.getElementById("root")).render(T.jsx(Ie.StrictMode,{children:T.jsx(PT,{})}));
