(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var rh={exports:{}},Zo={},sh={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function o_(){if(Lm)return Ne;Lm=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),S=Symbol.iterator;function I(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,G={};function $(O,W,fe){this.props=O,this.context=W,this.refs=G,this.updater=fe||D}$.prototype.isReactComponent={},$.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},$.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Z(){}Z.prototype=$.prototype;function ee(O,W,fe){this.props=O,this.context=W,this.refs=G,this.updater=fe||D}var re=ee.prototype=new Z;re.constructor=ee,B(re,$.prototype),re.isPureReactComponent=!0;var de=Array.isArray,Me=Object.prototype.hasOwnProperty,Q={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function T(O,W,fe){var Ie,Ae={},Pe=null,Oe=null;if(W!=null)for(Ie in W.ref!==void 0&&(Oe=W.ref),W.key!==void 0&&(Pe=""+W.key),W)Me.call(W,Ie)&&!A.hasOwnProperty(Ie)&&(Ae[Ie]=W[Ie]);var Le=arguments.length-2;if(Le===1)Ae.children=fe;else if(1<Le){for(var $e=Array(Le),yt=0;yt<Le;yt++)$e[yt]=arguments[yt+2];Ae.children=$e}if(O&&O.defaultProps)for(Ie in Le=O.defaultProps,Le)Ae[Ie]===void 0&&(Ae[Ie]=Le[Ie]);return{$$typeof:s,type:O,key:Pe,ref:Oe,props:Ae,_owner:Q.current}}function x(O,W){return{$$typeof:s,type:O.type,key:W,ref:O.ref,props:O.props,_owner:O._owner}}function R(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function V(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return W[fe]})}var M=/\/+/g;function P(O,W){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):W.toString(36)}function ze(O,W,fe,Ie,Ae){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var Oe=!1;if(O===null)Oe=!0;else switch(Pe){case"string":case"number":Oe=!0;break;case"object":switch(O.$$typeof){case s:case e:Oe=!0}}if(Oe)return Oe=O,Ae=Ae(Oe),O=Ie===""?"."+P(Oe,0):Ie,de(Ae)?(fe="",O!=null&&(fe=O.replace(M,"$&/")+"/"),ze(Ae,W,fe,"",function(yt){return yt})):Ae!=null&&(R(Ae)&&(Ae=x(Ae,fe+(!Ae.key||Oe&&Oe.key===Ae.key?"":(""+Ae.key).replace(M,"$&/")+"/")+O)),W.push(Ae)),1;if(Oe=0,Ie=Ie===""?".":Ie+":",de(O))for(var Le=0;Le<O.length;Le++){Pe=O[Le];var $e=Ie+P(Pe,Le);Oe+=ze(Pe,W,fe,$e,Ae)}else if($e=I(O),typeof $e=="function")for(O=$e.call(O),Le=0;!(Pe=O.next()).done;)Pe=Pe.value,$e=Ie+P(Pe,Le++),Oe+=ze(Pe,W,fe,$e,Ae);else if(Pe==="object")throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Oe}function kt(O,W,fe){if(O==null)return O;var Ie=[],Ae=0;return ze(O,Ie,"","",function(Pe){return W.call(fe,Pe,Ae++)}),Ie}function Vt(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var Ue={current:null},ne={transition:null},pe={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:ne,ReactCurrentOwner:Q};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:kt,forEach:function(O,W,fe){kt(O,function(){W.apply(this,arguments)},fe)},count:function(O){var W=0;return kt(O,function(){W++}),W},toArray:function(O){return kt(O,function(W){return W})||[]},only:function(O){if(!R(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ne.Component=$,Ne.Fragment=n,Ne.Profiler=a,Ne.PureComponent=ee,Ne.StrictMode=i,Ne.Suspense=v,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Ne.act=ae,Ne.cloneElement=function(O,W,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Ie=B({},O.props),Ae=O.key,Pe=O.ref,Oe=O._owner;if(W!=null){if(W.ref!==void 0&&(Pe=W.ref,Oe=Q.current),W.key!==void 0&&(Ae=""+W.key),O.type&&O.type.defaultProps)var Le=O.type.defaultProps;for($e in W)Me.call(W,$e)&&!A.hasOwnProperty($e)&&(Ie[$e]=W[$e]===void 0&&Le!==void 0?Le[$e]:W[$e])}var $e=arguments.length-2;if($e===1)Ie.children=fe;else if(1<$e){Le=Array($e);for(var yt=0;yt<$e;yt++)Le[yt]=arguments[yt+2];Ie.children=Le}return{$$typeof:s,type:O.type,key:Ae,ref:Pe,props:Ie,_owner:Oe}},Ne.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:c,_context:O},O.Consumer=O},Ne.createElement=T,Ne.createFactory=function(O){var W=T.bind(null,O);return W.type=O,W},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(O){return{$$typeof:p,render:O}},Ne.isValidElement=R,Ne.lazy=function(O){return{$$typeof:N,_payload:{_status:-1,_result:O},_init:Vt}},Ne.memo=function(O,W){return{$$typeof:w,type:O,compare:W===void 0?null:W}},Ne.startTransition=function(O){var W=ne.transition;ne.transition={};try{O()}finally{ne.transition=W}},Ne.unstable_act=ae,Ne.useCallback=function(O,W){return Ue.current.useCallback(O,W)},Ne.useContext=function(O){return Ue.current.useContext(O)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(O){return Ue.current.useDeferredValue(O)},Ne.useEffect=function(O,W){return Ue.current.useEffect(O,W)},Ne.useId=function(){return Ue.current.useId()},Ne.useImperativeHandle=function(O,W,fe){return Ue.current.useImperativeHandle(O,W,fe)},Ne.useInsertionEffect=function(O,W){return Ue.current.useInsertionEffect(O,W)},Ne.useLayoutEffect=function(O,W){return Ue.current.useLayoutEffect(O,W)},Ne.useMemo=function(O,W){return Ue.current.useMemo(O,W)},Ne.useReducer=function(O,W,fe){return Ue.current.useReducer(O,W,fe)},Ne.useRef=function(O){return Ue.current.useRef(O)},Ne.useState=function(O){return Ue.current.useState(O)},Ne.useSyncExternalStore=function(O,W,fe){return Ue.current.useSyncExternalStore(O,W,fe)},Ne.useTransition=function(){return Ue.current.useTransition()},Ne.version="18.3.1",Ne}var Fm;function Uh(){return Fm||(Fm=1,sh.exports=o_()),sh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function a_(){if(bm)return Zo;bm=1;var s=Uh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(p,v,w){var N,S={},I=null,D=null;w!==void 0&&(I=""+w),v.key!==void 0&&(I=""+v.key),v.ref!==void 0&&(D=v.ref);for(N in v)i.call(v,N)&&!c.hasOwnProperty(N)&&(S[N]=v[N]);if(p&&p.defaultProps)for(N in v=p.defaultProps,v)S[N]===void 0&&(S[N]=v[N]);return{$$typeof:e,type:p,key:I,ref:D,props:S,_owner:a.current}}return Zo.Fragment=n,Zo.jsx=d,Zo.jsxs=d,Zo}var Um;function l_(){return Um||(Um=1,rh.exports=a_()),rh.exports}var g=l_(),ve=Uh(),Ul={},ih={exports:{}},Yt={},oh={exports:{}},ah={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function u_(){return zm||(zm=1,(function(s){function e(ne,pe){var ae=ne.length;ne.push(pe);e:for(;0<ae;){var O=ae-1>>>1,W=ne[O];if(0<a(W,pe))ne[O]=pe,ne[ae]=W,ae=O;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var pe=ne[0],ae=ne.pop();if(ae!==pe){ne[0]=ae;e:for(var O=0,W=ne.length,fe=W>>>1;O<fe;){var Ie=2*(O+1)-1,Ae=ne[Ie],Pe=Ie+1,Oe=ne[Pe];if(0>a(Ae,ae))Pe<W&&0>a(Oe,Ae)?(ne[O]=Oe,ne[Pe]=ae,O=Pe):(ne[O]=Ae,ne[Ie]=ae,O=Ie);else if(Pe<W&&0>a(Oe,ae))ne[O]=Oe,ne[Pe]=ae,O=Pe;else break e}}return pe}function a(ne,pe){var ae=ne.sortIndex-pe.sortIndex;return ae!==0?ae:ne.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var v=[],w=[],N=1,S=null,I=3,D=!1,B=!1,G=!1,$=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(ne){for(var pe=n(w);pe!==null;){if(pe.callback===null)i(w);else if(pe.startTime<=ne)i(w),pe.sortIndex=pe.expirationTime,e(v,pe);else break;pe=n(w)}}function de(ne){if(G=!1,re(ne),!B)if(n(v)!==null)B=!0,Vt(Me);else{var pe=n(w);pe!==null&&Ue(de,pe.startTime-ne)}}function Me(ne,pe){B=!1,G&&(G=!1,Z(T),T=-1),D=!0;var ae=I;try{for(re(pe),S=n(v);S!==null&&(!(S.expirationTime>pe)||ne&&!V());){var O=S.callback;if(typeof O=="function"){S.callback=null,I=S.priorityLevel;var W=O(S.expirationTime<=pe);pe=s.unstable_now(),typeof W=="function"?S.callback=W:S===n(v)&&i(v),re(pe)}else i(v);S=n(v)}if(S!==null)var fe=!0;else{var Ie=n(w);Ie!==null&&Ue(de,Ie.startTime-pe),fe=!1}return fe}finally{S=null,I=ae,D=!1}}var Q=!1,A=null,T=-1,x=5,R=-1;function V(){return!(s.unstable_now()-R<x)}function M(){if(A!==null){var ne=s.unstable_now();R=ne;var pe=!0;try{pe=A(!0,ne)}finally{pe?P():(Q=!1,A=null)}}else Q=!1}var P;if(typeof ee=="function")P=function(){ee(M)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,kt=ze.port2;ze.port1.onmessage=M,P=function(){kt.postMessage(null)}}else P=function(){$(M,0)};function Vt(ne){A=ne,Q||(Q=!0,P())}function Ue(ne,pe){T=$(function(){ne(s.unstable_now())},pe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ne){ne.callback=null},s.unstable_continueExecution=function(){B||D||(B=!0,Vt(Me))},s.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ne?Math.floor(1e3/ne):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_getFirstCallbackNode=function(){return n(v)},s.unstable_next=function(ne){switch(I){case 1:case 2:case 3:var pe=3;break;default:pe=I}var ae=I;I=pe;try{return ne()}finally{I=ae}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ne,pe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ae=I;I=ne;try{return pe()}finally{I=ae}},s.unstable_scheduleCallback=function(ne,pe,ae){var O=s.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?O+ae:O):ae=O,ne){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ae+W,ne={id:N++,callback:pe,priorityLevel:ne,startTime:ae,expirationTime:W,sortIndex:-1},ae>O?(ne.sortIndex=ae,e(w,ne),n(v)===null&&ne===n(w)&&(G?(Z(T),T=-1):G=!0,Ue(de,ae-O))):(ne.sortIndex=W,e(v,ne),B||D||(B=!0,Vt(Me))),ne},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(ne){var pe=I;return function(){var ae=I;I=pe;try{return ne.apply(this,arguments)}finally{I=ae}}}})(ah)),ah}var Bm;function c_(){return Bm||(Bm=1,oh.exports=u_()),oh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m;function h_(){if($m)return Yt;$m=1;var s=Uh(),e=c_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function c(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(a[t]=r,t=0;t<r.length;t++)i.add(r[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N={},S={};function I(t){return v.call(S,t)?!0:v.call(N,t)?!1:w.test(t)?S[t]=!0:(N[t]=!0,!1)}function D(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B(t,r,o,u){if(r===null||typeof r>"u"||D(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function G(t,r,o,u,h,m,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=m,this.removeEmptyString=_}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$[t]=new G(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];$[r]=new G(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){$[t]=new G(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$[t]=new G(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$[t]=new G(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){$[t]=new G(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){$[t]=new G(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){$[t]=new G(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){$[t]=new G(t,5,!1,t.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function ee(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Z,ee);$[r]=new G(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Z,ee);$[r]=new G(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Z,ee);$[r]=new G(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){$[t]=new G(t,1,!1,t.toLowerCase(),null,!1,!1)}),$.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){$[t]=new G(t,1,!1,t.toLowerCase(),null,!0,!0)});function re(t,r,o,u){var h=$.hasOwnProperty(r)?$[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(B(r,o,h,u)&&(o=null),u||h===null?I(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var de=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Me=Symbol.for("react.element"),Q=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),V=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),kt=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),ne=Symbol.iterator;function pe(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,O;function W(t){if(O===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||""}return`
`+O+t}var fe=!1;function Ie(t,r){if(!t||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),m=u.stack.split(`
`),_=h.length-1,C=m.length-1;1<=_&&0<=C&&h[_]!==m[C];)C--;for(;1<=_&&0<=C;_--,C--)if(h[_]!==m[C]){if(_!==1||C!==1)do if(_--,C--,0>C||h[_]!==m[C]){var k=`
`+h[_].replace(" at new "," at ");return t.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",t.displayName)),k}while(1<=_&&0<=C);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?W(t):""}function Ae(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return t=Ie(t.type,!1),t;case 11:return t=Ie(t.type.render,!1),t;case 1:return t=Ie(t.type,!0),t;default:return""}}function Pe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case Q:return"Portal";case x:return"Profiler";case T:return"StrictMode";case P:return"Suspense";case ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V:return(t.displayName||"Context")+".Consumer";case R:return(t._context.displayName||"Context")+".Provider";case M:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kt:return r=t.displayName||null,r!==null?r:Pe(t.type)||"Memo";case Vt:r=t._payload,t=t._init;try{return Pe(t(r))}catch{}}return null}function Oe(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(r);case 8:return r===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Le(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $e(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yt(t){var r=$e(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,m.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function nr(t){t._valueTracker||(t._valueTracker=yt(t))}function Ks(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=$e(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Sr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ds(t,r){var o=r.checked;return ae({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Xs(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Le(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function so(t,r){r=r.checked,r!=null&&re(t,"checked",r,!1)}function io(t,r){so(t,r);var o=Le(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Ys(t,r.type,o):r.hasOwnProperty("defaultValue")&&Ys(t,r.type,Le(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Aa(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Ys(t,r,o){(r!=="number"||Sr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var rr=Array.isArray;function sr(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Le(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function oo(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ae({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Js(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(rr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Le(o)}}function Zs(t,r){var o=Le(r.value),u=Le(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function ao(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ht(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ht(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ir,lo=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ir.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Ar(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ms=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){ms.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),fs[r]=fs[t]})});function uo(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||fs.hasOwnProperty(t)&&fs[t]?(""+r).trim():r+"px"}function co(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=uo(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var ho=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fo(t,r){if(r){if(ho[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function mo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function ei(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ti=null,un=null,Fn=null;function ni(t){if(t=Fo(t)){if(typeof ti!="function")throw Error(n(280));var r=t.stateNode;r&&(r=tl(r),ti(t.stateNode,t.type,r))}}function bn(t){un?Fn?Fn.push(t):Fn=[t]:un=t}function po(){if(un){var t=un,r=Fn;if(Fn=un=null,ni(t),r)for(t=0;t<r.length;t++)ni(r[t])}}function gs(t,r){return t(r)}function go(){}var or=!1;function yo(t,r,o){if(or)return t(r,o);or=!0;try{return gs(t,r,o)}finally{or=!1,(un!==null||Fn!==null)&&(go(),po())}}function nt(t,r){var o=t.stateNode;if(o===null)return null;var u=tl(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var ri=!1;if(p)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){ri=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{ri=!1}function ys(t,r,o,u,h,m,_,C,k){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(X){this.onError(X)}}var vs=!1,si=null,In=!1,vo=null,ku={onError:function(t){vs=!0,si=t}};function ii(t,r,o,u,h,m,_,C,k){vs=!1,si=null,ys.apply(ku,arguments)}function Na(t,r,o,u,h,m,_,C,k){if(ii.apply(this,arguments),vs){if(vs){var U=si;vs=!1,si=null}else throw Error(n(198));In||(In=!0,vo=U)}}function Sn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function _s(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function An(t){if(Sn(t)!==t)throw Error(n(188))}function xa(t){var r=t.alternate;if(!r){if(r=Sn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return An(h),t;if(m===u)return An(h),r;m=m.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=m;else{for(var _=!1,C=h.child;C;){if(C===o){_=!0,o=h,u=m;break}if(C===u){_=!0,u=h,o=m;break}C=C.sibling}if(!_){for(C=m.child;C;){if(C===o){_=!0,o=m,u=h;break}if(C===u){_=!0,u=m,o=h;break}C=C.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function _o(t){return t=xa(t),t!==null?oi(t):null}function oi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=oi(t);if(r!==null)return r;t=t.sibling}return null}var ai=e.unstable_scheduleCallback,wo=e.unstable_cancelCallback,Ca=e.unstable_shouldYield,Vu=e.unstable_requestPaint,He=e.unstable_now,Pa=e.unstable_getCurrentPriorityLevel,ws=e.unstable_ImmediatePriority,Nr=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,Eo=e.unstable_LowPriority,Ra=e.unstable_IdlePriority,Es=null,en=null;function ka(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Es,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Da,To=Math.log,Va=Math.LN2;function Da(t){return t>>>=0,t===0?32:31-(To(t)/Va|0)|0}var li=64,ui=4194304;function xr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ts(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,m=t.pingedLanes,_=o&268435455;if(_!==0){var C=_&~h;C!==0?u=xr(C):(m&=_,m!==0&&(u=xr(m)))}else _=o&~h,_!==0?u=xr(_):m!==0&&(u=xr(m));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,m=r&-r,h>=m||h===16&&(m&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Ut(r),h=1<<o,u|=t[o],r&=~h;return u}function Du(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes;0<m;){var _=31-Ut(m),C=1<<_,k=h[_];k===-1?((C&o)===0||(C&u)!==0)&&(h[_]=Du(C,r)):k<=r&&(t.expiredLanes|=C),m&=~C}}function tn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Is(){var t=li;return li<<=1,(li&4194240)===0&&(li=64),t}function Cr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Pr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ut(r),t[r]=o}function Be(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Ut(o),m=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~m}}function Rr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Ut(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Ce=0;function kr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ja,ci,Ma,Oa,La,Io=!1,Un=[],St=null,Nn=null,xn=null,Vr=new Map,hn=new Map,zn=[],ju="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fa(t,r){switch(t){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":Vr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(r.pointerId)}}function Ht(t,r,o,u,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},r!==null&&(r=Fo(r),r!==null&&ci(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Mu(t,r,o,u,h){switch(r){case"focusin":return St=Ht(St,t,r,o,u,h),!0;case"dragenter":return Nn=Ht(Nn,t,r,o,u,h),!0;case"mouseover":return xn=Ht(xn,t,r,o,u,h),!0;case"pointerover":var m=h.pointerId;return Vr.set(m,Ht(Vr.get(m)||null,t,r,o,u,h)),!0;case"gotpointercapture":return m=h.pointerId,hn.set(m,Ht(hn.get(m)||null,t,r,o,u,h)),!0}return!1}function ba(t){var r=Cs(t.target);if(r!==null){var o=Sn(r);if(o!==null){if(r=o.tag,r===13){if(r=_s(o),r!==null){t.blockedOn=r,La(t.priority,function(){Ma(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=hi(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);ps=u,o.target.dispatchEvent(u),ps=null}else return r=Fo(o),r!==null&&ci(r),t.blockedOn=o,!1;r.shift()}return!0}function Ss(t,r,o){lr(t)&&o.delete(r)}function Ua(){Io=!1,St!==null&&lr(St)&&(St=null),Nn!==null&&lr(Nn)&&(Nn=null),xn!==null&&lr(xn)&&(xn=null),Vr.forEach(Ss),hn.forEach(Ss)}function Cn(t,r){t.blockedOn===r&&(t.blockedOn=null,Io||(Io=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ua)))}function Pn(t){function r(h){return Cn(h,t)}if(0<Un.length){Cn(Un[0],t);for(var o=1;o<Un.length;o++){var u=Un[o];u.blockedOn===t&&(u.blockedOn=null)}}for(St!==null&&Cn(St,t),Nn!==null&&Cn(Nn,t),xn!==null&&Cn(xn,t),Vr.forEach(r),hn.forEach(r),o=0;o<zn.length;o++)u=zn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<zn.length&&(o=zn[0],o.blockedOn===null);)ba(o),o.blockedOn===null&&zn.shift()}var ur=de.ReactCurrentBatchConfig,Dr=!0;function Xe(t,r,o,u){var h=Ce,m=ur.transition;ur.transition=null;try{Ce=1,So(t,r,o,u)}finally{Ce=h,ur.transition=m}}function Ou(t,r,o,u){var h=Ce,m=ur.transition;ur.transition=null;try{Ce=4,So(t,r,o,u)}finally{Ce=h,ur.transition=m}}function So(t,r,o,u){if(Dr){var h=hi(t,r,o,u);if(h===null)Gu(t,r,u,As,o),Fa(t,u);else if(Mu(h,t,r,o,u))u.stopPropagation();else if(Fa(t,u),r&4&&-1<ju.indexOf(t)){for(;h!==null;){var m=Fo(h);if(m!==null&&ja(m),m=hi(t,r,o,u),m===null&&Gu(t,r,u,As,o),m===h)break;h=m}h!==null&&u.stopPropagation()}else Gu(t,r,u,null,o)}}var As=null;function hi(t,r,o,u){if(As=null,t=ei(u),t=Cs(t),t!==null)if(r=Sn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=_s(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return As=t,null}function Ao(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pa()){case ws:return 1;case Nr:return 4;case cn:case Eo:return 16;case Ra:return 536870912;default:return 16}default:return 16}}var nn=null,di=null,qt=null;function No(){if(qt)return qt;var t,r=di,o=r.length,u,h="value"in nn?nn.value:nn.textContent,m=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[m-u];u++);return qt=h.slice(t,1<u?1-u:void 0)}function fi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Bn(){return!0}function xo(){return!1}function At(t){function r(o,u,h,m,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(o=t[C],this[C]=o?o(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Bn:xo,this.isPropagationStopped=xo,this}return ae(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){},isPersistent:Bn}),r}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=At(Rn),$n=ae({},Rn,{view:0,detail:0}),Lu=At($n),pi,cr,jr,Ns=ae({},$n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jr&&(jr&&t.type==="mousemove"?(pi=t.screenX-jr.screenX,cr=t.screenY-jr.screenY):cr=pi=0,jr=t),pi)},movementY:function(t){return"movementY"in t?t.movementY:cr}}),gi=At(Ns),Co=ae({},Ns,{dataTransfer:0}),za=At(Co),yi=ae({},$n,{relatedTarget:0}),vi=At(yi),Ba=ae({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),hr=At(Ba),$a=ae({},Rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ha=At($a),qa=ae({},Rn,{data:0}),Po=At(qa),_i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ga(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Wa[t])?!!r[t]:!1}function Hn(){return Ga}var l=ae({},$n,{key:function(t){if(t.key){var r=_i[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=fi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(t){return t.type==="keypress"?fi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f=At(l),y=ae({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=At(y),L=ae({},$n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn}),z=At(L),te=ae({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),be=At(te),ft=ae({},Ns,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Re=At(ft),vt=[9,13,27,32],ot=p&&"CompositionEvent"in window,dn=null;p&&"documentMode"in document&&(dn=document.documentMode);var rn=p&&"TextEvent"in window&&!dn,xs=p&&(!ot||dn&&8<dn&&11>=dn),wi=" ",Rd=!1;function kd(t,r){switch(t){case"keyup":return vt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function rv(t,r){switch(t){case"compositionend":return Vd(r);case"keypress":return r.which!==32?null:(Rd=!0,wi);case"textInput":return t=r.data,t===wi&&Rd?null:t;default:return null}}function sv(t,r){if(Ei)return t==="compositionend"||!ot&&kd(t,r)?(t=No(),qt=di=nn=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return xs&&r.locale!=="ko"?null:r.data;default:return null}}var iv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!iv[t.type]:r==="textarea"}function jd(t,r,o,u){bn(u),r=Ja(r,"onChange"),0<r.length&&(o=new mi("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Ro=null,ko=null;function ov(t){Jd(t,0)}function Qa(t){var r=Ni(t);if(Ks(r))return t}function av(t,r){if(t==="change")return r}var Md=!1;if(p){var Fu;if(p){var bu="oninput"in document;if(!bu){var Od=document.createElement("div");Od.setAttribute("oninput","return;"),bu=typeof Od.oninput=="function"}Fu=bu}else Fu=!1;Md=Fu&&(!document.documentMode||9<document.documentMode)}function Ld(){Ro&&(Ro.detachEvent("onpropertychange",Fd),ko=Ro=null)}function Fd(t){if(t.propertyName==="value"&&Qa(ko)){var r=[];jd(r,ko,t,ei(t)),yo(ov,r)}}function lv(t,r,o){t==="focusin"?(Ld(),Ro=r,ko=o,Ro.attachEvent("onpropertychange",Fd)):t==="focusout"&&Ld()}function uv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qa(ko)}function cv(t,r){if(t==="click")return Qa(r)}function hv(t,r){if(t==="input"||t==="change")return Qa(r)}function dv(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var kn=typeof Object.is=="function"?Object.is:dv;function Vo(t,r){if(kn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!v.call(r,h)||!kn(t[h],r[h]))return!1}return!0}function bd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ud(t,r){var o=bd(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=bd(o)}}function zd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?zd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Bd(){for(var t=window,r=Sr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Sr(t.document)}return r}function Uu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function fv(t){var r=Bd(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&zd(o.ownerDocument.documentElement,o)){if(u!==null&&Uu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,m=Math.min(u.start,h);u=u.end===void 0?m:Math.min(u.end,h),!t.extend&&m>u&&(h=u,u=m,m=h),h=Ud(o,m);var _=Ud(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),m>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mv=p&&"documentMode"in document&&11>=document.documentMode,Ti=null,zu=null,Do=null,Bu=!1;function $d(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Bu||Ti==null||Ti!==Sr(u)||(u=Ti,"selectionStart"in u&&Uu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Do&&Vo(Do,u)||(Do=u,u=Ja(zu,"onSelect"),0<u.length&&(r=new mi("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=Ti)))}function Ka(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Ii={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionend:Ka("Transition","TransitionEnd")},$u={},Hd={};p&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function Xa(t){if($u[t])return $u[t];if(!Ii[t])return t;var r=Ii[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Hd)return $u[t]=r[o];return t}var qd=Xa("animationend"),Wd=Xa("animationiteration"),Gd=Xa("animationstart"),Qd=Xa("transitionend"),Kd=new Map,Xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,r){Kd.set(t,r),c(r,[t])}for(var Hu=0;Hu<Xd.length;Hu++){var qu=Xd[Hu],pv=qu.toLowerCase(),gv=qu[0].toUpperCase()+qu.slice(1);Mr(pv,"on"+gv)}Mr(qd,"onAnimationEnd"),Mr(Wd,"onAnimationIteration"),Mr(Gd,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Qd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yv=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function Yd(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,Na(u,r,void 0,t),t.currentTarget=null}function Jd(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var _=u.length-1;0<=_;_--){var C=u[_],k=C.instance,U=C.currentTarget;if(C=C.listener,k!==m&&h.isPropagationStopped())break e;Yd(h,C,U),m=k}else for(_=0;_<u.length;_++){if(C=u[_],k=C.instance,U=C.currentTarget,C=C.listener,k!==m&&h.isPropagationStopped())break e;Yd(h,C,U),m=k}}}if(In)throw t=vo,In=!1,vo=null,t}function Ge(t,r){var o=r[Zu];o===void 0&&(o=r[Zu]=new Set);var u=t+"__bubble";o.has(u)||(Zd(r,t,2,!1),o.add(u))}function Wu(t,r,o){var u=0;r&&(u|=4),Zd(o,t,u,r)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[Ya]){t[Ya]=!0,i.forEach(function(o){o!=="selectionchange"&&(yv.has(o)||Wu(o,!1,t),Wu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ya]||(r[Ya]=!0,Wu("selectionchange",!1,r))}}function Zd(t,r,o,u){switch(Ao(r)){case 1:var h=Xe;break;case 4:h=Ou;break;default:h=So}o=h.bind(null,r,o,t),h=void 0,!ri||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Gu(t,r,o,u,h){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var C=u.stateNode.containerInfo;if(C===h||C.nodeType===8&&C.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var k=_.tag;if((k===3||k===4)&&(k=_.stateNode.containerInfo,k===h||k.nodeType===8&&k.parentNode===h))return;_=_.return}for(;C!==null;){if(_=Cs(C),_===null)return;if(k=_.tag,k===5||k===6){u=m=_;continue e}C=C.parentNode}}u=u.return}yo(function(){var U=m,X=ei(o),Y=[];e:{var K=Kd.get(t);if(K!==void 0){var ie=mi,ue=t;switch(t){case"keypress":if(fi(o)===0)break e;case"keydown":case"keyup":ie=f;break;case"focusin":ue="focus",ie=vi;break;case"focusout":ue="blur",ie=vi;break;case"beforeblur":case"afterblur":ie=vi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=za;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=z;break;case qd:case Wd:case Gd:ie=hr;break;case Qd:ie=be;break;case"scroll":ie=Lu;break;case"wheel":ie=Re;break;case"copy":case"cut":case"paste":ie=Ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=E}var ce=(r&4)!==0,rt=!ce&&t==="scroll",F=ce?K!==null?K+"Capture":null:K;ce=[];for(var j=U,b;j!==null;){b=j;var J=b.stateNode;if(b.tag===5&&J!==null&&(b=J,F!==null&&(J=nt(j,F),J!=null&&ce.push(Oo(j,J,b)))),rt)break;j=j.return}0<ce.length&&(K=new ie(K,ue,null,o,X),Y.push({event:K,listeners:ce}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",ie=t==="mouseout"||t==="pointerout",K&&o!==ps&&(ue=o.relatedTarget||o.fromElement)&&(Cs(ue)||ue[dr]))break e;if((ie||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,ie?(ue=o.relatedTarget||o.toElement,ie=U,ue=ue?Cs(ue):null,ue!==null&&(rt=Sn(ue),ue!==rt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=U),ie!==ue)){if(ce=gi,J="onMouseLeave",F="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(ce=E,J="onPointerLeave",F="onPointerEnter",j="pointer"),rt=ie==null?K:Ni(ie),b=ue==null?K:Ni(ue),K=new ce(J,j+"leave",ie,o,X),K.target=rt,K.relatedTarget=b,J=null,Cs(X)===U&&(ce=new ce(F,j+"enter",ue,o,X),ce.target=b,ce.relatedTarget=rt,J=ce),rt=J,ie&&ue)t:{for(ce=ie,F=ue,j=0,b=ce;b;b=Si(b))j++;for(b=0,J=F;J;J=Si(J))b++;for(;0<j-b;)ce=Si(ce),j--;for(;0<b-j;)F=Si(F),b--;for(;j--;){if(ce===F||F!==null&&ce===F.alternate)break t;ce=Si(ce),F=Si(F)}ce=null}else ce=null;ie!==null&&ef(Y,K,ie,ce,!1),ue!==null&&rt!==null&&ef(Y,rt,ue,ce,!0)}}e:{if(K=U?Ni(U):window,ie=K.nodeName&&K.nodeName.toLowerCase(),ie==="select"||ie==="input"&&K.type==="file")var he=av;else if(Dd(K))if(Md)he=hv;else{he=uv;var ge=lv}else(ie=K.nodeName)&&ie.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(he=cv);if(he&&(he=he(t,U))){jd(Y,he,o,X);break e}ge&&ge(t,K,U),t==="focusout"&&(ge=K._wrapperState)&&ge.controlled&&K.type==="number"&&Ys(K,"number",K.value)}switch(ge=U?Ni(U):window,t){case"focusin":(Dd(ge)||ge.contentEditable==="true")&&(Ti=ge,zu=U,Do=null);break;case"focusout":Do=zu=Ti=null;break;case"mousedown":Bu=!0;break;case"contextmenu":case"mouseup":case"dragend":Bu=!1,$d(Y,o,X);break;case"selectionchange":if(mv)break;case"keydown":case"keyup":$d(Y,o,X)}var ye;if(ot)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Ei?kd(t,o)&&(we="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(we="onCompositionStart");we&&(xs&&o.locale!=="ko"&&(Ei||we!=="onCompositionStart"?we==="onCompositionEnd"&&Ei&&(ye=No()):(nn=X,di="value"in nn?nn.value:nn.textContent,Ei=!0)),ge=Ja(U,we),0<ge.length&&(we=new Po(we,t,null,o,X),Y.push({event:we,listeners:ge}),ye?we.data=ye:(ye=Vd(o),ye!==null&&(we.data=ye)))),(ye=rn?rv(t,o):sv(t,o))&&(U=Ja(U,"onBeforeInput"),0<U.length&&(X=new Po("onBeforeInput","beforeinput",null,o,X),Y.push({event:X,listeners:U}),X.data=ye))}Jd(Y,r)})}function Oo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ja(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=nt(t,o),m!=null&&u.unshift(Oo(t,m,h)),m=nt(t,r),m!=null&&u.push(Oo(t,m,h))),t=t.return}return u}function Si(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ef(t,r,o,u,h){for(var m=r._reactName,_=[];o!==null&&o!==u;){var C=o,k=C.alternate,U=C.stateNode;if(k!==null&&k===u)break;C.tag===5&&U!==null&&(C=U,h?(k=nt(o,m),k!=null&&_.unshift(Oo(o,k,C))):h||(k=nt(o,m),k!=null&&_.push(Oo(o,k,C)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var vv=/\r\n?/g,_v=/\u0000|\uFFFD/g;function tf(t){return(typeof t=="string"?t:""+t).replace(vv,`
`).replace(_v,"")}function Za(t,r,o){if(r=tf(r),tf(t)!==r&&o)throw Error(n(425))}function el(){}var Qu=null,Ku=null;function Xu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Yu=typeof setTimeout=="function"?setTimeout:void 0,wv=typeof clearTimeout=="function"?clearTimeout:void 0,nf=typeof Promise=="function"?Promise:void 0,Ev=typeof queueMicrotask=="function"?queueMicrotask:typeof nf<"u"?function(t){return nf.resolve(null).then(t).catch(Tv)}:Yu;function Tv(t){setTimeout(function(){throw t})}function Ju(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Pn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Pn(r)}function Or(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function rf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),qn="__reactFiber$"+Ai,Lo="__reactProps$"+Ai,dr="__reactContainer$"+Ai,Zu="__reactEvents$"+Ai,Iv="__reactListeners$"+Ai,Sv="__reactHandles$"+Ai;function Cs(t){var r=t[qn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[dr]||o[qn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=rf(t);t!==null;){if(o=t[qn])return o;t=rf(t)}return r}t=o,o=t.parentNode}return null}function Fo(t){return t=t[qn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function tl(t){return t[Lo]||null}var ec=[],xi=-1;function Lr(t){return{current:t}}function Qe(t){0>xi||(t.current=ec[xi],ec[xi]=null,xi--)}function qe(t,r){xi++,ec[xi]=t.current,t.current=r}var Fr={},Dt=Lr(Fr),Wt=Lr(!1),Ps=Fr;function Ci(t,r){var o=t.type.contextTypes;if(!o)return Fr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in o)h[m]=r[m];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Gt(t){return t=t.childContextTypes,t!=null}function nl(){Qe(Wt),Qe(Dt)}function sf(t,r,o){if(Dt.current!==Fr)throw Error(n(168));qe(Dt,r),qe(Wt,o)}function of(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Oe(t)||"Unknown",h));return ae({},o,u)}function rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,Ps=Dt.current,qe(Dt,t),qe(Wt,Wt.current),!0}function af(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=of(t,r,Ps),u.__reactInternalMemoizedMergedChildContext=t,Qe(Wt),Qe(Dt),qe(Dt,t)):Qe(Wt),qe(Wt,o)}var fr=null,sl=!1,tc=!1;function lf(t){fr===null?fr=[t]:fr.push(t)}function Av(t){sl=!0,lf(t)}function br(){if(!tc&&fr!==null){tc=!0;var t=0,r=Ce;try{var o=fr;for(Ce=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}fr=null,sl=!1}catch(h){throw fr!==null&&(fr=fr.slice(t+1)),ai(ws,br),h}finally{Ce=r,tc=!1}}return null}var Pi=[],Ri=0,il=null,ol=0,fn=[],mn=0,Rs=null,mr=1,pr="";function ks(t,r){Pi[Ri++]=ol,Pi[Ri++]=il,il=t,ol=r}function uf(t,r,o){fn[mn++]=mr,fn[mn++]=pr,fn[mn++]=Rs,Rs=t;var u=mr;t=pr;var h=32-Ut(u)-1;u&=~(1<<h),o+=1;var m=32-Ut(r)+h;if(30<m){var _=h-h%5;m=(u&(1<<_)-1).toString(32),u>>=_,h-=_,mr=1<<32-Ut(r)+h|o<<h|u,pr=m+t}else mr=1<<m|o<<h|u,pr=t}function nc(t){t.return!==null&&(ks(t,1),uf(t,1,0))}function rc(t){for(;t===il;)il=Pi[--Ri],Pi[Ri]=null,ol=Pi[--Ri],Pi[Ri]=null;for(;t===Rs;)Rs=fn[--mn],fn[mn]=null,pr=fn[--mn],fn[mn]=null,mr=fn[--mn],fn[mn]=null}var sn=null,on=null,Ye=!1,Vn=null;function cf(t,r){var o=vn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function hf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,sn=t,on=Or(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,sn=t,on=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Rs!==null?{id:mr,overflow:pr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=vn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,sn=t,on=null,!0):!1;default:return!1}}function sc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ic(t){if(Ye){var r=on;if(r){var o=r;if(!hf(t,r)){if(sc(t))throw Error(n(418));r=Or(o.nextSibling);var u=sn;r&&hf(t,r)?cf(u,o):(t.flags=t.flags&-4097|2,Ye=!1,sn=t)}}else{if(sc(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ye=!1,sn=t}}}function df(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function al(t){if(t!==sn)return!1;if(!Ye)return df(t),Ye=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Xu(t.type,t.memoizedProps)),r&&(r=on)){if(sc(t))throw ff(),Error(n(418));for(;r;)cf(t,r),r=Or(r.nextSibling)}if(df(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){on=Or(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}on=null}}else on=sn?Or(t.stateNode.nextSibling):null;return!0}function ff(){for(var t=on;t;)t=Or(t.nextSibling)}function ki(){on=sn=null,Ye=!1}function oc(t){Vn===null?Vn=[t]:Vn.push(t)}var Nv=de.ReactCurrentBatchConfig;function bo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,m=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(_){var C=h.refs;_===null?delete C[m]:C[m]=_},r._stringRef=m,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function ll(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function mf(t){var r=t._init;return r(t._payload)}function pf(t){function r(F,j){if(t){var b=F.deletions;b===null?(F.deletions=[j],F.flags|=16):b.push(j)}}function o(F,j){if(!t)return null;for(;j!==null;)r(F,j),j=j.sibling;return null}function u(F,j){for(F=new Map;j!==null;)j.key!==null?F.set(j.key,j):F.set(j.index,j),j=j.sibling;return F}function h(F,j){return F=Gr(F,j),F.index=0,F.sibling=null,F}function m(F,j,b){return F.index=b,t?(b=F.alternate,b!==null?(b=b.index,b<j?(F.flags|=2,j):b):(F.flags|=2,j)):(F.flags|=1048576,j)}function _(F){return t&&F.alternate===null&&(F.flags|=2),F}function C(F,j,b,J){return j===null||j.tag!==6?(j=Yc(b,F.mode,J),j.return=F,j):(j=h(j,b),j.return=F,j)}function k(F,j,b,J){var he=b.type;return he===A?X(F,j,b.props.children,J,b.key):j!==null&&(j.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Vt&&mf(he)===j.type)?(J=h(j,b.props),J.ref=bo(F,j,b),J.return=F,J):(J=Vl(b.type,b.key,b.props,null,F.mode,J),J.ref=bo(F,j,b),J.return=F,J)}function U(F,j,b,J){return j===null||j.tag!==4||j.stateNode.containerInfo!==b.containerInfo||j.stateNode.implementation!==b.implementation?(j=Jc(b,F.mode,J),j.return=F,j):(j=h(j,b.children||[]),j.return=F,j)}function X(F,j,b,J,he){return j===null||j.tag!==7?(j=bs(b,F.mode,J,he),j.return=F,j):(j=h(j,b),j.return=F,j)}function Y(F,j,b){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Yc(""+j,F.mode,b),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Me:return b=Vl(j.type,j.key,j.props,null,F.mode,b),b.ref=bo(F,null,j),b.return=F,b;case Q:return j=Jc(j,F.mode,b),j.return=F,j;case Vt:var J=j._init;return Y(F,J(j._payload),b)}if(rr(j)||pe(j))return j=bs(j,F.mode,b,null),j.return=F,j;ll(F,j)}return null}function K(F,j,b,J){var he=j!==null?j.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return he!==null?null:C(F,j,""+b,J);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Me:return b.key===he?k(F,j,b,J):null;case Q:return b.key===he?U(F,j,b,J):null;case Vt:return he=b._init,K(F,j,he(b._payload),J)}if(rr(b)||pe(b))return he!==null?null:X(F,j,b,J,null);ll(F,b)}return null}function ie(F,j,b,J,he){if(typeof J=="string"&&J!==""||typeof J=="number")return F=F.get(b)||null,C(j,F,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Me:return F=F.get(J.key===null?b:J.key)||null,k(j,F,J,he);case Q:return F=F.get(J.key===null?b:J.key)||null,U(j,F,J,he);case Vt:var ge=J._init;return ie(F,j,b,ge(J._payload),he)}if(rr(J)||pe(J))return F=F.get(b)||null,X(j,F,J,he,null);ll(j,J)}return null}function ue(F,j,b,J){for(var he=null,ge=null,ye=j,we=j=0,Et=null;ye!==null&&we<b.length;we++){ye.index>we?(Et=ye,ye=null):Et=ye.sibling;var je=K(F,ye,b[we],J);if(je===null){ye===null&&(ye=Et);break}t&&ye&&je.alternate===null&&r(F,ye),j=m(je,j,we),ge===null?he=je:ge.sibling=je,ge=je,ye=Et}if(we===b.length)return o(F,ye),Ye&&ks(F,we),he;if(ye===null){for(;we<b.length;we++)ye=Y(F,b[we],J),ye!==null&&(j=m(ye,j,we),ge===null?he=ye:ge.sibling=ye,ge=ye);return Ye&&ks(F,we),he}for(ye=u(F,ye);we<b.length;we++)Et=ie(ye,F,we,b[we],J),Et!==null&&(t&&Et.alternate!==null&&ye.delete(Et.key===null?we:Et.key),j=m(Et,j,we),ge===null?he=Et:ge.sibling=Et,ge=Et);return t&&ye.forEach(function(Qr){return r(F,Qr)}),Ye&&ks(F,we),he}function ce(F,j,b,J){var he=pe(b);if(typeof he!="function")throw Error(n(150));if(b=he.call(b),b==null)throw Error(n(151));for(var ge=he=null,ye=j,we=j=0,Et=null,je=b.next();ye!==null&&!je.done;we++,je=b.next()){ye.index>we?(Et=ye,ye=null):Et=ye.sibling;var Qr=K(F,ye,je.value,J);if(Qr===null){ye===null&&(ye=Et);break}t&&ye&&Qr.alternate===null&&r(F,ye),j=m(Qr,j,we),ge===null?he=Qr:ge.sibling=Qr,ge=Qr,ye=Et}if(je.done)return o(F,ye),Ye&&ks(F,we),he;if(ye===null){for(;!je.done;we++,je=b.next())je=Y(F,je.value,J),je!==null&&(j=m(je,j,we),ge===null?he=je:ge.sibling=je,ge=je);return Ye&&ks(F,we),he}for(ye=u(F,ye);!je.done;we++,je=b.next())je=ie(ye,F,we,je.value,J),je!==null&&(t&&je.alternate!==null&&ye.delete(je.key===null?we:je.key),j=m(je,j,we),ge===null?he=je:ge.sibling=je,ge=je);return t&&ye.forEach(function(i_){return r(F,i_)}),Ye&&ks(F,we),he}function rt(F,j,b,J){if(typeof b=="object"&&b!==null&&b.type===A&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Me:e:{for(var he=b.key,ge=j;ge!==null;){if(ge.key===he){if(he=b.type,he===A){if(ge.tag===7){o(F,ge.sibling),j=h(ge,b.props.children),j.return=F,F=j;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Vt&&mf(he)===ge.type){o(F,ge.sibling),j=h(ge,b.props),j.ref=bo(F,ge,b),j.return=F,F=j;break e}o(F,ge);break}else r(F,ge);ge=ge.sibling}b.type===A?(j=bs(b.props.children,F.mode,J,b.key),j.return=F,F=j):(J=Vl(b.type,b.key,b.props,null,F.mode,J),J.ref=bo(F,j,b),J.return=F,F=J)}return _(F);case Q:e:{for(ge=b.key;j!==null;){if(j.key===ge)if(j.tag===4&&j.stateNode.containerInfo===b.containerInfo&&j.stateNode.implementation===b.implementation){o(F,j.sibling),j=h(j,b.children||[]),j.return=F,F=j;break e}else{o(F,j);break}else r(F,j);j=j.sibling}j=Jc(b,F.mode,J),j.return=F,F=j}return _(F);case Vt:return ge=b._init,rt(F,j,ge(b._payload),J)}if(rr(b))return ue(F,j,b,J);if(pe(b))return ce(F,j,b,J);ll(F,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,j!==null&&j.tag===6?(o(F,j.sibling),j=h(j,b),j.return=F,F=j):(o(F,j),j=Yc(b,F.mode,J),j.return=F,F=j),_(F)):o(F,j)}return rt}var Vi=pf(!0),gf=pf(!1),ul=Lr(null),cl=null,Di=null,ac=null;function lc(){ac=Di=cl=null}function uc(t){var r=ul.current;Qe(ul),t._currentValue=r}function cc(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function ji(t,r){cl=t,ac=Di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Qt=!0),t.firstContext=null)}function pn(t){var r=t._currentValue;if(ac!==t)if(t={context:t,memoizedValue:r,next:null},Di===null){if(cl===null)throw Error(n(308));Di=t,cl.dependencies={lanes:0,firstContext:t}}else Di=Di.next=t;return r}var Vs=null;function hc(t){Vs===null?Vs=[t]:Vs.push(t)}function yf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,hc(r)):(o.next=h.next,h.next=o),r.interleaved=o,gr(t,u)}function gr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ur=!1;function dc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function zr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,gr(t,o)}return h=u.interleaved,h===null?(r.next=r,hc(u)):(r.next=h.next,h.next=r),u.interleaved=r,gr(t,o)}function hl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Rr(t,o)}}function _f(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};m===null?h=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?h=m=r:m=m.next=r}else h=m=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function dl(t,r,o,u){var h=t.updateQueue;Ur=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var k=C,U=k.next;k.next=null,_===null?m=U:_.next=U,_=k;var X=t.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==_&&(C===null?X.firstBaseUpdate=U:C.next=U,X.lastBaseUpdate=k))}if(m!==null){var Y=h.baseState;_=0,X=U=k=null,C=m;do{var K=C.lane,ie=C.eventTime;if((u&K)===K){X!==null&&(X=X.next={eventTime:ie,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ue=t,ce=C;switch(K=r,ie=o,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){Y=ue.call(ie,Y,K);break e}Y=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,K=typeof ue=="function"?ue.call(ie,Y,K):ue,K==null)break e;Y=ae({},Y,K);break e;case 2:Ur=!0}}C.callback!==null&&C.lane!==0&&(t.flags|=64,K=h.effects,K===null?h.effects=[C]:K.push(C))}else ie={eventTime:ie,lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(U=X=ie,k=Y):X=X.next=ie,_|=K;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;K=C,C=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);if(X===null&&(k=Y),h.baseState=k,h.firstBaseUpdate=U,h.lastBaseUpdate=X,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else m===null&&(h.shared.lanes=0);Ms|=_,t.lanes=_,t.memoizedState=Y}}function wf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Uo={},Wn=Lr(Uo),zo=Lr(Uo),Bo=Lr(Uo);function Ds(t){if(t===Uo)throw Error(n(174));return t}function fc(t,r){switch(qe(Bo,r),qe(zo,t),qe(Wn,Uo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:dt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=dt(r,t)}Qe(Wn),qe(Wn,r)}function Mi(){Qe(Wn),Qe(zo),Qe(Bo)}function Ef(t){Ds(Bo.current);var r=Ds(Wn.current),o=dt(r,t.type);r!==o&&(qe(zo,t),qe(Wn,o))}function mc(t){zo.current===t&&(Qe(Wn),Qe(zo))}var Je=Lr(0);function fl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var pc=[];function gc(){for(var t=0;t<pc.length;t++)pc[t]._workInProgressVersionPrimary=null;pc.length=0}var ml=de.ReactCurrentDispatcher,yc=de.ReactCurrentBatchConfig,js=0,Ze=null,mt=null,_t=null,pl=!1,$o=!1,Ho=0,xv=0;function jt(){throw Error(n(321))}function vc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!kn(t[o],r[o]))return!1;return!0}function _c(t,r,o,u,h,m){if(js=m,Ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ml.current=t===null||t.memoizedState===null?kv:Vv,t=o(u,h),$o){m=0;do{if($o=!1,Ho=0,25<=m)throw Error(n(301));m+=1,_t=mt=null,r.updateQueue=null,ml.current=Dv,t=o(u,h)}while($o)}if(ml.current=vl,r=mt!==null&&mt.next!==null,js=0,_t=mt=Ze=null,pl=!1,r)throw Error(n(300));return t}function wc(){var t=Ho!==0;return Ho=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ze.memoizedState=_t=t:_t=_t.next=t,_t}function gn(){if(mt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var r=_t===null?Ze.memoizedState:_t.next;if(r!==null)_t=r,mt=t;else{if(t===null)throw Error(n(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},_t===null?Ze.memoizedState=_t=t:_t=_t.next=t}return _t}function qo(t,r){return typeof r=="function"?r(t):r}function Ec(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=mt,h=u.baseQueue,m=o.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}u.baseQueue=h=m,o.pending=null}if(h!==null){m=h.next,u=u.baseState;var C=_=null,k=null,U=m;do{var X=U.lane;if((js&X)===X)k!==null&&(k=k.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var Y={lane:X,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};k===null?(C=k=Y,_=u):k=k.next=Y,Ze.lanes|=X,Ms|=X}U=U.next}while(U!==null&&U!==m);k===null?_=u:k.next=C,kn(u,r.memoizedState)||(Qt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=k,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do m=h.lane,Ze.lanes|=m,Ms|=m,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Tc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,m=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do m=t(m,_.action),_=_.next;while(_!==h);kn(m,r.memoizedState)||(Qt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function Tf(){}function If(t,r){var o=Ze,u=gn(),h=r(),m=!kn(u.memoizedState,h);if(m&&(u.memoizedState=h,Qt=!0),u=u.queue,Ic(Nf.bind(null,o,u,t),[t]),u.getSnapshot!==r||m||_t!==null&&_t.memoizedState.tag&1){if(o.flags|=2048,Wo(9,Af.bind(null,o,u,h,r),void 0,null),wt===null)throw Error(n(349));(js&30)!==0||Sf(o,r,h)}return h}function Sf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Af(t,r,o,u){r.value=o,r.getSnapshot=u,xf(r)&&Cf(t)}function Nf(t,r,o){return o(function(){xf(r)&&Cf(t)})}function xf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!kn(t,o)}catch{return!0}}function Cf(t){var r=gr(t,1);r!==null&&On(r,t,1,-1)}function Pf(t){var r=Gn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:t},r.queue=t,t=t.dispatch=Rv.bind(null,Ze,t),[r.memoizedState,t]}function Wo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Rf(){return gn().memoizedState}function gl(t,r,o,u){var h=Gn();Ze.flags|=t,h.memoizedState=Wo(1|r,o,void 0,u===void 0?null:u)}function yl(t,r,o,u){var h=gn();u=u===void 0?null:u;var m=void 0;if(mt!==null){var _=mt.memoizedState;if(m=_.destroy,u!==null&&vc(u,_.deps)){h.memoizedState=Wo(r,o,m,u);return}}Ze.flags|=t,h.memoizedState=Wo(1|r,o,m,u)}function kf(t,r){return gl(8390656,8,t,r)}function Ic(t,r){return yl(2048,8,t,r)}function Vf(t,r){return yl(4,2,t,r)}function Df(t,r){return yl(4,4,t,r)}function jf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Mf(t,r,o){return o=o!=null?o.concat([t]):null,yl(4,4,jf.bind(null,r,t),o)}function Sc(){}function Of(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&vc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Lf(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&vc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Ff(t,r,o){return(js&21)===0?(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=o):(kn(o,r)||(o=Is(),Ze.lanes|=o,Ms|=o,t.baseState=!0),r)}function Cv(t,r){var o=Ce;Ce=o!==0&&4>o?o:4,t(!0);var u=yc.transition;yc.transition={};try{t(!1),r()}finally{Ce=o,yc.transition=u}}function bf(){return gn().memoizedState}function Pv(t,r,o){var u=qr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},Uf(t))zf(r,o);else if(o=yf(t,r,o,u),o!==null){var h=$t();On(o,t,u,h),Bf(o,r,u)}}function Rv(t,r,o){var u=qr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(Uf(t))zf(r,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,C=m(_,o);if(h.hasEagerState=!0,h.eagerState=C,kn(C,_)){var k=r.interleaved;k===null?(h.next=h,hc(r)):(h.next=k.next,k.next=h),r.interleaved=h;return}}catch{}finally{}o=yf(t,r,h,u),o!==null&&(h=$t(),On(o,t,u,h),Bf(o,r,u))}}function Uf(t){var r=t.alternate;return t===Ze||r!==null&&r===Ze}function zf(t,r){$o=pl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Bf(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Rr(t,o)}}var vl={readContext:pn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},kv={readContext:pn,useCallback:function(t,r){return Gn().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:kf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,gl(4194308,4,jf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return gl(4194308,4,t,r)},useInsertionEffect:function(t,r){return gl(4,2,t,r)},useMemo:function(t,r){var o=Gn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Gn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Pv.bind(null,Ze,t),[u.memoizedState,t]},useRef:function(t){var r=Gn();return t={current:t},r.memoizedState=t},useState:Pf,useDebugValue:Sc,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=Pf(!1),r=t[0];return t=Cv.bind(null,t[1]),Gn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Ze,h=Gn();if(Ye){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),wt===null)throw Error(n(349));(js&30)!==0||Sf(u,r,o)}h.memoizedState=o;var m={value:o,getSnapshot:r};return h.queue=m,kf(Nf.bind(null,u,m,t),[t]),u.flags|=2048,Wo(9,Af.bind(null,u,m,o,r),void 0,null),o},useId:function(){var t=Gn(),r=wt.identifierPrefix;if(Ye){var o=pr,u=mr;o=(u&~(1<<32-Ut(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Ho++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=xv++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Vv={readContext:pn,useCallback:Of,useContext:pn,useEffect:Ic,useImperativeHandle:Mf,useInsertionEffect:Vf,useLayoutEffect:Df,useMemo:Lf,useReducer:Ec,useRef:Rf,useState:function(){return Ec(qo)},useDebugValue:Sc,useDeferredValue:function(t){var r=gn();return Ff(r,mt.memoizedState,t)},useTransition:function(){var t=Ec(qo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:Tf,useSyncExternalStore:If,useId:bf,unstable_isNewReconciler:!1},Dv={readContext:pn,useCallback:Of,useContext:pn,useEffect:Ic,useImperativeHandle:Mf,useInsertionEffect:Vf,useLayoutEffect:Df,useMemo:Lf,useReducer:Tc,useRef:Rf,useState:function(){return Tc(qo)},useDebugValue:Sc,useDeferredValue:function(t){var r=gn();return mt===null?r.memoizedState=t:Ff(r,mt.memoizedState,t)},useTransition:function(){var t=Tc(qo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:Tf,useSyncExternalStore:If,useId:bf,unstable_isNewReconciler:!1};function Dn(t,r){if(t&&t.defaultProps){r=ae({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Ac(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ae({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var _l={isMounted:function(t){return(t=t._reactInternals)?Sn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=$t(),h=qr(t),m=yr(u,h);m.payload=r,o!=null&&(m.callback=o),r=zr(t,m,h),r!==null&&(On(r,t,h,u),hl(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=$t(),h=qr(t),m=yr(u,h);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=zr(t,m,h),r!==null&&(On(r,t,h,u),hl(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=$t(),u=qr(t),h=yr(o,u);h.tag=2,r!=null&&(h.callback=r),r=zr(t,h,u),r!==null&&(On(r,t,u,o),hl(r,t,u))}};function $f(t,r,o,u,h,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,m,_):r.prototype&&r.prototype.isPureReactComponent?!Vo(o,u)||!Vo(h,m):!0}function Hf(t,r,o){var u=!1,h=Fr,m=r.contextType;return typeof m=="object"&&m!==null?m=pn(m):(h=Gt(r)?Ps:Dt.current,u=r.contextTypes,m=(u=u!=null)?Ci(t,h):Fr),r=new r(o,m),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=_l,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=m),r}function qf(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&_l.enqueueReplaceState(r,r.state,null)}function Nc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},dc(t);var m=r.contextType;typeof m=="object"&&m!==null?h.context=pn(m):(m=Gt(r)?Ps:Dt.current,h.context=Ci(t,m)),h.state=t.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(Ac(t,r,m,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&_l.enqueueReplaceState(h,h.state,null),dl(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Oi(t,r){try{var o="",u=r;do o+=Ae(u),u=u.return;while(u);var h=o}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:t,source:r,stack:h,digest:null}}function xc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Cc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var jv=typeof WeakMap=="function"?WeakMap:Map;function Wf(t,r,o){o=yr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){Nl||(Nl=!0,$c=u),Cc(t,r)},o}function Gf(t,r,o){o=yr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){Cc(t,r)}}var m=t.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(o.callback=function(){Cc(t,r),typeof u!="function"&&($r===null?$r=new Set([this]):$r.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Qf(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new jv;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=Qv.bind(null,t,r,o),r.then(t,t))}function Kf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Xf(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=yr(-1,1),r.tag=2,zr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Mv=de.ReactCurrentOwner,Qt=!1;function Bt(t,r,o,u){r.child=t===null?gf(r,null,o,u):Vi(r,t.child,o,u)}function Yf(t,r,o,u,h){o=o.render;var m=r.ref;return ji(r,h),u=_c(t,r,o,u,m,h),o=wc(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Ye&&o&&nc(r),r.flags|=1,Bt(t,r,u,h),r.child)}function Jf(t,r,o,u,h){if(t===null){var m=o.type;return typeof m=="function"&&!Xc(m)&&m.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=m,Zf(t,r,m,u,h)):(t=Vl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,(t.lanes&h)===0){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Vo,o(_,u)&&t.ref===r.ref)return vr(t,r,h)}return r.flags|=1,t=Gr(m,u),t.ref=r.ref,t.return=r,r.child=t}function Zf(t,r,o,u,h){if(t!==null){var m=t.memoizedProps;if(Vo(m,u)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=u=m,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Qt=!0);else return r.lanes=t.lanes,vr(t,r,h)}return Pc(t,r,o,u,h)}function em(t,r,o){var u=r.pendingProps,h=u.children,m=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Fi,an),an|=o;else{if((o&1073741824)===0)return t=m!==null?m.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,qe(Fi,an),an|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=m!==null?m.baseLanes:o,qe(Fi,an),an|=u}else m!==null?(u=m.baseLanes|o,r.memoizedState=null):u=o,qe(Fi,an),an|=u;return Bt(t,r,h,o),r.child}function tm(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Pc(t,r,o,u,h){var m=Gt(o)?Ps:Dt.current;return m=Ci(r,m),ji(r,h),o=_c(t,r,o,u,m,h),u=wc(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(Ye&&u&&nc(r),r.flags|=1,Bt(t,r,o,h),r.child)}function nm(t,r,o,u,h){if(Gt(o)){var m=!0;rl(r)}else m=!1;if(ji(r,h),r.stateNode===null)El(t,r),Hf(r,o,u),Nc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,C=r.memoizedProps;_.props=C;var k=_.context,U=o.contextType;typeof U=="object"&&U!==null?U=pn(U):(U=Gt(o)?Ps:Dt.current,U=Ci(r,U));var X=o.getDerivedStateFromProps,Y=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function";Y||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==u||k!==U)&&qf(r,_,u,U),Ur=!1;var K=r.memoizedState;_.state=K,dl(r,u,_,h),k=r.memoizedState,C!==u||K!==k||Wt.current||Ur?(typeof X=="function"&&(Ac(r,o,X,u),k=r.memoizedState),(C=Ur||$f(r,o,C,u,K,k,U))?(Y||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=k),_.props=u,_.state=k,_.context=U,u=C):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,vf(t,r),C=r.memoizedProps,U=r.type===r.elementType?C:Dn(r.type,C),_.props=U,Y=r.pendingProps,K=_.context,k=o.contextType,typeof k=="object"&&k!==null?k=pn(k):(k=Gt(o)?Ps:Dt.current,k=Ci(r,k));var ie=o.getDerivedStateFromProps;(X=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==Y||K!==k)&&qf(r,_,u,k),Ur=!1,K=r.memoizedState,_.state=K,dl(r,u,_,h);var ue=r.memoizedState;C!==Y||K!==ue||Wt.current||Ur?(typeof ie=="function"&&(Ac(r,o,ie,u),ue=r.memoizedState),(U=Ur||$f(r,o,U,u,K,ue,k)||!1)?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ue,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ue,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ue),_.props=u,_.state=ue,_.context=k,u=U):(typeof _.componentDidUpdate!="function"||C===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),u=!1)}return Rc(t,r,o,u,m,h)}function Rc(t,r,o,u,h,m){tm(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&af(r,o,!1),vr(t,r,m);u=r.stateNode,Mv.current=r;var C=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=Vi(r,t.child,null,m),r.child=Vi(r,null,C,m)):Bt(t,r,C,m),r.memoizedState=u.state,h&&af(r,o,!0),r.child}function rm(t){var r=t.stateNode;r.pendingContext?sf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&sf(t,r.context,!1),fc(t,r.containerInfo)}function sm(t,r,o,u,h){return ki(),oc(h),r.flags|=256,Bt(t,r,o,u),r.child}var kc={dehydrated:null,treeContext:null,retryLane:0};function Vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function im(t,r,o){var u=r.pendingProps,h=Je.current,m=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=t!==null&&t.memoizedState===null?!1:(h&2)!==0),C?(m=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),qe(Je,h&1),t===null)return ic(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,t=u.fallback,m?(u=r.mode,m=r.child,_={mode:"hidden",children:_},(u&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=_):m=Dl(_,u,0,null),t=bs(t,u,o,null),m.return=r,t.return=r,m.sibling=t,r.child=m,r.child.memoizedState=Vc(o),r.memoizedState=kc,t):Dc(r,_));if(h=t.memoizedState,h!==null&&(C=h.dehydrated,C!==null))return Ov(t,r,_,u,C,h,o);if(m){m=u.fallback,_=r.mode,h=t.child,C=h.sibling;var k={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=k,r.deletions=null):(u=Gr(h,k),u.subtreeFlags=h.subtreeFlags&14680064),C!==null?m=Gr(C,m):(m=bs(m,_,o,null),m.flags|=2),m.return=r,u.return=r,u.sibling=m,r.child=u,u=m,m=r.child,_=t.child.memoizedState,_=_===null?Vc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},m.memoizedState=_,m.childLanes=t.childLanes&~o,r.memoizedState=kc,u}return m=t.child,t=m.sibling,u=Gr(m,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function Dc(t,r){return r=Dl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function wl(t,r,o,u){return u!==null&&oc(u),Vi(r,t.child,null,o),t=Dc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ov(t,r,o,u,h,m,_){if(o)return r.flags&256?(r.flags&=-257,u=xc(Error(n(422))),wl(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(m=u.fallback,h=r.mode,u=Dl({mode:"visible",children:u.children},h,0,null),m=bs(m,h,_,null),m.flags|=2,u.return=r,m.return=r,u.sibling=m,r.child=u,(r.mode&1)!==0&&Vi(r,t.child,null,_),r.child.memoizedState=Vc(_),r.memoizedState=kc,m);if((r.mode&1)===0)return wl(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var C=u.dgst;return u=C,m=Error(n(419)),u=xc(m,u,void 0),wl(t,r,_,u)}if(C=(_&t.childLanes)!==0,Qt||C){if(u=wt,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,gr(t,h),On(u,t,h,-1))}return Kc(),u=xc(Error(n(421))),wl(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Kv.bind(null,t),h._reactRetry=r,null):(t=m.treeContext,on=Or(h.nextSibling),sn=r,Ye=!0,Vn=null,t!==null&&(fn[mn++]=mr,fn[mn++]=pr,fn[mn++]=Rs,mr=t.id,pr=t.overflow,Rs=r),r=Dc(r,u.children),r.flags|=4096,r)}function om(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),cc(t.return,r,o)}function jc(t,r,o,u,h){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=h)}function am(t,r,o){var u=r.pendingProps,h=u.revealOrder,m=u.tail;if(Bt(t,r,u.children,o),u=Je.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&om(t,o,r);else if(t.tag===19)om(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(qe(Je,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&fl(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),jc(r,!1,h,o,m);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&fl(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}jc(r,!0,o,null,m);break;case"together":jc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function El(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function vr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ms|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Gr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Gr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Lv(t,r,o){switch(r.tag){case 3:rm(r),ki();break;case 5:Ef(r);break;case 1:Gt(r.type)&&rl(r);break;case 4:fc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;qe(ul,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(qe(Je,Je.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?im(t,r,o):(qe(Je,Je.current&1),t=vr(t,r,o),t!==null?t.sibling:null);qe(Je,Je.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return am(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),qe(Je,Je.current),u)break;return null;case 22:case 23:return r.lanes=0,em(t,r,o)}return vr(t,r,o)}var lm,Mc,um,cm;lm=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Mc=function(){},um=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Ds(Wn.current);var m=null;switch(o){case"input":h=ds(t,h),u=ds(t,u),m=[];break;case"select":h=ae({},h,{value:void 0}),u=ae({},u,{value:void 0}),m=[];break;case"textarea":h=oo(t,h),u=oo(t,u),m=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=el)}fo(o,u);var _;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var C=h[U];for(_ in C)C.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?m||(m=[]):(m=m||[]).push(U,null));for(U in u){var k=u[U];if(C=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&k!==C&&(k!=null||C!=null))if(U==="style")if(C){for(_ in C)!C.hasOwnProperty(_)||k&&k.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in k)k.hasOwnProperty(_)&&C[_]!==k[_]&&(o||(o={}),o[_]=k[_])}else o||(m||(m=[]),m.push(U,o)),o=k;else U==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,C=C?C.__html:void 0,k!=null&&C!==k&&(m=m||[]).push(U,k)):U==="children"?typeof k!="string"&&typeof k!="number"||(m=m||[]).push(U,""+k):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(k!=null&&U==="onScroll"&&Ge("scroll",t),m||C===k||(m=[])):(m=m||[]).push(U,k))}o&&(m=m||[]).push("style",o);var U=m;(r.updateQueue=U)&&(r.flags|=4)}},cm=function(t,r,o,u){o!==u&&(r.flags|=4)};function Go(t,r){if(!Ye)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Mt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Fv(t,r,o){var u=r.pendingProps;switch(rc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Gt(r.type)&&nl(),Mt(r),null;case 3:return u=r.stateNode,Mi(),Qe(Wt),Qe(Dt),gc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(al(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Vn!==null&&(Wc(Vn),Vn=null))),Mc(t,r),Mt(r),null;case 5:mc(r);var h=Ds(Bo.current);if(o=r.type,t!==null&&r.stateNode!=null)um(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Mt(r),null}if(t=Ds(Wn.current),al(r)){u=r.stateNode,o=r.type;var m=r.memoizedProps;switch(u[qn]=r,u[Lo]=m,t=(r.mode&1)!==0,o){case"dialog":Ge("cancel",u),Ge("close",u);break;case"iframe":case"object":case"embed":Ge("load",u);break;case"video":case"audio":for(h=0;h<jo.length;h++)Ge(jo[h],u);break;case"source":Ge("error",u);break;case"img":case"image":case"link":Ge("error",u),Ge("load",u);break;case"details":Ge("toggle",u);break;case"input":Xs(u,m),Ge("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!m.multiple},Ge("invalid",u);break;case"textarea":Js(u,m),Ge("invalid",u)}fo(o,m),h=null;for(var _ in m)if(m.hasOwnProperty(_)){var C=m[_];_==="children"?typeof C=="string"?u.textContent!==C&&(m.suppressHydrationWarning!==!0&&Za(u.textContent,C,t),h=["children",C]):typeof C=="number"&&u.textContent!==""+C&&(m.suppressHydrationWarning!==!0&&Za(u.textContent,C,t),h=["children",""+C]):a.hasOwnProperty(_)&&C!=null&&_==="onScroll"&&Ge("scroll",u)}switch(o){case"input":nr(u),Aa(u,m,!0);break;case"textarea":nr(u),ao(u);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(u.onclick=el)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ht(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[qn]=r,t[Lo]=u,lm(t,r,!1,!1),r.stateNode=t;e:{switch(_=mo(o,u),o){case"dialog":Ge("cancel",t),Ge("close",t),h=u;break;case"iframe":case"object":case"embed":Ge("load",t),h=u;break;case"video":case"audio":for(h=0;h<jo.length;h++)Ge(jo[h],t);h=u;break;case"source":Ge("error",t),h=u;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),h=u;break;case"details":Ge("toggle",t),h=u;break;case"input":Xs(t,u),h=ds(t,u),Ge("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ae({},u,{value:void 0}),Ge("invalid",t);break;case"textarea":Js(t,u),h=oo(t,u),Ge("invalid",t);break;default:h=u}fo(o,h),C=h;for(m in C)if(C.hasOwnProperty(m)){var k=C[m];m==="style"?co(t,k):m==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&lo(t,k)):m==="children"?typeof k=="string"?(o!=="textarea"||k!=="")&&Ar(t,k):typeof k=="number"&&Ar(t,""+k):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(a.hasOwnProperty(m)?k!=null&&m==="onScroll"&&Ge("scroll",t):k!=null&&re(t,m,k,_))}switch(o){case"input":nr(t),Aa(t,u,!1);break;case"textarea":nr(t),ao(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Le(u.value));break;case"select":t.multiple=!!u.multiple,m=u.value,m!=null?sr(t,!!u.multiple,m,!1):u.defaultValue!=null&&sr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=el)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(t&&r.stateNode!=null)cm(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Ds(Bo.current),Ds(Wn.current),al(r)){if(u=r.stateNode,o=r.memoizedProps,u[qn]=r,(m=u.nodeValue!==o)&&(t=sn,t!==null))switch(t.tag){case 3:Za(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Za(u.nodeValue,o,(t.mode&1)!==0)}m&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[qn]=r,r.stateNode=u}return Mt(r),null;case 13:if(Qe(Je),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&on!==null&&(r.mode&1)!==0&&(r.flags&128)===0)ff(),ki(),r.flags|=98560,m=!1;else if(m=al(r),u!==null&&u.dehydrated!==null){if(t===null){if(!m)throw Error(n(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[qn]=r}else ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),m=!1}else Vn!==null&&(Wc(Vn),Vn=null),m=!0;if(!m)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Je.current&1)!==0?pt===0&&(pt=3):Kc())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return Mi(),Mc(t,r),t===null&&Mo(r.stateNode.containerInfo),Mt(r),null;case 10:return uc(r.type._context),Mt(r),null;case 17:return Gt(r.type)&&nl(),Mt(r),null;case 19:if(Qe(Je),m=r.memoizedState,m===null)return Mt(r),null;if(u=(r.flags&128)!==0,_=m.rendering,_===null)if(u)Go(m,!1);else{if(pt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=fl(t),_!==null){for(r.flags|=128,Go(m,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)m=o,t=u,m.flags&=14680066,_=m.alternate,_===null?(m.childLanes=0,m.lanes=t,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=_.childLanes,m.lanes=_.lanes,m.child=_.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=_.memoizedProps,m.memoizedState=_.memoizedState,m.updateQueue=_.updateQueue,m.type=_.type,t=_.dependencies,m.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return qe(Je,Je.current&1|2),r.child}t=t.sibling}m.tail!==null&&He()>bi&&(r.flags|=128,u=!0,Go(m,!1),r.lanes=4194304)}else{if(!u)if(t=fl(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Go(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!Ye)return Mt(r),null}else 2*He()-m.renderingStartTime>bi&&o!==1073741824&&(r.flags|=128,u=!0,Go(m,!1),r.lanes=4194304);m.isBackwards?(_.sibling=r.child,r.child=_):(o=m.last,o!==null?o.sibling=_:r.child=_,m.last=_)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=He(),r.sibling=null,o=Je.current,qe(Je,u?o&1|2:o&1),r):(Mt(r),null);case 22:case 23:return Qc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(an&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function bv(t,r){switch(rc(r),r.tag){case 1:return Gt(r.type)&&nl(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Mi(),Qe(Wt),Qe(Dt),gc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return mc(r),null;case 13:if(Qe(Je),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ki()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Qe(Je),null;case 4:return Mi(),null;case 10:return uc(r.type._context),null;case 22:case 23:return Qc(),null;case 24:return null;default:return null}}var Tl=!1,Ot=!1,Uv=typeof WeakSet=="function"?WeakSet:Set,le=null;function Li(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){tt(t,r,u)}else o.current=null}function Oc(t,r,o){try{o()}catch(u){tt(t,r,u)}}var hm=!1;function zv(t,r){if(Qu=Dr,t=Bd(),Uu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,C=-1,k=-1,U=0,X=0,Y=t,K=null;t:for(;;){for(var ie;Y!==o||h!==0&&Y.nodeType!==3||(C=_+h),Y!==m||u!==0&&Y.nodeType!==3||(k=_+u),Y.nodeType===3&&(_+=Y.nodeValue.length),(ie=Y.firstChild)!==null;)K=Y,Y=ie;for(;;){if(Y===t)break t;if(K===o&&++U===h&&(C=_),K===m&&++X===u&&(k=_),(ie=Y.nextSibling)!==null)break;Y=K,K=Y.parentNode}Y=ie}o=C===-1||k===-1?null:{start:C,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ku={focusedElem:t,selectionRange:o},Dr=!1,le=r;le!==null;)if(r=le,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,le=t;else for(;le!==null;){r=le;try{var ue=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,rt=ue.memoizedState,F=r.stateNode,j=F.getSnapshotBeforeUpdate(r.elementType===r.type?ce:Dn(r.type,ce),rt);F.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(J){tt(r,r.return,J)}if(t=r.sibling,t!==null){t.return=r.return,le=t;break}le=r.return}return ue=hm,hm=!1,ue}function Qo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var m=h.destroy;h.destroy=void 0,m!==void 0&&Oc(r,o,m)}h=h.next}while(h!==u)}}function Il(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Lc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function dm(t){var r=t.alternate;r!==null&&(t.alternate=null,dm(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[qn],delete r[Lo],delete r[Zu],delete r[Iv],delete r[Sv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fm(t){return t.tag===5||t.tag===3||t.tag===4}function mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=el));else if(u!==4&&(t=t.child,t!==null))for(Fc(t,r,o),t=t.sibling;t!==null;)Fc(t,r,o),t=t.sibling}function bc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(bc(t,r,o),t=t.sibling;t!==null;)bc(t,r,o),t=t.sibling}var Nt=null,jn=!1;function Br(t,r,o){for(o=o.child;o!==null;)pm(t,r,o),o=o.sibling}function pm(t,r,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Es,o)}catch{}switch(o.tag){case 5:Ot||Li(o,r);case 6:var u=Nt,h=jn;Nt=null,Br(t,r,o),Nt=u,jn=h,Nt!==null&&(jn?(t=Nt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Nt.removeChild(o.stateNode));break;case 18:Nt!==null&&(jn?(t=Nt,o=o.stateNode,t.nodeType===8?Ju(t.parentNode,o):t.nodeType===1&&Ju(t,o),Pn(t)):Ju(Nt,o.stateNode));break;case 4:u=Nt,h=jn,Nt=o.stateNode.containerInfo,jn=!0,Br(t,r,o),Nt=u,jn=h;break;case 0:case 11:case 14:case 15:if(!Ot&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var m=h,_=m.destroy;m=m.tag,_!==void 0&&((m&2)!==0||(m&4)!==0)&&Oc(o,r,_),h=h.next}while(h!==u)}Br(t,r,o);break;case 1:if(!Ot&&(Li(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(C){tt(o,r,C)}Br(t,r,o);break;case 21:Br(t,r,o);break;case 22:o.mode&1?(Ot=(u=Ot)||o.memoizedState!==null,Br(t,r,o),Ot=u):Br(t,r,o);break;default:Br(t,r,o)}}function gm(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Uv),r.forEach(function(u){var h=Xv.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Mn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var m=t,_=r,C=_;e:for(;C!==null;){switch(C.tag){case 5:Nt=C.stateNode,jn=!1;break e;case 3:Nt=C.stateNode.containerInfo,jn=!0;break e;case 4:Nt=C.stateNode.containerInfo,jn=!0;break e}C=C.return}if(Nt===null)throw Error(n(160));pm(m,_,h),Nt=null,jn=!1;var k=h.alternate;k!==null&&(k.return=null),h.return=null}catch(U){tt(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)ym(r,t),r=r.sibling}function ym(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(r,t),Qn(t),u&4){try{Qo(3,t,t.return),Il(3,t)}catch(ce){tt(t,t.return,ce)}try{Qo(5,t,t.return)}catch(ce){tt(t,t.return,ce)}}break;case 1:Mn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return);break;case 5:if(Mn(r,t),Qn(t),u&512&&o!==null&&Li(o,o.return),t.flags&32){var h=t.stateNode;try{Ar(h,"")}catch(ce){tt(t,t.return,ce)}}if(u&4&&(h=t.stateNode,h!=null)){var m=t.memoizedProps,_=o!==null?o.memoizedProps:m,C=t.type,k=t.updateQueue;if(t.updateQueue=null,k!==null)try{C==="input"&&m.type==="radio"&&m.name!=null&&so(h,m),mo(C,_);var U=mo(C,m);for(_=0;_<k.length;_+=2){var X=k[_],Y=k[_+1];X==="style"?co(h,Y):X==="dangerouslySetInnerHTML"?lo(h,Y):X==="children"?Ar(h,Y):re(h,X,Y,U)}switch(C){case"input":io(h,m);break;case"textarea":Zs(h,m);break;case"select":var K=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var ie=m.value;ie!=null?sr(h,!!m.multiple,ie,!1):K!==!!m.multiple&&(m.defaultValue!=null?sr(h,!!m.multiple,m.defaultValue,!0):sr(h,!!m.multiple,m.multiple?[]:"",!1))}h[Lo]=m}catch(ce){tt(t,t.return,ce)}}break;case 6:if(Mn(r,t),Qn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,m=t.memoizedProps;try{h.nodeValue=m}catch(ce){tt(t,t.return,ce)}}break;case 3:if(Mn(r,t),Qn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Pn(r.containerInfo)}catch(ce){tt(t,t.return,ce)}break;case 4:Mn(r,t),Qn(t);break;case 13:Mn(r,t),Qn(t),h=t.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||(Bc=He())),u&4&&gm(t);break;case 22:if(X=o!==null&&o.memoizedState!==null,t.mode&1?(Ot=(U=Ot)||X,Mn(r,t),Ot=U):Mn(r,t),Qn(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!X&&(t.mode&1)!==0)for(le=t,X=t.child;X!==null;){for(Y=le=X;le!==null;){switch(K=le,ie=K.child,K.tag){case 0:case 11:case 14:case 15:Qo(4,K,K.return);break;case 1:Li(K,K.return);var ue=K.stateNode;if(typeof ue.componentWillUnmount=="function"){u=K,o=K.return;try{r=u,ue.props=r.memoizedProps,ue.state=r.memoizedState,ue.componentWillUnmount()}catch(ce){tt(u,o,ce)}}break;case 5:Li(K,K.return);break;case 22:if(K.memoizedState!==null){wm(Y);continue}}ie!==null?(ie.return=K,le=ie):wm(Y)}X=X.sibling}e:for(X=null,Y=t;;){if(Y.tag===5){if(X===null){X=Y;try{h=Y.stateNode,U?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(C=Y.stateNode,k=Y.memoizedProps.style,_=k!=null&&k.hasOwnProperty("display")?k.display:null,C.style.display=uo("display",_))}catch(ce){tt(t,t.return,ce)}}}else if(Y.tag===6){if(X===null)try{Y.stateNode.nodeValue=U?"":Y.memoizedProps}catch(ce){tt(t,t.return,ce)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===t)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===t)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===t)break e;X===Y&&(X=null),Y=Y.return}X===Y&&(X=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Mn(r,t),Qn(t),u&4&&gm(t);break;case 21:break;default:Mn(r,t),Qn(t)}}function Qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(fm(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Ar(h,""),u.flags&=-33);var m=mm(t);bc(t,m,h);break;case 3:case 4:var _=u.stateNode.containerInfo,C=mm(t);Fc(t,C,_);break;default:throw Error(n(161))}}catch(k){tt(t,t.return,k)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Bv(t,r,o){le=t,vm(t)}function vm(t,r,o){for(var u=(t.mode&1)!==0;le!==null;){var h=le,m=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||Tl;if(!_){var C=h.alternate,k=C!==null&&C.memoizedState!==null||Ot;C=Tl;var U=Ot;if(Tl=_,(Ot=k)&&!U)for(le=h;le!==null;)_=le,k=_.child,_.tag===22&&_.memoizedState!==null?Em(h):k!==null?(k.return=_,le=k):Em(h);for(;m!==null;)le=m,vm(m),m=m.sibling;le=h,Tl=C,Ot=U}_m(t)}else(h.subtreeFlags&8772)!==0&&m!==null?(m.return=h,le=m):_m(t)}}function _m(t){for(;le!==null;){var r=le;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ot||Il(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ot)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Dn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var m=r.updateQueue;m!==null&&wf(r,m,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}wf(r,_,o)}break;case 5:var C=r.stateNode;if(o===null&&r.flags&4){o=C;var k=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&o.focus();break;case"img":k.src&&(o.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var X=U.memoizedState;if(X!==null){var Y=X.dehydrated;Y!==null&&Pn(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ot||r.flags&512&&Lc(r)}catch(K){tt(r,r.return,K)}}if(r===t){le=null;break}if(o=r.sibling,o!==null){o.return=r.return,le=o;break}le=r.return}}function wm(t){for(;le!==null;){var r=le;if(r===t){le=null;break}var o=r.sibling;if(o!==null){o.return=r.return,le=o;break}le=r.return}}function Em(t){for(;le!==null;){var r=le;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Il(4,r)}catch(k){tt(r,o,k)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(k){tt(r,h,k)}}var m=r.return;try{Lc(r)}catch(k){tt(r,m,k)}break;case 5:var _=r.return;try{Lc(r)}catch(k){tt(r,_,k)}}}catch(k){tt(r,r.return,k)}if(r===t){le=null;break}var C=r.sibling;if(C!==null){C.return=r.return,le=C;break}le=r.return}}var $v=Math.ceil,Sl=de.ReactCurrentDispatcher,Uc=de.ReactCurrentOwner,yn=de.ReactCurrentBatchConfig,De=0,wt=null,at=null,xt=0,an=0,Fi=Lr(0),pt=0,Ko=null,Ms=0,Al=0,zc=0,Xo=null,Kt=null,Bc=0,bi=1/0,_r=null,Nl=!1,$c=null,$r=null,xl=!1,Hr=null,Cl=0,Yo=0,Hc=null,Pl=-1,Rl=0;function $t(){return(De&6)!==0?He():Pl!==-1?Pl:Pl=He()}function qr(t){return(t.mode&1)===0?1:(De&2)!==0&&xt!==0?xt&-xt:Nv.transition!==null?(Rl===0&&(Rl=Is()),Rl):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:Ao(t.type)),t)}function On(t,r,o,u){if(50<Yo)throw Yo=0,Hc=null,Error(n(185));Pr(t,o,u),((De&2)===0||t!==wt)&&(t===wt&&((De&2)===0&&(Al|=o),pt===4&&Wr(t,xt)),Xt(t,u),o===1&&De===0&&(r.mode&1)===0&&(bi=He()+500,sl&&br()))}function Xt(t,r){var o=t.callbackNode;ar(t,r);var u=Ts(t,t===wt?xt:0);if(u===0)o!==null&&wo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&wo(o),r===1)t.tag===0?Av(Im.bind(null,t)):lf(Im.bind(null,t)),Ev(function(){(De&6)===0&&br()}),o=null;else{switch(kr(u)){case 1:o=ws;break;case 4:o=Nr;break;case 16:o=cn;break;case 536870912:o=Ra;break;default:o=cn}o=km(o,Tm.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Tm(t,r){if(Pl=-1,Rl=0,(De&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Ui()&&t.callbackNode!==o)return null;var u=Ts(t,t===wt?xt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=kl(t,u);else{r=u;var h=De;De|=2;var m=Am();(wt!==t||xt!==r)&&(_r=null,bi=He()+500,Ls(t,r));do try{Wv();break}catch(C){Sm(t,C)}while(!0);lc(),Sl.current=m,De=h,at!==null?r=0:(wt=null,xt=0,r=pt)}if(r!==0){if(r===2&&(h=tn(t),h!==0&&(u=h,r=qc(t,h))),r===1)throw o=Ko,Ls(t,0),Wr(t,u),Xt(t,He()),o;if(r===6)Wr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Hv(h)&&(r=kl(t,u),r===2&&(m=tn(t),m!==0&&(u=m,r=qc(t,m))),r===1))throw o=Ko,Ls(t,0),Wr(t,u),Xt(t,He()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Fs(t,Kt,_r);break;case 3:if(Wr(t,u),(u&130023424)===u&&(r=Bc+500-He(),10<r)){if(Ts(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){$t(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Yu(Fs.bind(null,t,Kt,_r),r);break}Fs(t,Kt,_r);break;case 4:if(Wr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-Ut(u);m=1<<_,_=r[_],_>h&&(h=_),u&=~m}if(u=h,u=He()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*$v(u/1960))-u,10<u){t.timeoutHandle=Yu(Fs.bind(null,t,Kt,_r),u);break}Fs(t,Kt,_r);break;case 5:Fs(t,Kt,_r);break;default:throw Error(n(329))}}}return Xt(t,He()),t.callbackNode===o?Tm.bind(null,t):null}function qc(t,r){var o=Xo;return t.current.memoizedState.isDehydrated&&(Ls(t,r).flags|=256),t=kl(t,r),t!==2&&(r=Kt,Kt=o,r!==null&&Wc(r)),t}function Wc(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function Hv(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],m=h.getSnapshot;h=h.value;try{if(!kn(m(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Wr(t,r){for(r&=~zc,r&=~Al,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ut(r),u=1<<o;t[o]=-1,r&=~u}}function Im(t){if((De&6)!==0)throw Error(n(327));Ui();var r=Ts(t,0);if((r&1)===0)return Xt(t,He()),null;var o=kl(t,r);if(t.tag!==0&&o===2){var u=tn(t);u!==0&&(r=u,o=qc(t,u))}if(o===1)throw o=Ko,Ls(t,0),Wr(t,r),Xt(t,He()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Fs(t,Kt,_r),Xt(t,He()),null}function Gc(t,r){var o=De;De|=1;try{return t(r)}finally{De=o,De===0&&(bi=He()+500,sl&&br())}}function Os(t){Hr!==null&&Hr.tag===0&&(De&6)===0&&Ui();var r=De;De|=1;var o=yn.transition,u=Ce;try{if(yn.transition=null,Ce=1,t)return t()}finally{Ce=u,yn.transition=o,De=r,(De&6)===0&&br()}}function Qc(){an=Fi.current,Qe(Fi)}function Ls(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,wv(o)),at!==null)for(o=at.return;o!==null;){var u=o;switch(rc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&nl();break;case 3:Mi(),Qe(Wt),Qe(Dt),gc();break;case 5:mc(u);break;case 4:Mi();break;case 13:Qe(Je);break;case 19:Qe(Je);break;case 10:uc(u.type._context);break;case 22:case 23:Qc()}o=o.return}if(wt=t,at=t=Gr(t.current,null),xt=an=r,pt=0,Ko=null,zc=Al=Ms=0,Kt=Xo=null,Vs!==null){for(r=0;r<Vs.length;r++)if(o=Vs[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,m=o.pending;if(m!==null){var _=m.next;m.next=h,u.next=_}o.pending=u}Vs=null}return t}function Sm(t,r){do{var o=at;try{if(lc(),ml.current=vl,pl){for(var u=Ze.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}pl=!1}if(js=0,_t=mt=Ze=null,$o=!1,Ho=0,Uc.current=null,o===null||o.return===null){pt=1,Ko=r,at=null;break}e:{var m=t,_=o.return,C=o,k=r;if(r=xt,C.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var U=k,X=C,Y=X.tag;if((X.mode&1)===0&&(Y===0||Y===11||Y===15)){var K=X.alternate;K?(X.updateQueue=K.updateQueue,X.memoizedState=K.memoizedState,X.lanes=K.lanes):(X.updateQueue=null,X.memoizedState=null)}var ie=Kf(_);if(ie!==null){ie.flags&=-257,Xf(ie,_,C,m,r),ie.mode&1&&Qf(m,U,r),r=ie,k=U;var ue=r.updateQueue;if(ue===null){var ce=new Set;ce.add(k),r.updateQueue=ce}else ue.add(k);break e}else{if((r&1)===0){Qf(m,U,r),Kc();break e}k=Error(n(426))}}else if(Ye&&C.mode&1){var rt=Kf(_);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),Xf(rt,_,C,m,r),oc(Oi(k,C));break e}}m=k=Oi(k,C),pt!==4&&(pt=2),Xo===null?Xo=[m]:Xo.push(m),m=_;do{switch(m.tag){case 3:m.flags|=65536,r&=-r,m.lanes|=r;var F=Wf(m,k,r);_f(m,F);break e;case 1:C=k;var j=m.type,b=m.stateNode;if((m.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($r===null||!$r.has(b)))){m.flags|=65536,r&=-r,m.lanes|=r;var J=Gf(m,C,r);_f(m,J);break e}}m=m.return}while(m!==null)}xm(o)}catch(he){r=he,at===o&&o!==null&&(at=o=o.return);continue}break}while(!0)}function Am(){var t=Sl.current;return Sl.current=vl,t===null?vl:t}function Kc(){(pt===0||pt===3||pt===2)&&(pt=4),wt===null||(Ms&268435455)===0&&(Al&268435455)===0||Wr(wt,xt)}function kl(t,r){var o=De;De|=2;var u=Am();(wt!==t||xt!==r)&&(_r=null,Ls(t,r));do try{qv();break}catch(h){Sm(t,h)}while(!0);if(lc(),De=o,Sl.current=u,at!==null)throw Error(n(261));return wt=null,xt=0,pt}function qv(){for(;at!==null;)Nm(at)}function Wv(){for(;at!==null&&!Ca();)Nm(at)}function Nm(t){var r=Rm(t.alternate,t,an);t.memoizedProps=t.pendingProps,r===null?xm(t):at=r,Uc.current=null}function xm(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=Fv(o,r,an),o!==null){at=o;return}}else{if(o=bv(o,r),o!==null){o.flags&=32767,at=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,at=null;return}}if(r=r.sibling,r!==null){at=r;return}at=r=t}while(r!==null);pt===0&&(pt=5)}function Fs(t,r,o){var u=Ce,h=yn.transition;try{yn.transition=null,Ce=1,Gv(t,r,o,u)}finally{yn.transition=h,Ce=u}return null}function Gv(t,r,o,u){do Ui();while(Hr!==null);if((De&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var m=o.lanes|o.childLanes;if(Be(t,m),t===wt&&(at=wt=null,xt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||xl||(xl=!0,km(cn,function(){return Ui(),null})),m=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||m){m=yn.transition,yn.transition=null;var _=Ce;Ce=1;var C=De;De|=4,Uc.current=null,zv(t,o),ym(o,t),fv(Ku),Dr=!!Qu,Ku=Qu=null,t.current=o,Bv(o),Vu(),De=C,Ce=_,yn.transition=m}else t.current=o;if(xl&&(xl=!1,Hr=t,Cl=h),m=t.pendingLanes,m===0&&($r=null),ka(o.stateNode),Xt(t,He()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(Nl)throw Nl=!1,t=$c,$c=null,t;return(Cl&1)!==0&&t.tag!==0&&Ui(),m=t.pendingLanes,(m&1)!==0?t===Hc?Yo++:(Yo=0,Hc=t):Yo=0,br(),null}function Ui(){if(Hr!==null){var t=kr(Cl),r=yn.transition,o=Ce;try{if(yn.transition=null,Ce=16>t?16:t,Hr===null)var u=!1;else{if(t=Hr,Hr=null,Cl=0,(De&6)!==0)throw Error(n(331));var h=De;for(De|=4,le=t.current;le!==null;){var m=le,_=m.child;if((le.flags&16)!==0){var C=m.deletions;if(C!==null){for(var k=0;k<C.length;k++){var U=C[k];for(le=U;le!==null;){var X=le;switch(X.tag){case 0:case 11:case 15:Qo(8,X,m)}var Y=X.child;if(Y!==null)Y.return=X,le=Y;else for(;le!==null;){X=le;var K=X.sibling,ie=X.return;if(dm(X),X===U){le=null;break}if(K!==null){K.return=ie,le=K;break}le=ie}}}var ue=m.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var rt=ce.sibling;ce.sibling=null,ce=rt}while(ce!==null)}}le=m}}if((m.subtreeFlags&2064)!==0&&_!==null)_.return=m,le=_;else e:for(;le!==null;){if(m=le,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Qo(9,m,m.return)}var F=m.sibling;if(F!==null){F.return=m.return,le=F;break e}le=m.return}}var j=t.current;for(le=j;le!==null;){_=le;var b=_.child;if((_.subtreeFlags&2064)!==0&&b!==null)b.return=_,le=b;else e:for(_=j;le!==null;){if(C=le,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Il(9,C)}}catch(he){tt(C,C.return,he)}if(C===_){le=null;break e}var J=C.sibling;if(J!==null){J.return=C.return,le=J;break e}le=C.return}}if(De=h,br(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Es,t)}catch{}u=!0}return u}finally{Ce=o,yn.transition=r}}return!1}function Cm(t,r,o){r=Oi(o,r),r=Wf(t,r,1),t=zr(t,r,1),r=$t(),t!==null&&(Pr(t,1,r),Xt(t,r))}function tt(t,r,o){if(t.tag===3)Cm(t,t,o);else for(;r!==null;){if(r.tag===3){Cm(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($r===null||!$r.has(u))){t=Oi(o,t),t=Gf(r,t,1),r=zr(r,t,1),t=$t(),r!==null&&(Pr(r,1,t),Xt(r,t));break}}r=r.return}}function Qv(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=$t(),t.pingedLanes|=t.suspendedLanes&o,wt===t&&(xt&o)===o&&(pt===4||pt===3&&(xt&130023424)===xt&&500>He()-Bc?Ls(t,0):zc|=o),Xt(t,r)}function Pm(t,r){r===0&&((t.mode&1)===0?r=1:(r=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var o=$t();t=gr(t,r),t!==null&&(Pr(t,r,o),Xt(t,o))}function Kv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Pm(t,o)}function Xv(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),Pm(t,o)}var Rm;Rm=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Wt.current)Qt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Qt=!1,Lv(t,r,o);Qt=(t.flags&131072)!==0}else Qt=!1,Ye&&(r.flags&1048576)!==0&&uf(r,ol,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;El(t,r),t=r.pendingProps;var h=Ci(r,Dt.current);ji(r,o),h=_c(null,r,u,t,h,o);var m=wc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gt(u)?(m=!0,rl(r)):m=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,dc(r),h.updater=_l,r.stateNode=h,h._reactInternals=r,Nc(r,u,t,o),r=Rc(null,r,u,!0,m,o)):(r.tag=0,Ye&&m&&nc(r),Bt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(El(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Jv(u),t=Dn(u,t),h){case 0:r=Pc(null,r,u,t,o);break e;case 1:r=nm(null,r,u,t,o);break e;case 11:r=Yf(null,r,u,t,o);break e;case 14:r=Jf(null,r,u,Dn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),Pc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),nm(t,r,u,h,o);case 3:e:{if(rm(r),t===null)throw Error(n(387));u=r.pendingProps,m=r.memoizedState,h=m.element,vf(t,r),dl(r,u,null,o);var _=r.memoizedState;if(u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){h=Oi(Error(n(423)),r),r=sm(t,r,u,o,h);break e}else if(u!==h){h=Oi(Error(n(424)),r),r=sm(t,r,u,o,h);break e}else for(on=Or(r.stateNode.containerInfo.firstChild),sn=r,Ye=!0,Vn=null,o=gf(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ki(),u===h){r=vr(t,r,o);break e}Bt(t,r,u,o)}r=r.child}return r;case 5:return Ef(r),t===null&&ic(r),u=r.type,h=r.pendingProps,m=t!==null?t.memoizedProps:null,_=h.children,Xu(u,h)?_=null:m!==null&&Xu(u,m)&&(r.flags|=32),tm(t,r),Bt(t,r,_,o),r.child;case 6:return t===null&&ic(r),null;case 13:return im(t,r,o);case 4:return fc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Vi(r,null,u,o):Bt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),Yf(t,r,u,h,o);case 7:return Bt(t,r,r.pendingProps,o),r.child;case 8:return Bt(t,r,r.pendingProps.children,o),r.child;case 12:return Bt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,m=r.memoizedProps,_=h.value,qe(ul,u._currentValue),u._currentValue=_,m!==null)if(kn(m.value,_)){if(m.children===h.children&&!Wt.current){r=vr(t,r,o);break e}}else for(m=r.child,m!==null&&(m.return=r);m!==null;){var C=m.dependencies;if(C!==null){_=m.child;for(var k=C.firstContext;k!==null;){if(k.context===u){if(m.tag===1){k=yr(-1,o&-o),k.tag=2;var U=m.updateQueue;if(U!==null){U=U.shared;var X=U.pending;X===null?k.next=k:(k.next=X.next,X.next=k),U.pending=k}}m.lanes|=o,k=m.alternate,k!==null&&(k.lanes|=o),cc(m.return,o,r),C.lanes|=o;break}k=k.next}}else if(m.tag===10)_=m.type===r.type?null:m.child;else if(m.tag===18){if(_=m.return,_===null)throw Error(n(341));_.lanes|=o,C=_.alternate,C!==null&&(C.lanes|=o),cc(_,o,r),_=m.sibling}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===r){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}Bt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,ji(r,o),h=pn(h),u=u(h),r.flags|=1,Bt(t,r,u,o),r.child;case 14:return u=r.type,h=Dn(u,r.pendingProps),h=Dn(u.type,h),Jf(t,r,u,h,o);case 15:return Zf(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),El(t,r),r.tag=1,Gt(u)?(t=!0,rl(r)):t=!1,ji(r,o),Hf(r,u,h),Nc(r,u,h,o),Rc(null,r,u,!0,t,o);case 19:return am(t,r,o);case 22:return em(t,r,o)}throw Error(n(156,r.tag))};function km(t,r){return ai(t,r)}function Yv(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,r,o,u){return new Yv(t,r,o,u)}function Xc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jv(t){if(typeof t=="function")return Xc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===M)return 11;if(t===kt)return 14}return 2}function Gr(t,r){var o=t.alternate;return o===null?(o=vn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Vl(t,r,o,u,h,m){var _=2;if(u=t,typeof t=="function")Xc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case A:return bs(o.children,h,m,r);case T:_=8,h|=8;break;case x:return t=vn(12,o,r,h|2),t.elementType=x,t.lanes=m,t;case P:return t=vn(13,o,r,h),t.elementType=P,t.lanes=m,t;case ze:return t=vn(19,o,r,h),t.elementType=ze,t.lanes=m,t;case Ue:return Dl(o,h,m,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:_=10;break e;case V:_=9;break e;case M:_=11;break e;case kt:_=14;break e;case Vt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=vn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=m,r}function bs(t,r,o,u){return t=vn(7,t,u,r),t.lanes=o,t}function Dl(t,r,o,u){return t=vn(22,t,u,r),t.elementType=Ue,t.lanes=o,t.stateNode={isHidden:!1},t}function Yc(t,r,o){return t=vn(6,t,null,r),t.lanes=o,t}function Jc(t,r,o){return r=vn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Zv(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Zc(t,r,o,u,h,m,_,C,k){return t=new Zv(t,r,o,C,k),r===1?(r=1,m===!0&&(r|=8)):r=0,m=vn(3,null,null,r),t.current=m,m.stateNode=t,m.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},dc(m),t}function e_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function Vm(t){if(!t)return Fr;t=t._reactInternals;e:{if(Sn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Gt(o))return of(t,o,r)}return r}function Dm(t,r,o,u,h,m,_,C,k){return t=Zc(o,u,!0,t,h,m,_,C,k),t.context=Vm(null),o=t.current,u=$t(),h=qr(o),m=yr(u,h),m.callback=r??null,zr(o,m,h),t.current.lanes=h,Pr(t,h,u),Xt(t,u),t}function jl(t,r,o,u){var h=r.current,m=$t(),_=qr(h);return o=Vm(o),r.context===null?r.context=o:r.pendingContext=o,r=yr(m,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=zr(h,r,_),t!==null&&(On(t,h,_,m),hl(t,h,_)),_}function Ml(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jm(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function eh(t,r){jm(t,r),(t=t.alternate)&&jm(t,r)}function t_(){return null}var Mm=typeof reportError=="function"?reportError:function(t){console.error(t)};function th(t){this._internalRoot=t}Ol.prototype.render=th.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));jl(t,r,null,null)},Ol.prototype.unmount=th.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Os(function(){jl(null,t,null,null)}),r[dr]=null}};function Ol(t){this._internalRoot=t}Ol.prototype.unstable_scheduleHydration=function(t){if(t){var r=Oa();t={blockedOn:null,target:t,priority:r};for(var o=0;o<zn.length&&r!==0&&r<zn[o].priority;o++);zn.splice(o,0,t),o===0&&ba(t)}};function nh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ll(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Om(){}function n_(t,r,o,u,h){if(h){if(typeof u=="function"){var m=u;u=function(){var U=Ml(_);m.call(U)}}var _=Dm(r,u,t,0,null,!1,!1,"",Om);return t._reactRootContainer=_,t[dr]=_.current,Mo(t.nodeType===8?t.parentNode:t),Os(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var C=u;u=function(){var U=Ml(k);C.call(U)}}var k=Zc(t,0,!1,null,null,!1,!1,"",Om);return t._reactRootContainer=k,t[dr]=k.current,Mo(t.nodeType===8?t.parentNode:t),Os(function(){jl(r,k,o,u)}),k}function Fl(t,r,o,u,h){var m=o._reactRootContainer;if(m){var _=m;if(typeof h=="function"){var C=h;h=function(){var k=Ml(_);C.call(k)}}jl(r,_,t,h)}else _=n_(o,r,t,h,u);return Ml(_)}ja=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=xr(r.pendingLanes);o!==0&&(Rr(r,o|1),Xt(r,He()),(De&6)===0&&(bi=He()+500,br()))}break;case 13:Os(function(){var u=gr(t,1);if(u!==null){var h=$t();On(u,t,1,h)}}),eh(t,1)}},ci=function(t){if(t.tag===13){var r=gr(t,134217728);if(r!==null){var o=$t();On(r,t,134217728,o)}eh(t,134217728)}},Ma=function(t){if(t.tag===13){var r=qr(t),o=gr(t,r);if(o!==null){var u=$t();On(o,t,r,u)}eh(t,r)}},Oa=function(){return Ce},La=function(t,r){var o=Ce;try{return Ce=t,r()}finally{Ce=o}},ti=function(t,r,o){switch(r){case"input":if(io(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=tl(u);if(!h)throw Error(n(90));Ks(u),io(u,h)}}}break;case"textarea":Zs(t,o);break;case"select":r=o.value,r!=null&&sr(t,!!o.multiple,r,!1)}},gs=Gc,go=Os;var r_={usingClientEntryPoint:!1,Events:[Fo,Ni,tl,bn,po,Gc]},Jo={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s_={bundleType:Jo.bundleType,version:Jo.version,rendererPackageName:Jo.rendererPackageName,rendererConfig:Jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_o(t),t===null?null:t.stateNode},findFiberByHostInstance:Jo.findFiberByHostInstance||t_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{Es=bl.inject(s_),en=bl}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r_,Yt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nh(r))throw Error(n(200));return e_(t,r,null,o)},Yt.createRoot=function(t,r){if(!nh(t))throw Error(n(299));var o=!1,u="",h=Mm;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Zc(t,1,!1,null,null,o,!1,u,h),t[dr]=r.current,Mo(t.nodeType===8?t.parentNode:t),new th(r)},Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=_o(r),t=t===null?null:t.stateNode,t},Yt.flushSync=function(t){return Os(t)},Yt.hydrate=function(t,r,o){if(!Ll(r))throw Error(n(200));return Fl(null,t,r,!0,o)},Yt.hydrateRoot=function(t,r,o){if(!nh(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,m="",_=Mm;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Dm(r,null,t,1,o??null,h,!1,m,_),t[dr]=r.current,Mo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Ol(r)},Yt.render=function(t,r,o){if(!Ll(r))throw Error(n(200));return Fl(null,t,r,!1,o)},Yt.unmountComponentAtNode=function(t){if(!Ll(t))throw Error(n(40));return t._reactRootContainer?(Os(function(){Fl(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1},Yt.unstable_batchedUpdates=Gc,Yt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Ll(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Fl(t,r,o,!1,u)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var Hm;function d_(){if(Hm)return ih.exports;Hm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ih.exports=h_(),ih.exports}var qm;function f_(){if(qm)return Ul;qm=1;var s=d_();return Ul.createRoot=s.createRoot,Ul.hydrateRoot=s.hydrateRoot,Ul}var m_=f_();const p_=()=>{};var Wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},g_=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const a=s[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[n++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[n++],d=s[n++],p=s[n++],v=((a&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const c=s[n++],d=s[n++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},og={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],d=a+1<s.length,p=d?s[a+1]:0,v=a+2<s.length,w=v?s[a+2]:0,N=c>>2,S=(c&3)<<4|p>>4;let I=(p&15)<<2|w>>6,D=w&63;v||(D=64,d||(I=64)),i.push(n[N],n[S],n[I],n[D])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(ig(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):g_(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=n[s.charAt(a++)],p=a<s.length?n[s.charAt(a)]:0;++a;const w=a<s.length?n[s.charAt(a)]:64;++a;const S=a<s.length?n[s.charAt(a)]:64;if(++a,c==null||p==null||w==null||S==null)throw new y_;const I=c<<2|p>>4;if(i.push(I),w!==64){const D=p<<4&240|w>>2;if(i.push(D),S!==64){const B=w<<6&192|S;i.push(B)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class y_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v_=function(s){const e=ig(s);return og.encodeByteArray(e,!0)},Jl=function(s){return v_(s).replace(/\./g,"")},__=function(s){try{return og.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=()=>w_().__FIREBASE_DEFAULTS__,T_=()=>{if(typeof process>"u"||typeof Wm>"u")return;const s=Wm.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},I_=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&__(s[1]);return e&&JSON.parse(e)},zh=()=>{try{return p_()||E_()||T_()||I_()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},S_=s=>{var e,n;return(n=(e=zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},A_=s=>{const e=S_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ag=()=>{var s;return(s=zh())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function x_(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Jl(JSON.stringify(n)),Jl(JSON.stringify(d)),""].join(".")}const sa={};function P_(){const s={prod:[],emulator:[]};for(const e of Object.keys(sa))sa[e]?s.emulator.push(e):s.prod.push(e);return s}function R_(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Gm=!1;function k_(s,e){if(typeof window>"u"||typeof document>"u"||!Bh(window.location.host)||sa[s]===e||sa[s]||Gm)return;sa[s]=e;function n(I){return`__firebase__banner__${I}`}const i="__firebase__banner",c=P_().prod.length>0;function d(){const I=document.getElementById(i);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function v(I,D){I.setAttribute("width","24"),I.setAttribute("id",D),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function w(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Gm=!0,d()},I}function N(I,D){I.setAttribute("id",D),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function S(){const I=R_(i),D=n("text"),B=document.getElementById(D)||document.createElement("span"),G=n("learnmore"),$=document.getElementById(G)||document.createElement("a"),Z=n("preprendIcon"),ee=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const re=I.element;p(re),N($,G);const de=w();v(ee,Z),re.append(ee,B,$,de),document.body.appendChild(re)}c?(B.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D_(){var s;const e=(s=zh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j_(){return!D_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M_(){try{return typeof indexedDB=="object"}catch{return!1}}function O_(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="FirebaseError";class Ji extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=L_,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lg.prototype.create)}}class lg{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?F_(c,i):"Error",p=`${this.serviceName}: ${d} (${a}).`;return new Ji(a,p,i)}}function F_(s,e){return s.replace(b_,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const b_=/\{\$([^}]+)}/g;function Zl(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const c=s[a],d=e[a];if(Qm(c)&&Qm(d)){if(!Zl(c,d))return!1}else if(c!==d)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function Qm(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(s){return s&&s._delegate?s._delegate:s}class ua{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new N_;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B_(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&d.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:z_(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z_(s){return s===zs?void 0:s}function B_(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new U_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ve||(Ve={}));const H_={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},q_=Ve.INFO,W_={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},G_=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=W_[e];if(a)console[a](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ug{constructor(e){this.name=e,this._logLevel=q_,this._logHandler=G_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const Q_=(s,e)=>e.some(n=>s instanceof n);let Km,Xm;function K_(){return Km||(Km=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X_(){return Xm||(Xm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cg=new WeakMap,gh=new WeakMap,hg=new WeakMap,lh=new WeakMap,$h=new WeakMap;function Y_(s){const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(Xr(s.result)),a()},d=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&cg.set(n,s)}).catch(()=>{}),$h.set(e,s),e}function J_(s){if(gh.has(s))return;const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});gh.set(s,e)}let yh={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return gh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||hg.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Z_(s){yh=s(yh)}function e0(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(uh(this),e,...n);return hg.set(i,e.sort?e.sort():[e]),Xr(i)}:X_().includes(s)?function(...e){return s.apply(uh(this),e),Xr(cg.get(this))}:function(...e){return Xr(s.apply(uh(this),e))}}function t0(s){return typeof s=="function"?e0(s):(s instanceof IDBTransaction&&J_(s),Q_(s,K_())?new Proxy(s,yh):s)}function Xr(s){if(s instanceof IDBRequest)return Y_(s);if(lh.has(s))return lh.get(s);const e=t0(s);return e!==s&&(lh.set(s,e),$h.set(e,s)),e}const uh=s=>$h.get(s);function n0(s,e,{blocked:n,upgrade:i,blocking:a,terminated:c}={}){const d=indexedDB.open(s,e),p=Xr(d);return i&&d.addEventListener("upgradeneeded",v=>{i(Xr(d.result),v.oldVersion,v.newVersion,Xr(d.transaction),v)}),n&&d.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),p.then(v=>{c&&v.addEventListener("close",()=>c()),a&&v.addEventListener("versionchange",w=>a(w.oldVersion,w.newVersion,w))}).catch(()=>{}),p}const r0=["get","getKey","getAll","getAllKeys","count"],s0=["put","add","delete","clear"],ch=new Map;function Ym(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(ch.get(e))return ch.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=s0.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||r0.includes(n)))return;const c=async function(d,...p){const v=this.transaction(d,a?"readwrite":"readonly");let w=v.store;return i&&(w=w.index(p.shift())),(await Promise.all([w[n](...p),a&&v.done]))[0]};return ch.set(e,c),c}Z_(s=>({...s,get:(e,n,i)=>Ym(e,n)||s.get(e,n,i),has:(e,n)=>!!Ym(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o0(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function o0(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vh="@firebase/app",Jm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new ug("@firebase/app"),a0="@firebase/app-compat",l0="@firebase/analytics-compat",u0="@firebase/analytics",c0="@firebase/app-check-compat",h0="@firebase/app-check",d0="@firebase/auth",f0="@firebase/auth-compat",m0="@firebase/database",p0="@firebase/data-connect",g0="@firebase/database-compat",y0="@firebase/functions",v0="@firebase/functions-compat",_0="@firebase/installations",w0="@firebase/installations-compat",E0="@firebase/messaging",T0="@firebase/messaging-compat",I0="@firebase/performance",S0="@firebase/performance-compat",A0="@firebase/remote-config",N0="@firebase/remote-config-compat",x0="@firebase/storage",C0="@firebase/storage-compat",P0="@firebase/firestore",R0="@firebase/ai",k0="@firebase/firestore-compat",V0="firebase",D0="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="[DEFAULT]",j0={[vh]:"fire-core",[a0]:"fire-core-compat",[u0]:"fire-analytics",[l0]:"fire-analytics-compat",[h0]:"fire-app-check",[c0]:"fire-app-check-compat",[d0]:"fire-auth",[f0]:"fire-auth-compat",[m0]:"fire-rtdb",[p0]:"fire-data-connect",[g0]:"fire-rtdb-compat",[y0]:"fire-fn",[v0]:"fire-fn-compat",[_0]:"fire-iid",[w0]:"fire-iid-compat",[E0]:"fire-fcm",[T0]:"fire-fcm-compat",[I0]:"fire-perf",[S0]:"fire-perf-compat",[A0]:"fire-rc",[N0]:"fire-rc-compat",[x0]:"fire-gcs",[C0]:"fire-gcs-compat",[P0]:"fire-fst",[k0]:"fire-fst-compat",[R0]:"fire-vertex","fire-js":"fire-js",[V0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,M0=new Map,wh=new Map;function Zm(s,e){try{s.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function tu(s){const e=s.name;if(wh.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;wh.set(e,s);for(const n of eu.values())Zm(n,s);for(const n of M0.values())Zm(n,s);return!0}function O0(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function L0(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new lg("app","Firebase",F0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=D0;function dg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:_h,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Yr.create("bad-app-name",{appName:String(a)});if(n||(n=ag()),!n)throw Yr.create("no-options");const c=eu.get(a);if(c){if(Zl(n,c.options)&&Zl(i,c.config))return c;throw Yr.create("duplicate-app",{appName:a})}const d=new $_(a);for(const v of wh.values())d.addComponent(v);const p=new b0(n,i,d);return eu.set(a,p),p}function z0(s=_h){const e=eu.get(s);if(!e&&s===_h&&ag())return dg();if(!e)throw Yr.create("no-app",{appName:s});return e}function qi(s,e,n){var i;let a=(i=j0[s])!==null&&i!==void 0?i:s;n&&(a+=`-${n}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const p=[`Unable to register library "${a}" with version "${e}":`];c&&p.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(p.join(" "));return}tu(new ua(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="firebase-heartbeat-database",$0=1,ca="firebase-heartbeat-store";let hh=null;function fg(){return hh||(hh=n0(B0,$0,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ca)}catch(n){console.warn(n)}}}}).catch(s=>{throw Yr.create("idb-open",{originalErrorMessage:s.message})})),hh}async function H0(s){try{const n=(await fg()).transaction(ca),i=await n.objectStore(ca).get(mg(s));return await n.done,i}catch(e){if(e instanceof Ji)wr.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function ep(s,e){try{const i=(await fg()).transaction(ca,"readwrite");await i.objectStore(ca).put(e,mg(s)),await i.done}catch(n){if(n instanceof Ji)wr.warn(n.message);else{const i=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(i.message)}}}function mg(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=1024,W0=30;class G0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new K0(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=tp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>W0){const d=X0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){wr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tp(),{heartbeatsToSend:i,unsentEntries:a}=Q0(this._heartbeatsCache.heartbeats),c=Jl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return wr.warn(n),""}}}function tp(){return new Date().toISOString().substring(0,10)}function Q0(s,e=q0){const n=[];let i=s.slice();for(const a of s){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),np(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),np(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class K0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M_()?O_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await H0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return ep(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return ep(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function np(s){return Jl(JSON.stringify({version:2,heartbeats:s})).length}function X0(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(s){tu(new ua("platform-logger",e=>new i0(e),"PRIVATE")),tu(new ua("heartbeat",e=>new G0(e),"PRIVATE")),qi(vh,Jm,s),qi(vh,Jm,"esm2017"),qi("fire-js","")}Y0("");var J0="firebase",Z0="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(J0,Z0,"app");var rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,pg;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function x(){}x.prototype=T.prototype,A.D=T.prototype,A.prototype=new x,A.prototype.constructor=A,A.C=function(R,V,M){for(var P=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)P[ze-2]=arguments[ze];return T.prototype[V].apply(R,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,T,x){x||(x=0);var R=Array(16);if(typeof T=="string")for(var V=0;16>V;++V)R[V]=T.charCodeAt(x++)|T.charCodeAt(x++)<<8|T.charCodeAt(x++)<<16|T.charCodeAt(x++)<<24;else for(V=0;16>V;++V)R[V]=T[x++]|T[x++]<<8|T[x++]<<16|T[x++]<<24;T=A.g[0],x=A.g[1],V=A.g[2];var M=A.g[3],P=T+(M^x&(V^M))+R[0]+3614090360&4294967295;T=x+(P<<7&4294967295|P>>>25),P=M+(V^T&(x^V))+R[1]+3905402710&4294967295,M=T+(P<<12&4294967295|P>>>20),P=V+(x^M&(T^x))+R[2]+606105819&4294967295,V=M+(P<<17&4294967295|P>>>15),P=x+(T^V&(M^T))+R[3]+3250441966&4294967295,x=V+(P<<22&4294967295|P>>>10),P=T+(M^x&(V^M))+R[4]+4118548399&4294967295,T=x+(P<<7&4294967295|P>>>25),P=M+(V^T&(x^V))+R[5]+1200080426&4294967295,M=T+(P<<12&4294967295|P>>>20),P=V+(x^M&(T^x))+R[6]+2821735955&4294967295,V=M+(P<<17&4294967295|P>>>15),P=x+(T^V&(M^T))+R[7]+4249261313&4294967295,x=V+(P<<22&4294967295|P>>>10),P=T+(M^x&(V^M))+R[8]+1770035416&4294967295,T=x+(P<<7&4294967295|P>>>25),P=M+(V^T&(x^V))+R[9]+2336552879&4294967295,M=T+(P<<12&4294967295|P>>>20),P=V+(x^M&(T^x))+R[10]+4294925233&4294967295,V=M+(P<<17&4294967295|P>>>15),P=x+(T^V&(M^T))+R[11]+2304563134&4294967295,x=V+(P<<22&4294967295|P>>>10),P=T+(M^x&(V^M))+R[12]+1804603682&4294967295,T=x+(P<<7&4294967295|P>>>25),P=M+(V^T&(x^V))+R[13]+4254626195&4294967295,M=T+(P<<12&4294967295|P>>>20),P=V+(x^M&(T^x))+R[14]+2792965006&4294967295,V=M+(P<<17&4294967295|P>>>15),P=x+(T^V&(M^T))+R[15]+1236535329&4294967295,x=V+(P<<22&4294967295|P>>>10),P=T+(V^M&(x^V))+R[1]+4129170786&4294967295,T=x+(P<<5&4294967295|P>>>27),P=M+(x^V&(T^x))+R[6]+3225465664&4294967295,M=T+(P<<9&4294967295|P>>>23),P=V+(T^x&(M^T))+R[11]+643717713&4294967295,V=M+(P<<14&4294967295|P>>>18),P=x+(M^T&(V^M))+R[0]+3921069994&4294967295,x=V+(P<<20&4294967295|P>>>12),P=T+(V^M&(x^V))+R[5]+3593408605&4294967295,T=x+(P<<5&4294967295|P>>>27),P=M+(x^V&(T^x))+R[10]+38016083&4294967295,M=T+(P<<9&4294967295|P>>>23),P=V+(T^x&(M^T))+R[15]+3634488961&4294967295,V=M+(P<<14&4294967295|P>>>18),P=x+(M^T&(V^M))+R[4]+3889429448&4294967295,x=V+(P<<20&4294967295|P>>>12),P=T+(V^M&(x^V))+R[9]+568446438&4294967295,T=x+(P<<5&4294967295|P>>>27),P=M+(x^V&(T^x))+R[14]+3275163606&4294967295,M=T+(P<<9&4294967295|P>>>23),P=V+(T^x&(M^T))+R[3]+4107603335&4294967295,V=M+(P<<14&4294967295|P>>>18),P=x+(M^T&(V^M))+R[8]+1163531501&4294967295,x=V+(P<<20&4294967295|P>>>12),P=T+(V^M&(x^V))+R[13]+2850285829&4294967295,T=x+(P<<5&4294967295|P>>>27),P=M+(x^V&(T^x))+R[2]+4243563512&4294967295,M=T+(P<<9&4294967295|P>>>23),P=V+(T^x&(M^T))+R[7]+1735328473&4294967295,V=M+(P<<14&4294967295|P>>>18),P=x+(M^T&(V^M))+R[12]+2368359562&4294967295,x=V+(P<<20&4294967295|P>>>12),P=T+(x^V^M)+R[5]+4294588738&4294967295,T=x+(P<<4&4294967295|P>>>28),P=M+(T^x^V)+R[8]+2272392833&4294967295,M=T+(P<<11&4294967295|P>>>21),P=V+(M^T^x)+R[11]+1839030562&4294967295,V=M+(P<<16&4294967295|P>>>16),P=x+(V^M^T)+R[14]+4259657740&4294967295,x=V+(P<<23&4294967295|P>>>9),P=T+(x^V^M)+R[1]+2763975236&4294967295,T=x+(P<<4&4294967295|P>>>28),P=M+(T^x^V)+R[4]+1272893353&4294967295,M=T+(P<<11&4294967295|P>>>21),P=V+(M^T^x)+R[7]+4139469664&4294967295,V=M+(P<<16&4294967295|P>>>16),P=x+(V^M^T)+R[10]+3200236656&4294967295,x=V+(P<<23&4294967295|P>>>9),P=T+(x^V^M)+R[13]+681279174&4294967295,T=x+(P<<4&4294967295|P>>>28),P=M+(T^x^V)+R[0]+3936430074&4294967295,M=T+(P<<11&4294967295|P>>>21),P=V+(M^T^x)+R[3]+3572445317&4294967295,V=M+(P<<16&4294967295|P>>>16),P=x+(V^M^T)+R[6]+76029189&4294967295,x=V+(P<<23&4294967295|P>>>9),P=T+(x^V^M)+R[9]+3654602809&4294967295,T=x+(P<<4&4294967295|P>>>28),P=M+(T^x^V)+R[12]+3873151461&4294967295,M=T+(P<<11&4294967295|P>>>21),P=V+(M^T^x)+R[15]+530742520&4294967295,V=M+(P<<16&4294967295|P>>>16),P=x+(V^M^T)+R[2]+3299628645&4294967295,x=V+(P<<23&4294967295|P>>>9),P=T+(V^(x|~M))+R[0]+4096336452&4294967295,T=x+(P<<6&4294967295|P>>>26),P=M+(x^(T|~V))+R[7]+1126891415&4294967295,M=T+(P<<10&4294967295|P>>>22),P=V+(T^(M|~x))+R[14]+2878612391&4294967295,V=M+(P<<15&4294967295|P>>>17),P=x+(M^(V|~T))+R[5]+4237533241&4294967295,x=V+(P<<21&4294967295|P>>>11),P=T+(V^(x|~M))+R[12]+1700485571&4294967295,T=x+(P<<6&4294967295|P>>>26),P=M+(x^(T|~V))+R[3]+2399980690&4294967295,M=T+(P<<10&4294967295|P>>>22),P=V+(T^(M|~x))+R[10]+4293915773&4294967295,V=M+(P<<15&4294967295|P>>>17),P=x+(M^(V|~T))+R[1]+2240044497&4294967295,x=V+(P<<21&4294967295|P>>>11),P=T+(V^(x|~M))+R[8]+1873313359&4294967295,T=x+(P<<6&4294967295|P>>>26),P=M+(x^(T|~V))+R[15]+4264355552&4294967295,M=T+(P<<10&4294967295|P>>>22),P=V+(T^(M|~x))+R[6]+2734768916&4294967295,V=M+(P<<15&4294967295|P>>>17),P=x+(M^(V|~T))+R[13]+1309151649&4294967295,x=V+(P<<21&4294967295|P>>>11),P=T+(V^(x|~M))+R[4]+4149444226&4294967295,T=x+(P<<6&4294967295|P>>>26),P=M+(x^(T|~V))+R[11]+3174756917&4294967295,M=T+(P<<10&4294967295|P>>>22),P=V+(T^(M|~x))+R[2]+718787259&4294967295,V=M+(P<<15&4294967295|P>>>17),P=x+(M^(V|~T))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,A.g[2]=A.g[2]+V&4294967295,A.g[3]=A.g[3]+M&4294967295}i.prototype.u=function(A,T){T===void 0&&(T=A.length);for(var x=T-this.blockSize,R=this.B,V=this.h,M=0;M<T;){if(V==0)for(;M<=x;)a(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<T;)if(R[V++]=A.charCodeAt(M++),V==this.blockSize){a(this,R),V=0;break}}else for(;M<T;)if(R[V++]=A[M++],V==this.blockSize){a(this,R),V=0;break}}this.h=V,this.o+=T},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;var x=8*this.o;for(T=A.length-8;T<A.length;++T)A[T]=x&255,x/=256;for(this.u(A),A=Array(16),T=x=0;4>T;++T)for(var R=0;32>R;R+=8)A[x++]=this.g[T]>>>R&255;return A};function c(A,T){var x=p;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=T(A)}function d(A,T){this.h=T;for(var x=[],R=!0,V=A.length-1;0<=V;V--){var M=A[V]|0;R&&M==T||(x[V]=M,R=!1)}this.g=x}var p={};function v(A){return-128<=A&&128>A?c(A,function(T){return new d([T|0],0>T?-1:0)}):new d([A|0],0>A?-1:0)}function w(A){if(isNaN(A)||!isFinite(A))return S;if(0>A)return $(w(-A));for(var T=[],x=1,R=0;A>=x;R++)T[R]=A/x|0,x*=4294967296;return new d(T,0)}function N(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return $(N(A.substring(1),T));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=w(Math.pow(T,8)),R=S,V=0;V<A.length;V+=8){var M=Math.min(8,A.length-V),P=parseInt(A.substring(V,V+M),T);8>M?(M=w(Math.pow(T,M)),R=R.j(M).add(w(P))):(R=R.j(x),R=R.add(w(P)))}return R}var S=v(0),I=v(1),D=v(16777216);s=d.prototype,s.m=function(){if(G(this))return-$(this).m();for(var A=0,T=1,x=0;x<this.g.length;x++){var R=this.i(x);A+=(0<=R?R:4294967296+R)*T,T*=4294967296}return A},s.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(B(this))return"0";if(G(this))return"-"+$(this).toString(A);for(var T=w(Math.pow(A,6)),x=this,R="";;){var V=de(x,T).g;x=Z(x,V.j(T));var M=((0<x.g.length?x.g[0]:x.h)>>>0).toString(A);if(x=V,B(x))return M+R;for(;6>M.length;)M="0"+M;R=M+R}},s.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function B(A){if(A.h!=0)return!1;for(var T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function G(A){return A.h==-1}s.l=function(A){return A=Z(this,A),G(A)?-1:B(A)?0:1};function $(A){for(var T=A.g.length,x=[],R=0;R<T;R++)x[R]=~A.g[R];return new d(x,~A.h).add(I)}s.abs=function(){return G(this)?$(this):this},s.add=function(A){for(var T=Math.max(this.g.length,A.g.length),x=[],R=0,V=0;V<=T;V++){var M=R+(this.i(V)&65535)+(A.i(V)&65535),P=(M>>>16)+(this.i(V)>>>16)+(A.i(V)>>>16);R=P>>>16,M&=65535,P&=65535,x[V]=P<<16|M}return new d(x,x[x.length-1]&-2147483648?-1:0)};function Z(A,T){return A.add($(T))}s.j=function(A){if(B(this)||B(A))return S;if(G(this))return G(A)?$(this).j($(A)):$($(this).j(A));if(G(A))return $(this.j($(A)));if(0>this.l(D)&&0>A.l(D))return w(this.m()*A.m());for(var T=this.g.length+A.g.length,x=[],R=0;R<2*T;R++)x[R]=0;for(R=0;R<this.g.length;R++)for(var V=0;V<A.g.length;V++){var M=this.i(R)>>>16,P=this.i(R)&65535,ze=A.i(V)>>>16,kt=A.i(V)&65535;x[2*R+2*V]+=P*kt,ee(x,2*R+2*V),x[2*R+2*V+1]+=M*kt,ee(x,2*R+2*V+1),x[2*R+2*V+1]+=P*ze,ee(x,2*R+2*V+1),x[2*R+2*V+2]+=M*ze,ee(x,2*R+2*V+2)}for(R=0;R<T;R++)x[R]=x[2*R+1]<<16|x[2*R];for(R=T;R<2*T;R++)x[R]=0;return new d(x,0)};function ee(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function re(A,T){this.g=A,this.h=T}function de(A,T){if(B(T))throw Error("division by zero");if(B(A))return new re(S,S);if(G(A))return T=de($(A),T),new re($(T.g),$(T.h));if(G(T))return T=de(A,$(T)),new re($(T.g),T.h);if(30<A.g.length){if(G(A)||G(T))throw Error("slowDivide_ only works with positive integers.");for(var x=I,R=T;0>=R.l(A);)x=Me(x),R=Me(R);var V=Q(x,1),M=Q(R,1);for(R=Q(R,2),x=Q(x,2);!B(R);){var P=M.add(R);0>=P.l(A)&&(V=V.add(x),M=P),R=Q(R,1),x=Q(x,1)}return T=Z(A,V.j(T)),new re(V,T)}for(V=S;0<=A.l(T);){for(x=Math.max(1,Math.floor(A.m()/T.m())),R=Math.ceil(Math.log(x)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),M=w(x),P=M.j(T);G(P)||0<P.l(A);)x-=R,M=w(x),P=M.j(T);B(M)&&(M=I),V=V.add(M),A=Z(A,P)}return new re(V,A)}s.A=function(A){return de(this,A).h},s.and=function(A){for(var T=Math.max(this.g.length,A.g.length),x=[],R=0;R<T;R++)x[R]=this.i(R)&A.i(R);return new d(x,this.h&A.h)},s.or=function(A){for(var T=Math.max(this.g.length,A.g.length),x=[],R=0;R<T;R++)x[R]=this.i(R)|A.i(R);return new d(x,this.h|A.h)},s.xor=function(A){for(var T=Math.max(this.g.length,A.g.length),x=[],R=0;R<T;R++)x[R]=this.i(R)^A.i(R);return new d(x,this.h^A.h)};function Me(A){for(var T=A.g.length+1,x=[],R=0;R<T;R++)x[R]=A.i(R)<<1|A.i(R-1)>>>31;return new d(x,A.h)}function Q(A,T){var x=T>>5;T%=32;for(var R=A.g.length-x,V=[],M=0;M<R;M++)V[M]=0<T?A.i(M+x)>>>T|A.i(M+x+1)<<32-T:A.i(M+x);return new d(V,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,pg=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=w,d.fromString=N,Jr=d}).apply(typeof rp<"u"?rp:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gg,ea,yg,Wl,Eh,vg,_g,wg;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function a(l,f){if(f)e:{var y=i;l=l.split(".");for(var E=0;E<l.length-1;E++){var L=l[E];if(!(L in y))break e;y=y[L]}l=l[l.length-1],E=y[l],f=f(E),f!=E&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function c(l,f){l instanceof String&&(l+="");var y=0,E=!1,L={next:function(){if(!E&&y<l.length){var z=y++;return{value:f(z,l[z]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function v(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function w(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function N(l,f,y){return l.call.apply(l.bind,arguments)}function S(l,f,y){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),l.apply(f,L)}}return function(){return l.apply(f,arguments)}}function I(l,f,y){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?N:S,I.apply(null,arguments)}function D(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function B(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(E,L,z){for(var te=Array(arguments.length-2),be=2;be<arguments.length;be++)te[be-2]=arguments[be];return f.prototype[L].apply(E,te)}}function G(l){const f=l.length;if(0<f){const y=Array(f);for(let E=0;E<f;E++)y[E]=l[E];return y}return[]}function $(l,f){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(v(E)){const L=l.length||0,z=E.length||0;l.length=L+z;for(let te=0;te<z;te++)l[L+te]=E[te]}else l.push(E)}}class Z{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ee(l){return/^[\s\xa0]*$/.test(l)}function re(){var l=p.navigator;return l&&(l=l.userAgent)?l:""}function de(l){return de[" "](l),l}de[" "]=function(){};var Me=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Q(l,f,y){for(const E in l)f.call(y,l[E],E,l)}function A(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function T(l){const f={};for(const y in l)f[y]=l[y];return f}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(l,f){let y,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(y in E)l[y]=E[y];for(let z=0;z<x.length;z++)y=x[z],Object.prototype.hasOwnProperty.call(E,y)&&(l[y]=E[y])}}function V(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function M(l){p.setTimeout(()=>{throw l},0)}function P(){var l=pe;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ze{constructor(){this.h=this.g=null}add(f,y){const E=kt.get();E.set(f,y),this.h?this.h.next=E:this.g=E,this.h=E}}var kt=new Z(()=>new Vt,l=>l.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,ne=!1,pe=new ze,ae=()=>{const l=p.Promise.resolve(void 0);Ue=()=>{l.then(O)}};var O=()=>{for(var l;l=P();){try{l.h.call(l.g)}catch(y){M(y)}var f=kt;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ne=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ie=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};p.addEventListener("test",y,f),p.removeEventListener("test",y,f)}catch{}return l})();function Ae(l,f){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Me){e:{try{de(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Pe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ae.aa.h.call(this)}}B(Ae,fe);var Pe={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),Le=0;function $e(l,f,y,E,L){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!E,this.ha=L,this.key=++Le,this.da=this.fa=!1}function yt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function nr(l){this.src=l,this.g={},this.h=0}nr.prototype.add=function(l,f,y,E,L){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var te=Sr(l,f,E,L);return-1<te?(f=l[te],y||(f.fa=!1)):(f=new $e(f,this.src,z,!!E,L),f.fa=y,l.push(f)),f};function Ks(l,f){var y=f.type;if(y in l.g){var E=l.g[y],L=Array.prototype.indexOf.call(E,f,void 0),z;(z=0<=L)&&Array.prototype.splice.call(E,L,1),z&&(yt(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Sr(l,f,y,E){for(var L=0;L<l.length;++L){var z=l[L];if(!z.da&&z.listener==f&&z.capture==!!y&&z.ha==E)return L}return-1}var ds="closure_lm_"+(1e6*Math.random()|0),Xs={};function so(l,f,y,E,L){if(Array.isArray(f)){for(var z=0;z<f.length;z++)so(l,f[z],y,E,L);return null}return y=ao(y),l&&l[Oe]?l.K(f,y,w(E)?!!E.capture:!1,L):io(l,f,y,!1,E,L)}function io(l,f,y,E,L,z){if(!f)throw Error("Invalid event type");var te=w(L)?!!L.capture:!!L,be=Js(l);if(be||(l[ds]=be=new nr(l)),y=be.add(f,y,E,te,z),y.proxy)return y;if(E=Aa(),y.proxy=E,E.src=l,E.listener=y,l.addEventListener)Ie||(L=te),L===void 0&&(L=!1),l.addEventListener(f.toString(),E,L);else if(l.attachEvent)l.attachEvent(sr(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Aa(){function l(y){return f.call(l.src,l.listener,y)}const f=oo;return l}function Ys(l,f,y,E,L){if(Array.isArray(f))for(var z=0;z<f.length;z++)Ys(l,f[z],y,E,L);else E=w(E)?!!E.capture:!!E,y=ao(y),l&&l[Oe]?(l=l.i,f=String(f).toString(),f in l.g&&(z=l.g[f],y=Sr(z,y,E,L),-1<y&&(yt(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete l.g[f],l.h--)))):l&&(l=Js(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Sr(f,y,E,L)),(y=-1<l?f[l]:null)&&rr(y))}function rr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Oe])Ks(f.i,l);else{var y=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(y,E,l.capture):f.detachEvent?f.detachEvent(sr(y),E):f.addListener&&f.removeListener&&f.removeListener(E),(y=Js(f))?(Ks(y,l),y.h==0&&(y.src=null,f[ds]=null)):yt(l)}}}function sr(l){return l in Xs?Xs[l]:Xs[l]="on"+l}function oo(l,f){if(l.da)l=!0;else{f=new Ae(f,this);var y=l.listener,E=l.ha||l.src;l.fa&&rr(l),l=y.call(E,f)}return l}function Js(l){return l=l[ds],l instanceof nr?l:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ao(l){return typeof l=="function"?l:(l[Zs]||(l[Zs]=function(f){return l.handleEvent(f)}),l[Zs])}function ht(){W.call(this),this.i=new nr(this),this.M=this,this.F=null}B(ht,W),ht.prototype[Oe]=!0,ht.prototype.removeEventListener=function(l,f,y,E){Ys(this,l,f,y,E)};function dt(l,f){var y,E=l.F;if(E)for(y=[];E;E=E.F)y.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new fe(f,l);else if(f instanceof fe)f.target=f.target||l;else{var L=f;f=new fe(E,l),R(f,L)}if(L=!0,y)for(var z=y.length-1;0<=z;z--){var te=f.g=y[z];L=ir(te,E,!0,f)&&L}if(te=f.g=l,L=ir(te,E,!0,f)&&L,L=ir(te,E,!1,f)&&L,y)for(z=0;z<y.length;z++)te=f.g=y[z],L=ir(te,E,!1,f)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],E=0;E<y.length;E++)yt(y[E]);delete l.g[f],l.h--}}this.F=null},ht.prototype.K=function(l,f,y,E){return this.i.add(String(l),f,!1,y,E)},ht.prototype.L=function(l,f,y,E){return this.i.add(String(l),f,!0,y,E)};function ir(l,f,y,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,z=0;z<f.length;++z){var te=f[z];if(te&&!te.da&&te.capture==y){var be=te.listener,ft=te.ha||te.src;te.fa&&Ks(l.i,te),L=be.call(ft,E)!==!1&&L}}return L&&!E.defaultPrevented}function lo(l,f,y){if(typeof l=="function")y&&(l=I(l,y));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:p.setTimeout(l,f||0)}function Ar(l){l.g=lo(()=>{l.g=null,l.i&&(l.i=!1,Ar(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class fs extends W{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(l){W.call(this),this.h=l,this.g={}}B(ms,W);var uo=[];function co(l){Q(l.g,function(f,y){this.g.hasOwnProperty(y)&&rr(f)},l),l.g={}}ms.prototype.N=function(){ms.aa.N.call(this),co(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ho=p.JSON.stringify,fo=p.JSON.parse,mo=class{stringify(l){return p.JSON.stringify(l,void 0)}parse(l){return p.JSON.parse(l,void 0)}};function ps(){}ps.prototype.h=null;function ei(l){return l.h||(l.h=l.i())}function ti(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fn(){fe.call(this,"d")}B(Fn,fe);function ni(){fe.call(this,"c")}B(ni,fe);var bn={},po=null;function gs(){return po=po||new ht}bn.La="serverreachability";function go(l){fe.call(this,bn.La,l)}B(go,fe);function or(l){const f=gs();dt(f,new go(f))}bn.STAT_EVENT="statevent";function yo(l,f){fe.call(this,bn.STAT_EVENT,l),this.stat=f}B(yo,fe);function nt(l){const f=gs();dt(f,new yo(f,l))}bn.Ma="timingevent";function ri(l,f){fe.call(this,bn.Ma,l),this.size=f}B(ri,fe);function Tn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){l()},f)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function vs(l,f,y,E,L,z){l.info(function(){if(l.g)if(z)for(var te="",be=z.split("&"),ft=0;ft<be.length;ft++){var Re=be[ft].split("=");if(1<Re.length){var vt=Re[0];Re=Re[1];var ot=vt.split("_");te=2<=ot.length&&ot[1]=="type"?te+(vt+"="+Re+"&"):te+(vt+"=redacted&")}}else te=null;else te=z;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+f+`
`+y+`
`+te})}function si(l,f,y,E,L,z,te){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+f+`
`+y+`
`+z+" "+te})}function In(l,f,y,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+ku(l,y)+(E?" "+E:"")})}function vo(l,f){l.info(function(){return"TIMEOUT: "+f})}ys.prototype.info=function(){};function ku(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var E=y[l];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var z=L[0];if(z!="noop"&&z!="stop"&&z!="close")for(var te=1;te<L.length;te++)L[te]=""}}}}return ho(y)}catch{return f}}var ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Na={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sn;function _s(){}B(_s,ps),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},Sn=new _s;function An(l,f,y,E){this.j=l,this.i=f,this.l=y,this.R=E||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xa}function xa(){this.i=null,this.g="",this.h=!1}var _o={},oi={};function ai(l,f,y){l.L=1,l.v=Rr(tn(f)),l.m=y,l.P=!0,wo(l,null)}function wo(l,f){l.F=Date.now(),He(l),l.A=tn(l.v);var y=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Vr(y.i,"t",E),l.C=0,y=l.j.J,l.h=new xa,l.g=qa(l.j,y?f:null,!l.m),0<l.O&&(l.M=new fs(I(l.Y,l,l.g),l.O)),f=l.U,y=l.g,E=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(uo[0]=L.toString()),L=uo);for(var z=0;z<L.length;z++){var te=so(y,L[z],E||f.handleEvent,!1,f.h||f);if(!te)break;f.g[te.key]=te}f=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),or(),vs(l.i,l.u,l.A,l.l,l.R,l.m)}An.prototype.ca=function(l){l=l.target;const f=this.M;f&&qt(l)==3?f.j():this.Y(l)},An.prototype.Y=function(l){try{if(l==this.g)e:{const ot=qt(this.g);var f=this.g.Ba();const dn=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||No(this.g)))){this.J||ot!=4||f==7||(f==8||0>=dn?or(3):or(2)),ws(this);var y=this.g.Z();this.X=y;t:if(Ca(this)){var E=No(this.g);l="";var L=E.length,z=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),Nr(this);var te="";break t}this.h.i=new p.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(z&&f==L-1)});E.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=y==200,si(this.i,this.u,this.A,this.l,this.R,ot,y),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ft=this.g;if((be=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(be)){var Re=be;break t}}Re=null}if(y=Re)In(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eo(this,y);else{this.o=!1,this.s=3,nt(12),cn(this),Nr(this);break e}}if(this.P){y=!0;let rn;for(;!this.J&&this.C<te.length;)if(rn=Vu(this,te),rn==oi){ot==4&&(this.s=4,nt(14),y=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==_o){this.s=4,nt(15),In(this.i,this.l,te,"[Invalid Chunk]"),y=!1;break}else In(this.i,this.l,rn,null),Eo(this,rn);if(Ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||te.length!=0||this.h.h||(this.s=1,nt(16),y=!1),this.o=this.o&&y,!y)In(this.i,this.l,te,"[Invalid Chunked Response]"),cn(this),Nr(this);else if(0<te.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Co(vt),vt.M=!0,nt(11))}}else In(this.i,this.l,te,null),Eo(this,te);ot==4&&cn(this),this.o&&!this.J&&(ot==4?vi(this.j,this):(this.o=!1,He(this)))}else fi(this.g),y==400&&0<te.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),cn(this),Nr(this)}}}catch{}finally{}};function Ca(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Vu(l,f){var y=l.C,E=f.indexOf(`
`,y);return E==-1?oi:(y=Number(f.substring(y,E)),isNaN(y)?_o:(E+=1,E+y>f.length?oi:(f=f.slice(E,E+y),l.C=E+y,f)))}An.prototype.cancel=function(){this.J=!0,cn(this)};function He(l){l.S=Date.now()+l.I,Pa(l,l.I)}function Pa(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Tn(I(l.ba,l),f)}function ws(l){l.B&&(p.clearTimeout(l.B),l.B=null)}An.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(vo(this.i,this.A),this.L!=2&&(or(),nt(17)),cn(this),this.s=2,Nr(this)):Pa(this,this.S-l)};function Nr(l){l.j.G==0||l.J||vi(l.j,l)}function cn(l){ws(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,co(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Eo(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||Ut(y.h,l))){if(!l.K&&Ut(y.h,l)&&y.G==3){try{var E=y.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)yi(y),Rn(y);else break e;gi(y),nt(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Tn(I(y.Za,y),6e3));if(1>=ka(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else hr(y,11)}else if((l.K||y.g==l)&&yi(y),!ee(f))for(L=y.Da.g.parse(f),f=0;f<L.length;f++){let Re=L[f];if(y.T=Re[0],Re=Re[1],y.G==2)if(Re[0]=="c"){y.K=Re[1],y.ia=Re[2];const vt=Re[3];vt!=null&&(y.la=vt,y.j.info("VER="+y.la));const ot=Re[4];ot!=null&&(y.Aa=ot,y.j.info("SVER="+y.Aa));const dn=Re[5];dn!=null&&typeof dn=="number"&&0<dn&&(E=1.5*dn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const rn=l.g;if(rn){const xs=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xs){var z=E.h;z.g||xs.indexOf("spdy")==-1&&xs.indexOf("quic")==-1&&xs.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(To(z,z.h),z.h=null))}if(E.D){const wi=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;wi&&(E.ya=wi,Be(E.I,E.D,wi))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var te=l;if(E.qa=Ha(E,E.J?E.ia:null,E.W),te.K){Va(E.h,te);var be=te,ft=E.L;ft&&(be.I=ft),be.B&&(ws(be),He(be)),E.g=te}else Ns(E);0<y.i.length&&$n(y)}else Re[0]!="stop"&&Re[0]!="close"||hr(y,7);else y.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?hr(y,7):At(y):Re[0]!="noop"&&y.l&&y.l.ta(Re),y.v=0)}}or(4)}catch{}}var Ra=class{constructor(l,f){this.g=l,this.map=f}};function Es(l){this.l=l||10,p.PerformanceNavigationTiming?(l=p.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ka(l){return l.h?1:l.g?l.g.size:0}function Ut(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function To(l,f){l.g?l.g.add(f):l.h=f}function Va(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Es.prototype.cancel=function(){if(this.i=Da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Da(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return G(l.i)}function li(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(v(l)){for(var f=[],y=l.length,E=0;E<y;E++)f.push(l[E]);return f}f=[],y=0;for(E in l)f[y++]=l[E];return f}function ui(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(v(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const E in l)f[y++]=E;return f}}}function xr(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(v(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=ui(l),E=li(l),L=E.length,z=0;z<L;z++)f.call(void 0,E[z],y&&y[z],l)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Du(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var E=l[y].indexOf("="),L=null;if(0<=E){var z=l[y].substring(0,E);L=l[y].substring(E+1)}else z=l[y];f(z,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ar(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ar){this.h=l.h,Is(this,l.j),this.o=l.o,this.g=l.g,Cr(this,l.s),this.l=l.l;var f=l.i,y=new Un;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Pr(this,y),this.m=l.m}else l&&(f=String(l).match(Ts))?(this.h=!1,Is(this,f[1]||"",!0),this.o=Ce(f[2]||""),this.g=Ce(f[3]||"",!0),Cr(this,f[4]),this.l=Ce(f[5]||"",!0),Pr(this,f[6]||"",!0),this.m=Ce(f[7]||"")):(this.h=!1,this.i=new Un(null,this.h))}ar.prototype.toString=function(){var l=[],f=this.j;f&&l.push(kr(f,ci,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(kr(f,ci,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(kr(y,y.charAt(0)=="/"?Oa:Ma,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",kr(y,Io)),l.join("")};function tn(l){return new ar(l)}function Is(l,f,y){l.j=y?Ce(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Cr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Pr(l,f,y){f instanceof Un?(l.i=f,zn(l.i,l.h)):(y||(f=kr(f,La)),l.i=new Un(f,l.h))}function Be(l,f,y){l.i.set(f,y)}function Rr(l){return Be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ce(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function kr(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,ja),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ja(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ci=/[#\/\?@]/g,Ma=/[#\?:]/g,Oa=/[#\?]/g,La=/[#\?@]/g,Io=/#/g;function Un(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function St(l){l.g||(l.g=new Map,l.h=0,l.i&&Du(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}s=Un.prototype,s.add=function(l,f){St(this),this.i=null,l=hn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function Nn(l,f){St(l),f=hn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function xn(l,f){return St(l),f=hn(l,f),l.g.has(f)}s.forEach=function(l,f){St(this),this.g.forEach(function(y,E){y.forEach(function(L){l.call(f,L,E,this)},this)},this)},s.na=function(){St(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let E=0;E<f.length;E++){const L=l[E];for(let z=0;z<L.length;z++)y.push(f[E])}return y},s.V=function(l){St(this);let f=[];if(typeof l=="string")xn(this,l)&&(f=f.concat(this.g.get(hn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},s.set=function(l,f){return St(this),this.i=null,l=hn(this,l),xn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},s.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Vr(l,f,y){Nn(l,f),0<y.length&&(l.i=null,l.g.set(hn(l,f),G(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var E=f[y];const z=encodeURIComponent(String(E)),te=this.V(E);for(E=0;E<te.length;E++){var L=z;te[E]!==""&&(L+="="+encodeURIComponent(String(te[E]))),l.push(L)}}return this.i=l.join("&")};function hn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function zn(l,f){f&&!l.j&&(St(l),l.i=null,l.g.forEach(function(y,E){var L=E.toLowerCase();E!=L&&(Nn(this,E),Vr(this,L,y))},l)),l.j=f}function ju(l,f){const y=new ys;if(p.Image){const E=new Image;E.onload=D(Ht,y,"TestLoadImage: loaded",!0,f,E),E.onerror=D(Ht,y,"TestLoadImage: error",!1,f,E),E.onabort=D(Ht,y,"TestLoadImage: abort",!1,f,E),E.ontimeout=D(Ht,y,"TestLoadImage: timeout",!1,f,E),p.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function Fa(l,f){const y=new ys,E=new AbortController,L=setTimeout(()=>{E.abort(),Ht(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(z=>{clearTimeout(L),z.ok?Ht(y,"TestPingServer: ok",!0,f):Ht(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Ht(y,"TestPingServer: error",!1,f)})}function Ht(l,f,y,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(y)}catch{}}function Mu(){this.g=new mo}function ba(l,f,y){const E=y||"";try{xr(l,function(L,z){let te=L;w(L)&&(te=ho(L)),f.push(E+z+"="+encodeURIComponent(te))})}catch(L){throw f.push(E+"type="+encodeURIComponent("_badmap")),L}}function lr(l){this.l=l.Ub||null,this.j=l.eb||!1}B(lr,ps),lr.prototype.g=function(){return new Ss(this.l,this.j)},lr.prototype.i=(function(l){return function(){return l}})({});function Ss(l,f){ht.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(Ss,ht),s=Ss.prototype,s.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Pn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||p).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ua(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ua(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Cn(this):Pn(this),this.readyState==3&&Ua(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Cn(this))},s.Qa=function(l){this.g&&(this.response=l,Cn(this))},s.ga=function(){this.g&&Cn(this)};function Cn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Pn(l)}s.setRequestHeader=function(l,f){this.u.append(l,f)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Pn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ur(l){let f="";return Q(l,function(y,E){f+=E,f+=":",f+=y,f+=`\r
`}),f}function Dr(l,f,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=ur(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Be(l,f,y))}function Xe(l){ht.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(Xe,ht);var Ou=/^https?$/i,So=["POST","PUT"];s=Xe.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,f,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sn.g(),this.v=this.o?ei(this.o):ei(Sn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(z){As(this,z);return}if(l=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)y.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const z of E.keys())y.set(z,E.get(z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),L=p.FormData&&l instanceof p.FormData,!(0<=Array.prototype.indexOf.call(So,f,void 0))||E||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,te]of y)this.g.setRequestHeader(z,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{di(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){As(this,z)}};function As(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,hi(l),nn(l)}function hi(l){l.A||(l.A=!0,dt(l,"complete"),dt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,dt(this,"complete"),dt(this,"abort"),nn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nn(this,!0)),Xe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ao(this):this.bb())},s.bb=function(){Ao(this)};function Ao(l){if(l.h&&typeof d<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)lo(l.Ea,0,l);else if(dt(l,"readystatechange"),qt(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var E;if(E=te===0){var L=String(l.D).match(Ts)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),E=!Ou.test(L?L.toLowerCase():"")}y=E}if(y)dt(l,"complete"),dt(l,"success");else{l.m=6;try{var z=2<qt(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",hi(l)}}finally{nn(l)}}}}function nn(l,f){if(l.g){di(l);const y=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||dt(l,"ready");try{y.onreadystatechange=E}catch{}}}function di(l){l.I&&(p.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),fo(f)}};function No(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function fi(l){const f={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(ee(l[E]))continue;var y=V(l[E]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=f[L]||[];f[L]=z,z.push(y)}A(f,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bn(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function xo(l){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bn("baseRetryDelayMs",5e3,l),this.cb=Bn("retryDelaySeedMs",1e4,l),this.Wa=Bn("forwardChannelMaxRetries",2,l),this.wa=Bn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Es(l&&l.concurrentRequestLimit),this.Da=new Mu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=xo.prototype,s.la=8,s.G=1,s.connect=function(l,f,y,E){nt(0),this.W=l,this.H=f||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Ha(this,null,this.W),$n(this)};function At(l){if(mi(l),l.G==3){var f=l.U++,y=tn(l.I);if(Be(y,"SID",l.K),Be(y,"RID",f),Be(y,"TYPE","terminate"),cr(l,y),f=new An(l,l.j,f),f.L=2,f.v=Rr(tn(y)),y=!1,p.navigator&&p.navigator.sendBeacon)try{y=p.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&p.Image&&(new Image().src=f.v,y=!0),y||(f.g=qa(f.j,null),f.g.ea(f.v)),f.F=Date.now(),He(f)}$a(l)}function Rn(l){l.g&&(Co(l),l.g.cancel(),l.g=null)}function mi(l){Rn(l),l.u&&(p.clearTimeout(l.u),l.u=null),yi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&p.clearTimeout(l.s),l.s=null)}function $n(l){if(!en(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ue||ae(),ne||(Ue(),ne=!0),pe.add(f,l),l.B=0}}function Lu(l,f){return ka(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Tn(I(l.Ga,l,f),Ba(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new An(this,this.j,l);let z=this.o;if(this.S&&(z?(z=T(z),R(z,this.S)):z=this.S),this.m!==null||this.O||(L.H=z,z=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=jr(this,L,f),y=tn(this.I),Be(y,"RID",l),Be(y,"CVER",22),this.D&&Be(y,"X-HTTP-Session-Id",this.D),cr(this,y),z&&(this.O?f="headers="+encodeURIComponent(String(ur(z)))+"&"+f:this.m&&Dr(y,this.m,z)),To(this.h,L),this.Ua&&Be(y,"TYPE","init"),this.P?(Be(y,"$req",f),Be(y,"SID","null"),L.T=!0,ai(L,y,null)):ai(L,y,f),this.G=2}}else this.G==3&&(l?pi(this,l):this.i.length==0||en(this.h)||pi(this))};function pi(l,f){var y;f?y=f.l:y=l.U++;const E=tn(l.I);Be(E,"SID",l.K),Be(E,"RID",y),Be(E,"AID",l.T),cr(l,E),l.m&&l.o&&Dr(E,l.m,l.o),y=new An(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=jr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),To(l.h,y),ai(y,E,f)}function cr(l,f){l.H&&Q(l.H,function(y,E){Be(f,E,y)}),l.l&&xr({},function(y,E){Be(f,E,y)})}function jr(l,f,y){y=Math.min(l.i.length,y);var E=l.l?I(l.l.Na,l.l,l):null;e:{var L=l.i;let z=-1;for(;;){const te=["count="+y];z==-1?0<y?(z=L[0].g,te.push("ofs="+z)):z=0:te.push("ofs="+z);let be=!0;for(let ft=0;ft<y;ft++){let Re=L[ft].g;const vt=L[ft].map;if(Re-=z,0>Re)z=Math.max(0,L[ft].g-100),be=!1;else try{ba(vt,te,"req"+Re+"_")}catch{E&&E(vt)}}if(be){E=te.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,E}function Ns(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ue||ae(),ne||(Ue(),ne=!0),pe.add(f,l),l.v=0}}function gi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Tn(I(l.Fa,l),Ba(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,za(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tn(I(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Rn(this),za(this))};function Co(l){l.A!=null&&(p.clearTimeout(l.A),l.A=null)}function za(l){l.g=new An(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=tn(l.qa);Be(f,"RID","rpc"),Be(f,"SID",l.K),Be(f,"AID",l.T),Be(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Be(f,"TO",l.ja),Be(f,"TYPE","xmlhttp"),cr(l,f),l.m&&l.o&&Dr(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Rr(tn(f)),y.m=null,y.P=!0,wo(y,l)}s.Za=function(){this.C!=null&&(this.C=null,Rn(this),gi(this),nt(19))};function yi(l){l.C!=null&&(p.clearTimeout(l.C),l.C=null)}function vi(l,f){var y=null;if(l.g==f){yi(l),Co(l),l.g=null;var E=2}else if(Ut(l.h,f))y=f.D,Va(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var L=l.B;E=gs(),dt(E,new ri(E,y)),$n(l)}else Ns(l);else if(L=f.s,L==3||L==0&&0<f.X||!(E==1&&Lu(l,f)||E==2&&gi(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),L){case 1:hr(l,5);break;case 4:hr(l,10);break;case 3:hr(l,6);break;default:hr(l,2)}}}function Ba(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function hr(l,f){if(l.j.info("Error code "+f),f==2){var y=I(l.fb,l),E=l.Xa;const L=!E;E=new ar(E||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Is(E,"https"),Rr(E),L?ju(E.toString(),y):Fa(E.toString(),y)}else nt(2);l.G=0,l.l&&l.l.sa(f),$a(l),mi(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function $a(l){if(l.G=0,l.ka=[],l.l){const f=Da(l.h);(f.length!=0||l.i.length!=0)&&($(l.ka,f),$(l.ka,l.i),l.h.i.length=0,G(l.i),l.i.length=0),l.l.ra()}}function Ha(l,f,y){var E=y instanceof ar?tn(y):new ar(y);if(E.g!="")f&&(E.g=f+"."+E.g),Cr(E,E.s);else{var L=p.location;E=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var z=new ar(null);E&&Is(z,E),f&&(z.g=f),L&&Cr(z,L),y&&(z.l=y),E=z}return y=l.D,f=l.ya,y&&f&&Be(E,y,f),Be(E,"VER",l.la),cr(l,E),E}function qa(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Xe(new lr({eb:y})):new Xe(l.pa),f.Ha(l.J),f}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Po(){}s=Po.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function _i(){}_i.prototype.g=function(l,f){return new zt(l,f)};function zt(l,f){ht.call(this),this.g=new xo(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ee(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ee(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Hn(this)}B(zt,ht),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){At(this.g)},zt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=ho(l),l=y);f.i.push(new Ra(f.Ya++,l)),f.G==3&&$n(f)},zt.prototype.N=function(){this.g.l=null,delete this.j,At(this.g),delete this.g,zt.aa.N.call(this)};function Wa(l){Fn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}B(Wa,Fn);function Ga(){ni.call(this),this.status=1}B(Ga,ni);function Hn(l){this.g=l}B(Hn,Po),Hn.prototype.ua=function(){dt(this.g,"a")},Hn.prototype.ta=function(l){dt(this.g,new Wa(l))},Hn.prototype.sa=function(l){dt(this.g,new Ga)},Hn.prototype.ra=function(){dt(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,wg=function(){return new _i},_g=function(){return gs()},vg=bn,Eh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ii.NO_ERROR=0,ii.TIMEOUT=8,ii.HTTP_ERROR=6,Wl=ii,Na.COMPLETE="complete",yg=Na,ti.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",ht.prototype.listen=ht.prototype.K,ea=ti,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,gg=Xe}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const sp="@firebase/firestore",ip="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new ug("@firebase/firestore");function zi(){return qs.logLevel}function oe(s,...e){if(qs.logLevel<=Ve.DEBUG){const n=e.map(Hh);qs.debug(`Firestore (${Zi}): ${s}`,...n)}}function Er(s,...e){if(qs.logLevel<=Ve.ERROR){const n=e.map(Hh);qs.error(`Firestore (${Zi}): ${s}`,...n)}}function ts(s,...e){if(qs.logLevel<=Ve.WARN){const n=e.map(Hh);qs.warn(`Firestore (${Zi}): ${s}`,...n)}}function Hh(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Eg(s,i,n)}function Eg(s,e,n){let i=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Er(i),new Error(i)}function Fe(s,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,s||Eg(e,a,i)}function Te(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ew{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ft.UNAUTHENTICATED)))}shutdown(){}}class tw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class nw{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let i=this.i;const a=v=>this.i!==i?(i=this.i,n(v)):Promise.resolve();let c=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zr,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},p=v=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>p(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string",31837,{l:i}),new Tg(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class rw{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sw{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new rw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class op{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iw{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,L0(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const i=c=>{c.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const a=c=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new op(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new op(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=ow(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<n&&(i+=e.charAt(a[c]%62))}return i}}function Se(s,e){return s<e?-1:s>e?1:0}function Th(s,e){let n=0;for(;n<s.length&&n<e.length;){const i=s.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return Se(i,a);{const c=Ig(),d=aw(c.encode(ap(s,n)),c.encode(ap(e,n)));return d!==0?d:Se(i,a)}}n+=i>65535?2:1}return Se(s.length,e.length)}function ap(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function aw(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return Se(s[n],e[n]);return Se(s.length,e.length)}function Gi(s,e,n){return s.length===e.length&&s.every(((i,a)=>n(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="__name__";class Kn{constructor(e,n,i){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&_e(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kn?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const c=Kn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Se(e.length,n.length)}static compareSegments(e,n){const i=Kn.isNumericId(e),a=Kn.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?Kn.extractNumericId(e).compare(Kn.extractNumericId(n)):Th(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class We extends Kn{construct(e,n,i){return new We(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(H.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new We(n)}static emptyPath(){return new We([])}}const lw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Kn{construct(e,n,i){return new Pt(e,n,i)}static isValidIdentifier(e){return lw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lp}static keyField(){return new Pt([lp])}static fromServerFormat(e){const n=[];let i="",a=0;const c=()=>{if(i.length===0)throw new se(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;a<e.length;){const p=e[a];if(p==="\\"){if(a+1===e.length)throw new se(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new se(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,a+=2}else p==="`"?(d=!d,a++):p!=="."||d?(i+=p,a++):(c(),a++)}if(c(),d)throw new se(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(We.fromString(e))}static fromName(e){return new me(We.fromString(e).popFirst(5))}static empty(){return new me(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(s,e,n){if(!n)throw new se(H.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function uw(s,e,n,i){if(e===!0&&i===!0)throw new se(H.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function up(s){if(!me.isDocumentKey(s))throw new se(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function cp(s){if(me.isDocumentKey(s))throw new se(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Ag(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function du(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function wn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new se(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=du(s);throw new se(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(s,e){const n={typeString:s};return e&&(n.value=e),n}function _a(s,e){if(!Ag(s))throw new se(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(a&&typeof d!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new se(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=-62135596800,dp=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*dp);return new Ke(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hp)throw new se(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dp}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_a(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:ct("string",Ke._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ke(0,0))}static max(){return new Ee(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=-1;function cw(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(i===1e9?new Ke(n+1,0):new Ke(n,i));return new ns(a,me.empty(),e)}function hw(s){return new ns(s.readTime,s.key,ha)}class ns{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ns(Ee.min(),me.empty(),ha)}static max(){return new ns(Ee.max(),me.empty(),ha)}}function dw(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(s.documentKey,e.documentKey),n!==0?n:Se(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(s){if(s.code!==H.FAILED_PRECONDITION||s.message!==fw)throw s;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):q.reject(n)}static resolve(e){return new q(((n,i)=>{n(e)}))}static reject(e){return new q(((n,i)=>{i(e)}))}static waitFor(e){return new q(((n,i)=>{let a=0,c=0,d=!1;e.forEach((p=>{++a,p.next((()=>{++c,d&&c===a&&n()}),(v=>i(v)))})),d=!0,c===a&&n()}))}static or(e){let n=q.resolve(!1);for(const i of e)n=n.next((a=>a?q.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,c)=>{i.push(n.call(this,a,c))})),this.waitFor(i)}static mapArray(e,n){return new q(((i,a)=>{const c=e.length,d=new Array(c);let p=0;for(let v=0;v<c;v++){const w=v;n(e[w]).next((N=>{d[w]=N,++p,p===c&&i(d)}),(N=>a(N)))}}))}static doWhile(e,n){return new q(((i,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):i()};c()}))}}function pw(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function to(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}fu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=-1;function mu(s){return s==null}function nu(s){return s===0&&1/s==-1/0}function gw(s){return typeof s=="number"&&Number.isInteger(s)&&!nu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="";function yw(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=fp(e)),e=vw(s.get(n),e);return fp(e)}function vw(s,e){let n=e;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":n+="";break;case Ng:n+="";break;default:n+=c}}return n}function fp(s){return s+Ng+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function us(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function xg(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,i,a,c){this.key=e,this.value=n,this.color=i??Ct.RED,this.left=a??Ct.EMPTY,this.right=c??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,c){return new Ct(e??this.key,n??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,i),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Ct.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,i,a,c){return this}insert(e,n,i){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pp(this.data.getIterator())}getIteratorFrom(e){return new pp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class pp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new ln([])}unionWith(e){let n=new gt(Pt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Cg("Invalid base64 string: "+c):c}})(e);return new Rt(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c})(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const _w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(s){if(Fe(!!s,39018),typeof s=="string"){let e=0;const n=_w.exec(s);if(Fe(!!n,46558,{timestamp:s}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:st(s.seconds),nanos:st(s.nanos)}}function st(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ss(s){return typeof s=="string"?Rt.fromBase64String(s):Rt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="server_timestamp",Rg="__type__",kg="__previous_value__",Vg="__local_write_time__";function Gh(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Rg])===null||n===void 0?void 0:n.stringValue)===Pg}function pu(s){const e=s.mapValue.fields[kg];return Gh(e)?pu(e):e}function da(s){const e=rs(s.mapValue.fields[Vg].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,i,a,c,d,p,v,w,N){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=v,this.useFetchStreams=w,this.isUsingEmulator=N}}const ru="(default)";class fa{constructor(e,n){this.projectId=e,this.database=n||ru}static empty(){return new fa("","")}get isDefaultDatabase(){return this.database===ru}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="__type__",Ew="__max__",$l={mapValue:{}},jg="__vector__",su="value";function is(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Gh(s)?4:Iw(s)?9007199254740991:Tw(s)?10:11:_e(28295,{value:s})}function tr(s,e){if(s===e)return!0;const n=is(s);if(n!==is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return da(s).isEqual(da(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=rs(a.timestampValue),p=rs(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,c){return ss(a.bytesValue).isEqual(ss(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,c){return st(a.geoPointValue.latitude)===st(c.geoPointValue.latitude)&&st(a.geoPointValue.longitude)===st(c.geoPointValue.longitude)})(s,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return st(a.integerValue)===st(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=st(a.doubleValue),p=st(c.doubleValue);return d===p?nu(d)===nu(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return Gi(s.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(a,c){const d=a.mapValue.fields||{},p=c.mapValue.fields||{};if(mp(d)!==mp(p))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(p[v]===void 0||!tr(d[v],p[v])))return!1;return!0})(s,e);default:return _e(52216,{left:s})}}function ma(s,e){return(s.values||[]).find((n=>tr(n,e)))!==void 0}function Qi(s,e){if(s===e)return 0;const n=is(s),i=is(e);if(n!==i)return Se(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=st(c.integerValue||c.doubleValue),v=st(d.integerValue||d.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1})(s,e);case 3:return gp(s.timestampValue,e.timestampValue);case 4:return gp(da(s),da(e));case 5:return Th(s.stringValue,e.stringValue);case 6:return(function(c,d){const p=ss(c),v=ss(d);return p.compareTo(v)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),v=d.split("/");for(let w=0;w<p.length&&w<v.length;w++){const N=Se(p[w],v[w]);if(N!==0)return N}return Se(p.length,v.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Se(st(c.latitude),st(d.latitude));return p!==0?p:Se(st(c.longitude),st(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return yp(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var p,v,w,N;const S=c.fields||{},I=d.fields||{},D=(p=S[su])===null||p===void 0?void 0:p.arrayValue,B=(v=I[su])===null||v===void 0?void 0:v.arrayValue,G=Se(((w=D==null?void 0:D.values)===null||w===void 0?void 0:w.length)||0,((N=B==null?void 0:B.values)===null||N===void 0?void 0:N.length)||0);return G!==0?G:yp(D,B)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===$l.mapValue&&d===$l.mapValue)return 0;if(c===$l.mapValue)return 1;if(d===$l.mapValue)return-1;const p=c.fields||{},v=Object.keys(p),w=d.fields||{},N=Object.keys(w);v.sort(),N.sort();for(let S=0;S<v.length&&S<N.length;++S){const I=Th(v[S],N[S]);if(I!==0)return I;const D=Qi(p[v[S]],w[N[S]]);if(D!==0)return D}return Se(v.length,N.length)})(s.mapValue,e.mapValue);default:throw _e(23264,{le:n})}}function gp(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Se(s,e);const n=rs(s),i=rs(e),a=Se(n.seconds,i.seconds);return a!==0?a:Se(n.nanos,i.nanos)}function yp(s,e){const n=s.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const c=Qi(n[a],i[a]);if(c)return c}return Se(n.length,i.length)}function Ki(s){return Ih(s)}function Ih(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=rs(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ss(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return me.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",a=!0;for(const c of n.values||[])a?a=!1:i+=",",i+=Ih(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const d of i)c?c=!1:a+=",",a+=`${d}:${Ih(n.fields[d])}`;return a+"}"})(s.mapValue):_e(61005,{value:s})}function Gl(s){switch(is(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pu(s);return e?16+Gl(e):16;case 5:return 2*s.stringValue.length;case 6:return ss(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+Gl(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return us(i.fields,((c,d)=>{a+=c.length+Gl(d)})),a})(s.mapValue);default:throw _e(13486,{value:s})}}function vp(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Sh(s){return!!s&&"integerValue"in s}function Qh(s){return!!s&&"arrayValue"in s}function _p(s){return!!s&&"nullValue"in s}function wp(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ql(s){return!!s&&"mapValue"in s}function Tw(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Dg])===null||n===void 0?void 0:n.stringValue)===jg}function ia(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return us(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=ia(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(s.arrayValue.values[n]);return e}return Object.assign({},s)}function Iw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Ew}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ql(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=Pt.emptyPath(),i={},a=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const v=this.getFieldsMap(n);this.applyChanges(v,i,a),i={},a=[],n=p.popLast()}d?i[p.lastSegment()]=ia(d):a.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,a)}delete(e){const n=this.field(e.popLast());Ql(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Ql(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){us(n,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new Zt(ia(this.value))}}function Mg(s){const e=[];return us(s.fields,((n,i)=>{const a=new Pt([n]);if(Ql(i)){const c=Mg(i.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)})),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,i,a,c,d,p){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new bt(e,0,Ee.min(),Ee.min(),Ee.min(),Zt.empty(),0)}static newFoundDocument(e,n,i,a){return new bt(e,1,n,Ee.min(),i,a,0)}static newNoDocument(e,n){return new bt(e,2,n,Ee.min(),Ee.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,Ee.min(),Ee.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.position=e,this.inclusive=n}}function Ep(s,e,n){let i=0;for(let a=0;a<s.position.length;a++){const c=e[a],d=s.position[a];if(c.field.isKeyField()?i=me.comparator(me.fromName(d.referenceValue),n.key):i=Qi(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Tp(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!tr(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n="asc"){this.field=e,this.dir=n}}function Sw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{}class ut extends Og{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Nw(e,n,i):n==="array-contains"?new Pw(e,i):n==="in"?new Rw(e,i):n==="not-in"?new kw(e,i):n==="array-contains-any"?new Vw(e,i):new ut(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new xw(e,i):new Cw(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qi(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(Qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends Og{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ln(e,n)}matches(e){return Lg(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Lg(s){return s.op==="and"}function Fg(s){return Aw(s)&&Lg(s)}function Aw(s){for(const e of s.filters)if(e instanceof Ln)return!1;return!0}function Ah(s){if(s instanceof ut)return s.field.canonicalString()+s.op.toString()+Ki(s.value);if(Fg(s))return s.filters.map((e=>Ah(e))).join(",");{const e=s.filters.map((n=>Ah(n))).join(",");return`${s.op}(${e})`}}function bg(s,e){return s instanceof ut?(function(i,a){return a instanceof ut&&i.op===a.op&&i.field.isEqual(a.field)&&tr(i.value,a.value)})(s,e):s instanceof Ln?(function(i,a){return a instanceof Ln&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,d,p)=>c&&bg(d,a.filters[p])),!0):!1})(s,e):void _e(19439)}function Ug(s){return s instanceof ut?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ki(n.value)}`})(s):s instanceof Ln?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ug).join(" ,")+"}"})(s):"Filter"}class Nw extends ut{constructor(e,n,i){super(e,n,i),this.key=me.fromName(i.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class xw extends ut{constructor(e,n){super(e,"in",n),this.keys=zg("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Cw extends ut{constructor(e,n){super(e,"not-in",n),this.keys=zg("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function zg(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>me.fromName(i.referenceValue)))}class Pw extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qh(n)&&ma(n.arrayValue,this.value)}}class Rw extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ma(this.value.arrayValue,n)}}class kw extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ma(this.value.arrayValue,n)}}class Vw extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>ma(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n=null,i=[],a=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=d,this.endAt=p,this.Pe=null}}function Ip(s,e=null,n=[],i=[],a=null,c=null,d=null){return new Dw(s,e,n,i,a,c,d)}function Kh(s){const e=Te(s);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Ah(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ki(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ki(i))).join(",")),e.Pe=n}return e.Pe}function Xh(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Sw(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!bg(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Tp(s.startAt,e.startAt)&&Tp(s.endAt,e.endAt)}function Nh(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n=null,i=[],a=[],c=null,d="F",p=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function jw(s,e,n,i,a,c,d,p){return new no(s,e,n,i,a,c,d,p)}function Yh(s){return new no(s)}function Sp(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Bg(s){return s.collectionGroup!==null}function oa(s){const e=Te(s);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new gt(Pt.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((w=>{w.isInequality()&&(p=p.add(w.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new pa(c,i))})),n.has(Pt.keyField().canonicalString())||e.Te.push(new pa(Pt.keyField(),i))}return e.Te}function Xn(s){const e=Te(s);return e.Ie||(e.Ie=Mw(e,oa(s))),e.Ie}function Mw(s,e){if(s.limitType==="F")return Ip(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new pa(a.field,c)}));const n=s.endAt?new iu(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new iu(s.startAt.position,s.startAt.inclusive):null;return Ip(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function xh(s,e){const n=s.filters.concat([e]);return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Ch(s,e,n){return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function gu(s,e){return Xh(Xn(s),Xn(e))&&s.limitType===e.limitType}function $g(s){return`${Kh(Xn(s))}|lt:${s.limitType}`}function Bi(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>Ug(a))).join(", ")}]`),mu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Ki(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Ki(a))).join(",")),`Target(${i})`})(Xn(s))}; limitType=${s.limitType})`}function yu(s,e){return e.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):me.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,a){for(const c of oa(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(d,p,v){const w=Ep(d,p,v);return d.inclusive?w<=0:w<0})(i.startAt,oa(i),a)||i.endAt&&!(function(d,p,v){const w=Ep(d,p,v);return d.inclusive?w>=0:w>0})(i.endAt,oa(i),a))})(s,e)}function Ow(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Hg(s){return(e,n)=>{let i=!1;for(const a of oa(s)){const c=Lw(a,e,n);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function Lw(s,e,n){const i=s.field.isKeyField()?me.comparator(e.key,n.key):(function(c,d,p){const v=d.data.field(c),w=p.data.field(c);return v!==null&&w!==null?Qi(v,w):_e(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,((n,i)=>{for(const[a,c]of i)e(a,c)}))}isEmpty(){return xg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new et(me.comparator);function Tr(){return Fw}const qg=new et(me.comparator);function ta(...s){let e=qg;for(const n of s)e=e.insert(n.key,n);return e}function Wg(s){let e=qg;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Bs(){return aa()}function Gg(){return aa()}function aa(){return new Gs((s=>s.toString()),((s,e)=>s.isEqual(e)))}const bw=new et(me.comparator),Uw=new gt(me.comparator);function xe(...s){let e=Uw;for(const n of s)e=e.add(n);return e}const zw=new gt(Se);function Bw(){return zw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function Qg(s){return{integerValue:""+s}}function $w(s,e){return gw(e)?Qg(e):Jh(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this._=void 0}}function Hw(s,e,n){return s instanceof ga?(function(a,c){const d={fields:{[Rg]:{stringValue:Pg},[Vg]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Gh(c)&&(c=pu(c)),c&&(d.fields[kg]=c),{mapValue:d}})(n,e):s instanceof ya?Xg(s,e):s instanceof va?Yg(s,e):(function(a,c){const d=Kg(a,c),p=Ap(d)+Ap(a.Ee);return Sh(d)&&Sh(a.Ee)?Qg(p):Jh(a.serializer,p)})(s,e)}function qw(s,e,n){return s instanceof ya?Xg(s,e):s instanceof va?Yg(s,e):n}function Kg(s,e){return s instanceof ou?(function(i){return Sh(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class ga extends vu{}class ya extends vu{constructor(e){super(),this.elements=e}}function Xg(s,e){const n=Jg(e);for(const i of s.elements)n.some((a=>tr(a,i)))||n.push(i);return{arrayValue:{values:n}}}class va extends vu{constructor(e){super(),this.elements=e}}function Yg(s,e){let n=Jg(e);for(const i of s.elements)n=n.filter((a=>!tr(a,i)));return{arrayValue:{values:n}}}class ou extends vu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ap(s){return st(s.integerValue||s.doubleValue)}function Jg(s){return Qh(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n){this.field=e,this.transform=n}}function Gw(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof ya&&a instanceof ya||i instanceof va&&a instanceof va?Gi(i.elements,a.elements,tr):i instanceof ou&&a instanceof ou?tr(i.Ee,a.Ee):i instanceof ga&&a instanceof ga})(s.transform,e.transform)}class Qw{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kl(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class _u{}function Zg(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Zh(s.key,En.none()):new wa(s.key,s.data,En.none());{const n=s.data,i=Zt.empty();let a=new gt(Pt.comparator);for(let c of e.fields)if(!a.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),a=a.add(c)}return new cs(s.key,i,new ln(a.toArray()),En.none())}}function Kw(s,e,n){s instanceof wa?(function(a,c,d){const p=a.value.clone(),v=xp(a.fieldTransforms,c,d.transformResults);p.setAll(v),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof cs?(function(a,c,d){if(!Kl(a.precondition,c))return void c.convertToUnknownDocument(d.version);const p=xp(a.fieldTransforms,c,d.transformResults),v=c.data;v.setAll(ey(a)),v.setAll(p),c.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(s,e,n):(function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function la(s,e,n,i){return s instanceof wa?(function(c,d,p,v){if(!Kl(c.precondition,d))return p;const w=c.value.clone(),N=Cp(c.fieldTransforms,v,d);return w.setAll(N),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),null})(s,e,n,i):s instanceof cs?(function(c,d,p,v){if(!Kl(c.precondition,d))return p;const w=Cp(c.fieldTransforms,v,d),N=d.data;return N.setAll(ey(c)),N.setAll(w),d.convertToFoundDocument(d.version,N).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,e,n,i):(function(c,d,p){return Kl(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function Xw(s,e){let n=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),c=Kg(i.transform,a||null);c!=null&&(n===null&&(n=Zt.empty()),n.set(i.field,c))}return n||null}function Np(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Gi(i,a,((c,d)=>Gw(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class wa extends _u{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class cs extends _u{constructor(e,n,i,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ey(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function xp(s,e,n){const i=new Map;Fe(s.length===n.length,32656,{Ae:n.length,Re:s.length});for(let a=0;a<n.length;a++){const c=s[a],d=c.transform,p=e.data.field(c.field);i.set(c.field,qw(d,p,n[a]))}return i}function Cp(s,e,n){const i=new Map;for(const a of s){const c=a.transform,d=n.data.field(a.field);i.set(a.field,Hw(c,d,e))}return i}class Zh extends _u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yw extends _u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Kw(c,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=la(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=la(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Gg();return this.mutations.forEach((a=>{const c=e.get(a.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(a.key)?null:p;const v=Zg(d,p);v!==null&&i.set(a.key,v),d.isValidDocument()||d.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),xe())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,((n,i)=>Np(n,i)))&&Gi(this.baseMutations,e.baseMutations,((n,i)=>Np(n,i)))}}class ed{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){Fe(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let a=(function(){return bw})();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,i[d].version);return new ed(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,ke;function tE(s){switch(s){case H.OK:return _e(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function ty(s){if(s===void 0)return Er("GRPC error has no .code"),H.UNKNOWN;switch(s){case lt.OK:return H.OK;case lt.CANCELLED:return H.CANCELLED;case lt.UNKNOWN:return H.UNKNOWN;case lt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case lt.INTERNAL:return H.INTERNAL;case lt.UNAVAILABLE:return H.UNAVAILABLE;case lt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case lt.NOT_FOUND:return H.NOT_FOUND;case lt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case lt.ABORTED:return H.ABORTED;case lt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case lt.DATA_LOSS:return H.DATA_LOSS;default:return _e(39323,{code:s})}}(ke=lt||(lt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Jr([4294967295,4294967295],0);function Pp(s){const e=Ig().encode(s),n=new pg;return n.update(e),new Uint8Array(n.digest())}function Rp(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Jr([n,i],0),new Jr([a,c],0)]}class td{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new na(`Invalid padding: ${n}`);if(i<0)throw new na(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new na(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new na(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Jr.fromNumber(this.fe)}pe(e,n,i){let a=e.add(n.multiply(Jr.fromNumber(i)));return a.compare(nE)===1&&(a=new Jr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Pp(e),[i,a]=Rp(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(i,a,c);if(!this.ye(d))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new td(c,a,n);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.fe===0)return;const n=Pp(e),[i,a]=Rp(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(i,a,c);this.we(d)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,i,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Ea.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new wu(Ee.min(),a,new et(Se),Tr(),xe())}}class Ea{constructor(e,n,i,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ea(i,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,i,a){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=a}}class ny{constructor(e,n){this.targetId=e,this.De=n}}class ry{constructor(e,n,i=Rt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class kp{constructor(){this.ve=0,this.Ce=Vp(),this.Fe=Rt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=xe(),n=xe(),i=xe();return this.Ce.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:_e(38017,{changeType:c})}})),new Ea(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=Vp()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class rE{constructor(e){this.We=e,this.Ge=new Map,this.ze=Tr(),this.je=Hl(),this.Je=Hl(),this.He=new et(Se)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,i=e.De.count,a=this.st(n);if(a){const c=a.target;if(Nh(c))if(i===0){const d=new me(c.path);this.Xe(n,d,bt.newNoDocument(d,Ee.min()))}else Fe(i===1,20013,{expectedCount:i});else{const d=this.ot(n);if(d!==i){const p=this._t(e),v=p?this.ut(p,e,d):1;if(v!==0){this.rt(n);const w=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,w)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=n;let d,p;try{d=ss(i).toUint8Array()}catch(v){if(v instanceof Cg)return ts("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{p=new td(d,a,c)}catch(v){return ts(v instanceof na?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return p.fe===0?null:p}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let a=0;return i.forEach((c=>{const d=this.We.lt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.Xe(n,c,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((c,d)=>{const p=this.st(d);if(p){if(c.current&&Nh(p.target)){const v=new me(p.target.path);this.Tt(v).has(d)||this.It(d,v)||this.Xe(d,v,bt.newNoDocument(v,e))}c.Ne&&(n.set(d,c.Le()),c.ke())}}));let i=xe();this.Je.forEach(((c,d)=>{let p=!0;d.forEachWhile((v=>{const w=this.st(v);return!w||w.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(c))})),this.ze.forEach(((c,d)=>d.setReadTime(e)));const a=new wu(e,n,this.He,this.ze,i);return this.ze=Tr(),this.je=Hl(),this.Je=Hl(),this.He=new et(Se),a}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new kp,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new gt(Se),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new gt(Se),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new kp),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new et(me.comparator)}function Vp(){return new et(me.comparator)}const sE={asc:"ASCENDING",desc:"DESCENDING"},iE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oE={and:"AND",or:"OR"};class aE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ph(s,e){return s.useProto3Json||mu(e)?e:{value:e}}function au(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sy(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function lE(s,e){return au(s,e.toTimestamp())}function Yn(s){return Fe(!!s,49232),Ee.fromTimestamp((function(n){const i=rs(n);return new Ke(i.seconds,i.nanos)})(s))}function nd(s,e){return Rh(s,e).canonicalString()}function Rh(s,e){const n=(function(a){return new We(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?n:n.child(e)}function iy(s){const e=We.fromString(s);return Fe(cy(e),10190,{key:e.toString()}),e}function kh(s,e){return nd(s.databaseId,e.path)}function dh(s,e){const n=iy(e);if(n.get(1)!==s.databaseId.projectId)throw new se(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new se(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new me(ay(n))}function oy(s,e){return nd(s.databaseId,e)}function uE(s){const e=iy(s);return e.length===4?We.emptyPath():ay(e)}function Vh(s){return new We(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function ay(s){return Fe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Dp(s,e,n){return{name:kh(s,e),fields:n.value.mapValue.fields}}function cE(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:_e(39313,{state:w})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(w,N){return w.useProto3Json?(Fe(N===void 0||typeof N=="string",58123),Rt.fromBase64String(N||"")):(Fe(N===void 0||N instanceof Buffer||N instanceof Uint8Array,16193),Rt.fromUint8Array(N||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(w){const N=w.code===void 0?H.UNKNOWN:ty(w.code);return new se(N,w.message||"")})(d);n=new ry(i,a,c,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=dh(s,i.document.name),c=Yn(i.document.updateTime),d=i.document.createTime?Yn(i.document.createTime):Ee.min(),p=new Zt({mapValue:{fields:i.document.fields}}),v=bt.newFoundDocument(a,c,d,p),w=i.targetIds||[],N=i.removedTargetIds||[];n=new Xl(w,N,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=dh(s,i.document),c=i.readTime?Yn(i.readTime):Ee.min(),d=bt.newNoDocument(a,c),p=i.removedTargetIds||[];n=new Xl([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=dh(s,i.document),c=i.removedTargetIds||[];n=new Xl([],c,a,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,d=new eE(a,c),p=i.targetId;n=new ny(p,d)}}return n}function hE(s,e){let n;if(e instanceof wa)n={update:Dp(s,e.key,e.value)};else if(e instanceof Zh)n={delete:kh(s,e.key)};else if(e instanceof cs)n={update:Dp(s,e.key,e.data),updateMask:wE(e.fieldMask)};else{if(!(e instanceof Yw))return _e(16599,{Rt:e.type});n={verify:kh(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const p=d.transform;if(p instanceof ga)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ya)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof va)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ou)return{fieldPath:d.field.canonicalString(),increment:p.Ee};throw _e(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:lE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_e(27497)})(s,e.precondition)),n}function dE(s,e){return s&&s.length>0?(Fe(e!==void 0,14353),s.map((n=>(function(a,c){let d=a.updateTime?Yn(a.updateTime):Yn(c);return d.isEqual(Ee.min())&&(d=Yn(c)),new Qw(d,a.transformResults||[])})(n,e)))):[]}function fE(s,e){return{documents:[oy(s,e.path)]}}function mE(s,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=oy(s,a);const c=(function(w){if(w.length!==0)return uy(Ln.create(w,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(w){if(w.length!==0)return w.map((N=>(function(I){return{field:$i(I.field),direction:yE(I.dir)}})(N)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Ph(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{Vt:n,parent:a}}function pE(s){let e=uE(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){Fe(i===1,65062);const N=n.from[0];N.allDescendants?a=N.collectionId:e=e.child(N.collectionId)}let c=[];n.where&&(c=(function(S){const I=ly(S);return I instanceof Ln&&Fg(I)?I.getFilters():[I]})(n.where));let d=[];n.orderBy&&(d=(function(S){return S.map((I=>(function(B){return new pa(Hi(B.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(I)))})(n.orderBy));let p=null;n.limit&&(p=(function(S){let I;return I=typeof S=="object"?S.value:S,mu(I)?null:I})(n.limit));let v=null;n.startAt&&(v=(function(S){const I=!!S.before,D=S.values||[];return new iu(D,I)})(n.startAt));let w=null;return n.endAt&&(w=(function(S){const I=!S.before,D=S.values||[];return new iu(D,I)})(n.endAt)),jw(e,a,d,c,p,"F",v,w)}function gE(s,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ly(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Hi(n.unaryFilter.field);return ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Hi(n.unaryFilter.field);return ut.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Hi(n.unaryFilter.field);return ut.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Hi(n.unaryFilter.field);return ut.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ut.create(Hi(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ln.create(n.compositeFilter.filters.map((i=>ly(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(n.compositeFilter.op))})(s):_e(30097,{filter:s})}function yE(s){return sE[s]}function vE(s){return iE[s]}function _E(s){return oE[s]}function $i(s){return{fieldPath:s.canonicalString()}}function Hi(s){return Pt.fromServerFormat(s.fieldPath)}function uy(s){return s instanceof ut?(function(n){if(n.op==="=="){if(wp(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NAN"}};if(_p(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wp(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NAN"}};if(_p(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(n.field),op:vE(n.op),value:n.value}}})(s):s instanceof Ln?(function(n){const i=n.getFilters().map((a=>uy(a)));return i.length===1?i[0]:{compositeFilter:{op:_E(n.op),filters:i}}})(s):_e(54877,{filter:s})}function wE(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function cy(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,i,a,c=Ee.min(),d=Ee.min(),p=Rt.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=v}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.gt=e}}function TE(s){const e=pE({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.Dn=new SE}addToCollectionParentIndex(e,n){return this.Dn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(ns.min())}updateCollectionGroup(e,n,i){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class SE{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new gt(We.comparator),c=!a.has(i);return this.index[n]=a.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new gt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hy=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(hy,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Xi(0)}static ur(){return new Xi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="LruGarbageCollector",AE=1048576;function Op([s,e],[n,i]){const a=Se(s,n);return a===0?Se(e,i):a}class NE{constructor(e){this.Tr=e,this.buffer=new gt(Op),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Op(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xE{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(Mp,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){to(n)?oe(Mp,"Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Rr(3e5)}))}}class CE{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return q.resolve(fu.ue);const i=new NE(n);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(jp)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jp):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,a,c,d,p,v,w;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),a=this.params.maximumSequenceNumbersToCollect):a=S,d=Date.now(),this.nthSequenceNumber(e,a)))).next((S=>(i=S,p=Date.now(),this.removeTargets(e,i,n)))).next((S=>(c=S,v=Date.now(),this.removeOrphanedDocuments(e,i)))).next((S=>(w=Date.now(),zi()<=Ve.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-N}ms
	Determined least recently used ${a} in `+(p-d)+`ms
	Removed ${c} targets in `+(v-p)+`ms
	Removed ${S} documents in `+(w-v)+`ms
Total Duration: ${w-N}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:S}))))}}function PE(s,e){return new CE(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.changes=new Gs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&la(i.mutation,a,ln.empty(),Ke.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,xe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=xe()){const a=Bs();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((c=>{let d=ta();return c.forEach(((p,v)=>{d=d.insert(p,v.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=Bs();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,xe())))}populateOverlays(e,n,i){const a=[];return i.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,i,a){let c=Tr();const d=aa(),p=(function(){return aa()})();return n.forEach(((v,w)=>{const N=i.get(w.key);a.has(w.key)&&(N===void 0||N.mutation instanceof cs)?c=c.insert(w.key,w):N!==void 0?(d.set(w.key,N.mutation.getFieldMask()),la(N.mutation,w,N.mutation.getFieldMask(),Ke.now())):d.set(w.key,ln.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((w,N)=>d.set(w,N))),n.forEach(((w,N)=>{var S;return p.set(w,new kE(N,(S=d.get(w))!==null&&S!==void 0?S:null))})),p)))}recalculateAndSaveOverlays(e,n){const i=aa();let a=new et(((d,p)=>d-p)),c=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((v=>{const w=n.get(v);if(w===null)return;let N=i.get(v)||ln.empty();N=p.applyToLocalView(w,N),i.set(v,N);const S=(a.get(p.batchId)||xe()).add(v);a=a.insert(p.batchId,S)}))})).next((()=>{const d=[],p=a.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),w=v.key,N=v.value,S=Gg();N.forEach((I=>{if(!c.has(I)){const D=Zg(n.get(I),i.get(I));D!==null&&S.set(I,D),c=c.add(I)}})),d.push(this.documentOverlayCache.saveOverlays(e,w,S))}return q.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return(function(d){return me.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-c.size):q.resolve(Bs());let p=ha,v=c;return d.next((w=>q.forEach(w,((N,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),c.get(N)?q.resolve():this.remoteDocumentCache.getEntry(e,N).next((I=>{v=v.insert(N,I)}))))).next((()=>this.populateOverlays(e,w,c))).next((()=>this.computeViews(e,v,w,xe()))).next((N=>({batchId:p,changes:Wg(N)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((i=>{let a=ta();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const c=n.collectionGroup;let d=ta();return this.indexManager.getCollectionParents(e,c).next((p=>q.forEach(p,(v=>{const w=(function(S,I){return new no(I,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,w,i,a).next((N=>{N.forEach(((S,I)=>{d=d.insert(S,I)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,a)))).next((d=>{c.forEach(((v,w)=>{const N=w.getKey();d.get(N)===null&&(d=d.insert(N,bt.newInvalidDocument(N)))}));let p=ta();return d.forEach(((v,w)=>{const N=c.get(v);N!==void 0&&la(N.mutation,w,ln.empty(),Ke.now()),yu(n,w)&&(p=p.insert(v,w))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return q.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Yn(a.createTime)}})(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:TE(a.bundledQuery),readTime:Yn(a.readTime)}})(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.overlays=new et(me.comparator),this.kr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Bs();return q.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,c)=>{this.wt(e,n,c)})),q.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.kr.delete(i)),q.resolve()}getOverlaysForCollection(e,n,i){const a=Bs(),c=n.length+1,d=new me(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const v=p.getNext().value,w=v.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===c&&v.largestBatchId>i&&a.set(v.getKey(),v)}return q.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let c=new et(((w,N)=>w-N));const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>i){let N=c.get(w.largestBatchId);N===null&&(N=Bs(),c=c.insert(w.largestBatchId,N)),N.set(w.getKey(),w)}}const p=Bs(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((w,N)=>p.set(w,N))),!(p.size()>=a)););return q.resolve(p)}wt(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const d=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new Zw(n,i));let c=this.kr.get(n);c===void 0&&(c=xe(),this.kr.set(n,c)),this.kr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this.qr=new gt(Tt.Qr),this.$r=new gt(Tt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Tt(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Tt(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new me(new We([])),i=new Tt(n,e),a=new Tt(n,e+1),c=[];return this.$r.forEachInRange([i,a],(d=>{this.Wr(d),c.push(d.key)})),c}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new me(new We([])),i=new Tt(n,e),a=new Tt(n,e+1);let c=xe();return this.$r.forEachInRange([i,a],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Tt(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Tt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return me.comparator(e.key,n.key)||Se(e.Hr,n.Hr)}static Ur(e,n){return Se(e.Hr,n.Hr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new gt(Tt.Qr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Jw(c,n,i,a);this.mutationQueue.push(d);for(const p of a)this.Yr=this.Yr.add(new Tt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return q.resolve(d)}lookupMutationBatch(e,n){return q.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.Xr(i),c=a<0?0:a;return q.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Wh:this.er-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Tt(n,0),a=new Tt(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([i,a],(d=>{const p=this.Zr(d.Hr);c.push(p)})),q.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new gt(Se);return n.forEach((a=>{const c=new Tt(a,0),d=new Tt(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,d],(p=>{i=i.add(p.Hr)}))})),q.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let c=i;me.isDocumentKey(c)||(c=c.child(""));const d=new Tt(new me(c),0);let p=new gt(Se);return this.Yr.forEachWhile((v=>{const w=v.key.path;return!!i.isPrefixOf(w)&&(w.length===a&&(p=p.add(v.Hr)),!0)}),d),q.resolve(this.ei(p))}ei(e){const n=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){Fe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return q.forEach(n.mutations,(a=>{const c=new Tt(a.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Tt(n,0),a=this.Yr.firstAfterOrEqual(i);return q.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.ni=e,this.docs=(function(){return new et(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),c=a?a.size:0,d=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return q.resolve(i?i.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let i=Tr();return n.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():bt.newInvalidDocument(a))})),q.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let c=Tr();const d=n.path,p=new me(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:w,value:{document:N}}=v.getNext();if(!d.isPrefixOf(w.path))break;w.path.length>d.length+1||dw(hw(N),i)<=0||(a.has(N.key)||yu(n,N))&&(c=c.insert(N.key,N.mutableCopy()))}return q.resolve(c)}getAllFromCollectionGroup(e,n,i,a){_e(9500)}ri(e,n){return q.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new FE(this)}getSize(e){return q.resolve(this.size)}}class FE extends RE{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(i)})),q.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.persistence=e,this.ii=new Gs((n=>Kh(n)),Xh),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.si=0,this.oi=new rd,this.targetCount=0,this._i=Xi.ar()}forEachTarget(e,n){return this.ii.forEach(((i,a)=>n(a))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),q.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Xi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.hr(n),q.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,i){let a=0;const c=[];return this.ii.forEach(((d,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ii.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),a++)})),q.waitFor(c).next((()=>a))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return q.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),q.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((d=>{c.push(a.markPotentiallyOrphaned(e,d))})),q.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return q.resolve(i)}containsKey(e,n){return q.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n){this.ai={},this.overlays={},this.ui=new fu(0),this.ci=!1,this.ci=!0,this.li=new ME,this.referenceDelegate=e(this),this.hi=new bE(this),this.indexManager=new IE,this.remoteDocumentCache=(function(a){return new LE(a)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new EE(n),this.Ti=new DE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new OE(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){oe("MemoryPersistence","Starting transaction:",e);const a=new UE(this.ui.next());return this.referenceDelegate.Ii(),i(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,n){return q.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class UE extends mw{constructor(e){super(),this.currentSequenceNumber=e}}class sd{constructor(e){this.persistence=e,this.Ai=new rd,this.Ri=null}static Vi(e){return new sd(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),q.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.mi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.mi,(i=>{const a=me.fromPath(i);return this.fi(e,a).next((c=>{c||n.removeEntry(a,Ee.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return q.or([()=>q.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class lu{constructor(e,n){this.persistence=e,this.gi=new Gs((i=>yw(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=PE(this,n)}static Vi(e,n){return new lu(e,n)}Ii(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return q.forEach(this.gi,((i,a)=>this.Sr(e,i,a).next((c=>c?q.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ri(e,(d=>this.Sr(e,d,n).next((p=>{p||(i++,c.removeEntry(d,Ee.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),q.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),q.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gl(e.data.value)),n}Sr(e,n,i){return q.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return q.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=a}static Es(e,n){let i=xe(),a=xe();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new id(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return j_()?8:pw(V_())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,a){const c={result:null};return this.ps(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ys(e,n,a,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new zE;return this.ws(e,n,d).next((p=>{if(c.result=p,this.Rs)return this.Ss(e,n,d,p.size)}))})).next((()=>c.result))}Ss(e,n,i,a){return i.documentReadCount<this.Vs?(zi()<=Ve.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),q.resolve()):(zi()<=Ve.DEBUG&&oe("QueryEngine","Query:",Bi(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(zi()<=Ve.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):q.resolve())}ps(e,n){if(Sp(n))return q.resolve(null);let i=Xn(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=Ch(n,null,"F"),i=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=xe(...c);return this.gs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((v=>{const w=this.bs(n,p);return this.Ds(n,w,d,v.readTime)?this.ps(e,Ch(n,null,"F")):this.vs(e,w,n,v)}))))})))))}ys(e,n,i,a){return Sp(n)||a.isEqual(Ee.min())?q.resolve(null):this.gs.getDocuments(e,i).next((c=>{const d=this.bs(n,c);return this.Ds(n,d,i,a)?q.resolve(null):(zi()<=Ve.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bi(n)),this.vs(e,d,n,cw(a,ha)).next((p=>p)))}))}bs(e,n){let i=new gt(Hg(e));return n.forEach(((a,c)=>{yu(e,c)&&(i=i.add(c))})),i}Ds(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ws(e,n,i){return zi()<=Ve.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Bi(n)),this.gs.getDocumentsMatchingQuery(e,n,ns.min(),i)}vs(e,n,i,a){return this.gs.getDocumentsMatchingQuery(e,i,a).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="LocalStore",$E=3e8;class HE{constructor(e,n,i,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new et(Se),this.Ms=new Gs((c=>Kh(c)),Xh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function qE(s,e,n,i){return new HE(s,e,n,i)}async function fy(s,e){const n=Te(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],p=[];let v=xe();for(const w of a){d.push(w.batchId);for(const N of w.mutations)v=v.add(N.key)}for(const w of c){p.push(w.batchId);for(const N of w.mutations)v=v.add(N.key)}return n.localDocuments.getDocuments(i,v).next((w=>({Bs:w,removedBatchIds:d,addedBatchIds:p})))}))}))}function WE(s,e){const n=Te(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return(function(p,v,w,N){const S=w.batch,I=S.keys();let D=q.resolve();return I.forEach((B=>{D=D.next((()=>N.getEntry(v,B))).next((G=>{const $=w.docVersions.get(B);Fe($!==null,48541),G.version.compareTo($)<0&&(S.applyToRemoteDocument(G,w),G.isValidDocument()&&(G.setReadTime(w.commitVersion),N.addEntry(G)))}))})),D.next((()=>p.mutationQueue.removeMutationBatch(v,S)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let v=xe();for(let w=0;w<p.mutationResults.length;++w)p.mutationResults[w].transformResults.length>0&&(v=v.add(p.batch.mutations[w].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function my(s){const e=Te(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function GE(s,e){const n=Te(s),i=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const p=[];e.targetChanges.forEach(((N,S)=>{const I=a.get(S);if(!I)return;p.push(n.hi.removeMatchingKeys(c,N.removedDocuments,S).next((()=>n.hi.addMatchingKeys(c,N.addedDocuments,S))));let D=I.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?D=D.withResumeToken(Rt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):N.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(N.resumeToken,i)),a=a.insert(S,D),(function(G,$,Z){return G.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=$E?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(I,D,N)&&p.push(n.hi.updateTargetData(c,D))}));let v=Tr(),w=xe();if(e.documentUpdates.forEach((N=>{e.resolvedLimboDocuments.has(N)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,N))})),p.push(QE(c,d,e.documentUpdates).next((N=>{v=N.Ls,w=N.ks}))),!i.isEqual(Ee.min())){const N=n.hi.getLastRemoteSnapshotVersion(c).next((S=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,i)));p.push(N)}return q.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,v,w))).next((()=>v))})).then((c=>(n.Fs=a,c)))}function QE(s,e,n){let i=xe(),a=xe();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let d=Tr();return n.forEach(((p,v)=>{const w=c.get(p);v.isFoundDocument()!==w.isFoundDocument()&&(a=a.add(p)),v.isNoDocument()&&v.version.isEqual(Ee.min())?(e.removeEntry(p,v.readTime),d=d.insert(p,v)):!w.isValidDocument()||v.version.compareTo(w.version)>0||v.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(v),d=d.insert(p,v)):oe(od,"Ignoring outdated watch update for ",p,". Current version:",w.version," Watch version:",v.version)})),{Ls:d,ks:a}}))}function KE(s,e){const n=Te(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Wh),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function XE(s,e){const n=Te(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.hi.getTargetData(i,e).next((c=>c?(a=c,q.resolve(a)):n.hi.allocateTargetId(i).next((d=>(a=new Kr(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function Dh(s,e,n){const i=Te(s),a=i.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!to(d))throw d;oe(od,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(a.target)}function Lp(s,e,n){const i=Te(s);let a=Ee.min(),c=xe();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,w,N){const S=Te(v),I=S.Ms.get(N);return I!==void 0?q.resolve(S.Fs.get(I)):S.hi.getTargetData(w,N)})(i,d,Xn(e)).next((p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,p.targetId).next((v=>{c=v}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,n?a:Ee.min(),n?c:xe()))).next((p=>(YE(i,Ow(e),p),{documents:p,qs:c})))))}function YE(s,e,n){let i=s.xs.get(e)||Ee.min();n.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.xs.set(e,i)}class Fp{constructor(){this.activeTargetIds=Bw()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JE{constructor(){this.Fo=new Fp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Fp,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="ConnectivityMonitor";class Up{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(bp,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){oe(bp,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function jh(){return ql===null?ql=(function(){return 268435456+Math.round(2147483648*Math.random())})():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="RestConnection",e1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t1{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===ru?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,n,i,a,c){const d=jh(),p=this.Go(e,n.toUriEncodedString());oe(fh,`Sending RPC '${e}' ${d}:`,p,i);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(v,a,c);const{host:w}=new URL(p),N=Bh(w);return this.jo(e,p,v,i,N).then((S=>(oe(fh,`Received RPC '${e}' ${d}: `,S),S)),(S=>{throw ts(fh,`RPC '${e}' ${d} failed with error: `,S,"url: ",p,"request:",i),S}))}Jo(e,n,i,a,c,d){return this.Wo(e,n,i,a,c)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),i&&i.headers.forEach(((a,c)=>e[c]=a))}Go(e,n){const i=e1[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class r1 extends t1{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,a,c){const d=jh();return new Promise(((p,v)=>{const w=new gg;w.setWithCredentials(!0),w.listenOnce(yg.COMPLETE,(()=>{try{switch(w.getLastErrorCode()){case Wl.NO_ERROR:const S=w.getResponseJson();oe(Lt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),p(S);break;case Wl.TIMEOUT:oe(Lt,`RPC '${e}' ${d} timed out`),v(new se(H.DEADLINE_EXCEEDED,"Request time out"));break;case Wl.HTTP_ERROR:const I=w.getStatus();if(oe(Lt,`RPC '${e}' ${d} failed with status:`,I,"response text:",w.getResponseText()),I>0){let D=w.getResponseJson();Array.isArray(D)&&(D=D[0]);const B=D==null?void 0:D.error;if(B&&B.status&&B.message){const G=(function(Z){const ee=Z.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(ee)>=0?ee:H.UNKNOWN})(B.status);v(new se(G,B.message))}else v(new se(H.UNKNOWN,"Server responded with status "+w.getStatus()))}else v(new se(H.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:d,l_:w.getLastErrorCode(),h_:w.getLastError()})}}finally{oe(Lt,`RPC '${e}' ${d} completed.`)}}));const N=JSON.stringify(a);oe(Lt,`RPC '${e}' ${d} sending request:`,a),w.send(n,"POST",N,i,15)}))}P_(e,n,i){const a=jh(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=wg(),p=_g(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(v.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(v.useFetchStreams=!0),this.zo(v.initMessageHeaders,n,i),v.encodeInitMessageHeaders=!0;const N=c.join("");oe(Lt,`Creating RPC '${e}' stream ${a}: ${N}`,v);const S=d.createWebChannel(N,v);this.T_(S);let I=!1,D=!1;const B=new n1({Ho:$=>{D?oe(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,$):(I||(oe(Lt,`Opening RPC '${e}' stream ${a} transport.`),S.open(),I=!0),oe(Lt,`RPC '${e}' stream ${a} sending:`,$),S.send($))},Yo:()=>S.close()}),G=($,Z,ee)=>{$.listen(Z,(re=>{try{ee(re)}catch(de){setTimeout((()=>{throw de}),0)}}))};return G(S,ea.EventType.OPEN,(()=>{D||(oe(Lt,`RPC '${e}' stream ${a} transport opened.`),B.s_())})),G(S,ea.EventType.CLOSE,(()=>{D||(D=!0,oe(Lt,`RPC '${e}' stream ${a} transport closed`),B.__(),this.I_(S))})),G(S,ea.EventType.ERROR,($=>{D||(D=!0,ts(Lt,`RPC '${e}' stream ${a} transport errored. Name:`,$.name,"Message:",$.message),B.__(new se(H.UNAVAILABLE,"The operation could not be completed")))})),G(S,ea.EventType.MESSAGE,($=>{var Z;if(!D){const ee=$.data[0];Fe(!!ee,16349);const re=ee,de=(re==null?void 0:re.error)||((Z=re[0])===null||Z===void 0?void 0:Z.error);if(de){oe(Lt,`RPC '${e}' stream ${a} received error:`,de);const Me=de.status;let Q=(function(x){const R=lt[x];if(R!==void 0)return ty(R)})(Me),A=de.message;Q===void 0&&(Q=H.INTERNAL,A="Unknown error status: "+Me+" with message "+de.message),D=!0,B.__(new se(Q,A)),S.close()}else oe(Lt,`RPC '${e}' stream ${a} received:`,ee),B.a_(ee)}})),G(p,vg.STAT_EVENT,($=>{$.stat===Eh.PROXY?oe(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):$.stat===Eh.NOPROXY&&oe(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{B.o_()}),0),B}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(s){return new aE(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,i=1e3,a=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=a,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-i);a>0&&oe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="PersistentStream";class gy{constructor(e,n,i,a,c,d,p,v){this.Fi=e,this.w_=i,this.S_=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new py(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.b_===n&&this.W_(i,a)}),(i=>{e((()=>{const a=new se(H.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{i((()=>this.G_(a)))})),this.stream.onMessage((a=>{i((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return oe(zp,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(oe(zp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class s1 extends gy{constructor(e,n,i,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=cE(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Ee.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ee.min():d.readTime?Yn(d.readTime):Ee.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Vh(this.serializer),n.addTarget=(function(c,d){let p;const v=d.target;if(p=Nh(v)?{documents:fE(c,v)}:{query:mE(c,v).Vt},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=sy(c,d.resumeToken);const w=Ph(c,d.expectedCount);w!==null&&(p.expectedCount=w)}else if(d.snapshotVersion.compareTo(Ee.min())>0){p.readTime=au(c,d.snapshotVersion.toTimestamp());const w=Ph(c,d.expectedCount);w!==null&&(p.expectedCount=w)}return p})(this.serializer,e);const i=gE(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Vh(this.serializer),n.removeTarget=e,this.k_(n)}}class i1 extends gy{constructor(e,n,i,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=dE(e.writeResults,e.commitTime),i=Yn(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Vh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>hE(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{}class a1 extends o1{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new se(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,Rh(n,i),a,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(H.UNKNOWN,c.toString())}))}Jo(e,n,i,a,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Jo(e,Rh(n,i),a,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new se(H.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class l1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Er(n),this._a=!1):oe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class u1{constructor(e,n,i,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{Qs(this)&&(oe(Ws,"Restarting streams for network reachability change."),await(async function(v){const w=Te(v);w.Ia.add(4),await Ta(w),w.Aa.set("Unknown"),w.Ia.delete(4),await Tu(w)})(this))}))})),this.Aa=new l1(i,a)}}async function Tu(s){if(Qs(s))for(const e of s.da)await e(!0)}async function Ta(s){for(const e of s.da)await e(!1)}function yy(s,e){const n=Te(s);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),cd(n)?ud(n):ro(n).x_()&&ld(n,e))}function ad(s,e){const n=Te(s),i=ro(n);n.Ta.delete(e),i.x_()&&vy(n,e),n.Ta.size===0&&(i.x_()?i.B_():Qs(n)&&n.Aa.set("Unknown"))}function ld(s,e){if(s.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ro(s).H_(e)}function vy(s,e){s.Ra.$e(e),ro(s).Y_(e)}function ud(s){s.Ra=new rE({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>s.Ta.get(e)||null,lt:()=>s.datastore.serializer.databaseId}),ro(s).start(),s.Aa.aa()}function cd(s){return Qs(s)&&!ro(s).M_()&&s.Ta.size>0}function Qs(s){return Te(s).Ia.size===0}function _y(s){s.Ra=void 0}async function c1(s){s.Aa.set("Online")}async function h1(s){s.Ta.forEach(((e,n)=>{ld(s,e)}))}async function d1(s,e){_y(s),cd(s)?(s.Aa.la(e),ud(s)):s.Aa.set("Unknown")}async function f1(s,e,n){if(s.Aa.set("Online"),e instanceof ry&&e.state===2&&e.cause)try{await(async function(a,c){const d=c.cause;for(const p of c.targetIds)a.Ta.has(p)&&(await a.remoteSyncer.rejectListen(p,d),a.Ta.delete(p),a.Ra.removeTarget(p))})(s,e)}catch(i){oe(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await uu(s,i)}else if(e instanceof Xl?s.Ra.Ye(e):e instanceof ny?s.Ra.it(e):s.Ra.et(e),!n.isEqual(Ee.min()))try{const i=await my(s.localStore);n.compareTo(i)>=0&&await(function(c,d){const p=c.Ra.Pt(d);return p.targetChanges.forEach(((v,w)=>{if(v.resumeToken.approximateByteSize()>0){const N=c.Ta.get(w);N&&c.Ta.set(w,N.withResumeToken(v.resumeToken,d))}})),p.targetMismatches.forEach(((v,w)=>{const N=c.Ta.get(v);if(!N)return;c.Ta.set(v,N.withResumeToken(Rt.EMPTY_BYTE_STRING,N.snapshotVersion)),vy(c,v);const S=new Kr(N.target,v,w,N.sequenceNumber);ld(c,S)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){oe(Ws,"Failed to raise snapshot:",i),await uu(s,i)}}async function uu(s,e,n){if(!to(e))throw e;s.Ia.add(1),await Ta(s),s.Aa.set("Offline"),n||(n=()=>my(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{oe(Ws,"Retrying IndexedDB access"),await n(),s.Ia.delete(1),await Tu(s)}))}function wy(s,e){return e().catch((n=>uu(s,n,e)))}async function Iu(s){const e=Te(s),n=os(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Wh;for(;m1(e);)try{const a=await KE(e.localStore,i);if(a===null){e.Pa.length===0&&n.B_();break}i=a.batchId,p1(e,a)}catch(a){await uu(e,a)}Ey(e)&&Ty(e)}function m1(s){return Qs(s)&&s.Pa.length<10}function p1(s,e){s.Pa.push(e);const n=os(s);n.x_()&&n.Z_&&n.X_(e.mutations)}function Ey(s){return Qs(s)&&!os(s).M_()&&s.Pa.length>0}function Ty(s){os(s).start()}async function g1(s){os(s).na()}async function y1(s){const e=os(s);for(const n of s.Pa)e.X_(n.mutations)}async function v1(s,e,n){const i=s.Pa.shift(),a=ed.from(i,e,n);await wy(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Iu(s)}async function _1(s,e){e&&os(s).Z_&&await(async function(i,a){if((function(d){return tE(d)&&d!==H.ABORTED})(a.code)){const c=i.Pa.shift();os(i).N_(),await wy(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Iu(i)}})(s,e),Ey(s)&&Ty(s)}async function Bp(s,e){const n=Te(s);n.asyncQueue.verifyOperationInProgress(),oe(Ws,"RemoteStore received new credentials");const i=Qs(n);n.Ia.add(3),await Ta(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Tu(n)}async function w1(s,e){const n=Te(s);e?(n.Ia.delete(2),await Tu(n)):e||(n.Ia.add(2),await Ta(n),n.Aa.set("Unknown"))}function ro(s){return s.Va||(s.Va=(function(n,i,a){const c=Te(n);return c.ia(),new s1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:c1.bind(null,s),e_:h1.bind(null,s),n_:d1.bind(null,s),J_:f1.bind(null,s)}),s.da.push((async e=>{e?(s.Va.N_(),cd(s)?ud(s):s.Aa.set("Unknown")):(await s.Va.stop(),_y(s))}))),s.Va}function os(s){return s.ma||(s.ma=(function(n,i,a){const c=Te(n);return c.ia(),new i1(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),e_:g1.bind(null,s),n_:_1.bind(null,s),ea:y1.bind(null,s),ta:v1.bind(null,s)}),s.da.push((async e=>{e?(s.ma.N_(),await Iu(s)):(await s.ma.stop(),s.Pa.length>0&&(oe(Ws,`Stopping write stream with ${s.Pa.length} pending writes`),s.Pa=[]))}))),s.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,i,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,c){const d=Date.now()+i,p=new hd(e,n,d,a,c);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dd(s,e){if(Er("AsyncQueue",`${e}: ${s}`),to(s))return new se(H.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{static emptySet(e){return new Wi(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||me.comparator(n.key,i.key):(n,i)=>me.comparator(n.key,i.key),this.keyedMap=ta(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Wi;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.fa=new et(me.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):_e(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Yi{constructor(e,n,i,a,c,d,p,v,w){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=w}static fromInitialDocuments(e,n,i,a,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Yi(e,n,Wi.emptySet(n),d,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class T1{constructor(){this.queries=Hp(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const a=Te(n),c=a.queries;a.queries=Hp(),c.forEach(((d,p)=>{for(const v of p.wa)v.onError(i)}))})(this,new se(H.ABORTED,"Firestore shutting down"))}}function Hp(){return new Gs((s=>$g(s)),gu)}async function Iy(s,e){const n=Te(s);let i=3;const a=e.query;let c=n.queries.get(a);c?!c.Sa()&&e.ba()&&(i=2):(c=new E1,i=e.ba()?0:1);try{switch(i){case 0:c.ya=await n.onListen(a,!0);break;case 1:c.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(d){const p=dd(d,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(p)}n.queries.set(a,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&fd(n)}async function Sy(s,e){const n=Te(s),i=e.query;let a=3;const c=n.queries.get(i);if(c){const d=c.wa.indexOf(e);d>=0&&(c.wa.splice(d,1),c.wa.length===0?a=e.ba()?0:1:!c.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function I1(s,e){const n=Te(s);let i=!1;for(const a of e){const c=a.query,d=n.queries.get(c);if(d){for(const p of d.wa)p.Ca(a)&&(i=!0);d.ya=a}}i&&fd(n)}function S1(s,e,n){const i=Te(s),a=i.queries.get(e);if(a)for(const c of a.wa)c.onError(n);i.queries.delete(e)}function fd(s){s.Da.forEach((e=>{e.next()}))}var Mh,qp;(qp=Mh||(Mh={})).Fa="default",qp.Cache="cache";class Ay{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Yi(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Yi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Mh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e){this.key=e}}class xy{constructor(e){this.key=e}}class A1{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=xe(),this.mutatedKeys=xe(),this.Xa=Hg(e),this.eu=new Wi(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new $p,a=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,d=a,p=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,w=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((N,S)=>{const I=a.get(N),D=yu(this.query,S)?S:null,B=!!I&&this.mutatedKeys.has(I.key),G=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let $=!1;I&&D?I.data.isEqual(D.data)?B!==G&&(i.track({type:3,doc:D}),$=!0):this.iu(I,D)||(i.track({type:2,doc:D}),$=!0,(v&&this.Xa(D,v)>0||w&&this.Xa(D,w)<0)&&(p=!0)):!I&&D?(i.track({type:0,doc:D}),$=!0):I&&!D&&(i.track({type:1,doc:I}),$=!0,(v||w)&&(p=!0)),$&&(D?(d=d.add(D),c=G?c.add(N):c.delete(N)):(d=d.delete(N),c=c.delete(N)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const N=this.query.limitType==="F"?d.last():d.first();d=d.delete(N.key),c=c.delete(N.key),i.track({type:1,doc:N})}return{eu:d,ru:i,Ds:p,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((N,S)=>(function(D,B){const G=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:$})}};return G(D)-G(B)})(N.type,S.type)||this.Xa(N.doc,S.doc))),this.su(i),a=a!=null&&a;const p=n&&!a?this.ou():[],v=this.Za.size===0&&this.current&&!a?1:0,w=v!==this.Ya;return this.Ya=v,d.length!==0||w?{snapshot:new Yi(this.query,e.eu,c,d,e.mutatedKeys,v===0,w,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $p,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=xe(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new xy(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new Ny(i))})),n}uu(e){this.Ha=e.qs,this.Za=xe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Yi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const md="SyncEngine";class N1{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class x1{constructor(e){this.key=e,this.lu=!1}}class C1{constructor(e,n,i,a,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Gs((p=>$g(p)),gu),this.Tu=new Map,this.Iu=new Set,this.du=new et(me.comparator),this.Eu=new Map,this.Au=new rd,this.Ru={},this.Vu=new Map,this.mu=Xi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function P1(s,e,n=!0){const i=Dy(s);let a;const c=i.Pu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.cu()):a=await Cy(i,e,n,!0),a}async function R1(s,e){const n=Dy(s);await Cy(n,e,!0,!1)}async function Cy(s,e,n,i){const a=await XE(s.localStore,Xn(e)),c=a.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let p;return i&&(p=await k1(s,e,c,d==="current",a.resumeToken)),s.isPrimaryClient&&n&&yy(s.remoteStore,a),p}async function k1(s,e,n,i,a){s.gu=(S,I,D)=>(async function(G,$,Z,ee){let re=$.view.nu(Z);re.Ds&&(re=await Lp(G.localStore,$.query,!1).then((({documents:A})=>$.view.nu(A,re))));const de=ee&&ee.targetChanges.get($.targetId),Me=ee&&ee.targetMismatches.get($.targetId)!=null,Q=$.view.applyChanges(re,G.isPrimaryClient,de,Me);return Gp(G,$.targetId,Q._u),Q.snapshot})(s,S,I,D);const c=await Lp(s.localStore,e,!0),d=new A1(e,c.qs),p=d.nu(c.documents),v=Ea.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",a),w=d.applyChanges(p,s.isPrimaryClient,v);Gp(s,n,w._u);const N=new N1(e,n,d);return s.Pu.set(e,N),s.Tu.has(n)?s.Tu.get(n).push(e):s.Tu.set(n,[e]),w.snapshot}async function V1(s,e,n){const i=Te(s),a=i.Pu.get(e),c=i.Tu.get(a.targetId);if(c.length>1)return i.Tu.set(a.targetId,c.filter((d=>!gu(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Dh(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&ad(i.remoteStore,a.targetId),Oh(i,a.targetId)})).catch(eo)):(Oh(i,a.targetId),await Dh(i.localStore,a.targetId,!0))}async function D1(s,e){const n=Te(s),i=n.Pu.get(e),a=n.Tu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ad(n.remoteStore,i.targetId))}async function j1(s,e,n){const i=z1(s);try{const a=await(function(d,p){const v=Te(d),w=Ke.now(),N=p.reduce(((D,B)=>D.add(B.key)),xe());let S,I;return v.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let B=Tr(),G=xe();return v.Os.getEntries(D,N).next(($=>{B=$,B.forEach(((Z,ee)=>{ee.isValidDocument()||(G=G.add(Z))}))})).next((()=>v.localDocuments.getOverlayedDocuments(D,B))).next(($=>{S=$;const Z=[];for(const ee of p){const re=Xw(ee,S.get(ee.key).overlayedDocument);re!=null&&Z.push(new cs(ee.key,re,Mg(re.value.mapValue),En.exists(!0)))}return v.mutationQueue.addMutationBatch(D,w,Z,p)})).next(($=>{I=$;const Z=$.applyToLocalDocumentSet(S,G);return v.documentOverlayCache.saveOverlays(D,$.batchId,Z)}))})).then((()=>({batchId:I.batchId,changes:Wg(S)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(d,p,v){let w=d.Ru[d.currentUser.toKey()];w||(w=new et(Se)),w=w.insert(p,v),d.Ru[d.currentUser.toKey()]=w})(i,a.batchId,n),await Ia(i,a.changes),await Iu(i.remoteStore)}catch(a){const c=dd(a,"Failed to persist write");n.reject(c)}}async function Py(s,e){const n=Te(s);try{const i=await GE(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const d=n.Eu.get(c);d&&(Fe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.lu=!0:a.modifiedDocuments.size>0?Fe(d.lu,14607):a.removedDocuments.size>0&&(Fe(d.lu,42227),d.lu=!1))})),await Ia(n,i,e)}catch(i){await eo(i)}}function Wp(s,e,n){const i=Te(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Pu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&a.push(p.snapshot)})),(function(d,p){const v=Te(d);v.onlineState=p;let w=!1;v.queries.forEach(((N,S)=>{for(const I of S.wa)I.va(p)&&(w=!0)})),w&&fd(v)})(i.eventManager,e),a.length&&i.hu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function M1(s,e,n){const i=Te(s);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),c=a&&a.key;if(c){let d=new et(me.comparator);d=d.insert(c,bt.newNoDocument(c,Ee.min()));const p=xe().add(c),v=new wu(Ee.min(),new Map,new et(Se),d,p);await Py(i,v),i.du=i.du.remove(c),i.Eu.delete(e),pd(i)}else await Dh(i.localStore,e,!1).then((()=>Oh(i,e,n))).catch(eo)}async function O1(s,e){const n=Te(s),i=e.batch.batchId;try{const a=await WE(n.localStore,e);ky(n,i,null),Ry(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ia(n,a)}catch(a){await eo(a)}}async function L1(s,e,n){const i=Te(s);try{const a=await(function(d,p){const v=Te(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let N;return v.mutationQueue.lookupMutationBatch(w,p).next((S=>(Fe(S!==null,37113),N=S.keys(),v.mutationQueue.removeMutationBatch(w,S)))).next((()=>v.mutationQueue.performConsistencyCheck(w))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(w,N,p))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,N))).next((()=>v.localDocuments.getDocuments(w,N)))}))})(i.localStore,e);ky(i,e,n),Ry(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ia(i,a)}catch(a){await eo(a)}}function Ry(s,e){(s.Vu.get(e)||[]).forEach((n=>{n.resolve()})),s.Vu.delete(e)}function ky(s,e,n){const i=Te(s);let a=i.Ru[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),i.Ru[i.currentUser.toKey()]=a}}function Oh(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Tu.get(e))s.Pu.delete(i),n&&s.hu.pu(i,n);s.Tu.delete(e),s.isPrimaryClient&&s.Au.zr(e).forEach((i=>{s.Au.containsKey(i)||Vy(s,i)}))}function Vy(s,e){s.Iu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(ad(s.remoteStore,n),s.du=s.du.remove(e),s.Eu.delete(n),pd(s))}function Gp(s,e,n){for(const i of n)i instanceof Ny?(s.Au.addReference(i.key,e),F1(s,i)):i instanceof xy?(oe(md,"Document no longer in limbo: "+i.key),s.Au.removeReference(i.key,e),s.Au.containsKey(i.key)||Vy(s,i.key)):_e(19791,{yu:i})}function F1(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Iu.has(i)||(oe(md,"New document in limbo: "+n),s.Iu.add(i),pd(s))}function pd(s){for(;s.Iu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Iu.values().next().value;s.Iu.delete(e);const n=new me(We.fromString(e)),i=s.mu.next();s.Eu.set(i,new x1(n)),s.du=s.du.insert(n,i),yy(s.remoteStore,new Kr(Xn(Yh(n.path)),i,"TargetPurposeLimboResolution",fu.ue))}}async function Ia(s,e,n){const i=Te(s),a=[],c=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,v)=>{d.push(i.gu(v,e,n).then((w=>{var N;if((w||n)&&i.isPrimaryClient){const S=w?!w.fromCache:(N=n==null?void 0:n.targetChanges.get(v.targetId))===null||N===void 0?void 0:N.current;i.sharedClientState.updateQueryState(v.targetId,S?"current":"not-current")}if(w){a.push(w);const S=id.Es(v.targetId,w);c.push(S)}})))})),await Promise.all(d),i.hu.J_(a),await(async function(v,w){const N=Te(v);try{await N.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>q.forEach(w,(I=>q.forEach(I.Is,(D=>N.persistence.referenceDelegate.addReference(S,I.targetId,D))).next((()=>q.forEach(I.ds,(D=>N.persistence.referenceDelegate.removeReference(S,I.targetId,D)))))))))}catch(S){if(!to(S))throw S;oe(od,"Failed to update sequence numbers: "+S)}for(const S of w){const I=S.targetId;if(!S.fromCache){const D=N.Fs.get(I),B=D.snapshotVersion,G=D.withLastLimboFreeSnapshotVersion(B);N.Fs=N.Fs.insert(I,G)}}})(i.localStore,c))}async function b1(s,e){const n=Te(s);if(!n.currentUser.isEqual(e)){oe(md,"User change. New user:",e.toKey());const i=await fy(n.localStore,e);n.currentUser=e,(function(c,d){c.Vu.forEach((p=>{p.forEach((v=>{v.reject(new se(H.CANCELLED,d))}))})),c.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ia(n,i.Bs)}}function U1(s,e){const n=Te(s),i=n.Eu.get(e);if(i&&i.lu)return xe().add(i.key);{let a=xe();const c=n.Tu.get(e);if(!c)return a;for(const d of c){const p=n.Pu.get(d);a=a.unionWith(p.view.tu)}return a}}function Dy(s){const e=Te(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Py.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M1.bind(null,e),e.hu.J_=I1.bind(null,e.eventManager),e.hu.pu=S1.bind(null,e.eventManager),e}function z1(s){const e=Te(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L1.bind(null,e),e}class cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Eu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return qE(this.persistence,new BE,e.initialUser,this.serializer)}Du(e){return new dy(sd.Vi,this.serializer)}bu(e){return new JE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cu.provider={build:()=>new cu};class B1 extends cu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Fe(this.persistence.referenceDelegate instanceof lu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new xE(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new dy((i=>lu.Vi(i,n)),this.serializer)}}class Lh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Wp(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=b1.bind(null,this.syncEngine),await w1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new T1})()}createDatastore(e){const n=Eu(e.databaseInfo.databaseId),i=(function(c){return new r1(c)})(e.databaseInfo);return(function(c,d,p,v){return new a1(c,d,p,v)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,c,d,p){return new u1(i,a,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Wp(this.syncEngine,n,0)),(function(){return Up.C()?new Up:new ZE})())}createSyncEngine(e,n){return(function(a,c,d,p,v,w,N){const S=new C1(a,c,d,p,v,w);return N&&(S.fu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const c=Te(a);oe(Ws,"RemoteStore shutting down."),c.Ia.add(5),await Ta(c),c.Ea.shutdown(),c.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Lh.provider={build:()=>new Lh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="FirestoreClient";class $1{constructor(e,n,i,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=Ft.UNAUTHENTICATED,this.clientId=qh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{oe(as,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(oe(as,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=dd(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ph(s,e){s.asyncQueue.verifyOperationInProgress(),oe(as,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await fy(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>{ts("Terminating Firestore due to IndexedDb database deletion"),s.terminate().then((()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{ts("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),s._offlineComponents=e}async function Qp(s,e){s.asyncQueue.verifyOperationInProgress();const n=await H1(s);oe(as,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>Bp(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>Bp(e.remoteStore,a))),s._onlineComponents=e}async function H1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){oe(as,"Using user provided OfflineComponentProvider");try{await ph(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===H.FAILED_PRECONDITION||a.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;ts("Error using user provided cache. Falling back to memory cache: "+n),await ph(s,new cu)}}else oe(as,"Using default OfflineComponentProvider"),await ph(s,new B1(void 0));return s._offlineComponents}async function My(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(oe(as,"Using user provided OnlineComponentProvider"),await Qp(s,s._uninitializedComponentsProvider._online)):(oe(as,"Using default OnlineComponentProvider"),await Qp(s,new Lh))),s._onlineComponents}function q1(s){return My(s).then((e=>e.syncEngine))}async function Fh(s){const e=await My(s),n=e.eventManager;return n.onListen=P1.bind(null,e.syncEngine),n.onUnlisten=V1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=R1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D1.bind(null,e.syncEngine),n}function W1(s,e,n={}){const i=new Zr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,v,w){const N=new jy({next:I=>{N.Ou(),d.enqueueAndForget((()=>Sy(c,S))),I.fromCache&&v.source==="server"?w.reject(new se(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(I)},error:I=>w.reject(I)}),S=new Ay(p,N,{includeMetadataChanges:!0,ka:!0});return Iy(c,S)})(await Fh(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="firestore.googleapis.com",Xp=!0;class Yp{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ly,this.ssl=Xp}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Xp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AE)throw new se(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Oy((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new se(H.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new se(H.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new se(H.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Su{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new ew;switch(i.type){case"firstParty":return new sw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Kp.get(n);i&&(oe("ComponentProvider","Removing Datastore"),Kp.delete(n),i.terminate())})(this),Promise.resolve()}}function G1(s,e,n,i={}){var a;s=wn(s,Su);const c=Bh(e),d=s._getSettings(),p=Object.assign(Object.assign({},d),{emulatorOptions:s._getEmulatorOptions()}),v=`${e}:${n}`;c&&(x_(`https://${v}`),k_("Firestore",!0)),d.host!==Ly&&d.host!==v&&ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w=Object.assign(Object.assign({},d),{host:v,ssl:c,emulatorOptions:i});if(!Zl(w,p)&&(s._setSettings(w),i.mockUserToken)){let N,S;if(typeof i.mockUserToken=="string")N=i.mockUserToken,S=Ft.MOCK_USER;else{N=C_(i.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new se(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Ft(I)}s._authCredentials=new tw(new Tg(N,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class it{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(_a(n,it._jsonSchema))return new it(e,i||null,new me(We.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:ct("string",it._jsonSchemaVersion),referencePath:ct("string")};class es extends hs{constructor(e,n,i){super(e,n,Yh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new me(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function Fy(s,e,...n){if(s=er(s),Sg("collection","path",e),s instanceof Su){const i=We.fromString(e,...n);return cp(i),new es(s,null,i)}{if(!(s instanceof it||s instanceof es))throw new se(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(We.fromString(e,...n));return cp(i),new es(s.firestore,null,i)}}function gd(s,e,...n){if(s=er(s),arguments.length===1&&(e=qh.newId()),Sg("doc","path",e),s instanceof Su){const i=We.fromString(e,...n);return up(i),new it(s,null,new me(i))}{if(!(s instanceof it||s instanceof es))throw new se(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(We.fromString(e,...n));return up(i),new it(s.firestore,s instanceof es?s.converter:null,new me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="AsyncQueue";class Zp{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new py(this,"async_queue_retry"),this.oc=()=>{const i=mh();i&&oe(Jp,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=mh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=mh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Zr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!to(e))throw e;oe(Jp,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Er("INTERNAL UNHANDLED ERROR: ",eg(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=hd.createAndSchedule(this,e,n,i,(c=>this.lc(c)));return this.ec.push(a),a}ac(){this.tc&&_e(47125,{hc:eg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function eg(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of i)if(c in a&&typeof a[c]=="function")return!0;return!1})(s,["next","error","complete"])}class ls extends Su{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new Zp,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zp(e),this._firestoreClient=void 0,await e}}}function Q1(s,e){const n=typeof s=="object"?s:z0(),i=typeof s=="string"?s:ru,a=O0(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=A_("firestore");c&&G1(a,...c)}return a}function yd(s){if(s._terminated)throw new se(H.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||K1(s),s._firestoreClient}function K1(s){var e,n,i;const a=s._freezeSettings(),c=(function(p,v,w,N){return new ww(p,v,w,N.host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,Oy(N.experimentalLongPollingOptions),N.useFetchStreams,N.isUsingEmulator)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new $1(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&(function(p){const v=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(v),_online:v}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Rt.fromBase64String(e))}catch(n){throw new se(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_a(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:ct("string",_n._jsonSchemaVersion),bytes:ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jn._jsonSchemaVersion}}static fromJSON(e){if(_a(e,Jn._jsonSchema))return new Jn(e.latitude,e.longitude)}}Jn._jsonSchemaVersion="firestore/geoPoint/1.0",Jn._jsonSchema={type:ct("string",Jn._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_a(e,Zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zn(e.vectorValues);throw new se(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:ct("string",Zn._jsonSchemaVersion),vectorValues:ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=/^__.*__$/;class Y1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new wa(e,this.data,n,this.fieldTransforms)}}class by{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Uy(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:s})}}class vd{constructor(e,n,i,a,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.fc(e),a}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return hu(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Uy(this.Ec)&&X1.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class J1{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Eu(e)}Dc(e,n,i,a=!1){return new vd({Ec:e,methodName:n,bc:i,path:Pt.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xu(s){const e=s._freezeSettings(),n=Eu(s._databaseId);return new J1(s._databaseId,!!e.ignoreUndefinedProperties,n)}function zy(s,e,n,i,a,c={}){const d=s.Dc(c.merge||c.mergeFields?2:0,e,n,a);wd("Data must be an object, but it was:",d,i);const p=By(i,d);let v,w;if(c.merge)v=new ln(d.fieldMask),w=d.fieldTransforms;else if(c.mergeFields){const N=[];for(const S of c.mergeFields){const I=bh(e,S,n);if(!d.contains(I))throw new se(H.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Hy(N,I)||N.push(I)}v=new ln(N),w=d.fieldTransforms.filter((S=>v.covers(S.field)))}else v=null,w=d.fieldTransforms;return new Y1(new Zt(p),v,w)}class Cu extends Nu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cu}}class _d extends Nu{_toFieldTransform(e){return new Ww(e.path,new ga)}isEqual(e){return e instanceof _d}}function Z1(s,e,n,i){const a=s.Dc(1,e,n);wd("Data must be an object, but it was:",a,i);const c=[],d=Zt.empty();us(i,((v,w)=>{const N=Ed(e,v,n);w=er(w);const S=a.gc(N);if(w instanceof Cu)c.push(N);else{const I=Sa(w,S);I!=null&&(c.push(N),d.set(N,I))}}));const p=new ln(c);return new by(d,p,a.fieldTransforms)}function eT(s,e,n,i,a,c){const d=s.Dc(1,e,n),p=[bh(e,i,n)],v=[a];if(c.length%2!=0)throw new se(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)p.push(bh(e,c[I])),v.push(c[I+1]);const w=[],N=Zt.empty();for(let I=p.length-1;I>=0;--I)if(!Hy(w,p[I])){const D=p[I];let B=v[I];B=er(B);const G=d.gc(D);if(B instanceof Cu)w.push(D);else{const $=Sa(B,G);$!=null&&(w.push(D),N.set(D,$))}}const S=new ln(w);return new by(N,S,d.fieldTransforms)}function tT(s,e,n,i=!1){return Sa(n,s.Dc(i?4:3,e))}function Sa(s,e){if($y(s=er(s)))return wd("Unsupported field value:",e,s),By(s,e);if(s instanceof Nu)return(function(i,a){if(!Uy(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,a){const c=[];let d=0;for(const p of i){let v=Sa(p,a.yc(d));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),d++}return{arrayValue:{values:c}}})(s,e)}return(function(i,a){if((i=er(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $w(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ke.fromDate(i);return{timestampValue:au(a.serializer,c)}}if(i instanceof Ke){const c=new Ke(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:au(a.serializer,c)}}if(i instanceof Jn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _n)return{bytesValue:sy(a.serializer,i._byteString)};if(i instanceof it){const c=a.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw a.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:nd(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Zn)return(function(d,p){return{mapValue:{fields:{[Dg]:{stringValue:jg},[su]:{arrayValue:{values:d.toArray().map((w=>{if(typeof w!="number")throw p.wc("VectorValues must only contain numeric values.");return Jh(p.serializer,w)}))}}}}}})(i,a);throw a.wc(`Unsupported field value: ${du(i)}`)})(s,e)}function By(s,e){const n={};return xg(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(s,((i,a)=>{const c=Sa(a,e.Vc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function $y(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ke||s instanceof Jn||s instanceof _n||s instanceof it||s instanceof Nu||s instanceof Zn)}function wd(s,e,n){if(!$y(n)||!Ag(n)){const i=du(n);throw i==="an object"?e.wc(s+" a custom object"):e.wc(s+" "+i)}}function bh(s,e,n){if((e=er(e))instanceof Au)return e._internalPath;if(typeof e=="string")return Ed(s,e);throw hu("Field path arguments must be of type string or ",s,!1,void 0,n)}const nT=new RegExp("[~\\*/\\[\\]]");function Ed(s,e,n){if(e.search(nT)>=0)throw hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Au(...e.split("."))._internalPath}catch{throw hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function hu(s,e,n,i,a){const c=i&&!i.isEmpty(),d=a!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(c||d)&&(v+=" (found",c&&(v+=` in field ${i}`),d&&(v+=` in document ${a}`),v+=")"),new se(H.INVALID_ARGUMENT,p+s+v)}function Hy(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,i,a,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Td("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rT extends qy{data(){return super.data()}}function Td(s,e){return typeof e=="string"?Ed(s,e):e instanceof Au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new se(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Id{}class Gy extends Id{}function Qy(s,e,...n){let i=[];e instanceof Id&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((v=>v instanceof Ad)).length,p=c.filter((v=>v instanceof Sd)).length;if(d>1||d>0&&p>0)throw new se(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class Sd extends Gy{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Sd(e,n,i)}_apply(e){const n=this._parse(e);return Xy(e._query,n),new hs(e.firestore,e.converter,xh(e._query,n))}_parse(e){const n=xu(e.firestore);return(function(c,d,p,v,w,N,S){let I;if(w.isKeyField()){if(N==="array-contains"||N==="array-contains-any")throw new se(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${N}' queries on documentId().`);if(N==="in"||N==="not-in"){rg(S,N);const B=[];for(const G of S)B.push(ng(v,c,G));I={arrayValue:{values:B}}}else I=ng(v,c,S)}else N!=="in"&&N!=="not-in"&&N!=="array-contains-any"||rg(S,N),I=tT(p,d,S,N==="in"||N==="not-in");return ut.create(w,N,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ad extends Id{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ad(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let d=a;const p=c.getFlattenedFilters();for(const v of p)Xy(d,v),d=xh(d,v)})(e._query,n),new hs(e.firestore,e.converter,xh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nd extends Gy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Nd(e,n)}_apply(e){const n=(function(a,c,d){if(a.startAt!==null)throw new se(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new se(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pa(c,d)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(a,c){const d=a.explicitOrderBy.concat([c]);return new no(a.path,a.collectionGroup,d,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Ky(s,e="asc"){const n=e,i=Td("orderBy",s);return Nd._create(i,n)}function ng(s,e,n){if(typeof(n=er(n))=="string"){if(n==="")throw new se(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bg(e)&&n.indexOf("/")!==-1)throw new se(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(We.fromString(n));if(!me.isDocumentKey(i))throw new se(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vp(s,new me(i))}if(n instanceof it)return vp(s,n._key);throw new se(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${du(n)}.`)}function rg(s,e){if(!Array.isArray(s)||s.length===0)throw new se(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xy(s,e){const n=(function(a,c){for(const d of a)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sT{convertValue(e,n="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return us(e,((a,c)=>{i[a]=this.convertValue(c,n)})),i}convertVectorValue(e){var n,i,a;const c=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[su].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map((d=>st(d.doubleValue)));return new Zn(c)}convertGeoPoint(e){return new Jn(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=pu(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(da(e));default:return null}}convertTimestamp(e){const n=rs(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=We.fromString(e);Fe(cy(i),9688,{name:e});const a=new fa(i.get(1),i.get(3)),c=new me(i.popFirst(5));return a.isEqual(n)||Er(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class ra{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $s extends qy{constructor(e,n,i,a,c,d){super(e,n,i,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Td("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$s._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$s._jsonSchemaVersion="firestore/documentSnapshot/1.0",$s._jsonSchema={type:ct("string",$s._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};class Yl extends $s{data(e={}){return super.data(e)}}class Hs{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new ra(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Yl(this._firestore,this._userDataWriter,i.key,i,new ra(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((p=>{const v=new Yl(a._firestore,a._userDataWriter,p.doc.key,p.doc,new ra(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const v=new Yl(a._firestore,a._userDataWriter,p.doc.key,p.doc,new ra(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let w=-1,N=-1;return p.type!==0&&(w=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),N=d.indexOf(p.doc.key)),{type:iT(p.type),doc:v,oldIndex:w,newIndex:N}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iT(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}Hs._jsonSchemaVersion="firestore/querySnapshot/1.0",Hs._jsonSchema={type:ct("string",Hs._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};class xd extends sT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function Jy(s){s=wn(s,hs);const e=wn(s.firestore,ls),n=yd(e),i=new xd(e);return Wy(s._query),W1(n,s._query).then((a=>new Hs(e,i,s,a)))}function oT(s,e,n){s=wn(s,it);const i=wn(s.firestore,ls),a=Yy(s.converter,e);return Pu(i,[zy(xu(i),"setDoc",s._key,a,s.converter!==null,n).toMutation(s._key,En.none())])}function aT(s,e,n,...i){s=wn(s,it);const a=wn(s.firestore,ls),c=xu(a);let d;return d=typeof(e=er(e))=="string"||e instanceof Au?eT(c,"updateDoc",s._key,e,n,i):Z1(c,"updateDoc",s._key,e),Pu(a,[d.toMutation(s._key,En.exists(!0))])}function lT(s){return Pu(wn(s.firestore,ls),[new Zh(s._key,En.none())])}function uT(s,e){const n=wn(s.firestore,ls),i=gd(s),a=Yy(s.converter,e);return Pu(n,[zy(xu(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,En.exists(!1))]).then((()=>i))}function Zy(s,...e){var n,i,a;s=er(s);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||tg(e[d])||(c=e[d++]);const p={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(tg(e[d])){const S=e[d];e[d]=(n=S.next)===null||n===void 0?void 0:n.bind(S),e[d+1]=(i=S.error)===null||i===void 0?void 0:i.bind(S),e[d+2]=(a=S.complete)===null||a===void 0?void 0:a.bind(S)}let v,w,N;if(s instanceof it)w=wn(s.firestore,ls),N=Yh(s._key.path),v={next:S=>{e[d]&&e[d](cT(w,s,S))},error:e[d+1],complete:e[d+2]};else{const S=wn(s,hs);w=wn(S.firestore,ls),N=S._query;const I=new xd(w);v={next:D=>{e[d]&&e[d](new Hs(w,I,S,D))},error:e[d+1],complete:e[d+2]},Wy(s._query)}return(function(I,D,B,G){const $=new jy(G),Z=new Ay(D,$,B);return I.asyncQueue.enqueueAndForget((async()=>Iy(await Fh(I),Z))),()=>{$.Ou(),I.asyncQueue.enqueueAndForget((async()=>Sy(await Fh(I),Z)))}})(yd(w),N,p,v)}function Pu(s,e){return(function(i,a){const c=new Zr;return i.asyncQueue.enqueueAndForget((async()=>j1(await q1(i),a,c))),c.promise})(yd(s),e)}function cT(s,e,n){const i=n.docs.get(e._key),a=new xd(s);return new $s(s,a,e._key,i,new ra(n.hasPendingWrites,n.fromCache),e.converter)}function Cd(){return new _d("serverTimestamp")}(function(e,n=!0){(function(a){Zi=a})(U0),tu(new ua("firestore",((i,{instanceIdentifier:a,options:c})=>{const d=i.getProvider("app").getImmediate(),p=new ls(new nw(i.getProvider("auth-internal")),new iw(d,i.getProvider("app-check-internal")),(function(w,N){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new se(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(w.options.projectId,N)})(d,a),d);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),qi(sp,ip,e),qi(sp,ip,"esm2017")})();const hT=[{id:"match-1",matchNumber:1,home:"feel-united",away:"dhurandhars",date:"2025-01-29",time:"17:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-2",matchNumber:2,home:"userflow",away:"goaldiggers",date:"2025-01-29",time:"17:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-3",matchNumber:3,home:"userflow",away:"dhurandhars",date:"2025-01-29",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-4",matchNumber:4,home:"goaldiggers",away:"dhurandhars",date:"2025-01-29",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-5",matchNumber:5,home:"feel-united",away:"userflow",date:"2025-01-30",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-6",matchNumber:6,home:"goaldiggers",away:"feel-united",date:"2025-01-30",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-7",matchNumber:7,home:"dhurandhars",away:"userflow",date:"2025-01-30",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-8",matchNumber:8,home:"goaldiggers",away:"userflow",date:"2025-01-30",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-9",matchNumber:9,home:"dhurandhars",away:"feel-united",date:"2025-01-30",time:"20:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-10",matchNumber:10,home:"feel-united",away:"goaldiggers",date:"2025-02-02",time:"18:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-11",matchNumber:11,home:"dhurandhars",away:"goaldiggers",date:"2025-02-02",time:"18:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-12",matchNumber:12,home:"userflow",away:"feel-united",date:"2025-02-02",time:"19:00",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!1},{id:"match-13",matchNumber:13,home:"tbd",away:"tbd",date:"2025-02-02",time:"19:30",scoreHome:0,scoreAway:0,status:"upcoming",goals:[],isFinal:!0}],ev=s=>new Date(s).toLocaleDateString("en-IN",{weekday:"short",month:"short",day:"numeric"}),dT=s=>{const[e,n]=s.split(":"),i=parseInt(e),a=i>=12?"PM":"AM";return`${i%12||12}:${n} ${a}`},fT={apiKey:"AIzaSyAYRukNJGOvVmL2jRAMgLtKkDzU7c6wo88",authDomain:"republic-cup-live.firebaseapp.com",projectId:"republic-cup-live",storageBucket:"republic-cup-live.firebasestorage.app",messagingSenderId:"642499294047",appId:"1:642499294047:web:f5a8b111b79bb8673abcea"},mT=dg(fT),Ru=Q1(mT),tv=Fy(Ru,"matches"),Pd=Fy(Ru,"predictions"),pT=async()=>{try{if((await Jy(tv)).empty){console.log("Seeding matches collection...");for(const e of hT)await oT(gd(Ru,"matches",e.id),{...e,createdAt:Cd()});return console.log("Matches seeded successfully!"),!0}return!1}catch(s){return console.error("Error seeding matches:",s),!1}},gT=s=>{const e=Qy(tv,Ky("matchNumber"));return Zy(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)},n=>{console.error("Error subscribing to matches:",n)})},Us=async(s,e)=>{try{const n=gd(Ru,"matches",s);return await aT(n,{...e,updatedAt:Cd()}),!0}catch(n){return console.error("Error updating match:",n),!1}},yT=async s=>{try{return await uT(Pd,{...s,submittedAt:Cd()}),!0}catch(e){return console.error("Error submitting prediction:",e),!1}},vT=s=>{const e=Qy(Pd,Ky("submittedAt","desc"));return Zy(e,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));s(i)})},_T=async()=>{try{const e=(await Jy(Pd)).docs.map(n=>lT(n.ref));return await Promise.all(e),console.log("All predictions deleted"),!0}catch(s){return console.error("Error deleting predictions:",s),!1}},It={"feel-united":{id:"feel-united",name:"Feel United",shortName:"FEE",color:"#FFFFFF",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249520/spitha_prod_uploads/2026_01/feel_united_1769249519167.webp",players:["Ninad","Aditya Thakur","Umair","Sagar Awasthi","Sandipan Bala","Gahan","Rishab Khanna"]},dhurandhars:{id:"dhurandhars",name:"Dhurandhars",shortName:"DHU",color:"#000000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249469/spitha_prod_uploads/2026_01/durandhars_1769249467581.webp",players:["Sagar Singh","Raghu","Sukhpal","Mayank","Manish Pandey","Bharath Kumar","Shashank"]},goaldiggers:{id:"goaldiggers",name:"The Goaldiggers",shortName:"GDG",color:"#87CEEB",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249929/spitha_prod_uploads/2026_01/the_goaldiggers2_1769249927876.webp",players:["Parth Jhawar","Abdul Rehman","Pratham P","Durgesh Suthar","Navdeep","Rajendra Ranka","Dhrouv Pujari"]},userflow:{id:"userflow",name:"Userflow United",shortName:"UFU",color:"#FF0000",logo:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249558/spitha_prod_uploads/2026_01/userflow_united_1769249557427.webp",players:["Sumedh Zope","Avaneesh Kulkarni","Kushal","Jalaj Varshney","Anurag Kumar Singh","Sandeep Xavier","Hriday Bhatia"]}},nv=ve.createContext(null),Ir=()=>{const s=ve.useContext(nv);if(!s)throw new Error("useApp must be used within AppProvider");return s},wT=({children:s})=>{const[e,n]=ve.useState([]),[i,a]=ve.useState([]),[c,d]=ve.useState(!1),[p,v]=ve.useState(!0),[w,N]=ve.useState("matches");ve.useEffect(()=>{localStorage.getItem("republic-cup-admin")==="true"&&d(!0)},[]),ve.useEffect(()=>{let Z,ee;return(async()=>{await pT(),Z=gT(de=>{n(de),v(!1)}),ee=vT(de=>{a(de)})})(),()=>{Z&&Z(),ee&&ee()}},[]);const S=ve.useCallback(Z=>Z==="5555"?(d(!0),localStorage.setItem("republic-cup-admin","true"),!0):!1,[]),I=ve.useCallback(()=>{d(!1),localStorage.removeItem("republic-cup-admin")},[]),D=ve.useCallback(()=>{const Z={};return Object.keys(It).forEach(ee=>{Z[ee]={teamId:ee,played:0,won:0,drawn:0,lost:0,goalsFor:0,goalsAgainst:0,goalDifference:0,points:0}}),e.filter(ee=>ee.status==="ft"&&!ee.isFinal).forEach(ee=>{const re=ee.home,de=ee.away,Me=ee.scoreHome||0,Q=ee.scoreAway||0;!Z[re]||!Z[de]||(Z[re].played++,Z[de].played++,Z[re].goalsFor+=Me,Z[re].goalsAgainst+=Q,Z[de].goalsFor+=Q,Z[de].goalsAgainst+=Me,Me>Q?(Z[re].won++,Z[re].points+=3,Z[de].lost++):Me<Q?(Z[de].won++,Z[de].points+=3,Z[re].lost++):(Z[re].drawn++,Z[de].drawn++,Z[re].points++,Z[de].points++))}),Object.values(Z).map(ee=>({...ee,goalDifference:ee.goalsFor-ee.goalsAgainst})).sort((ee,re)=>re.points!==ee.points?re.points-ee.points:re.goalDifference!==ee.goalDifference?re.goalDifference-ee.goalDifference:re.goalsFor-ee.goalsFor)},[e]),B=ve.useCallback(()=>{const Z={};return e.filter(ee=>ee.status==="ft").forEach(ee=>{(ee.goals||[]).forEach(re=>{const de=`${re.player}-${re.team}`;Z[de]||(Z[de]={player:re.player,team:re.team,goals:0}),Z[de].goals++})}),Object.values(Z).sort((ee,re)=>re.goals-ee.goals).slice(0,10)},[e]),G=ve.useCallback(()=>e.filter(Z=>Z.status==="upcoming"&&Z.home!=="tbd"),[e]),$={matches:e,predictions:i,isAdmin:c,loading:p,activeTab:w,setActiveTab:N,loginAdmin:S,logoutAdmin:I,calculateTable:D,calculateTopScorers:B,getUpcomingMatches:G};return g.jsx(nv.Provider,{value:$,children:s})},ET=({onClose:s})=>{const{loginAdmin:e}=Ir(),[n,i]=ve.useState(["","","",""]),[a,c]=ve.useState(!1),[d,p]=ve.useState(!1),v=[ve.useRef(),ve.useRef(),ve.useRef(),ve.useRef()];ve.useEffect(()=>{var I;(I=v[0].current)==null||I.focus()},[]);const w=(I,D)=>{var G;if(D&&!/^\d$/.test(D))return;const B=[...n];if(B[I]=D,i(B),c(!1),D&&I<3&&((G=v[I+1].current)==null||G.focus()),D&&I===3){const $=B.join("");setTimeout(()=>{e($)?s():(c(!0),p(!0),setTimeout(()=>{var Z;p(!1),i(["","","",""]),(Z=v[0].current)==null||Z.focus()},500))},100)}},N=(I,D)=>{var B;D.key==="Backspace"&&!n[I]&&I>0&&((B=v[I-1].current)==null||B.focus())},S=I=>{I.preventDefault();const D=I.clipboardData.getData("text").slice(0,4);if(/^\d+$/.test(D)){const B=D.split("").concat(["","","",""]).slice(0,4);i(B),B[3]&&setTimeout(()=>{e(B.join(""))?s():(c(!0),p(!0),setTimeout(()=>{var G;p(!1),i(["","","",""]),(G=v[0].current)==null||G.focus()},500))},100)}};return g.jsx("div",{className:"modal-overlay",onClick:s,children:g.jsxs("div",{className:`modal-content pin-modal ${d?"shake":""}`,onClick:I=>I.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{children:"Admin Access"}),g.jsx("button",{className:"modal-close",onClick:s,children:""})]}),g.jsxs("div",{className:"pin-content",children:[g.jsx("p",{className:"pin-label",children:"Enter 4-digit PIN"}),g.jsx("div",{className:"pin-inputs",onPaste:S,children:n.map((I,D)=>g.jsx("input",{ref:v[D],type:"password",inputMode:"numeric",maxLength:1,value:I,onChange:B=>w(D,B.target.value),onKeyDown:B=>N(D,B),className:`pin-input ${a?"error":""}`,autoComplete:"off"},D))}),a&&g.jsx("p",{className:"pin-error",children:"Incorrect PIN. Try again."})]})]})})},TT=()=>{const{isAdmin:s,logoutAdmin:e}=Ir(),[n,i]=ve.useState(!1),[a,c]=ve.useState(0),d=()=>{const p=a+1;c(p),p>=3&&(i(!0),c(0)),setTimeout(()=>c(0),2e3)};return g.jsxs(g.Fragment,{children:[g.jsxs("header",{className:"header",children:[g.jsxs("div",{className:"header-content",children:[g.jsxs("div",{className:"header-brand",children:[g.jsx("img",{src:"https://res.cloudinary.com/scapiacards/image/upload/q_85/v1769249500/spitha_prod_uploads/2026_01/logo_1769249499164.webp",alt:"Scapia Offside",className:"header-logo"}),g.jsxs("div",{className:"header-title-group",children:[g.jsx("h1",{className:"header-title",children:"SCAPIA OFFSIDE"}),g.jsx("span",{className:"header-year",children:"2026"})]})]}),g.jsxs("div",{className:"header-actions",children:[s&&g.jsx("button",{className:"admin-badge",onClick:e,children:"ADMIN"}),g.jsx("span",{className:"version-tag",onClick:d,children:"v1.0"})]})]}),s&&g.jsx("div",{className:"admin-banner",children:"Admin Mode Active - You can edit matches"})]}),n&&g.jsx(ET,{onClose:()=>i(!1)})]})},IT=()=>{const{activeTab:s,setActiveTab:e,matches:n}=Ir(),i=n.filter(c=>c.status==="live").length,a=[{id:"matches",label:"Matches",icon:g.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("circle",{cx:"12",cy:"12",r:"10"}),g.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}),g.jsx("path",{d:"M2 12h20"})]}),badge:i>0?i:null},{id:"table",label:"Table",icon:g.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("path",{d:"M3 3h18v18H3zM3 9h18M3 15h18M9 3v18"})})},{id:"polls",label:"Polls",icon:g.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("path",{d:"M18 20V10M12 20V4M6 20v-6"})})},{id:"rules",label:"Rules",icon:g.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),g.jsx("polyline",{points:"14 2 14 8 20 8"}),g.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),g.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),g.jsx("polyline",{points:"10 9 9 9 8 9"})]})}];return g.jsx("nav",{className:"bottom-nav",children:g.jsx("div",{className:"nav-content",children:a.map(c=>g.jsxs("button",{className:`nav-item ${s===c.id?"active":""}`,onClick:()=>e(c.id),children:[g.jsxs("div",{className:"nav-icon-wrapper",children:[g.jsx("span",{className:"nav-icon",children:c.icon}),c.badge&&g.jsx("span",{className:"nav-badge",children:c.badge})]}),g.jsx("span",{className:"nav-label",children:c.label})]},c.id))})})},ST=({teamId:s,otherTeamId:e,isHome:n,onSelect:i,onClose:a})=>{const c=It[s],[d,p]=ve.useState(null),[v,w]=ve.useState("scorer");if(!c)return null;const N=D=>{D==="Own Goal"?i(D,s,null):(p(D),w("assist"))},S=D=>{i(d,s,D)},I=((c==null?void 0:c.players)||[]).filter(D=>D!==d).map(D=>({name:D,team:s,teamName:c.shortName}));return g.jsx("div",{className:"modal-overlay",onClick:a,children:g.jsxs("div",{className:"modal-content goal-modal",onClick:D=>D.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{children:v==="scorer"?"Who Scored?":"Who Assisted?"}),g.jsx("button",{className:"modal-close",onClick:a,children:""})]}),g.jsx("div",{className:"goal-modal-content",children:v==="scorer"?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"goal-team-header",children:[g.jsx("img",{src:c.logo,alt:c.name,className:"goal-team-logo"}),g.jsx("span",{className:"goal-team-name",children:c.name})]}),g.jsxs("div",{className:"player-grid",children:[c.players.map(D=>g.jsxs("button",{className:"player-btn",onClick:()=>N(D),children:[g.jsx("span",{className:"player-initial",children:D.charAt(0)}),g.jsx("span",{className:"player-name",children:D})]},D)),g.jsxs("button",{className:"player-btn own-goal",onClick:()=>N("Own Goal"),children:[g.jsx("span",{className:"player-initial",children:"OG"}),g.jsx("span",{className:"player-name",children:"Own Goal"})]})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"assist-header",children:g.jsxs("span",{className:"scorer-info",children:["Goal: ",g.jsx("strong",{children:d})]})}),g.jsxs("div",{className:"player-grid assist-grid",children:[g.jsxs("button",{className:"player-btn no-assist",onClick:()=>S(null),children:[g.jsx("span",{className:"player-initial",children:"-"}),g.jsx("span",{className:"player-name",children:"No Assist"})]}),I.map(D=>g.jsxs("button",{className:"player-btn",onClick:()=>S(D.name),children:[g.jsx("span",{className:"player-initial",children:D.name.charAt(0)}),g.jsx("span",{className:"player-name",children:D.name}),g.jsx("span",{className:"player-team-tag",children:D.teamName})]},`${D.name}-${D.team}`))]}),g.jsx("button",{className:"back-btn",onClick:()=>w("scorer"),children:" Back to scorer"})]})})]})})},AT=({match:s,onClose:e})=>{var Me;const{predictions:n}=Ir(),[i,a]=ve.useState(s.status),[c,d]=ve.useState(null),[p,v]=ve.useState(!1),[w,N]=ve.useState(s.manOfTheMatch||""),S=It[s.home]||{name:"TBD",shortName:"TBD"},I=It[s.away]||{name:"TBD",shortName:"TBD"},D=async Q=>{v(!0),await Us(s.id,{status:Q}),a(Q),v(!1)},B=async()=>{window.confirm("Are you sure you want to reset the score to 0-0?")&&(v(!0),await Us(s.id,{scoreHome:0,scoreAway:0,goals:[]}),v(!1))},G=async(Q,A,T,x)=>{v(!0);const R={player:Q,team:A,assist:T||null,timestamp:new Date().toISOString()},V=[...s.goals||[],R],M=V.filter(ze=>ze.team===s.home).length,P=V.filter(ze=>ze.team===s.away).length;await Us(s.id,{goals:V,scoreHome:M,scoreAway:P}),d(null),v(!1)},$=async Q=>{const A=Q?s.home:s.away;if((s.goals||[]).filter(P=>P.team===A).length===0)return;const x=s.goals.map(P=>P.team).lastIndexOf(A),R=s.goals.filter((P,ze)=>ze!==x),V=R.filter(P=>P.team===s.home).length,M=R.filter(P=>P.team===s.away).length;v(!0),await Us(s.id,{goals:R,scoreHome:V,scoreAway:M}),v(!1)},Z=ve.useMemo(()=>n.filter(Q=>Q.matchId===s.id).sort((Q,A)=>{var R,V,M,P;const T=((V=(R=Q.submittedAt)==null?void 0:R.toDate)==null?void 0:V.call(R))||new Date(Q.submittedAt),x=((P=(M=A.submittedAt)==null?void 0:M.toDate)==null?void 0:P.call(M))||new Date(A.submittedAt);return T-x}),[n,s.id]),ee=ve.useMemo(()=>{const Q=new Set;return Z.map(A=>{var R;const T=(R=A.userName)==null?void 0:R.toLowerCase().trim(),x=!Q.has(T);return Q.add(T),{...A,isFirstEntry:x}})},[Z]),re=ve.useMemo(()=>{const Q={};return(s.goals||[]).forEach(A=>{const T=`${A.player}-${A.team}`;Q[T]||(Q[T]={player:A.player,team:A.team,goals:0}),Q[T].goals++}),Object.values(Q).sort((A,T)=>T.goals-A.goals)},[s.goals]),de=async()=>{if(!w){alert("Please select a Man of the Match");return}v(!0);const A=ee.filter(T=>T.isFirstEntry&&T.predictedPlayer===w).map(T=>T.userName);await Us(s.id,{manOfTheMatch:w,momWinners:A,momPublishedAt:new Date().toISOString()}),v(!1),alert(`Man of the Match: ${w}
Winners: ${A.length>0?A.join(", "):"No correct predictions"}`)};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content admin-modal",onClick:Q=>Q.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsxs("h2",{children:["Edit Match ",s.matchNumber]}),g.jsx("button",{className:"modal-close",onClick:e,children:""})]}),g.jsxs("div",{className:"admin-content",children:[g.jsxs("div",{className:"admin-match-info",children:[g.jsxs("div",{className:"admin-team",children:[S.logo&&g.jsx("img",{src:S.logo,alt:S.name}),g.jsx("span",{children:S.shortName})]}),g.jsxs("div",{className:"admin-score",children:[g.jsx("span",{children:s.scoreHome}),g.jsx("span",{className:"admin-score-sep",children:"-"}),g.jsx("span",{children:s.scoreAway})]}),g.jsxs("div",{className:"admin-team",children:[I.logo&&g.jsx("img",{src:I.logo,alt:I.name}),g.jsx("span",{children:I.shortName})]})]}),g.jsxs("div",{className:"admin-section",children:[g.jsx("label",{children:"Match Status"}),g.jsx("div",{className:"status-buttons",children:["upcoming","live","ft"].map(Q=>g.jsx("button",{className:`status-btn ${i===Q?"active":""} status-${Q}`,onClick:()=>D(Q),disabled:p,children:Q==="upcoming"?"Upcoming":Q==="live"?"Live":"Full Time"},Q))})]}),g.jsxs("div",{className:"admin-section",children:[g.jsx("label",{children:"Predictions Lock (2 PM Rule)"}),g.jsx("button",{className:`lock-btn ${s.predictionsLocked?"locked":""}`,onClick:async()=>{v(!0),await Us(s.id,{predictionsLocked:!s.predictionsLocked}),v(!1)},disabled:p,children:s.predictionsLocked?" Predictions Locked":" Predictions Open"})]}),g.jsxs("div",{className:"admin-section",children:[g.jsx("label",{children:"Add Goal"}),g.jsxs("div",{className:"goal-buttons",children:[g.jsxs("button",{className:"goal-btn home",onClick:()=>d("home"),disabled:p||s.home==="tbd",children:["+ Goal ",S.shortName]}),g.jsxs("button",{className:"goal-btn away",onClick:()=>d("away"),disabled:p||s.away==="tbd",children:["+ Goal ",I.shortName]})]})]}),g.jsxs("div",{className:"admin-section",children:[g.jsx("label",{children:"Remove Last Goal"}),g.jsxs("div",{className:"goal-buttons",children:[g.jsxs("button",{className:"remove-btn",onClick:()=>$(!0),disabled:p||!(s.goals||[]).some(Q=>Q.team===s.home),children:["- ",S.shortName]}),g.jsxs("button",{className:"remove-btn",onClick:()=>$(!1),disabled:p||!(s.goals||[]).some(Q=>Q.team===s.away),children:["- ",I.shortName]})]})]}),s.goals&&s.goals.length>0&&g.jsxs("div",{className:"admin-section",children:[g.jsx("label",{children:"Goal Log"}),g.jsx("div",{className:"goal-log",children:s.goals.map((Q,A)=>{const T=It[Q.team];return g.jsxs("div",{className:"goal-log-item",children:[g.jsxs("span",{className:"goal-time",children:[A+1,"."]}),g.jsx("span",{className:"goal-player",children:Q.player}),g.jsxs("span",{className:"goal-team",children:["(",T==null?void 0:T.shortName,")"]}),Q.assist&&g.jsxs("span",{className:"goal-assist",children:["A: ",Q.assist]})]},A)})})]}),i==="ft"&&g.jsxs("div",{className:"admin-section mom-section",children:[g.jsx("label",{children:"Man of the Match"}),re.length>0?g.jsxs(g.Fragment,{children:[g.jsxs("select",{className:"mom-select",value:w,onChange:Q=>N(Q.target.value),disabled:p||s.momPublishedAt,children:[g.jsx("option",{value:"",children:"-- Select Man of the Match --"}),re.map(Q=>{const A=It[Q.team];return g.jsxs("option",{value:Q.player,children:[Q.player," (",A==null?void 0:A.shortName,") - ",Q.goals," goal",Q.goals>1?"s":""]},`${Q.player}-${Q.team}`)}),g.jsx("option",{value:"referee_decision",children:"Referee Decision (0-0 Draw)"})]}),s.momPublishedAt?g.jsxs("div",{className:"mom-published",children:["Published: ",s.manOfTheMatch,((Me=s.momWinners)==null?void 0:Me.length)>0&&g.jsxs("span",{className:"mom-winners",children:["Winners: ",s.momWinners.join(", ")]})]}):g.jsx("button",{className:"publish-btn",onClick:de,disabled:p||!w,children:"Publish Winner"})]}):g.jsx("p",{className:"no-goals-msg",children:'No goals scored yet. Add goals or select "Referee Decision".'})]}),ee.length>0&&g.jsxs("div",{className:"admin-section",children:[g.jsxs("label",{children:["Predictions (",ee.length,") - Sorted by submission time (earliest first)"]}),g.jsx("div",{className:"predictions-log",children:ee.map((Q,A)=>{var R,V;const x=(((V=(R=Q.submittedAt)==null?void 0:R.toDate)==null?void 0:V.call(R))||new Date(Q.submittedAt)).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"});return g.jsxs("div",{className:`prediction-log-item ${Q.isFirstEntry?"":"duplicate"} ${Q.predictedPlayer===w?"winner":""}`,children:[g.jsxs("span",{className:"pred-index",children:[A+1,"."]}),g.jsx("span",{className:"pred-time",children:x}),g.jsx("span",{className:"pred-user",children:Q.userName}),g.jsx("span",{className:"pred-arrow",children:""}),g.jsx("span",{className:"pred-player",children:Q.predictedPlayer}),!Q.isFirstEntry&&g.jsx("span",{className:"pred-dup-badge",children:"DUP"}),Q.isFirstEntry&&Q.predictedPlayer===w&&g.jsx("span",{className:"pred-win-badge",children:"WIN"})]},Q.id)})})]}),g.jsxs("div",{className:"admin-section",children:[g.jsx("label",{children:"Reset Options"}),g.jsxs("div",{className:"reset-buttons",children:[g.jsx("button",{className:"reset-btn",onClick:B,disabled:p,children:"Reset Score (0-0)"}),g.jsx("button",{className:"reset-btn danger",onClick:async()=>{window.confirm("Reset ALL match data? This will clear score, goals, and MoM. Predictions will remain.")&&(v(!0),await Us(s.id,{scoreHome:0,scoreAway:0,goals:[],manOfTheMatch:null,momWinners:null,momPublishedAt:null,status:"upcoming",predictionsLocked:!1}),a("upcoming"),N(""),v(!1))},disabled:p,children:"Reset All Match Data"})]})]})]})]})}),c&&g.jsx(ST,{teamId:c==="home"?s.home:s.away,otherTeamId:c==="home"?s.away:s.home,isHome:c==="home",onSelect:(Q,A,T)=>G(Q,A,T),onClose:()=>d(null)})]})},sg=({match:s})=>{const{isAdmin:e}=Ir(),[n,i]=ve.useState(!1),a=It[s.home]||{name:"TBD",shortName:"TBD",logo:null},c=It[s.away]||{name:"TBD",shortName:"TBD",logo:null},d=()=>{switch(s.status){case"live":return"status-live";case"ft":return"status-ft";default:return"status-upcoming"}},p=()=>{switch(s.status){case"live":return"LIVE";case"ft":return"FT";default:return dT(s.time)}},v=w=>(s.goals||[]).filter(N=>N.team===w).map(N=>N.player.split(" ")[0]).join(", ");return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:`match-card ${s.status} ${s.isFinal?"final":""}`,children:[s.isFinal&&g.jsx("div",{className:"final-badge",children:"FINAL"}),g.jsxs("div",{className:"match-header",children:[g.jsxs("span",{className:"match-number",children:["Match ",s.matchNumber]}),g.jsxs("span",{className:`match-status ${d()}`,children:[s.status==="live"&&g.jsx("span",{className:"live-dot"}),p()]})]}),g.jsxs("div",{className:"match-body",children:[g.jsxs("div",{className:"team home-team",children:[g.jsx("div",{className:"team-logo-wrapper",children:a.logo?g.jsx("img",{src:a.logo,alt:a.name,className:"team-logo"}):g.jsx("div",{className:"team-logo-placeholder",children:"?"})}),g.jsx("span",{className:"team-name",children:a.shortName}),s.status!=="upcoming"&&g.jsx("span",{className:"goal-scorers",children:v(s.home)})]}),g.jsx("div",{className:"score-container",children:s.status==="upcoming"?g.jsx("span",{className:"vs-text",children:"VS"}):g.jsxs("div",{className:"score",children:[g.jsx("span",{className:"score-home",children:s.scoreHome}),g.jsx("span",{className:"score-separator",children:"-"}),g.jsx("span",{className:"score-away",children:s.scoreAway})]})}),g.jsxs("div",{className:"team away-team",children:[g.jsx("div",{className:"team-logo-wrapper",children:c.logo?g.jsx("img",{src:c.logo,alt:c.name,className:"team-logo"}):g.jsx("div",{className:"team-logo-placeholder",children:"?"})}),g.jsx("span",{className:"team-name",children:c.shortName}),s.status!=="upcoming"&&g.jsx("span",{className:"goal-scorers",children:v(s.away)})]})]}),e&&g.jsx("button",{className:"edit-button",onClick:()=>i(!0),children:"Edit"})]}),n&&g.jsx(AT,{match:s,onClose:()=>i(!1)})]})},NT=()=>{const{matches:s,loading:e}=Ir(),n=ve.useMemo(()=>{const a={};return s.forEach(c=>{const d=c.date;a[d]||(a[d]=[]),a[d].push(c)}),Object.entries(a).sort(([c],[d])=>new Date(c)-new Date(d)).map(([c,d])=>({date:c,dateLabel:ev(c),matches:d.sort((p,v)=>p.time.localeCompare(v.time))}))},[s]),i=s.filter(a=>a.status==="live");return e?g.jsx("div",{className:"tab-content",children:g.jsx("div",{className:"loading-container",style:{minHeight:"200px"},children:g.jsx("div",{className:"loading-spinner"})})}):g.jsxs("div",{className:"tab-content",children:[i.length>0&&g.jsxs("section",{className:"live-section animate-fade-in",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h2",{className:"section-title",children:"PLAYING NOW"}),g.jsxs("span",{className:"section-badge live-badge",children:[i.length," LIVE"]})]}),i.map(a=>g.jsx(sg,{match:a},a.id))]}),n.map(a=>g.jsxs("section",{children:[g.jsx("div",{className:"date-divider",children:g.jsx("span",{className:"date-label",children:a.dateLabel})}),a.matches.map(c=>g.jsx(sg,{match:c},c.id))]},a.date)),s.length===0&&g.jsxs("div",{className:"empty-state",children:[g.jsx("div",{className:"empty-state-icon",children:""}),g.jsx("h3",{children:"No Matches Yet"}),g.jsx("p",{children:"Check back when the tournament begins!"})]})]})},xT=()=>{const{calculateTable:s,calculateTopScorers:e,matches:n,predictions:i}=Ir(),a=ve.useMemo(()=>s(),[s]),c=ve.useMemo(()=>e(),[e]),d=n.filter(S=>S.status==="ft"&&!S.isFinal).length,p=ve.useMemo(()=>{const S={};return n.filter(I=>I.status==="ft").forEach(I=>{(I.goals||[]).forEach(D=>{if(D.assist){const B=D.assist;S[B]||(S[B]={player:D.assist,assists:0}),S[B].assists++}})}),Object.values(S).sort((I,D)=>D.assists-I.assists).slice(0,5)},[n]),v=ve.useMemo(()=>{const S={};return Object.keys(It).forEach(I=>{S[I]=0}),n.filter(I=>I.status==="ft").forEach(I=>{I.scoreAway===0&&S[I.home]!==void 0&&S[I.home]++,I.scoreHome===0&&S[I.away]!==void 0&&S[I.away]++}),Object.entries(S).map(([I,D])=>({teamId:I,count:D})).sort((I,D)=>D.count-I.count)},[n]),w=1e3,N=ve.useMemo(()=>{const S={};return n.filter(I=>{var D;return I.momPublishedAt&&((D=I.momWinners)==null?void 0:D.length)>0}).forEach(I=>{const D=Math.floor(w/I.momWinners.length);I.momWinners.forEach(B=>{S[B]||(S[B]={name:B,coins:0,wins:0}),S[B].coins+=D,S[B].wins++})}),Object.values(S).sort((I,D)=>D.coins-I.coins).slice(0,10)},[n]);return g.jsxs("div",{className:"tab-content",children:[g.jsxs("section",{className:"table-section animate-slide-up",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h2",{className:"section-title",children:"STANDINGS"}),g.jsxs("span",{className:"section-badge",children:[d," PLAYED"]})]}),g.jsxs("div",{className:"league-table",children:[g.jsxs("div",{className:"table-header",children:[g.jsx("span",{className:"col-pos",children:"#"}),g.jsx("span",{className:"col-team",children:"Team"}),g.jsx("span",{className:"col-stat",children:"P"}),g.jsx("span",{className:"col-stat col-wdl",children:"W"}),g.jsx("span",{className:"col-stat col-wdl",children:"D"}),g.jsx("span",{className:"col-stat col-wdl",children:"L"}),g.jsx("span",{className:"col-stat",children:"GD"}),g.jsx("span",{className:"col-pts",children:"PTS"})]}),a.map((S,I)=>{const D=It[S.teamId];return D?g.jsxs("div",{className:`table-row ${I<2?"qualified":""}`,style:{animationDelay:`${I*.05}s`},children:[g.jsx("span",{className:"col-pos",children:g.jsx("span",{className:`position ${I<2?"top":""}`,children:I+1})}),g.jsxs("span",{className:"col-team",children:[g.jsx("img",{src:D.logo,alt:D.name,className:"table-team-logo"}),g.jsx("span",{className:"table-team-name",children:D.name})]}),g.jsx("span",{className:"col-stat",children:S.played}),g.jsx("span",{className:"col-stat col-wdl",children:S.won}),g.jsx("span",{className:"col-stat col-wdl",children:S.drawn}),g.jsx("span",{className:"col-stat col-wdl",children:S.lost}),g.jsxs("span",{className:"col-stat",children:[S.goalDifference>0?"+":"",S.goalDifference]}),g.jsx("span",{className:"col-pts",children:S.points})]},S.teamId):null})]}),g.jsx("div",{className:"table-legend",children:g.jsxs("span",{className:"legend-item qualified-legend",children:[g.jsx("span",{className:"legend-dot"}),"Qualifies for Final"]})})]}),g.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.2s"},children:[g.jsx("div",{className:"section-header",children:g.jsx("h2",{className:"section-title",children:"GOLDEN BOOT"})}),c.length>0?g.jsx("div",{className:"scorers-list",children:c.map((S,I)=>{const D=It[S.team];return g.jsxs("div",{className:`scorer-row ${I===0?"leader":""}`,style:{animationDelay:`${(I+4)*.05}s`},children:[g.jsx("span",{className:"scorer-rank",children:I===0?"":I===1?"":I===2?"":I+1}),g.jsxs("div",{className:"scorer-info",children:[g.jsx("span",{className:"scorer-name",children:S.player}),g.jsx("span",{className:"scorer-team",children:(D==null?void 0:D.name)||S.team})]}),g.jsx("span",{className:"scorer-goals",children:S.goals})]},`${S.player}-${S.team}`)})}):g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:"No goals scored yet"})})]}),p.length>0&&g.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.25s"},children:[g.jsx("div",{className:"section-header",children:g.jsx("h2",{className:"section-title",children:"TOP ASSISTS"})}),g.jsx("div",{className:"scorers-list",children:p.map((S,I)=>g.jsxs("div",{className:`scorer-row ${I===0?"leader assist-leader":""}`,style:{animationDelay:`${(I+4)*.05}s`},children:[g.jsx("span",{className:"scorer-rank",children:I===0?"":I+1}),g.jsx("div",{className:"scorer-info",children:g.jsx("span",{className:"scorer-name",children:S.player})}),g.jsx("span",{className:"scorer-goals assist-count",children:S.assists})]},S.player))})]}),g.jsxs("section",{className:"scorers-section animate-slide-up",style:{animationDelay:"0.3s"},children:[g.jsx("div",{className:"section-header",children:g.jsx("h2",{className:"section-title",children:"CLEAN SHEETS"})}),g.jsx("div",{className:"scorers-list",children:v.map((S,I)=>{const D=It[S.teamId];return D?g.jsxs("div",{className:`scorer-row ${I===0&&S.count>0?"leader clean-leader":""}`,style:{animationDelay:`${(I+4)*.05}s`},children:[g.jsx("span",{className:"scorer-rank",children:I===0&&S.count>0?"":I+1}),g.jsxs("div",{className:"scorer-info",children:[g.jsx("img",{src:D.logo,alt:D.name,className:"table-team-logo"}),g.jsx("span",{className:"scorer-name",children:D.name})]}),g.jsx("span",{className:"scorer-goals",children:S.count})]},S.teamId):null})})]}),g.jsxs("section",{className:"stats-section animate-slide-up",style:{animationDelay:"0.35s"},children:[g.jsx("div",{className:"section-header",children:g.jsx("h2",{className:"section-title",children:"TOURNAMENT STATS"})}),g.jsxs("div",{className:"stats-grid",children:[g.jsxs("div",{className:"stat-card",children:[g.jsx("span",{className:"stat-value",children:n.filter(S=>S.status==="ft").reduce((S,I)=>S+(I.scoreHome||0)+(I.scoreAway||0),0)}),g.jsx("span",{className:"stat-label",children:"Total Goals"})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("span",{className:"stat-value",children:d}),g.jsx("span",{className:"stat-label",children:"Matches Played"})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("span",{className:"stat-value",children:d>0?(n.filter(S=>S.status==="ft").reduce((S,I)=>S+(I.scoreHome||0)+(I.scoreAway||0),0)/d).toFixed(1):"0.0"}),g.jsx("span",{className:"stat-label",children:"Goals/Match"})]})]})]}),N.length>0&&g.jsxs("section",{className:"scorers-section poll-leaderboard animate-slide-up",style:{animationDelay:"0.4s"},children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h2",{className:"section-title",children:"POLL LEADERBOARD"}),g.jsx("span",{className:"section-badge coins-badge",children:"COINS"})]}),g.jsx("div",{className:"scorers-list",children:N.map((S,I)=>g.jsxs("div",{className:`scorer-row ${I===0?"leader coins-leader":""}`,style:{animationDelay:`${(I+4)*.05}s`},children:[g.jsx("span",{className:"scorer-rank",children:I===0?"":I===1?"":I===2?"":I+1}),g.jsxs("div",{className:"scorer-info",children:[g.jsx("span",{className:"scorer-name",children:S.name}),g.jsxs("span",{className:"scorer-team",children:[S.wins," win",S.wins!==1?"s":""]})]}),g.jsx("span",{className:"scorer-goals coins-value",children:S.coins})]},S.name))})]})]})},CT=()=>{const{getUpcomingMatches:s,predictions:e,matches:n,isAdmin:i}=Ir(),[a,c]=ve.useState(""),[d,p]=ve.useState(""),[v,w]=ve.useState(""),[N,S]=ve.useState(!1),[I,D]=ve.useState(!1),[B,G]=ve.useState(""),$=ve.useMemo(()=>s(),[s]),Z=ve.useMemo(()=>{if(!d)return[];const A=$.find(V=>V.id===d);if(!A)return[];const T=It[A.home],x=It[A.away],R=[];return T&&T.players.forEach(V=>{R.push({name:V,team:A.home,teamName:T.name})}),x&&x.players.forEach(V=>{R.push({name:V,team:A.away,teamName:x.name})}),R},[d,$]),ee=ve.useMemo(()=>{if(!d)return!1;const A=n.find(T=>T.id===d);return(A==null?void 0:A.predictionsLocked)===!0},[d,n]),re=async A=>{if(A.preventDefault(),G(""),!a.trim()){G("Please enter your Scapia email");return}if(!a.trim().endsWith("@scapia.cards")){G("Please use your Scapia email (@scapia.cards)");return}if(!d){G("Please select a match");return}if(!v){G("Please select a player");return}const T=n.find(x=>x.id===d);if(T!=null&&T.predictionsLocked){G("Predictions are locked for this match (2 PM cutoff)");return}S(!0);try{const x=Z.find(V=>V.name===v),R=$.find(V=>V.id===d);await yT({userName:a.trim(),matchId:d,matchNumber:R==null?void 0:R.matchNumber,predictedPlayer:v,predictedTeam:x==null?void 0:x.team,predictedTeamName:x==null?void 0:x.teamName}),D(!0),c(""),p(""),w(""),setTimeout(()=>D(!1),5e3)}catch{G("Failed to submit prediction. Please try again.")}finally{S(!1)}},de=A=>{const T=n.find(x=>x.id===A);return T&&(T.status==="live"||T.status==="ft")},Me=1e3,Q=ve.useMemo(()=>n.filter(A=>A.momPublishedAt).sort((A,T)=>A.matchNumber-T.matchNumber).map(A=>{var R,V;const T=A.momWinners||[],x=T.length>0?Math.floor(Me/T.length):0;return{matchNumber:A.matchNumber,homeTeam:((R=It[A.home])==null?void 0:R.shortName)||A.home,awayTeam:((V=It[A.away])==null?void 0:V.shortName)||A.away,score:`${A.scoreHome}-${A.scoreAway}`,manOfTheMatch:A.manOfTheMatch,winners:T,coinsPerWinner:x}}),[n]);return g.jsxs("div",{className:"tab-content",children:[g.jsx("section",{className:"rules-section animate-slide-up",children:g.jsxs("div",{className:"rules-card",children:[g.jsxs("div",{className:"rules-header",children:[g.jsx("span",{className:"rules-icon",children:""}),g.jsx("h3",{children:"Man of the Match Prediction"})]}),g.jsxs("div",{className:"rules-structured",children:[g.jsxs("div",{className:"rule-group",children:[g.jsx("h4",{className:"rule-group-title",children:"How to Win"}),g.jsxs("ul",{className:"rules-list",children:[g.jsxs("li",{children:["Predict who will score the ",g.jsx("strong",{children:"most goals"})," in the match"]}),g.jsxs("li",{children:["Prize pool: ",g.jsx("strong",{children:"1000 coins"})," per match"]}),g.jsx("li",{children:"Multiple winners split the prize equally"})]})]}),g.jsxs("div",{className:"rule-group",children:[g.jsx("h4",{className:"rule-group-title",children:"Tie-breakers"}),g.jsxs("ul",{className:"rules-list",children:[g.jsxs("li",{children:["If tied on goals, player from ",g.jsx("strong",{children:"winning team"})," wins"]}),g.jsxs("li",{children:["If match is a draw, ",g.jsx("strong",{children:"referee decides"})," MoM"]})]})]}),g.jsxs("div",{className:"rule-group",children:[g.jsx("h4",{className:"rule-group-title",children:"Terms & Conditions"}),g.jsxs("ul",{className:"rules-list",children:[g.jsxs("li",{children:["Only your ",g.jsx("strong",{children:"first entry"})," per match counts"]}),g.jsxs("li",{children:["Predictions lock at ",g.jsx("strong",{children:"2:00 PM"})," on matchday"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Players & managers"})," are not allowed to participate"]})]})]})]})]})}),Q.length>0&&g.jsxs("section",{className:"winners-section animate-slide-up",style:{animationDelay:"0.05s"},children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h2",{className:"section-title",children:"WINNERS HALL OF FAME"}),g.jsx("span",{className:"section-badge trophy-badge",children:""})]}),g.jsx("div",{className:"winners-list",children:Q.map(A=>g.jsxs("div",{className:"winner-card",children:[g.jsxs("div",{className:"winner-match-info",children:[g.jsxs("span",{className:"winner-match-num",children:["M",A.matchNumber]}),g.jsxs("span",{className:"winner-teams",children:[A.homeTeam," vs ",A.awayTeam]}),g.jsx("span",{className:"winner-score",children:A.score})]}),g.jsxs("div",{className:"winner-details",children:[g.jsxs("div",{className:"mom-player",children:[g.jsx("span",{className:"mom-label",children:"MoM:"}),g.jsx("span",{className:"mom-name",children:A.manOfTheMatch})]}),A.winners.length>0?g.jsxs("div",{className:"winner-info",children:[g.jsx("div",{className:"winner-names",children:A.winners.map((T,x)=>g.jsx("span",{className:"winner-badge",children:T},x))}),g.jsxs("span",{className:"coins-earned",children:[A.coinsPerWinner," coins each"]})]}):g.jsx("span",{className:"no-winners",children:"No correct predictions"})]})]},A.matchNumber))})]}),g.jsxs("section",{className:"poll-section animate-slide-up",style:{animationDelay:"0.1s"},children:[g.jsx("div",{className:"section-header",children:g.jsx("h2",{className:"section-title",children:"MAKE YOUR PREDICTION"})}),I&&g.jsxs("div",{className:"success-message animate-scale-in",children:[g.jsx("span",{className:"success-icon",children:""}),"Prediction submitted successfully!"]}),B&&g.jsx("div",{className:"error-message animate-scale-in",children:B}),g.jsxs("form",{onSubmit:re,className:"poll-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"userName",children:"Scapia Email"}),g.jsx("input",{type:"email",id:"userName",value:a,onChange:A=>c(A.target.value.toLowerCase()),placeholder:"yourname@scapia.cards",maxLength:50})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"matchSelect",children:"Select Match"}),g.jsxs("select",{id:"matchSelect",value:d,onChange:A=>{p(A.target.value),w("")},children:[g.jsx("option",{value:"",children:"-- Choose a match --"}),$.map(A=>{const T=It[A.home],x=It[A.away],R=A.predictionsLocked;return g.jsxs("option",{value:A.id,disabled:R,children:["M",A.matchNumber,": ",T==null?void 0:T.shortName," vs ",x==null?void 0:x.shortName," (",ev(A.date),")",R?" [LOCKED]":""]},A.id)})]})]}),d&&g.jsxs("div",{className:"form-group animate-fade-in",children:[g.jsx("label",{htmlFor:"playerSelect",children:"Man of the Match"}),g.jsxs("select",{id:"playerSelect",value:v,onChange:A=>w(A.target.value),children:[g.jsx("option",{value:"",children:"-- Choose a player --"}),Z.map(A=>g.jsxs("option",{value:A.name,children:[A.name," (",A.teamName,")"]},`${A.name}-${A.team}`))]})]}),g.jsx("button",{type:"submit",className:"submit-button",disabled:N||!a||!d||!v||ee,children:N?g.jsxs("span",{className:"button-loading",children:[g.jsx("span",{className:"loading-spinner small"}),"Submitting..."]}):"Submit Prediction"})]})]}),e.length>0&&g.jsxs("section",{className:"recent-section animate-slide-up",style:{animationDelay:"0.2s"},children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h2",{className:"section-title",children:"RECENT PREDICTIONS"}),g.jsx("span",{className:"section-badge",children:e.length})]}),g.jsx("div",{className:"predictions-list",children:e.slice(0,10).map(A=>{var T;return g.jsxs("div",{className:"prediction-item",children:[g.jsxs("div",{className:"prediction-user",children:[g.jsx("span",{className:"user-avatar",children:(T=A.userName)==null?void 0:T.charAt(0).toUpperCase()}),g.jsx("span",{className:"user-name",children:A.userName})]}),g.jsxs("div",{className:"prediction-detail",children:[de(A.matchId)?g.jsx("span",{className:"predicted-player",children:A.predictedPlayer}):g.jsx("span",{className:"predicted-player hidden-vote",children:"Hidden"}),g.jsxs("span",{className:"predicted-match",children:["Match ",A.matchNumber]})]})]},A.id)})})]}),$.length===0&&g.jsxs("div",{className:"empty-state",children:[g.jsx("div",{className:"empty-state-icon",children:""}),g.jsx("h3",{children:"No Upcoming Matches"}),g.jsx("p",{children:"Predictions open before each match!"})]}),i&&e.length>0&&g.jsxs("section",{className:"admin-poll-section animate-slide-up",style:{animationDelay:"0.3s"},children:[g.jsx("div",{className:"section-header",children:g.jsx("h2",{className:"section-title",children:"ADMIN CONTROLS"})}),g.jsxs("button",{className:"delete-all-btn",onClick:async()=>{window.confirm(`Delete all ${e.length} predictions? This cannot be undone.`)&&await _T()},children:["Delete All Predictions (",e.length,")"]})]})]})},PT=()=>g.jsxs("div",{className:"tab-content",children:[g.jsx("section",{className:"rules-page-section animate-slide-up",children:g.jsxs("div",{className:"rules-page-card",children:[g.jsxs("div",{className:"rules-page-header",children:[g.jsx("span",{className:"rules-page-icon",children:""}),g.jsx("h3",{children:"Tournament Format"})]}),g.jsxs("div",{className:"rules-page-content",children:[g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-number",children:"1"}),g.jsxs("div",{className:"rule-text",children:[g.jsx("strong",{children:"Group Stage:"})," All 4 teams play each other (6 matches per team)"]})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-number",children:"2"}),g.jsxs("div",{className:"rule-text",children:[g.jsx("strong",{children:"Final:"})," Top 2 teams qualify for the final match"]})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-number",children:"3"}),g.jsxs("div",{className:"rule-text",children:[g.jsx("strong",{children:"Match Duration:"})," As per tournament regulations"]})]})]})]})}),g.jsx("section",{className:"rules-page-section animate-slide-up",style:{animationDelay:"0.05s"},children:g.jsxs("div",{className:"rules-page-card",children:[g.jsxs("div",{className:"rules-page-header",children:[g.jsx("span",{className:"rules-page-icon",children:""}),g.jsx("h3",{children:"Points System"})]}),g.jsxs("div",{className:"points-grid",children:[g.jsxs("div",{className:"points-item",children:[g.jsx("span",{className:"points-value",children:"3"}),g.jsx("span",{className:"points-label",children:"Win"})]}),g.jsxs("div",{className:"points-item",children:[g.jsx("span",{className:"points-value",children:"1"}),g.jsx("span",{className:"points-label",children:"Draw"})]}),g.jsxs("div",{className:"points-item",children:[g.jsx("span",{className:"points-value",children:"0"}),g.jsx("span",{className:"points-label",children:"Loss"})]})]}),g.jsx("div",{className:"rules-page-content",children:g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-number",children:"TB"}),g.jsxs("div",{className:"rule-text",children:[g.jsx("strong",{children:"Tie-breaker order:"})," Points  Goal Difference  Goals Scored"]})]})})]})}),g.jsx("section",{className:"rules-page-section animate-slide-up",style:{animationDelay:"0.1s"},children:g.jsxs("div",{className:"rules-page-card highlight-card",children:[g.jsxs("div",{className:"rules-page-header",children:[g.jsx("span",{className:"rules-page-icon",children:""}),g.jsx("h3",{children:"Man of the Match Prediction"})]}),g.jsxs("div",{className:"rules-page-content",children:[g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-number",children:"1"}),g.jsxs("div",{className:"rule-text",children:["Predict who will score the ",g.jsx("strong",{children:"most goals"})," in each match"]})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-number",children:"2"}),g.jsxs("div",{className:"rule-text",children:["Prize pool: ",g.jsx("strong",{children:"1000 coins"})," per match"]})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-number",children:"3"}),g.jsx("div",{className:"rule-text",children:"Multiple winners share the prize equally"})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-number",children:"4"}),g.jsxs("div",{className:"rule-text",children:["Tie-breaker: Player from ",g.jsx("strong",{children:"winning team"})," wins"]})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-number",children:"5"}),g.jsxs("div",{className:"rule-text",children:["If match is a draw, ",g.jsx("strong",{children:"referee decides"})," Man of the Match"]})]})]})]})}),g.jsx("section",{className:"rules-page-section animate-slide-up",style:{animationDelay:"0.15s"},children:g.jsxs("div",{className:"rules-page-card terms-card",children:[g.jsxs("div",{className:"rules-page-header",children:[g.jsx("span",{className:"rules-page-icon",children:""}),g.jsx("h3",{children:"Terms & Conditions"})]}),g.jsxs("div",{className:"rules-page-content",children:[g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-bullet"}),g.jsxs("div",{className:"rule-text",children:["Only your ",g.jsx("strong",{children:"first entry"})," per match will be considered"]})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-bullet"}),g.jsxs("div",{className:"rule-text",children:["Predictions lock at ",g.jsx("strong",{children:"2:00 PM"})," on matchday (admin controlled)"]})]}),g.jsxs("div",{className:"rule-item warning",children:[g.jsx("span",{className:"rule-bullet warning"}),g.jsxs("div",{className:"rule-text",children:[g.jsx("strong",{children:"Players & managers"})," are NOT allowed to participate in polls"]})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-bullet"}),g.jsx("div",{className:"rule-text",children:"Winners are announced after Man of the Match is confirmed"})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-bullet"}),g.jsx("div",{className:"rule-text",children:"Admin decision on all matters is final"})]})]})]})}),g.jsx("section",{className:"rules-page-section animate-slide-up",style:{animationDelay:"0.2s"},children:g.jsxs("div",{className:"rules-page-card",children:[g.jsxs("div",{className:"rules-page-header",children:[g.jsx("span",{className:"rules-page-icon",children:""}),g.jsx("h3",{children:"Fair Play"})]}),g.jsxs("div",{className:"rules-page-content",children:[g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-bullet"}),g.jsx("div",{className:"rule-text",children:"Respect all players, referees, and spectators"})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-bullet"}),g.jsx("div",{className:"rule-text",children:"No abusive language or unsportsmanlike conduct"})]}),g.jsxs("div",{className:"rule-item",children:[g.jsx("span",{className:"rule-bullet"}),g.jsx("div",{className:"rule-text",children:"Play in the spirit of the game"})]})]})]})})]}),RT=()=>{const{activeTab:s,loading:e}=Ir();return e?g.jsxs("div",{className:"loading-container",children:[g.jsx("div",{className:"loading-spinner"}),g.jsx("span",{className:"loading-text",children:"LOADING SCAPIA OFFSIDE..."})]}):g.jsxs("div",{className:"app",children:[g.jsx(TT,{}),g.jsxs("main",{className:"main-content",children:[s==="matches"&&g.jsx(NT,{}),s==="table"&&g.jsx(xT,{}),s==="polls"&&g.jsx(CT,{}),s==="rules"&&g.jsx(PT,{})]}),g.jsx(IT,{})]})},kT=()=>g.jsx(wT,{children:g.jsx(RT,{})});m_.createRoot(document.getElementById("root")).render(g.jsx(ve.StrictMode,{children:g.jsx(kT,{})}));
